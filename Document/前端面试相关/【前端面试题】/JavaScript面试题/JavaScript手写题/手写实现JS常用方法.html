<!DOCTYPE html>
<html lang="zh" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>æ‰‹å†™å®ç° JS æ–¹æ³• | ç‰§æ¶¯å‰ç«¯é¢è¯•é¢˜æ•´åˆ</title>
    <meta name="description" content="æ”¶é›†æ•´åˆå‰ç«¯é¢è¯•é¢˜ï¼Œå‰ç«¯é¢è¯•é¢˜å¤§å…¨">
    <meta name="generator" content="VitePress v1.1.4">
    <link rel="preload stylesheet" href="/FrontEndInterviewQuestion/assets/style.BDTsuOgn.css" as="style">
    
    <script type="module" src="/FrontEndInterviewQuestion/assets/app.C-QGR9Kp.js"></script>
    <link rel="preload" href="/FrontEndInterviewQuestion/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/FrontEndInterviewQuestion/assets/chunks/theme.DKhmjzQT.js">
    <link rel="modulepreload" href="/FrontEndInterviewQuestion/assets/chunks/framework.DVTrgelf.js">
    <link rel="modulepreload" href="/FrontEndInterviewQuestion/assets/Document_å‰ç«¯é¢è¯•ç›¸å…³_ã€å‰ç«¯é¢è¯•é¢˜ã€‘_JavaScripté¢è¯•é¢˜_JavaScriptæ‰‹å†™é¢˜_æ‰‹å†™å®ç°JSå¸¸ç”¨æ–¹æ³•.md.BvEXRzqn.lean.js">
    <link rel="icon" href="https://avatars.githubusercontent.com/u/48587992?v=4">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-2fdd469f><!--[--><!--]--><!--[--><span tabindex="-1" data-v-9bbe40e8></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-9bbe40e8> Skip to content </a><!--]--><!----><header class="VPNav" data-v-2fdd469f data-v-2981abac><div class="VPNavBar has-sidebar top" data-v-2981abac data-v-e8abc852><div class="wrapper" data-v-e8abc852><div class="container" data-v-e8abc852><div class="title" data-v-e8abc852><div class="VPNavBarTitle has-sidebar" data-v-e8abc852 data-v-0a1dc046><a class="title" href="/FrontEndInterviewQuestion/" data-v-0a1dc046><!--[--><!--]--><!--[--><img class="VPImage logo" src="/FrontEndInterviewQuestion/img/buding.svg" alt data-v-d4169a1c><!--]--><span data-v-0a1dc046>ç‰§æ¶¯å‰ç«¯é¢è¯•é¢˜</span><!--[--><!--]--></a></div></div><div class="content" data-v-e8abc852><div class="content-body" data-v-e8abc852><!--[--><!--]--><div class="VPNavBarSearch search" data-v-e8abc852><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="æœç´¢æ–‡æ¡£"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">æœç´¢æ–‡æ¡£</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-e8abc852 data-v-e5bdfb67><span id="main-nav-aria-label" class="visually-hidden" data-v-e5bdfb67>Main Navigation</span><!--[--><!--[--><span class="VPLink VPNavBarMenuLink" tabindex="0" data-v-e5bdfb67 data-v-4f62c62c><!--[--><span data-v-4f62c62c>ğŸŒæˆ‘çš„ä¸ªäººç½‘ç«™</span><!--]--></span><!--]--><!--[--><span class="VPLink VPNavBarMenuLink" tabindex="0" data-v-e5bdfb67 data-v-4f62c62c><!--[--><span data-v-4f62c62c>âœ¨æ˜é‡‘æ–‡ç« </span><!--]--></span><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-e8abc852 data-v-dba25ce5><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-dba25ce5 data-v-1a5707b1 data-v-bcb971ab><span class="check" data-v-bcb971ab><span class="icon" data-v-bcb971ab><!--[--><span class="vpi-sun sun" data-v-1a5707b1></span><span class="vpi-moon moon" data-v-1a5707b1></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-e8abc852 data-v-1fe946d0 data-v-49c0bd2e><!--[--><a class="VPSocialLink no-icon" href="https://github.com/muyaCode/FrontEndInterviewQuestion" aria-label="github" target="_blank" rel="noopener" data-v-49c0bd2e data-v-78639b0a><span class="vpi-social-github" /></a><a class="VPSocialLink no-icon" href="https://gitee.com/muyaCode/FrontEndInterviewQuestion" aria-label target="_blank" rel="noopener" data-v-49c0bd2e data-v-78639b0a><svg t="1690871772610" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="987" width="256" height="256">
        <path d="M512 1024C229.222 1024 0 794.778 0 512S229.222 0 512 0s512 229.222 512 512-229.222 512-512 512z m259.149-568.883h-290.74a25.293 25.293 0 0 0-25.292 25.293l-0.026 63.206c0 13.952 11.315 25.293 25.267 25.293h177.024c13.978 0 25.293 11.315 25.293 25.267v12.646a75.853 75.853 0 0 1-75.853 75.853h-240.23a25.293 25.293 0 0 1-25.267-25.293V417.203a75.853 75.853 0 0 1 75.827-75.853h353.946a25.293 25.293 0 0 0 25.267-25.292l0.077-63.207a25.293 25.293 0 0 0-25.268-25.293H417.152a189.62 189.62 0 0 0-189.62 189.645V771.15c0 13.977 11.316 25.293 25.294 25.293h372.94a170.65 170.65 0 0 0 170.65-170.65V480.384a25.293 25.293 0 0 0-25.293-25.267z" fill="#C71D23" p-id="988"></path>
      </svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-e8abc852 data-v-79512190 data-v-52b91f0c><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-52b91f0c><span class="vpi-more-horizontal icon" data-v-52b91f0c></span></button><div class="menu" data-v-52b91f0c><div class="VPMenu" data-v-52b91f0c data-v-e98d092d><!----><!--[--><!--[--><!----><div class="group" data-v-79512190><div class="item appearance" data-v-79512190><p class="label" data-v-79512190>Appearance</p><div class="appearance-action" data-v-79512190><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-79512190 data-v-1a5707b1 data-v-bcb971ab><span class="check" data-v-bcb971ab><span class="icon" data-v-bcb971ab><!--[--><span class="vpi-sun sun" data-v-1a5707b1></span><span class="vpi-moon moon" data-v-1a5707b1></span><!--]--></span></span></button></div></div></div><div class="group" data-v-79512190><div class="item social-links" data-v-79512190><div class="VPSocialLinks social-links-list" data-v-79512190 data-v-49c0bd2e><!--[--><a class="VPSocialLink no-icon" href="https://github.com/muyaCode/FrontEndInterviewQuestion" aria-label="github" target="_blank" rel="noopener" data-v-49c0bd2e data-v-78639b0a><span class="vpi-social-github" /></a><a class="VPSocialLink no-icon" href="https://gitee.com/muyaCode/FrontEndInterviewQuestion" aria-label target="_blank" rel="noopener" data-v-49c0bd2e data-v-78639b0a><svg t="1690871772610" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="987" width="256" height="256">
        <path d="M512 1024C229.222 1024 0 794.778 0 512S229.222 0 512 0s512 229.222 512 512-229.222 512-512 512z m259.149-568.883h-290.74a25.293 25.293 0 0 0-25.292 25.293l-0.026 63.206c0 13.952 11.315 25.293 25.267 25.293h177.024c13.978 0 25.293 11.315 25.293 25.267v12.646a75.853 75.853 0 0 1-75.853 75.853h-240.23a25.293 25.293 0 0 1-25.267-25.293V417.203a75.853 75.853 0 0 1 75.827-75.853h353.946a25.293 25.293 0 0 0 25.267-25.292l0.077-63.207a25.293 25.293 0 0 0-25.268-25.293H417.152a189.62 189.62 0 0 0-189.62 189.645V771.15c0 13.977 11.316 25.293 25.294 25.293h372.94a170.65 170.65 0 0 0 170.65-170.65V480.384a25.293 25.293 0 0 0-25.293-25.267z" fill="#C71D23" p-id="988"></path>
      </svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-e8abc852 data-v-6d92cf19><span class="container" data-v-6d92cf19><span class="top" data-v-6d92cf19></span><span class="middle" data-v-6d92cf19></span><span class="bottom" data-v-6d92cf19></span></span></button></div></div></div></div><div class="divider" data-v-e8abc852><div class="divider-line" data-v-e8abc852></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-2fdd469f data-v-18c7a066><div class="container" data-v-18c7a066><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-18c7a066><span class="vpi-align-left menu-icon" data-v-18c7a066></span><span class="menu-text" data-v-18c7a066>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-18c7a066 data-v-636ac860><button data-v-636ac860>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-2fdd469f data-v-4e63ba98><div class="curtain" data-v-4e63ba98></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-4e63ba98><span class="visually-hidden" id="sidebar-aria-label" data-v-4e63ba98> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-4e63ba98><section class="VPSidebarItem level-0" data-v-4e63ba98 data-v-a0363abd><!----><div class="items" data-v-a0363abd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-a0363abd data-v-a0363abd><div class="item" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><a class="VPLink link link" href="/FrontEndInterviewQuestion/order/markdown%E5%9B%BE%E6%A0%87" data-v-a0363abd><!--[--><p class="text" data-v-a0363abd>markdownå›¾æ ‡</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-4e63ba98><section class="VPSidebarItem level-0 collapsible has-active" data-v-4e63ba98 data-v-a0363abd><div class="item" role="button" tabindex="0" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><h2 class="text" data-v-a0363abd>ğŸ˜‡å‰ç«¯é¢è¯•ç›¸å…³</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-a0363abd><span class="vpi-chevron-right caret-icon" data-v-a0363abd></span></div></div><div class="items" data-v-a0363abd><!--[--><section class="VPSidebarItem level-1 collapsible collapsed" data-v-a0363abd data-v-a0363abd><div class="item" role="button" tabindex="0" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><h3 class="text" data-v-a0363abd>ã€é¢è¯•å‡†å¤‡å’Œå¦‚ä½•é¢è¯•ã€‘</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-a0363abd><span class="vpi-chevron-right caret-icon" data-v-a0363abd></span></div></div><div class="items" data-v-a0363abd><!--[--><div class="VPSidebarItem level-2 is-link" data-v-a0363abd data-v-a0363abd><div class="item" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><a class="VPLink link link" href="/FrontEndInterviewQuestion/Document/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E7%9B%B8%E5%85%B3/%E3%80%90%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87%E5%92%8C%E5%A6%82%E4%BD%95%E9%9D%A2%E8%AF%95%E3%80%91/%E8%81%8C%E4%B8%9A%E8%A7%84%E5%88%92%E5%92%8C%E9%9D%A2%E8%AF%95%E6%8A%80%E5%B7%A7" data-v-a0363abd><!--[--><p class="text" data-v-a0363abd>èŒä¸šè§„åˆ’å’Œé¢è¯•æŠ€å·§</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-a0363abd data-v-a0363abd><div class="item" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><a class="VPLink link link" href="/FrontEndInterviewQuestion/Document/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E7%9B%B8%E5%85%B3/%E3%80%90%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87%E5%92%8C%E5%A6%82%E4%BD%95%E9%9D%A2%E8%AF%95%E3%80%91/%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87%E5%92%8C%E6%8A%80%E5%B7%A7" data-v-a0363abd><!--[--><p class="text" data-v-a0363abd>é¢è¯•å‡†å¤‡å’ŒæŠ€å·§</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-a0363abd data-v-a0363abd><div class="item" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><a class="VPLink link link" href="/FrontEndInterviewQuestion/Document/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E7%9B%B8%E5%85%B3/%E3%80%90%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87%E5%92%8C%E5%A6%82%E4%BD%95%E9%9D%A2%E8%AF%95%E3%80%91/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%B8%88%E7%AE%80%E5%8E%86%E6%80%8E%E4%B9%88%E5%86%99" data-v-a0363abd><!--[--><p class="text" data-v-a0363abd>å‰ç«¯å·¥ç¨‹å¸ˆç®€å†æ€ä¹ˆå†™</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-a0363abd data-v-a0363abd><div class="item" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><a class="VPLink link link" href="/FrontEndInterviewQuestion/Document/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E7%9B%B8%E5%85%B3/%E3%80%90%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87%E5%92%8C%E5%A6%82%E4%BD%95%E9%9D%A2%E8%AF%95%E3%80%91/%E9%9D%A2%E8%AF%95%E6%B5%81%E7%A8%8B%E5%92%8C%E9%9D%A2%E8%AF%95%E7%BB%8F%E9%AA%8C" data-v-a0363abd><!--[--><p class="text" data-v-a0363abd>é¢è¯•æµç¨‹å’Œé¢è¯•ç»éªŒ</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-a0363abd data-v-a0363abd><div class="item" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><a class="VPLink link link" href="/FrontEndInterviewQuestion/Document/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E7%9B%B8%E5%85%B3/%E3%80%90%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87%E5%92%8C%E5%A6%82%E4%BD%95%E9%9D%A2%E8%AF%95%E3%80%91/%E9%9D%A2%E8%AF%95%E5%88%B7%E9%A2%98%E7%BD%91%E7%AB%99" data-v-a0363abd><!--[--><p class="text" data-v-a0363abd>é¢è¯•åˆ·é¢˜ç½‘ç«™</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-a0363abd data-v-a0363abd><div class="item" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><a class="VPLink link link" href="/FrontEndInterviewQuestion/Document/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E7%9B%B8%E5%85%B3/%E3%80%90%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87%E5%92%8C%E5%A6%82%E4%BD%95%E9%9D%A2%E8%AF%95%E3%80%91/%E6%A8%A1%E6%8B%9F%E9%9D%A2%E8%AF%95" data-v-a0363abd><!--[--><p class="text" data-v-a0363abd>æ¨¡æ‹Ÿé¢è¯•</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-a0363abd data-v-a0363abd><div class="item" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><a class="VPLink link link" href="/FrontEndInterviewQuestion/Document/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E7%9B%B8%E5%85%B3/%E3%80%90%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87%E5%92%8C%E5%A6%82%E4%BD%95%E9%9D%A2%E8%AF%95%E3%80%91/%E5%88%AB%E4%BA%BA%E7%9A%84%E9%9D%A2%E8%AF%95%E6%80%BB%E7%BB%93" data-v-a0363abd><!--[--><p class="text" data-v-a0363abd>åˆ«äººçš„é¢è¯•æ€»ç»“</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible has-active" data-v-a0363abd data-v-a0363abd><div class="item" role="button" tabindex="0" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><h3 class="text" data-v-a0363abd>ã€å‰ç«¯é¢è¯•é¢˜ã€‘</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-a0363abd><span class="vpi-chevron-right caret-icon" data-v-a0363abd></span></div></div><div class="items" data-v-a0363abd><!--[--><div class="VPSidebarItem level-2 is-link" data-v-a0363abd data-v-a0363abd><div class="item" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><a class="VPLink link link" href="/FrontEndInterviewQuestion/Document/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E7%9B%B8%E5%85%B3/%E3%80%90%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98%E3%80%91/%E6%8E%98%E9%87%91%E9%9D%A2%E8%AF%95%E7%9B%B8%E5%85%B3%E9%A2%98%E6%88%96%E6%96%87%E7%AB%A0" data-v-a0363abd><!--[--><p class="text" data-v-a0363abd>æ˜é‡‘é¢è¯•ç›¸å…³é¢˜æˆ–æ–‡ç« </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-a0363abd data-v-a0363abd><div class="item" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><a class="VPLink link link" href="/FrontEndInterviewQuestion/Document/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E7%9B%B8%E5%85%B3/%E3%80%90%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98%E3%80%91/%E5%BC%80%E6%BA%90%E9%9D%A2%E8%AF%95%E9%A2%98" data-v-a0363abd><!--[--><p class="text" data-v-a0363abd>å¼€æºé¢è¯•é¢˜</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-2 collapsible collapsed" data-v-a0363abd data-v-a0363abd><div class="item" role="button" tabindex="0" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><h4 class="text" data-v-a0363abd>è®¡ç®—æœºåŸºç¡€é¢è¯•é¢˜</h4><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-a0363abd><span class="vpi-chevron-right caret-icon" data-v-a0363abd></span></div></div><div class="items" data-v-a0363abd><!--[--><div class="VPSidebarItem level-3 is-link" data-v-a0363abd data-v-a0363abd><div class="item" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><a class="VPLink link link" href="/FrontEndInterviewQuestion/Document/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E7%9B%B8%E5%85%B3/%E3%80%90%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98%E3%80%91/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80%E9%9D%A2%E8%AF%95%E9%A2%98/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E9%9D%A2%E8%AF%95%E9%A2%98" data-v-a0363abd><!--[--><p class="text" data-v-a0363abd>ç¼–è¯‘åŸç†é¢è¯•é¢˜</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-a0363abd data-v-a0363abd><div class="item" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><a class="VPLink link link" href="/FrontEndInterviewQuestion/Document/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E7%9B%B8%E5%85%B3/%E3%80%90%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98%E3%80%91/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80%E9%9D%A2%E8%AF%95%E9%A2%98/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E9%9D%A2%E8%AF%95%E9%A2%98" data-v-a0363abd><!--[--><p class="text" data-v-a0363abd>æ“ä½œç³»ç»Ÿé¢è¯•é¢˜</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-a0363abd data-v-a0363abd><div class="item" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><a class="VPLink link link" href="/FrontEndInterviewQuestion/Document/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E7%9B%B8%E5%85%B3/%E3%80%90%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98%E3%80%91/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80%E9%9D%A2%E8%AF%95%E9%A2%98/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86" data-v-a0363abd><!--[--><p class="text" data-v-a0363abd>è®¡ç®—æœºç»„æˆåŸç†</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-a0363abd data-v-a0363abd><div class="item" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><a class="VPLink link link" href="/FrontEndInterviewQuestion/Document/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E7%9B%B8%E5%85%B3/%E3%80%90%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98%E3%80%91/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80%E9%9D%A2%E8%AF%95%E9%A2%98/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E9%9D%A2%E8%AF%95%E9%A2%98" data-v-a0363abd><!--[--><p class="text" data-v-a0363abd>è®¡ç®—æœºç½‘ç»œé¢è¯•é¢˜</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-a0363abd data-v-a0363abd><div class="item" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><a class="VPLink link link" href="/FrontEndInterviewQuestion/Document/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E7%9B%B8%E5%85%B3/%E3%80%90%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98%E3%80%91/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80%E9%9D%A2%E8%AF%95%E9%A2%98/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E9%9D%A2%E8%AF%95%E9%A2%98" data-v-a0363abd><!--[--><p class="text" data-v-a0363abd>ç½‘ç»œå®‰å…¨é¢è¯•é¢˜</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-a0363abd data-v-a0363abd><div class="item" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><a class="VPLink link link" href="/FrontEndInterviewQuestion/Document/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E7%9B%B8%E5%85%B3/%E3%80%90%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98%E3%80%91/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80%E9%9D%A2%E8%AF%95%E9%A2%98/JS%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E9%9D%A2%E8%AF%95%E9%A2%98" data-v-a0363abd><!--[--><p class="text" data-v-a0363abd>JSè®¾è®¡æ¨¡å¼é¢è¯•é¢˜</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-a0363abd data-v-a0363abd><div class="item" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><a class="VPLink link link" href="/FrontEndInterviewQuestion/Document/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E7%9B%B8%E5%85%B3/%E3%80%90%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98%E3%80%91/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80%E9%9D%A2%E8%AF%95%E9%A2%98/JS%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%92%8C%E7%AE%97%E6%B3%95" data-v-a0363abd><!--[--><p class="text" data-v-a0363abd>JSæ•°æ®ç»“æ„å’Œç®—æ³•</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-2 collapsible collapsed" data-v-a0363abd data-v-a0363abd><div class="item" role="button" tabindex="0" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><h4 class="text" data-v-a0363abd>ã€å…¶ä»–é¢è¯•é¢˜ã€‘</h4><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-a0363abd><span class="vpi-chevron-right caret-icon" data-v-a0363abd></span></div></div><div class="items" data-v-a0363abd><!--[--><div class="VPSidebarItem level-3 is-link" data-v-a0363abd data-v-a0363abd><div class="item" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><a class="VPLink link link" href="/FrontEndInterviewQuestion/Document/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E7%9B%B8%E5%85%B3/%E3%80%90%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98%E3%80%91/%E3%80%90%E5%85%B6%E4%BB%96%E9%9D%A2%E8%AF%95%E9%A2%98%E3%80%91/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E8%83%BD%E5%8A%9B%E9%9D%A2%E8%AF%95%E9%A2%98" data-v-a0363abd><!--[--><p class="text" data-v-a0363abd>å‰ç«¯å·¥ç¨‹èƒ½åŠ›é¢è¯•é¢˜</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-a0363abd data-v-a0363abd><div class="item" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><a class="VPLink link link" href="/FrontEndInterviewQuestion/Document/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E7%9B%B8%E5%85%B3/%E3%80%90%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98%E3%80%91/%E3%80%90%E5%85%B6%E4%BB%96%E9%9D%A2%E8%AF%95%E9%A2%98%E3%80%91/%E5%89%8D%E7%AB%AF%E5%AE%9E%E9%99%85%E9%A1%B9%E7%9B%AE%E4%B8%9A%E5%8A%A1%E7%9A%84%E5%AE%9E%E7%8E%B0%E9%97%AE%E9%A2%98" data-v-a0363abd><!--[--><p class="text" data-v-a0363abd>å‰ç«¯å®é™…é¡¹ç›®ä¸šåŠ¡çš„å®ç°é—®é¢˜</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-a0363abd data-v-a0363abd><div class="item" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><a class="VPLink link link" href="/FrontEndInterviewQuestion/Document/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E7%9B%B8%E5%85%B3/%E3%80%90%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98%E3%80%91/%E3%80%90%E5%85%B6%E4%BB%96%E9%9D%A2%E8%AF%95%E9%A2%98%E3%80%91/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E9%9D%A2%E8%AF%95%E9%A2%98" data-v-a0363abd><!--[--><p class="text" data-v-a0363abd>å‰ç«¯æ€§èƒ½ä¼˜åŒ–é¢è¯•é¢˜</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-a0363abd data-v-a0363abd><div class="item" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><a class="VPLink link link" href="/FrontEndInterviewQuestion/Document/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E7%9B%B8%E5%85%B3/%E3%80%90%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98%E3%80%91/%E3%80%90%E5%85%B6%E4%BB%96%E9%9D%A2%E8%AF%95%E9%A2%98%E3%80%91/%E9%A1%B9%E7%9B%AE%E8%AE%BE%E8%AE%A1%E5%92%8C%E5%BC%80%E5%8F%91%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%9A%84%E9%9D%A2%E8%AF%95%E9%A2%98" data-v-a0363abd><!--[--><p class="text" data-v-a0363abd>é¡¹ç›®è®¾è®¡å’Œå¼€å‘å·¥ä½œæµçš„é¢è¯•é¢˜</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-a0363abd data-v-a0363abd><div class="item" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><a class="VPLink link link" href="/FrontEndInterviewQuestion/Document/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E7%9B%B8%E5%85%B3/%E3%80%90%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98%E3%80%91/%E3%80%90%E5%85%B6%E4%BB%96%E9%9D%A2%E8%AF%95%E9%A2%98%E3%80%91/SEO%E7%9B%B8%E5%85%B3%E9%9D%A2%E8%AF%95%E9%A2%98" data-v-a0363abd><!--[--><p class="text" data-v-a0363abd>SEOç›¸å…³é¢è¯•é¢˜</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-2 collapsible collapsed" data-v-a0363abd data-v-a0363abd><div class="item" role="button" tabindex="0" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><h4 class="text" data-v-a0363abd>JSå’Œæµè§ˆå™¨åŸç†é¢è¯•é¢˜</h4><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-a0363abd><span class="vpi-chevron-right caret-icon" data-v-a0363abd></span></div></div><div class="items" data-v-a0363abd><!--[--><div class="VPSidebarItem level-3 is-link" data-v-a0363abd data-v-a0363abd><div class="item" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><a class="VPLink link link" href="/FrontEndInterviewQuestion/Document/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E7%9B%B8%E5%85%B3/%E3%80%90%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98%E3%80%91/JS%E5%92%8C%E6%B5%8F%E8%A7%88%E5%99%A8%E5%8E%9F%E7%90%86%E9%9D%A2%E8%AF%95%E9%A2%98/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86%E5%92%8C%E9%9D%A2%E8%AF%95%E9%A2%98" data-v-a0363abd><!--[--><p class="text" data-v-a0363abd>æµè§ˆå™¨å·¥ä½œåŸç†å’Œé¢è¯•é¢˜</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-a0363abd data-v-a0363abd><div class="item" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><a class="VPLink link link" href="/FrontEndInterviewQuestion/Document/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E7%9B%B8%E5%85%B3/%E3%80%90%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98%E3%80%91/JS%E5%92%8C%E6%B5%8F%E8%A7%88%E5%99%A8%E5%8E%9F%E7%90%86%E9%9D%A2%E8%AF%95%E9%A2%98/JavaScript%E5%BC%95%E6%93%8E%E8%BF%90%E8%A1%8C%E5%8E%9F%E7%90%86" data-v-a0363abd><!--[--><p class="text" data-v-a0363abd>JavaScriptå¼•æ“è¿è¡ŒåŸç†</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-2 collapsible collapsed" data-v-a0363abd data-v-a0363abd><div class="item" role="button" tabindex="0" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><h4 class="text" data-v-a0363abd>CSSå’ŒHTMLé¢è¯•é¢˜</h4><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-a0363abd><span class="vpi-chevron-right caret-icon" data-v-a0363abd></span></div></div><div class="items" data-v-a0363abd><!--[--><div class="VPSidebarItem level-3 is-link" data-v-a0363abd data-v-a0363abd><div class="item" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><a class="VPLink link link" href="/FrontEndInterviewQuestion/Document/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E7%9B%B8%E5%85%B3/%E3%80%90%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98%E3%80%91/CSS%E5%92%8CHTML%E9%9D%A2%E8%AF%95%E9%A2%98/HTML%E9%9D%A2%E8%AF%95%E9%A2%98" data-v-a0363abd><!--[--><p class="text" data-v-a0363abd>HTMLé¢è¯•é¢˜</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-a0363abd data-v-a0363abd><div class="item" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><a class="VPLink link link" href="/FrontEndInterviewQuestion/Document/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E7%9B%B8%E5%85%B3/%E3%80%90%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98%E3%80%91/CSS%E5%92%8CHTML%E9%9D%A2%E8%AF%95%E9%A2%98/CSS%E9%9D%A2%E8%AF%95%E9%A2%98" data-v-a0363abd><!--[--><p class="text" data-v-a0363abd>CSSé¢è¯•é¢˜</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-a0363abd data-v-a0363abd><div class="item" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><a class="VPLink link link" href="/FrontEndInterviewQuestion/Document/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E7%9B%B8%E5%85%B3/%E3%80%90%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98%E3%80%91/CSS%E5%92%8CHTML%E9%9D%A2%E8%AF%95%E9%A2%98/Web%E5%BC%80%E5%8F%91%E9%9D%A2%E8%AF%95%E9%A2%98" data-v-a0363abd><!--[--><p class="text" data-v-a0363abd>Webå¼€å‘é¢è¯•é¢˜</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-a0363abd data-v-a0363abd><div class="item" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><a class="VPLink link link" href="/FrontEndInterviewQuestion/Document/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E7%9B%B8%E5%85%B3/%E3%80%90%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98%E3%80%91/CSS%E5%92%8CHTML%E9%9D%A2%E8%AF%95%E9%A2%98/%E7%A7%BB%E5%8A%A8Web%E5%BC%80%E5%8F%91" data-v-a0363abd><!--[--><p class="text" data-v-a0363abd>ç§»åŠ¨Webå¼€å‘</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-2 collapsible has-active" data-v-a0363abd data-v-a0363abd><div class="item" role="button" tabindex="0" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><h4 class="text" data-v-a0363abd>JavaScripté¢è¯•é¢˜</h4><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-a0363abd><span class="vpi-chevron-right caret-icon" data-v-a0363abd></span></div></div><div class="items" data-v-a0363abd><!--[--><div class="VPSidebarItem level-3 is-link" data-v-a0363abd data-v-a0363abd><div class="item" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><a class="VPLink link link" href="/FrontEndInterviewQuestion/Document/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E7%9B%B8%E5%85%B3/%E3%80%90%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98%E3%80%91/JavaScript%E9%9D%A2%E8%AF%95%E9%A2%98/JavaScript%E9%9D%A2%E8%AF%95%E9%A2%98" data-v-a0363abd><!--[--><p class="text" data-v-a0363abd>JavaScripté¢è¯•é¢˜</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-a0363abd data-v-a0363abd><div class="item" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><a class="VPLink link link" href="/FrontEndInterviewQuestion/Document/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E7%9B%B8%E5%85%B3/%E3%80%90%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98%E3%80%91/JavaScript%E9%9D%A2%E8%AF%95%E9%A2%98/JavaScript%E5%9F%BA%E7%A1%80%E9%9D%A2%E8%AF%95%E9%A2%98" data-v-a0363abd><!--[--><p class="text" data-v-a0363abd>JavaScriptåŸºç¡€é¢è¯•é¢˜</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-a0363abd data-v-a0363abd><div class="item" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><a class="VPLink link link" href="/FrontEndInterviewQuestion/Document/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E7%9B%B8%E5%85%B3/%E3%80%90%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98%E3%80%91/JavaScript%E9%9D%A2%E8%AF%95%E9%A2%98/JavaScript%E9%AB%98%E7%BA%A7%E9%9D%A2%E8%AF%95%E9%A2%98" data-v-a0363abd><!--[--><p class="text" data-v-a0363abd>JavaScripté«˜çº§é¢è¯•é¢˜</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-3 collapsible has-active" data-v-a0363abd data-v-a0363abd><div class="item" role="button" tabindex="0" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><h5 class="text" data-v-a0363abd>JavaScriptæ‰‹å†™é¢˜</h5><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-a0363abd><span class="vpi-chevron-right caret-icon" data-v-a0363abd></span></div></div><div class="items" data-v-a0363abd><!--[--><div class="VPSidebarItem level-4 is-link" data-v-a0363abd data-v-a0363abd><div class="item" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><a class="VPLink link link" href="/FrontEndInterviewQuestion/Document/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E7%9B%B8%E5%85%B3/%E3%80%90%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98%E3%80%91/JavaScript%E9%9D%A2%E8%AF%95%E9%A2%98/JavaScript%E6%89%8B%E5%86%99%E9%A2%98/%E6%89%8B%E5%86%99%E5%AE%9E%E7%8E%B0JS%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95" data-v-a0363abd><!--[--><p class="text" data-v-a0363abd>æ‰‹å†™å®ç°JSå¸¸ç”¨æ–¹æ³•</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-4 is-link" data-v-a0363abd data-v-a0363abd><div class="item" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><a class="VPLink link link" href="/FrontEndInterviewQuestion/Document/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E7%9B%B8%E5%85%B3/%E3%80%90%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98%E3%80%91/JavaScript%E9%9D%A2%E8%AF%95%E9%A2%98/JavaScript%E6%89%8B%E5%86%99%E9%A2%98/%E6%89%8B%E5%86%99%E5%AE%9E%E7%8E%B0JS%E5%BA%95%E5%B1%82%E6%96%B9%E6%B3%95" data-v-a0363abd><!--[--><p class="text" data-v-a0363abd>æ‰‹å†™å®ç°JSåº•å±‚æ–¹æ³•</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-4 is-link" data-v-a0363abd data-v-a0363abd><div class="item" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><a class="VPLink link link" href="/FrontEndInterviewQuestion/Document/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E7%9B%B8%E5%85%B3/%E3%80%90%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98%E3%80%91/JavaScript%E9%9D%A2%E8%AF%95%E9%A2%98/JavaScript%E6%89%8B%E5%86%99%E9%A2%98/%E6%89%8B%E5%86%99Promise" data-v-a0363abd><!--[--><p class="text" data-v-a0363abd>æ‰‹å†™Promise</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-4 is-link" data-v-a0363abd data-v-a0363abd><div class="item" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><a class="VPLink link link" href="/FrontEndInterviewQuestion/Document/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E7%9B%B8%E5%85%B3/%E3%80%90%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98%E3%80%91/JavaScript%E9%9D%A2%E8%AF%95%E9%A2%98/JavaScript%E6%89%8B%E5%86%99%E9%A2%98/%E6%89%8B%E5%86%99CSS%E9%A2%84%E5%A4%84%E7%90%86%E5%99%A8" data-v-a0363abd><!--[--><p class="text" data-v-a0363abd>æ‰‹å†™CSSé¢„å¤„ç†å™¨</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-4 is-link" data-v-a0363abd data-v-a0363abd><div class="item" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><a class="VPLink link link" href="/FrontEndInterviewQuestion/Document/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E7%9B%B8%E5%85%B3/%E3%80%90%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98%E3%80%91/JavaScript%E9%9D%A2%E8%AF%95%E9%A2%98/JavaScript%E6%89%8B%E5%86%99%E9%A2%98/%E6%89%8B%E5%86%99%E5%AE%9E%E7%8E%B0%E5%B7%A5%E5%85%B7" data-v-a0363abd><!--[--><p class="text" data-v-a0363abd>æ‰‹å†™å®ç°å·¥å…·</p><!--]--></a><!----></div><!----></div><!--]--></div></section><div class="VPSidebarItem level-3 is-link" data-v-a0363abd data-v-a0363abd><div class="item" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><a class="VPLink link link" href="/FrontEndInterviewQuestion/Document/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E7%9B%B8%E5%85%B3/%E3%80%90%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98%E3%80%91/JavaScript%E9%9D%A2%E8%AF%95%E9%A2%98/Typescript%E9%9D%A2%E8%AF%95%E9%A2%98" data-v-a0363abd><!--[--><p class="text" data-v-a0363abd>Typescripté¢è¯•é¢˜</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-2 collapsible collapsed" data-v-a0363abd data-v-a0363abd><div class="item" role="button" tabindex="0" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><h4 class="text" data-v-a0363abd>æ¡†æ¶ç›¸å…³é¢è¯•é¢˜</h4><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-a0363abd><span class="vpi-chevron-right caret-icon" data-v-a0363abd></span></div></div><div class="items" data-v-a0363abd><!--[--><div class="VPSidebarItem level-3 is-link" data-v-a0363abd data-v-a0363abd><div class="item" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><a class="VPLink link link" href="/FrontEndInterviewQuestion/Document/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E7%9B%B8%E5%85%B3/%E3%80%90%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98%E3%80%91/%E6%A1%86%E6%9E%B6%E7%9B%B8%E5%85%B3%E9%9D%A2%E8%AF%95%E9%A2%98/Vue%E9%9D%A2%E8%AF%95%E9%A2%98" data-v-a0363abd><!--[--><p class="text" data-v-a0363abd>Vueé¢è¯•é¢˜</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-a0363abd data-v-a0363abd><div class="item" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><a class="VPLink link link" href="/FrontEndInterviewQuestion/Document/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E7%9B%B8%E5%85%B3/%E3%80%90%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98%E3%80%91/%E6%A1%86%E6%9E%B6%E7%9B%B8%E5%85%B3%E9%9D%A2%E8%AF%95%E9%A2%98/Vue%E5%8E%9F%E7%90%86%E9%9D%A2%E8%AF%95%E9%A2%98" data-v-a0363abd><!--[--><p class="text" data-v-a0363abd>VueåŸç†é¢è¯•é¢˜</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-a0363abd data-v-a0363abd><div class="item" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><a class="VPLink link link" href="/FrontEndInterviewQuestion/Document/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E7%9B%B8%E5%85%B3/%E3%80%90%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98%E3%80%91/%E6%A1%86%E6%9E%B6%E7%9B%B8%E5%85%B3%E9%9D%A2%E8%AF%95%E9%A2%98/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91%E9%9D%A2%E8%AF%95%E9%A2%98" data-v-a0363abd><!--[--><p class="text" data-v-a0363abd>å¾®ä¿¡å°ç¨‹åºå¼€å‘é¢è¯•é¢˜</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-a0363abd data-v-a0363abd><div class="item" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><a class="VPLink link link" href="/FrontEndInterviewQuestion/Document/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E7%9B%B8%E5%85%B3/%E3%80%90%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98%E3%80%91/%E6%A1%86%E6%9E%B6%E7%9B%B8%E5%85%B3%E9%9D%A2%E8%AF%95%E9%A2%98/React%E9%9D%A2%E8%AF%95%E9%A2%98" data-v-a0363abd><!--[--><p class="text" data-v-a0363abd>Reacté¢è¯•é¢˜</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-a0363abd data-v-a0363abd><div class="item" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><a class="VPLink link link" href="/FrontEndInterviewQuestion/Document/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E7%9B%B8%E5%85%B3/%E3%80%90%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98%E3%80%91/%E6%A1%86%E6%9E%B6%E7%9B%B8%E5%85%B3%E9%9D%A2%E8%AF%95%E9%A2%98/Angular%E9%9D%A2%E8%AF%95%E9%A2%98" data-v-a0363abd><!--[--><p class="text" data-v-a0363abd>Angularé¢è¯•é¢˜</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-a0363abd data-v-a0363abd><div class="item" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><a class="VPLink link link" href="/FrontEndInterviewQuestion/Document/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E7%9B%B8%E5%85%B3/%E3%80%90%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98%E3%80%91/%E6%A1%86%E6%9E%B6%E7%9B%B8%E5%85%B3%E9%9D%A2%E8%AF%95%E9%A2%98/JQuery%E9%9D%A2%E8%AF%95%E9%A2%98" data-v-a0363abd><!--[--><p class="text" data-v-a0363abd>JQueryé¢è¯•é¢˜</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-a0363abd data-v-a0363abd><div class="item" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><a class="VPLink link link" href="/FrontEndInterviewQuestion/Document/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E7%9B%B8%E5%85%B3/%E3%80%90%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98%E3%80%91/%E6%A1%86%E6%9E%B6%E7%9B%B8%E5%85%B3%E9%9D%A2%E8%AF%95%E9%A2%98/%E6%A1%8C%E9%9D%A2%E7%AB%AF%E8%B7%A8%E5%B9%B3%E5%8F%B0%E6%A1%86%E6%9E%B6%E9%9D%A2%E8%AF%95%E9%A2%98" data-v-a0363abd><!--[--><p class="text" data-v-a0363abd>æ¡Œé¢ç«¯è·¨å¹³å°æ¡†æ¶é¢è¯•é¢˜</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-2 collapsible collapsed" data-v-a0363abd data-v-a0363abd><div class="item" role="button" tabindex="0" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><h4 class="text" data-v-a0363abd>NodeJSé¢è¯•é¢˜</h4><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-a0363abd><span class="vpi-chevron-right caret-icon" data-v-a0363abd></span></div></div><div class="items" data-v-a0363abd><!--[--><div class="VPSidebarItem level-3 is-link" data-v-a0363abd data-v-a0363abd><div class="item" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><a class="VPLink link link" href="/FrontEndInterviewQuestion/Document/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E7%9B%B8%E5%85%B3/%E3%80%90%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98%E3%80%91/NodeJS%E9%9D%A2%E8%AF%95%E9%A2%98/NodeJS%E9%9D%A2%E8%AF%95%E9%A2%98" data-v-a0363abd><!--[--><p class="text" data-v-a0363abd>NodeJSé¢è¯•é¢˜</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-a0363abd data-v-a0363abd><div class="item" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><a class="VPLink link link" href="/FrontEndInterviewQuestion/Document/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E7%9B%B8%E5%85%B3/%E3%80%90%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98%E3%80%91/NodeJS%E9%9D%A2%E8%AF%95%E9%A2%98/Node%E9%A1%B9%E7%9B%AE%E5%B7%A5%E7%A8%8B%E5%8C%96%E9%9D%A2%E8%AF%95%E9%A2%98" data-v-a0363abd><!--[--><p class="text" data-v-a0363abd>Nodeé¡¹ç›®å·¥ç¨‹åŒ–é¢è¯•é¢˜</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-a0363abd data-v-a0363abd><div class="item" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><a class="VPLink link link" href="/FrontEndInterviewQuestion/Document/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E7%9B%B8%E5%85%B3/%E3%80%90%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98%E3%80%91/NodeJS%E9%9D%A2%E8%AF%95%E9%A2%98/%E6%9C%8D%E5%8A%A1%E7%AB%AF%E7%BC%96%E7%A8%8B%E9%9D%A2%E8%AF%95%E9%A2%98" data-v-a0363abd><!--[--><p class="text" data-v-a0363abd>æœåŠ¡ç«¯ç¼–ç¨‹é¢è¯•é¢˜</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-a0363abd data-v-a0363abd><div class="item" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><a class="VPLink link link" href="/FrontEndInterviewQuestion/Document/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E7%9B%B8%E5%85%B3/%E3%80%90%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98%E3%80%91/NodeJS%E9%9D%A2%E8%AF%95%E9%A2%98/Node%E5%8E%9F%E7%90%86%E9%9D%A2%E8%AF%95%E9%A2%98" data-v-a0363abd><!--[--><p class="text" data-v-a0363abd>NodeåŸç†é¢è¯•é¢˜</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-2fdd469f data-v-0c35d42f><div class="VPDoc has-sidebar has-aside" data-v-0c35d42f data-v-2295edbf><!--[--><!--]--><div class="container" data-v-2295edbf><div class="aside" data-v-2295edbf><div class="aside-curtain" data-v-2295edbf></div><div class="aside-container" data-v-2295edbf><div class="aside-content" data-v-2295edbf><div class="VPDocAside" data-v-2295edbf data-v-22c997c5><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" role="navigation" data-v-22c997c5 data-v-07e68753><div class="content" data-v-07e68753><div class="outline-marker" data-v-07e68753></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-07e68753>âš¡ï¸æ–‡æ¡£å†…å®¹å¤§çº²</div><ul class="VPDocOutlineItem root" data-v-07e68753 data-v-2d8a325d><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-22c997c5></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-2295edbf><div class="content-container" data-v-2295edbf><!--[--><!--]--><main class="main" data-v-2295edbf><div style="position:relative;" class="vp-doc _FrontEndInterviewQuestion_Document_%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E7%9B%B8%E5%85%B3_%E3%80%90%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98%E3%80%91_JavaScript%E9%9D%A2%E8%AF%95%E9%A2%98_JavaScript%E6%89%8B%E5%86%99%E9%A2%98_%E6%89%8B%E5%86%99%E5%AE%9E%E7%8E%B0JS%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95" data-v-2295edbf><div><h1 id="æ‰‹å†™å®ç°-js-æ–¹æ³•" tabindex="-1">æ‰‹å†™å®ç° JS æ–¹æ³• <a class="header-anchor" href="#æ‰‹å†™å®ç°-js-æ–¹æ³•" aria-label="Permalink to &quot;æ‰‹å†™å®ç° JS æ–¹æ³•&quot;">â€‹</a></h1><h2 id="ğŸŒŸ2022-2023-å¹´-å‰ç«¯-javascript-æ‰‹å†™é¢˜-ç¼–ç¨‹é¢˜" tabindex="-1">ğŸŒŸ2022-2023 å¹´ å‰ç«¯ JavaScript æ‰‹å†™é¢˜ï¼Œç¼–ç¨‹é¢˜ <a class="header-anchor" href="#ğŸŒŸ2022-2023-å¹´-å‰ç«¯-javascript-æ‰‹å†™é¢˜-ç¼–ç¨‹é¢˜" aria-label="Permalink to &quot;ğŸŒŸ2022-2023 å¹´ å‰ç«¯ JavaScript æ‰‹å†™é¢˜ï¼Œç¼–ç¨‹é¢˜&quot;">â€‹</a></h2><p>å‰ç«¯æ‰‹å†™é¢˜é›†é”¦ è®°å½•å¤§å‚<strong>ç¬”è¯•ï¼Œé¢è¯•å¸¸è€ƒ</strong>æ‰‹å†™é¢˜ï¼š<a href="https://github.com/Sunny-117/js-challenges" target="_blank" rel="noreferrer">https://github.com/Sunny-117/js-challenges</a></p><h2 id="æ¡†æ¶åŠŸèƒ½æ‰‹å†™å®ç°" tabindex="-1">æ¡†æ¶åŠŸèƒ½æ‰‹å†™å®ç° <a class="header-anchor" href="#æ¡†æ¶åŠŸèƒ½æ‰‹å†™å®ç°" aria-label="Permalink to &quot;æ¡†æ¶åŠŸèƒ½æ‰‹å†™å®ç°&quot;">â€‹</a></h2><h3 id="vue-reactive" tabindex="-1">vue reactive <a class="header-anchor" href="#vue-reactive" aria-label="Permalink to &quot;vue reactive&quot;">â€‹</a></h3><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// Dep module</span></span>
<span class="line"><span style="color:#C678DD;">class</span><span style="color:#E5C07B;"> Dep</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">	static</span><span style="color:#E06C75;"> stack</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [];</span></span>
<span class="line"><span style="color:#C678DD;">	static</span><span style="color:#E06C75;"> target</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">	deps</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">	constructor</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">deps</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Set</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">	depend</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">Dep</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">target</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">			this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">deps</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">add</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Dep</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">target</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">	notify</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">deps</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">forEach</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">w</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#E5C07B;"> w</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">update</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">	static</span><span style="color:#61AFEF;"> pushTarget</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">t</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">target</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">			this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">stack</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">target</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">target</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> t</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">	static</span><span style="color:#61AFEF;"> popTarget</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">target</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">stack</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">pop</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// reactive</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> reactive</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">o</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">o</span><span style="color:#56B6C2;"> &amp;&amp;</span><span style="color:#C678DD;"> typeof</span><span style="color:#E06C75;"> o</span><span style="color:#56B6C2;"> ===</span><span style="color:#98C379;"> &quot;object&quot;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">		Object</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">keys</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">o</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">forEach</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">k</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">			defineReactive</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">o</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">k</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">o</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">k</span><span style="color:#ABB2BF;">]);</span></span>
<span class="line"><span style="color:#ABB2BF;">		});</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> o</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> defineReactive</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">obj</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">k</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">val</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> dep</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Dep</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E5C07B;">	Object</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">defineProperty</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">k</span><span style="color:#ABB2BF;">, {</span></span>
<span class="line"><span style="color:#61AFEF;">		get</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">			dep</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">depend</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">			return</span><span style="color:#E06C75;"> val</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		},</span></span>
<span class="line"><span style="color:#61AFEF;">		set</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">newVal</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">			val</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> newVal</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">			dep</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">notify</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">		},</span></span>
<span class="line"><span style="color:#ABB2BF;">	});</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">val</span><span style="color:#56B6C2;"> &amp;&amp;</span><span style="color:#C678DD;"> typeof</span><span style="color:#E06C75;"> val</span><span style="color:#56B6C2;"> ===</span><span style="color:#98C379;"> &quot;object&quot;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#61AFEF;">		reactive</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">val</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// watcher</span></span>
<span class="line"><span style="color:#C678DD;">class</span><span style="color:#E5C07B;"> Watcher</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">	constructor</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">effect</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">effect</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> effect</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">update</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">	update</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">		Dep</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">pushTarget</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">effect</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E5C07B;">		Dep</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">popTarget</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// æµ‹è¯•ä»£ç </span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> data</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> reactive</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#E06C75;">	msg</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;aaa&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">new</span><span style="color:#61AFEF;"> Watcher</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">	console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;===&gt; effect&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">data</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">msg</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">setTimeout</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">	data</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">msg</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;hello&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}, </span><span style="color:#D19A66;">1000</span><span style="color:#ABB2BF;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br></div></div><h3 id="å°†è™šæ‹Ÿ-dom-è½¬åŒ–ä¸ºçœŸå®-dom" tabindex="-1">å°†è™šæ‹Ÿ Dom è½¬åŒ–ä¸ºçœŸå® Dom <a class="header-anchor" href="#å°†è™šæ‹Ÿ-dom-è½¬åŒ–ä¸ºçœŸå®-dom" aria-label="Permalink to &quot;å°†è™šæ‹Ÿ Dom è½¬åŒ–ä¸ºçœŸå® Dom&quot;">â€‹</a></h3><p>é¢˜ç›®æè¿°ï¼šJSON æ ¼å¼çš„è™šæ‹Ÿ Dom æ€ä¹ˆè½¬æ¢æˆçœŸå® Dom</p><div class="language-css line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">css</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">  tag: </span><span style="color:#98C379;">&#39;DIV&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">  attrs:{</span></span>
<span class="line"><span style="color:#ABB2BF;">  id:</span><span style="color:#98C379;">&#39;app&#39;</span></span>
<span class="line"><span style="color:#ABB2BF;">  },</span></span>
<span class="line"><span style="color:#C678DD;">  children: [</span></span>
<span class="line"><span style="color:#C678DD;">    {</span></span>
<span class="line"><span style="color:#C678DD;">      tag: </span><span style="color:#98C379;">&#39;SPAN&#39;</span><span style="color:#C678DD;">,</span></span>
<span class="line"><span style="color:#C678DD;">      children: [</span></span>
<span class="line"><span style="color:#C678DD;">        { tag: </span><span style="color:#98C379;">&#39;A&#39;</span><span style="color:#C678DD;">, children: [] }</span></span>
<span class="line"><span style="color:#C678DD;">      ]</span></span>
<span class="line"><span style="color:#C678DD;">    }</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    {</span></span>
<span class="line"><span style="color:#ABB2BF;">      tag: </span><span style="color:#98C379;">&#39;SPAN&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">      children: [</span></span>
<span class="line"><span style="color:#ABB2BF;">        { tag: </span><span style="color:#98C379;">&#39;A&#39;</span><span style="color:#ABB2BF;">, children: [] },</span></span>
<span class="line"><span style="color:#ABB2BF;">        { tag: </span><span style="color:#98C379;">&#39;A&#39;</span><span style="color:#ABB2BF;">, children: [] }</span></span>
<span class="line"><span style="color:#ABB2BF;">      ]</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  ]</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#C678DD;">æŠŠä¸Šè¯‰è™šæ‹ŸDomè½¬åŒ–æˆä¸‹æ–¹çœŸå®Dom</span></span>
<span class="line"><span style="color:#C678DD;">&lt;</span><span style="color:#E06C75;">div</span><span style="color:#C678DD;"> id=&quot;app&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;">  &lt;</span><span style="color:#E06C75;">span</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;">    &lt;</span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">&gt;</span><span style="color:#C678DD;">&lt;</span><span style="color:#ABB2BF;">/</span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;">  &lt;</span><span style="color:#ABB2BF;">/</span><span style="color:#E06C75;">span</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;">  &lt;</span><span style="color:#E06C75;">span</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;">    &lt;</span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">&gt;</span><span style="color:#C678DD;">&lt;</span><span style="color:#ABB2BF;">/</span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;">    &lt;</span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">&gt;</span><span style="color:#C678DD;">&lt;</span><span style="color:#ABB2BF;">/</span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;">  &lt;</span><span style="color:#ABB2BF;">/</span><span style="color:#E06C75;">span</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;">&lt;</span><span style="color:#ABB2BF;">/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><p>å®ç°ä»£ç å¦‚ä¸‹:</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// çœŸæ­£çš„æ¸²æŸ“å‡½æ•°</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> _render</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">vnode</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// å¦‚æœæ˜¯æ•°å­—ç±»å‹è½¬åŒ–ä¸ºå­—ç¬¦ä¸²</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">typeof</span><span style="color:#E06C75;"> vnode</span><span style="color:#56B6C2;"> ===</span><span style="color:#98C379;"> &quot;number&quot;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">		vnode</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> String</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">vnode</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// å­—ç¬¦ä¸²ç±»å‹ç›´æ¥å°±æ˜¯æ–‡æœ¬èŠ‚ç‚¹</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">typeof</span><span style="color:#E06C75;"> vnode</span><span style="color:#56B6C2;"> ===</span><span style="color:#98C379;"> &quot;string&quot;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E5C07B;"> document</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">createTextNode</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">vnode</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// æ™®é€šDOM</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> dom</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> document</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">createElement</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">vnode</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">tag</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">vnode</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">attrs</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// éå†å±æ€§</span></span>
<span class="line"><span style="color:#E5C07B;">		Object</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">keys</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">vnode</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">attrs</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">forEach</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">key</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">			const</span><span style="color:#E5C07B;"> value</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> vnode</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">attrs</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#E5C07B;">			dom</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setAttribute</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		});</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// å­æ•°ç»„è¿›è¡Œé€’å½’æ“ä½œ</span></span>
<span class="line"><span style="color:#E5C07B;">	vnode</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">children</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">forEach</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">child</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#E5C07B;"> dom</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">appendChild</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">_render</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">child</span><span style="color:#ABB2BF;">)));</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> dom</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h3 id="å®ç°æ¨¡æ¿å­—ç¬¦ä¸²è§£æåŠŸèƒ½" tabindex="-1">å®ç°æ¨¡æ¿å­—ç¬¦ä¸²è§£æåŠŸèƒ½ <a class="header-anchor" href="#å®ç°æ¨¡æ¿å­—ç¬¦ä¸²è§£æåŠŸèƒ½" aria-label="Permalink to &quot;å®ç°æ¨¡æ¿å­—ç¬¦ä¸²è§£æåŠŸèƒ½&quot;">â€‹</a></h3><p>é¢˜ç›®æè¿°:</p><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#ABB2BF;">let template = &#39;æˆ‘æ˜¯{{name}}ï¼Œå¹´é¾„{{age}}ï¼Œæ€§åˆ«{{sex}}&#39;; let data = { name:</span></span>
<span class="line"><span style="color:#ABB2BF;">&#39;å§“å&#39;, age: 18 } render(template, data); // æˆ‘æ˜¯å§“åï¼Œå¹´é¾„18ï¼Œæ€§åˆ«undefined</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>å®ç°ä»£ç å¦‚ä¸‹:</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> render</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">template</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">data</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> computed</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> template</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">replace</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">/</span><span style="color:#56B6C2;">\{\{</span><span style="color:#E06C75;">(\w</span><span style="color:#D19A66;">+</span><span style="color:#E06C75;">)</span><span style="color:#56B6C2;">\}\}</span><span style="color:#E06C75;">/</span><span style="color:#C678DD;">g</span><span style="color:#ABB2BF;">, </span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">match</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">key</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E06C75;"> data</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#ABB2BF;">	});</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> computed</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="è¯·å®ç°-dom2json-ä¸€ä¸ªå‡½æ•°-å¯ä»¥æŠŠä¸€ä¸ª-dom-èŠ‚ç‚¹è¾“å‡º-json-çš„æ ¼å¼" tabindex="-1">è¯·å®ç° DOM2JSON ä¸€ä¸ªå‡½æ•°ï¼Œå¯ä»¥æŠŠä¸€ä¸ª DOM èŠ‚ç‚¹è¾“å‡º JSON çš„æ ¼å¼ <a class="header-anchor" href="#è¯·å®ç°-dom2json-ä¸€ä¸ªå‡½æ•°-å¯ä»¥æŠŠä¸€ä¸ª-dom-èŠ‚ç‚¹è¾“å‡º-json-çš„æ ¼å¼" aria-label="Permalink to &quot;è¯·å®ç° DOM2JSON ä¸€ä¸ªå‡½æ•°ï¼Œå¯ä»¥æŠŠä¸€ä¸ª DOM èŠ‚ç‚¹è¾“å‡º JSON çš„æ ¼å¼&quot;">â€‹</a></h3><p>é¢˜ç›®æè¿°:</p><div class="language-css line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">css</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;">  &lt;</span><span style="color:#E06C75;">span</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;">    &lt;</span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">&gt;</span><span style="color:#C678DD;">&lt;</span><span style="color:#ABB2BF;">/</span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;">  &lt;</span><span style="color:#ABB2BF;">/</span><span style="color:#E06C75;">span</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;">  &lt;</span><span style="color:#E06C75;">span</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;">    &lt;</span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">&gt;</span><span style="color:#C678DD;">&lt;</span><span style="color:#ABB2BF;">/</span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;">    &lt;</span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">&gt;</span><span style="color:#C678DD;">&lt;</span><span style="color:#ABB2BF;">/</span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;">  &lt;</span><span style="color:#ABB2BF;">/</span><span style="color:#E06C75;">span</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;">&lt;</span><span style="color:#ABB2BF;">/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">æŠŠä¸Šè¯‰domç»“æ„è½¬æˆä¸‹é¢çš„JSONæ ¼å¼</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">  tag: </span><span style="color:#98C379;">&#39;DIV&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">  children: [</span></span>
<span class="line"><span style="color:#ABB2BF;">    {</span></span>
<span class="line"><span style="color:#ABB2BF;">      tag: </span><span style="color:#98C379;">&#39;SPAN&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">      children: [</span></span>
<span class="line"><span style="color:#ABB2BF;">        { tag: </span><span style="color:#98C379;">&#39;A&#39;</span><span style="color:#ABB2BF;">, children: [] }</span></span>
<span class="line"><span style="color:#ABB2BF;">      ]</span></span>
<span class="line"><span style="color:#ABB2BF;">    },</span></span>
<span class="line"><span style="color:#ABB2BF;">    {</span></span>
<span class="line"><span style="color:#ABB2BF;">      tag: </span><span style="color:#98C379;">&#39;SPAN&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">      children: [</span></span>
<span class="line"><span style="color:#ABB2BF;">        { tag: </span><span style="color:#98C379;">&#39;A&#39;</span><span style="color:#ABB2BF;">, children: [] },</span></span>
<span class="line"><span style="color:#ABB2BF;">        { tag: </span><span style="color:#98C379;">&#39;A&#39;</span><span style="color:#ABB2BF;">, children: [] }</span></span>
<span class="line"><span style="color:#ABB2BF;">      ]</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  ]</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p>å®ç°ä»£ç å¦‚ä¸‹:</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> dom2Json</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">domtree</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> obj</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {};</span></span>
<span class="line"><span style="color:#E5C07B;">	obj</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">name</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> domtree</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">tagName</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">	obj</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">children</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [];</span></span>
<span class="line"><span style="color:#E5C07B;">	domtree</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">childNodes</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">forEach</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">child</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#E5C07B;"> obj</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">children</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">dom2Json</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">child</span><span style="color:#ABB2BF;">)));</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> obj</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><blockquote><p>æ‰©å±•æ€è€ƒ:å¦‚æœç»™å®šçš„ä¸æ˜¯ä¸€ä¸ª Dom æ ‘ç»“æ„ è€Œæ˜¯ä¸€æ®µ html å­—ç¬¦ä¸² è¯¥å¦‚ä½•è§£æ?</p></blockquote><p>é‚£ä¹ˆè¿™ä¸ªé—®é¢˜å°±ç±»ä¼¼ Vue çš„æ¨¡æ¿ç¼–è¯‘åŸç† æˆ‘ä»¬å¯ä»¥åˆ©ç”¨æ­£åˆ™ åŒ¹é… html å­—ç¬¦ä¸² é‡åˆ°å¼€å§‹æ ‡ç­¾ ç»“æŸæ ‡ç­¾å’Œæ–‡æœ¬ è§£æå®Œæ¯•ä¹‹åç”Ÿæˆå¯¹åº”çš„ ast å¹¶å»ºç«‹ç›¸åº”çš„çˆ¶å­å…³è” ä¸æ–­çš„ advance æˆªå–å‰©ä½™çš„å­—ç¬¦ä¸² ç›´åˆ° html å…¨éƒ¨è§£æå®Œæ¯• æ„Ÿå…´è¶£çš„å¯ä»¥çœ‹<a href="https://juejin.cn/post/6936024530016010276" target="_blank" rel="noreferrer">è¿™é‡Œ</a></p><h2 id="å®ç°-ajax" tabindex="-1">å®ç° Ajax <a class="header-anchor" href="#å®ç°-ajax" aria-label="Permalink to &quot;å®ç° Ajax&quot;">â€‹</a></h2><ol><li>åˆ›å»ºä¸€ä¸ª XMLHttpRequest å¯¹è±¡</li><li>åœ¨è¿™ä¸ªå¯¹è±¡ä¸Šä½¿ç”¨ open æ–¹æ³•åˆ›å»ºä¸€ä¸ª HTTP è¯·æ±‚ï¼ˆå‚æ•°ä¸ºè¯·æ±‚æ–¹æ³•ã€è¯·æ±‚åœ°å€ã€æ˜¯å¦å¼‚æ­¥å’Œç”¨æˆ·çš„è®¤è¯ä¿¡æ¯ï¼‰</li><li>é€šè¿‡ send æ–¹æ³•æ¥å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼ˆpost è¯·æ±‚å¯ä»¥å…¥å‚ä½œä¸ºå‘é€çš„æ•°æ®ä½“ï¼‰</li><li>ç›‘å¬è¯·æ±‚æˆåŠŸåçš„çŠ¶æ€å˜åŒ–ï¼šæ ¹æ®çŠ¶æ€ç è¿›è¡Œç›¸åº”çš„å‡ºæ¥ã€‚onreadystatechange è®¾ç½®ç›‘å¬å‡½æ•°ï¼Œå½“å¯¹è±¡çš„ readyState å˜ä¸º 4 çš„æ—¶å€™ï¼Œä»£è¡¨æœåŠ¡å™¨è¿”å›çš„æ•°æ®æ¥æ”¶å®Œæˆï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥é€šè¿‡åˆ¤æ–­è¯·æ±‚çš„çŠ¶æ€ï¼Œå¦‚æœçŠ¶æ€æ˜¯ 200 åˆ™ä¸ºæˆåŠŸï¼Œ404 æˆ– 500 ä¸ºå¤±è´¥ã€‚</li></ol><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> ajax</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">url</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	//1.åˆ›å»ºXMLHttpRequestå¯¹è±¡</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> xhr</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> XMLHttpRequest</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	//2.ä½¿ç”¨openæ–¹æ³•åˆ›å»ºä¸€ä¸ªGETè¯·æ±‚</span></span>
<span class="line"><span style="color:#E5C07B;">	xhr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">open</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;GET&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">url</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	//xhr.open(&#39;GET&#39;,url,true);//trueä»£è¡¨å¼‚æ­¥ï¼Œå·²å®Œæˆäº‹åŠ¡çš„é€šçŸ¥å¯ä¾›äº‹ä»¶ç›‘å¬å™¨ä½¿ç”¨;å¦‚æœä¸ºfalseï¼Œsend() æ–¹æ³•ç›´åˆ°æ”¶åˆ°ç­”å¤å‰ä¸ä¼šè¿”å›</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	//3.å‘é€è¯·æ±‚</span></span>
<span class="line"><span style="color:#E5C07B;">	xhr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">send</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	//4.ç›‘å¬è¯·æ±‚æˆåŠŸåçš„çŠ¶æ€å˜åŒ–(readyStateæ”¹å˜æ—¶è§¦å‘)ï¼šæ ¹æ®çŠ¶æ€ç (0~5)è¿›è¡Œç›¸åº”çš„å¤„ç†</span></span>
<span class="line"><span style="color:#E5C07B;">	xhr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">onreadystatechange</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		//readyStateä¸º4ä»£è¡¨æœåŠ¡å™¨è¿”å›çš„æ•°æ®æ¥æ”¶å®Œæˆ</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">xhr</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">readyState</span><span style="color:#56B6C2;"> ==</span><span style="color:#D19A66;"> 4</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			//è¯·æ±‚çš„çŠ¶æ€ä¸º200æˆ–304ä»£è¡¨æˆåŠŸ</span></span>
<span class="line"><span style="color:#C678DD;">			if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">xhr</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">status</span><span style="color:#56B6C2;"> ==</span><span style="color:#D19A66;"> 200</span><span style="color:#56B6C2;"> ||</span><span style="color:#E5C07B;"> xhr</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">status</span><span style="color:#56B6C2;"> ==</span><span style="color:#D19A66;"> 304</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">				//this.responseä»£è¡¨è¿”å›çš„æ•°æ®</span></span>
<span class="line"><span style="color:#61AFEF;">				handle</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">response</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">			} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">				//this.statusTextä»£è¡¨è¿”å›çš„æ–‡æœ¬ä¿¡æ¯</span></span>
<span class="line"><span style="color:#E5C07B;">				console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">error</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">statusText</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	};</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>ä½¿ç”¨ Promise å°è£… Ajaxï¼š</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> ajax</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">url</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#C678DD;"> new</span><span style="color:#E5C07B;"> Promise</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">resolve</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">reject</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">		let</span><span style="color:#E06C75;"> xhr</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> XMLHttpRequest</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E5C07B;">		xhr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">open</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;get&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">url</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">		xhr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">send</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E5C07B;">		xhr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">onreadystatechange</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">			if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">xhr</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">readyState</span><span style="color:#56B6C2;"> ==</span><span style="color:#D19A66;"> 4</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">				if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">xhr</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">status</span><span style="color:#56B6C2;"> ==</span><span style="color:#D19A66;"> 200</span><span style="color:#56B6C2;"> ||</span><span style="color:#E5C07B;"> xhr</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">status</span><span style="color:#56B6C2;"> ==</span><span style="color:#D19A66;"> 304</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#61AFEF;">					resolve</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">response</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">				} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">					reject</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">new</span><span style="color:#61AFEF;"> Error</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">statusText</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">				}</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#ABB2BF;">		};</span></span>
<span class="line"><span style="color:#ABB2BF;">	});</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// ä½¿ç”¨</span></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> url</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;/data.json&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#61AFEF;">ajax</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">url</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">	.</span><span style="color:#61AFEF;">then</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">res</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#E5C07B;"> console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">res</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">	.</span><span style="color:#61AFEF;">catch</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">reason</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#E5C07B;"> console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">reason</span><span style="color:#ABB2BF;">));</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>Promise å®ç°ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#61AFEF;"> getJSON</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">url</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#C678DD;"> new</span><span style="color:#E5C07B;"> Promise</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">resolve</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">reject</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">		const</span><span style="color:#E5C07B;"> xhr</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> XMLHttpRequest</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E5C07B;">		xhr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">open</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;GET&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">url</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">false</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">		xhr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setRequestHeader</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Content-Type&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;application/json&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">		xhr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">onreadystatechange</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#C678DD;">			if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">xhr</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">readyState</span><span style="color:#56B6C2;"> !==</span><span style="color:#D19A66;"> 4</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">			if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">xhr</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">status</span><span style="color:#56B6C2;"> ===</span><span style="color:#D19A66;"> 200</span><span style="color:#56B6C2;"> ||</span><span style="color:#E5C07B;"> xhr</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">status</span><span style="color:#56B6C2;"> ===</span><span style="color:#D19A66;"> 304</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#61AFEF;">				resolve</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">xhr</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">responseText</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">			} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">				reject</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">new</span><span style="color:#61AFEF;"> Error</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">xhr</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">responseText</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#ABB2BF;">		};</span></span>
<span class="line"><span style="color:#E5C07B;">		xhr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">send</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">	});</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="å®ç°-retry-å¼‚æ­¥é‡è¯•æœºåˆ¶æ–¹æ³•" tabindex="-1">å®ç° retry å¼‚æ­¥é‡è¯•æœºåˆ¶æ–¹æ³• <a class="header-anchor" href="#å®ç°-retry-å¼‚æ­¥é‡è¯•æœºåˆ¶æ–¹æ³•" aria-label="Permalink to &quot;å®ç° retry å¼‚æ­¥é‡è¯•æœºåˆ¶æ–¹æ³•&quot;">â€‹</a></h2><p>åœ¨ JavaScript ä¸­å®ç°ä¸€ä¸ª<code>retry</code>æ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡é€’å½’æˆ–å¾ªç¯æ¥é‡è¯•ä¸€ä¸ªå‡½æ•°ç›´åˆ°å®ƒæˆåŠŸæˆ–è€…è¾¾åˆ°æœ€å¤§å°è¯•æ¬¡æ•°ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„<code>retry</code>å‡½æ•°çš„å®ç°ï¼Œå®ƒæ¥å—ä¸€ä¸ªå‡½æ•°<code>fn</code>ï¼Œæœ€å¤§é‡è¯•æ¬¡æ•°<code>maxRetries</code>ï¼Œä»¥åŠä¸¤æ¬¡å°è¯•ä¹‹é—´çš„å»¶è¿Ÿæ—¶é—´<code>delay</code>ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> retry</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">fn</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">maxRetries</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">delay</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#C678DD;"> new</span><span style="color:#E5C07B;"> Promise</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">resolve</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">reject</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">		let</span><span style="color:#E06C75;"> attempts</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">		const</span><span style="color:#61AFEF;"> execute</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">			fn</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">				.</span><span style="color:#61AFEF;">then</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">resolve</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">				.</span><span style="color:#61AFEF;">catch</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">error</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">					if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">attempts</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E06C75;"> maxRetries</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">						attempts</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#61AFEF;">						setTimeout</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">execute</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">delay</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">					} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">						reject</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">error</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">					}</span></span>
<span class="line"><span style="color:#ABB2BF;">				});</span></span>
<span class="line"><span style="color:#ABB2BF;">		};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">		execute</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">	});</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>ä½¿ç”¨è¿™ä¸ª<code>retry</code>å‡½æ•°ï¼Œä½ å¯ä»¥ä¼ å…¥ä»»ä½•è¿”å› Promise çš„å‡½æ•°ã€‚å¦‚æœå‡½æ•°åœ¨æœ€å¤§å°è¯•æ¬¡æ•°å†…æˆåŠŸæ‰§è¡Œï¼Œ<code>retry</code>å‡½æ•°å°†è§£æä¸ºæˆåŠŸçš„å€¼ã€‚å¦‚æœæ‰€æœ‰å°è¯•éƒ½å¤±è´¥äº†ï¼Œå®ƒå°†è§£æä¸ºæœ€åä¸€æ¬¡å°è¯•çš„é”™è¯¯ã€‚</p><p>è¯·æ³¨æ„ï¼Œå¦‚æœä½ çš„å‡½æ•°æ˜¯åŒæ­¥çš„ï¼Œä½ éœ€è¦å°†å®ƒåŒ…è£…åœ¨ä¸€ä¸ªè¿”å› Promise çš„å‡½æ•°ä¸­ï¼Œä»¥ä¾¿ä½¿ç”¨è¿™ä¸ª<code>retry</code>æ–¹æ³•ã€‚</p><h3 id="å®ç°-2" tabindex="-1">å®ç° 2 <a class="header-anchor" href="#å®ç°-2" aria-label="Permalink to &quot;å®ç° 2&quot;">â€‹</a></h3><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#7F848E;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> * å®ç°ä¸€ä¸ªå‡½æ•°ï¼šfunction retryï¼ˆfn, interval, timesï¼‰</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> * fnæ˜¯ä¸€ä¸ªpromiseï¼Œ</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> * é‡è¯•ä¸Šé™ä¸ºtimesæ¬¡ï¼Œ</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> * é‡è¯•é—´éš”ä¸ºintervalï¼Œ</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> * é‡è¯•æˆåŠŸè¿”å›æˆåŠŸçš„ç»“æœï¼Œå¤±è´¥è¿”å›å¤±è´¥çš„ç»“æœ</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> * </span><span style="color:#C678DD;font-style:italic;">@param</span><span style="color:#E5C07B;font-style:italic;"> {*}</span><span style="color:#E06C75;font-style:italic;"> fn</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> * </span><span style="color:#C678DD;font-style:italic;">@param</span><span style="color:#E5C07B;font-style:italic;"> {*}</span><span style="color:#E06C75;font-style:italic;"> interval</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> * </span><span style="color:#C678DD;font-style:italic;">@param</span><span style="color:#E5C07B;font-style:italic;"> {*}</span><span style="color:#E06C75;font-style:italic;"> times</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">async</span><span style="color:#C678DD;"> function</span><span style="color:#61AFEF;"> reTry</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">fn</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">interval</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">times</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> allTimes</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	while</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">allTimes</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E06C75;"> times</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		try</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">			const</span><span style="color:#E5C07B;"> res</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> await</span><span style="color:#61AFEF;"> fn</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">			return</span><span style="color:#E06C75;"> res</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		} </span><span style="color:#C678DD;">catch</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">error</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">			allTimes</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">			if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">allTimes</span><span style="color:#56B6C2;"> ===</span><span style="color:#E06C75;"> times</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">				throw</span><span style="color:#E06C75;"> error</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">			} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">				await</span><span style="color:#C678DD;"> new</span><span style="color:#E5C07B;"> Promise</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">res</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">rej</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#61AFEF;"> setTimeout</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">res</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">interval</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>è¿™ä¸ª<code>reTry</code>å‡½æ•°æ˜¯ä¸€ä¸ªå¼‚æ­¥é‡è¯•æœºåˆ¶ï¼Œå®ƒå°è¯•æ‰§è¡Œä¸€ä¸ªå¼‚æ­¥å‡½æ•°<code>fn</code>ç›´åˆ°è¯¥å‡½æ•°æˆåŠŸæˆ–è€…è¾¾åˆ°æŒ‡å®šçš„é‡è¯•æ¬¡æ•°<code>times</code>ã€‚å¦‚æœ<code>fn</code>åœ¨é‡è¯•æ¬¡æ•°å†…æˆåŠŸæ‰§è¡Œï¼Œ<code>reTry</code>å‡½æ•°å°†è¿”å›<code>fn</code>çš„ç»“æœã€‚å¦‚æœ<code>fn</code>æ¯æ¬¡éƒ½å¤±è´¥ï¼Œå½“è¾¾åˆ°<code>times</code>æ¬¡æ•°æ—¶ï¼Œ<code>reTry</code>å‡½æ•°å°†æŠ›å‡ºæœ€åä¸€æ¬¡çš„é”™è¯¯ã€‚</p><p>å‡½æ•°å‚æ•°è§£é‡Šï¼š</p><ul><li><code>fn</code>: ä¸€ä¸ªè¿”å› Promise çš„å¼‚æ­¥å‡½æ•°ã€‚</li><li><code>interval</code>: ä¸¤æ¬¡é‡è¯•ä¹‹é—´çš„ç­‰å¾…æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ã€‚</li><li><code>times</code>: æœ€å¤§é‡è¯•æ¬¡æ•°ã€‚</li></ul><p>å‡½æ•°å·¥ä½œæµç¨‹ï¼š</p><ol><li>åˆå§‹åŒ–é‡è¯•æ¬¡æ•°<code>allTimes</code>ä¸º 0ã€‚</li><li>ä½¿ç”¨<code>while</code>å¾ªç¯æ¥æ§åˆ¶é‡è¯•æ¬¡æ•°ã€‚</li><li>åœ¨<code>try</code>å—ä¸­ï¼Œä½¿ç”¨<code>await</code>å…³é”®å­—ç­‰å¾…<code>fn</code>çš„æ‰§è¡Œç»“æœã€‚</li><li>å¦‚æœ<code>fn</code>æˆåŠŸæ‰§è¡Œï¼Œè¿”å›ç»“æœ<code>res</code>ã€‚</li><li>å¦‚æœ<code>fn</code>æ‰§è¡Œè¿‡ç¨‹ä¸­æŠ›å‡ºé”™è¯¯ï¼Œæ•è·è¯¥é”™è¯¯å¹¶å¢åŠ é‡è¯•æ¬¡æ•°<code>allTimes</code>ã€‚</li><li>å¦‚æœé‡è¯•æ¬¡æ•°<code>allTimes</code>è¾¾åˆ°<code>times</code>ï¼Œåˆ™æŠ›å‡ºæœ€åä¸€æ¬¡çš„é”™è¯¯ã€‚</li><li>å¦‚æœè¿˜æ²¡æœ‰è¾¾åˆ°æœ€å¤§é‡è¯•æ¬¡æ•°ï¼Œä½¿ç”¨<code>setTimeout</code>åœ¨æŒ‡å®šçš„<code>interval</code>åå†æ¬¡å°è¯•ã€‚</li></ol><p>è¿™ä¸ªå‡½æ•°ç‰¹åˆ«é€‚ç”¨äºé‚£äº›å¯èƒ½å› ä¸ºæš‚æ—¶æ€§é—®é¢˜ï¼ˆå¦‚ç½‘ç»œå»¶è¿Ÿæˆ–æœåŠ¡æš‚æ—¶ä¸å¯ç”¨ï¼‰è€Œå¤±è´¥çš„æ“ä½œï¼Œé€šè¿‡é‡è¯•å¯ä»¥å¢åŠ æ“ä½œæˆåŠŸçš„æœºä¼šã€‚</p><h2 id="å®ç°ç‰ˆæœ¬å·å¯¹æ¯”æ–¹æ³•" tabindex="-1">å®ç°ç‰ˆæœ¬å·å¯¹æ¯”æ–¹æ³• <a class="header-anchor" href="#å®ç°ç‰ˆæœ¬å·å¯¹æ¯”æ–¹æ³•" aria-label="Permalink to &quot;å®ç°ç‰ˆæœ¬å·å¯¹æ¯”æ–¹æ³•&quot;">â€‹</a></h2><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// ç‰ˆæœ¬å·å¯¹æ¯”</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> versionCompare</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">v1</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">v2</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> v1</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> v1</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">split</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;.&quot;</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#E06C75;">		v2</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> v2</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">split</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;.&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> len</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Math</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">max</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">v1</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">v2</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">	for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E06C75;"> len</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		var</span><span style="color:#E06C75;"> a</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> parseInt</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">v1</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">]) </span><span style="color:#56B6C2;">||</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">			b</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> parseInt</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">v2</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">]) </span><span style="color:#56B6C2;">||</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">a</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E06C75;"> b</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">return</span><span style="color:#56B6C2;"> -</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">a</span><span style="color:#56B6C2;"> &gt;</span><span style="color:#E06C75;"> b</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">return</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">versionCompare</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;1.1&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;1.1.0.1&quot;</span><span style="color:#ABB2BF;">));</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="å†™ç‰ˆæœ¬å·æ’åºçš„æ–¹æ³•" tabindex="-1">å†™ç‰ˆæœ¬å·æ’åºçš„æ–¹æ³• <a class="header-anchor" href="#å†™ç‰ˆæœ¬å·æ’åºçš„æ–¹æ³•" aria-label="Permalink to &quot;å†™ç‰ˆæœ¬å·æ’åºçš„æ–¹æ³•&quot;">â€‹</a></h2><p>é¢˜ç›®æè¿°:æœ‰ä¸€ç»„ç‰ˆæœ¬å·å¦‚ä¸‹ <code>[&#39;0.1.1&#39;, &#39;2.3.3&#39;, &#39;0.302.1&#39;, &#39;4.2&#39;, &#39;4.3.5&#39;, &#39;4.3.4.5&#39;]</code>ã€‚ç°åœ¨éœ€è¦å¯¹å…¶è¿›è¡Œæ’åºï¼Œæ’åºçš„ç»“æœä¸º <code>[&#39;4.3.5&#39;,&#39;4.3.4.5&#39;,&#39;2.3.3&#39;,&#39;0.302.1&#39;,&#39;0.1.1&#39;]</code></p><p>å®ç°ä»£ç å¦‚ä¸‹:</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#E5C07B;">arr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">sort</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">a</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">b</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> arr1</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> a</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">split</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;.&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> arr2</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> b</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">split</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;.&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">	while</span><span style="color:#ABB2BF;"> (</span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		const</span><span style="color:#E5C07B;"> s1</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> arr1</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#C678DD;">		const</span><span style="color:#E5C07B;"> s2</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> arr2</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#E06C75;">		i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">s1</span><span style="color:#56B6C2;"> ===</span><span style="color:#D19A66;"> undefined</span><span style="color:#56B6C2;"> ||</span><span style="color:#E06C75;"> s2</span><span style="color:#56B6C2;"> ===</span><span style="color:#D19A66;"> undefined</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">			return</span><span style="color:#E5C07B;"> arr2</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#56B6C2;"> -</span><span style="color:#E5C07B;"> arr1</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">s1</span><span style="color:#56B6C2;"> ===</span><span style="color:#E06C75;"> s2</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">continue</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E06C75;"> s2</span><span style="color:#56B6C2;"> -</span><span style="color:#E06C75;"> s1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">arr</span><span style="color:#ABB2BF;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="æœ€é•¿æ— é‡å¤å­ä¸²" tabindex="-1">æœ€é•¿æ— é‡å¤å­ä¸² <a class="header-anchor" href="#æœ€é•¿æ— é‡å¤å­ä¸²" aria-label="Permalink to &quot;æœ€é•¿æ— é‡å¤å­ä¸²&quot;">â€‹</a></h2><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> lengthOfLongestSubstring</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">str</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">str</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#56B6C2;"> ==</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">return</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> max</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> arr</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [];</span></span>
<span class="line"><span style="color:#C678DD;">	for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> s</span><span style="color:#C678DD;"> of</span><span style="color:#E06C75;"> str</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E5C07B;">arr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">includes</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">s</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#E5C07B;">			arr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">s</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">			max</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Math</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">max</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">max</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">arr</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;">			arr</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [];</span></span>
<span class="line"><span style="color:#E5C07B;">			arr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">s</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> max</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="è¯·è®¾è®¡ä¸€ä¸ª-combinations-å‡½æ•°-å®ƒæ¥æ”¶ä¸€ä¸ªæ•°å­—æ•°ç»„-è¦æ±‚è¿”å›è¿™äº›æ•°å­—çš„æ‰€æœ‰å¯èƒ½ç»„åˆæƒ…å†µã€‚" tabindex="-1">è¯·è®¾è®¡ä¸€ä¸ª <code>combinations</code> å‡½æ•°ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªæ•°å­—æ•°ç»„ï¼Œè¦æ±‚è¿”å›è¿™äº›æ•°å­—çš„æ‰€æœ‰å¯èƒ½ç»„åˆæƒ…å†µã€‚ <a class="header-anchor" href="#è¯·è®¾è®¡ä¸€ä¸ª-combinations-å‡½æ•°-å®ƒæ¥æ”¶ä¸€ä¸ªæ•°å­—æ•°ç»„-è¦æ±‚è¿”å›è¿™äº›æ•°å­—çš„æ‰€æœ‰å¯èƒ½ç»„åˆæƒ…å†µã€‚" aria-label="Permalink to &quot;è¯·è®¾è®¡ä¸€ä¸ª `combinations` å‡½æ•°ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªæ•°å­—æ•°ç»„ï¼Œè¦æ±‚è¿”å›è¿™äº›æ•°å­—çš„æ‰€æœ‰å¯èƒ½ç»„åˆæƒ…å†µã€‚&quot;">â€‹</a></h2><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> combinations</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">nums</span><span style="color:#ABB2BF;">) { ... }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">combinations</span><span style="color:#ABB2BF;">([</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">]); </span><span style="color:#7F848E;font-style:italic;">// [[], [1]];</span></span>
<span class="line"><span style="color:#61AFEF;">combinations</span><span style="color:#ABB2BF;">([</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">]); </span><span style="color:#7F848E;font-style:italic;">// [[], [1], [1, 2], [2]];</span></span>
<span class="line"><span style="color:#61AFEF;">combinations</span><span style="color:#ABB2BF;">([</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">]); </span><span style="color:#7F848E;font-style:italic;">// [[], [1], [2], [1, 2], [3], [1, 3], [2, 3], [1, 2, 3]];</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>åˆçœ‹è¿™é¢˜ç›®ï¼ŒEm...å¥½åƒæ˜¯ä¸€ä¸ªæ— åºç»„åˆï¼Œåˆ·é¢˜åˆ·åˆ°è¿‡ ğŸ˜ƒï¼Œå¿ƒæƒ³è¿™é¢˜ç¨³äº†ï¼Œä¸€ä¸ªäºŒå±‚å¾ªç¯å°±èƒ½æå®šï¼Œå®Œç¾æ‹¿ä¸‹ã€‚</p><p>å…ˆè´´æœ€ç»ˆä»£ç ï¼š</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> combinations</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">nums</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// å¼€å¤´åŠ ä¸€ä¸ªç©ºç»„åˆï¼Œå³ä¸é€‰æ‹©ä»»ä½•æ•°å­—çš„æƒ…å†µ</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> result</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [[]];</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// 1. éå†è¿™äº›æ•°å­—</span></span>
<span class="line"><span style="color:#C678DD;">	for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> n</span><span style="color:#C678DD;"> of</span><span style="color:#E06C75;"> nums</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// è·å–å½“å‰ç»“æœä¸€å…±æœ‰å¤šå°‘ï¼Œä½œä¸ºå­å¾ªç¯çš„æ¬¡æ•°</span></span>
<span class="line"><span style="color:#C678DD;">		const</span><span style="color:#E5C07B;"> length</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> result</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// 2. å­å¾ªç¯</span></span>
<span class="line"><span style="color:#C678DD;">		for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E06C75;"> length</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// 3. é‡è¦ç‚¹ï¼šæŠŠä¸Šä¸€ä¸ªç»“æœå’Œä¸‹ä¸€ä¸ªæ•°å­—ç»„åˆæˆä¸€ä¸ªæ–°çš„ç»“æœ</span></span>
<span class="line"><span style="color:#E5C07B;">			result</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">([...</span><span style="color:#E06C75;">result</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">], </span><span style="color:#E06C75;">n</span><span style="color:#ABB2BF;">]);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> result</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>è™½ç„¶å½“æ—¶å¿ƒé‡Œæƒ³å¾—æŒºç®€å•ï¼Œç»“æœç°åœºå†™å¾—æ—¶å€™è¿˜æ˜¯æŠ˜è…¾äº†å¥½ä¸€ä¼šå„¿ï¼Œä¹Ÿæœ‰ä¸€äº›ç»†å¾®çš„é”™è¯¯ ğŸ˜”ï¼Œæ‰€å¹¸æœ€ç»ˆå¤§ä½“è¿˜æ˜¯å†™å‡ºæ¥ã€‚ ï¼ˆçœŸçš„å¥½æƒ³åæ§½æ‰‹å†™ä»£ç ã€‚ã€‚ã€‚ã€‚ï¼‰</p><p>é¢è¯•åï¼Œå›æ¥åˆé‡æ–°å†™äº†ä¸€éï¼Œæ•´ç†äº†ä¸Šé¢é‚£ä¸ªç‰ˆæœ¬ï¼Œè¿˜å¦å¤–å†™äº†ä¸€ä¸ªé€’å½’ç‰ˆæœ¬ï¼ŒåŸç†éƒ½å·®ä¸å¤šï¼Œéƒ½å¯ä»¥çœ‹çœ‹ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> combinations</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">nums</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> result</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [];</span></span>
<span class="line"><span style="color:#C678DD;">	function</span><span style="color:#61AFEF;"> loop</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">currentResult</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">count</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">		result</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">([...</span><span style="color:#E06C75;">currentResult</span><span style="color:#ABB2BF;">]);</span></span>
<span class="line"><span style="color:#C678DD;">		for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> count</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E5C07B;"> nums</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">			currentResult</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">nums</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">]);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// é€’å½’</span></span>
<span class="line"><span style="color:#61AFEF;">			loop</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">currentResult</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> +</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// æ³¨æ„ä¸€å®šè¦åˆ é™¤ä¸´æ—¶ä¿å­˜çš„ç»“æœ</span></span>
<span class="line"><span style="color:#E5C07B;">			currentResult</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">pop</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#61AFEF;">	loop</span><span style="color:#ABB2BF;">([], </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> result</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="å®ç°ä¸€ä¸ªå­—ç¬¦ä¸²åŒ¹é…ç®—æ³•-ä»é•¿åº¦ä¸º-n-çš„å­—ç¬¦ä¸²-s-ä¸­-æŸ¥æ‰¾æ˜¯å¦å­˜åœ¨å­—ç¬¦ä¸²-t-t-çš„é•¿åº¦æ˜¯-m-è‹¥å­˜åœ¨è¿”å›æ‰€åœ¨ä½ç½®ã€‚" tabindex="-1">å®ç°ä¸€ä¸ªå­—ç¬¦ä¸²åŒ¹é…ç®—æ³•ï¼Œä»é•¿åº¦ä¸º n çš„å­—ç¬¦ä¸² S ä¸­ï¼ŒæŸ¥æ‰¾æ˜¯å¦å­˜åœ¨å­—ç¬¦ä¸² Tï¼ŒT çš„é•¿åº¦æ˜¯ mï¼Œè‹¥å­˜åœ¨è¿”å›æ‰€åœ¨ä½ç½®ã€‚ <a class="header-anchor" href="#å®ç°ä¸€ä¸ªå­—ç¬¦ä¸²åŒ¹é…ç®—æ³•-ä»é•¿åº¦ä¸º-n-çš„å­—ç¬¦ä¸²-s-ä¸­-æŸ¥æ‰¾æ˜¯å¦å­˜åœ¨å­—ç¬¦ä¸²-t-t-çš„é•¿åº¦æ˜¯-m-è‹¥å­˜åœ¨è¿”å›æ‰€åœ¨ä½ç½®ã€‚" aria-label="Permalink to &quot;å®ç°ä¸€ä¸ªå­—ç¬¦ä¸²åŒ¹é…ç®—æ³•ï¼Œä»é•¿åº¦ä¸º n çš„å­—ç¬¦ä¸² S ä¸­ï¼ŒæŸ¥æ‰¾æ˜¯å¦å­˜åœ¨å­—ç¬¦ä¸² Tï¼ŒT çš„é•¿åº¦æ˜¯ mï¼Œè‹¥å­˜åœ¨è¿”å›æ‰€åœ¨ä½ç½®ã€‚&quot;">â€‹</a></h2><p>å‚è€ƒç­”æ¡ˆï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// å®Œå…¨ä¸ç”¨ API var getIndexOf = function (s, t) { let n = s.length; let m =</span></span>
<span class="line"><span style="color:#E5C07B;">t</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">; </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E06C75;">n</span><span style="color:#56B6C2;"> ||</span><span style="color:#56B6C2;"> !</span><span style="color:#E06C75;">m</span><span style="color:#56B6C2;"> ||</span><span style="color:#E06C75;"> n</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E06C75;"> m</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">return</span><span style="color:#56B6C2;"> -</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">; </span><span style="color:#C678DD;">for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E06C75;"> n</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) { </span><span style="color:#C678DD;">let</span></span>
<span class="line"><span style="color:#E06C75;">j</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">; </span><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> k</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> i</span><span style="color:#ABB2BF;">; </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">s</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">k</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">===</span><span style="color:#E06C75;"> t</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">j</span><span style="color:#ABB2BF;">]) { </span><span style="color:#E06C75;">k</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">j</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">; </span><span style="color:#C678DD;">while</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">k</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E06C75;"> n</span><span style="color:#56B6C2;"> &amp;&amp;</span><span style="color:#E06C75;"> j</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E06C75;"> m</span><span style="color:#ABB2BF;">) { </span><span style="color:#C678DD;">if</span></span>
<span class="line"><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">s</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">k</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">!==</span><span style="color:#E06C75;"> t</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">j</span><span style="color:#ABB2BF;">]) </span><span style="color:#C678DD;">break</span><span style="color:#ABB2BF;">; </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">k</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">j</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">; } } </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">j</span><span style="color:#56B6C2;"> ===</span><span style="color:#E06C75;"> m</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">return</span><span style="color:#E06C75;"> i</span><span style="color:#ABB2BF;">; } } </span><span style="color:#C678DD;">return</span></span>
<span class="line"><span style="color:#56B6C2;">-</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">; } </span><span style="color:#7F848E;font-style:italic;">// æµ‹è¯• console.log(getIndexOf(&quot;Hello World&quot;, &quot;rl&quot;))</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="æ‰“å°å‡º-1-10000-ä»¥å†…çš„å¯¹ç§°æ•°" tabindex="-1">æ‰“å°å‡º <code>1~10000</code> ä»¥å†…çš„å¯¹ç§°æ•° <a class="header-anchor" href="#æ‰“å°å‡º-1-10000-ä»¥å†…çš„å¯¹ç§°æ•°" aria-label="Permalink to &quot;æ‰“å°å‡º `1~10000` ä»¥å†…çš„å¯¹ç§°æ•°&quot;">â€‹</a></h2><p>å‚è€ƒç­”æ¡ˆï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> isSymmetryNum</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">start</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">end</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> start</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E06C75;"> end</span><span style="color:#56B6C2;"> +</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		var</span><span style="color:#E06C75;"> iInversionNumber</span><span style="color:#56B6C2;"> =</span><span style="color:#56B6C2;"> +</span><span style="color:#E5C07B;">i</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">toString</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">split</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">reverse</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">join</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">iInversionNumber</span><span style="color:#56B6C2;"> ===</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> &amp;&amp;</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> &gt;</span><span style="color:#D19A66;"> 10</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">			console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#61AFEF;">isSymmetryNum</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">10000</span><span style="color:#ABB2BF;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="è®¾è®¡ä¸€ä¸ªæ–¹æ³•-ispalindrom-ä»¥åˆ¤æ–­æ˜¯å¦å›æ–‡-é¢ å€’åçš„å­—ç¬¦ä¸²å’ŒåŸæ¥çš„å­—ç¬¦ä¸²ä¸€æ ·ä¸ºå›æ–‡" tabindex="-1">è®¾è®¡ä¸€ä¸ªæ–¹æ³•(<code>isPalindrom</code>)ä»¥åˆ¤æ–­æ˜¯å¦å›æ–‡(é¢ å€’åçš„å­—ç¬¦ä¸²å’ŒåŸæ¥çš„å­—ç¬¦ä¸²ä¸€æ ·ä¸ºå›æ–‡) <a class="header-anchor" href="#è®¾è®¡ä¸€ä¸ªæ–¹æ³•-ispalindrom-ä»¥åˆ¤æ–­æ˜¯å¦å›æ–‡-é¢ å€’åçš„å­—ç¬¦ä¸²å’ŒåŸæ¥çš„å­—ç¬¦ä¸²ä¸€æ ·ä¸ºå›æ–‡" aria-label="Permalink to &quot;è®¾è®¡ä¸€ä¸ªæ–¹æ³•(`isPalindrom`)ä»¥åˆ¤æ–­æ˜¯å¦å›æ–‡(é¢ å€’åçš„å­—ç¬¦ä¸²å’ŒåŸæ¥çš„å­—ç¬¦ä¸²ä¸€æ ·ä¸ºå›æ–‡)&quot;">â€‹</a></h2><p>å‚è€ƒç­”æ¡ˆï¼š</p><p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> isPalindrome</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">str</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">typeof</span><span style="color:#E06C75;"> str</span><span style="color:#56B6C2;"> !==</span><span style="color:#98C379;"> &quot;string&quot;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#D19A66;"> false</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E5C07B;"> str</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">split</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">reverse</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">join</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">===</span><span style="color:#E06C75;"> str</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// æµ‹è¯•</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">isPalindrome</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;HelleH&quot;</span><span style="color:#ABB2BF;">)); </span><span style="color:#7F848E;font-style:italic;">// true</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">isPalindrome</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Hello&quot;</span><span style="color:#ABB2BF;">)); </span><span style="color:#7F848E;font-style:italic;">// false</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="è®¾è®¡ä¸€ä¸ªæ–¹æ³•-findmaxduplicatechar-ä»¥ç»Ÿè®¡å­—ç¬¦ä¸²ä¸­å‡ºç°æœ€å¤šæ¬¡æ•°çš„å­—ç¬¦" tabindex="-1">è®¾è®¡ä¸€ä¸ªæ–¹æ³•(<code>findMaxDuplicateChar</code>)ä»¥ç»Ÿè®¡å­—ç¬¦ä¸²ä¸­å‡ºç°æœ€å¤šæ¬¡æ•°çš„å­—ç¬¦ <a class="header-anchor" href="#è®¾è®¡ä¸€ä¸ªæ–¹æ³•-findmaxduplicatechar-ä»¥ç»Ÿè®¡å­—ç¬¦ä¸²ä¸­å‡ºç°æœ€å¤šæ¬¡æ•°çš„å­—ç¬¦" aria-label="Permalink to &quot;è®¾è®¡ä¸€ä¸ªæ–¹æ³•(`findMaxDuplicateChar`)ä»¥ç»Ÿè®¡å­—ç¬¦ä¸²ä¸­å‡ºç°æœ€å¤šæ¬¡æ•°çš„å­—ç¬¦&quot;">â€‹</a></h2><p>å‚è€ƒç­”æ¡ˆï¼š</p><p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> findMaxDuplicateChar</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">str</span><span style="color:#ABB2BF;">) { </span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> cnt</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {},</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // ç”¨æ¥è®°å½•æ‰€æœ‰çš„å­—ç¬¦çš„å‡ºç°é¢‘æ¬¡ </span></span>
<span class="line"><span style="color:#E06C75;">    c</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &#39;&#39;</span><span style="color:#ABB2BF;">; </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    //ç”¨æ¥è®°å½•æœ€å¤§é¢‘æ¬¡çš„å­—ç¬¦ </span></span>
<span class="line"><span style="color:#C678DD;">    for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E5C07B;"> str</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) { </span></span>
<span class="line"><span style="color:#C678DD;">        let</span><span style="color:#E06C75;"> ci</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> str</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">]; </span></span>
<span class="line"><span style="color:#C678DD;">        if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E06C75;">cnt</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">ci</span><span style="color:#ABB2BF;">]) { </span></span>
<span class="line"><span style="color:#E06C75;">            cnt</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">ci</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">; </span></span>
<span class="line"><span style="color:#ABB2BF;">        } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> { </span></span>
<span class="line"><span style="color:#E06C75;">            cnt</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">ci</span><span style="color:#ABB2BF;">]</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">; } </span></span>
<span class="line"><span style="color:#C678DD;">        if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">c</span><span style="color:#56B6C2;"> ==</span><span style="color:#98C379;"> &#39;&#39;</span><span style="color:#56B6C2;"> ||</span><span style="color:#E06C75;"> cnt</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">ci</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">&gt;</span><span style="color:#E06C75;"> cnt</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">c</span><span style="color:#ABB2BF;">]) { </span><span style="color:#E06C75;">c</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> ci</span><span style="color:#ABB2BF;">; } </span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span></span>
<span class="line"><span style="color:#E5C07B;">    console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cnt</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">// { H: 1, e: 1, l: 3, o: 2, &#39; &#39;: 1, W: 1, r: 1, d: 1 }</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> c</span><span style="color:#ABB2BF;">; </span></span>
<span class="line"><span style="color:#ABB2BF;">} </span><span style="color:#7F848E;font-style:italic;">// æµ‹è¯• </span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">findMaxDuplicateChar</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;Hello World&#39;</span><span style="color:#ABB2BF;">)); </span><span style="color:#7F848E;font-style:italic;">// l</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h2 id="æ€ä¹ˆå®ç°ä¸€ä¸ªè®¡ç®—ä¸€å¹´ä¸­æœ‰å¤šå°‘å‘¨" tabindex="-1">æ€ä¹ˆå®ç°ä¸€ä¸ªè®¡ç®—ä¸€å¹´ä¸­æœ‰å¤šå°‘å‘¨ï¼Ÿ <a class="header-anchor" href="#æ€ä¹ˆå®ç°ä¸€ä¸ªè®¡ç®—ä¸€å¹´ä¸­æœ‰å¤šå°‘å‘¨" aria-label="Permalink to &quot;æ€ä¹ˆå®ç°ä¸€ä¸ªè®¡ç®—ä¸€å¹´ä¸­æœ‰å¤šå°‘å‘¨ï¼Ÿ&quot;">â€‹</a></h2><p><strong>è€ƒå¯Ÿç‚¹ï¼šç®—æ³•</strong></p><details class="details custom-block"><summary>æŸ¥çœ‹å‚è€ƒå›ç­”</summary><p>é¦–å…ˆä½ å¾—çŸ¥é“æ˜¯ä¸æ˜¯é—°å¹´ï¼Œä¹Ÿå°±æ˜¯ä¸€å¹´æ˜¯ 365 è¿˜æ˜¯ 366</p><p>å…¶æ¬¡ä½ å¾—çŸ¥é“å½“å¹´ 1 æœˆ 1 å·æ˜¯å‘¨å‡ ã€‚å‡å¦‚æ˜¯å‘¨äº”ï¼Œä¸€å¹´ 365 å¤©æŠŠ 1 å· 2 å· 3 å·å‡å»ï¼Œä¹Ÿå°±æ˜¯æŠŠç¬¬ä¸€ä¸ªä¸åˆ°ä¸€å‘¨çš„å¤©æ•°å‡å»ç­‰äº 362</p><p>è¿˜å¾—çŸ¥é“æœ€åä¸€å¤©æ˜¯å‘¨å‡ ï¼ŒåŠ å…¥æ˜¯å‘¨äº”ï¼Œéœ€è¦æŠŠå‘¨ä¸€åˆ°å‘¨äº”å‡å»ï¼Œä¹Ÿå°±æ˜¯ 362-5=357ã€æ­£å¸¸æƒ…å†µ 357 è¿™ä¸ªæ•°è®¡ç®—å‡ºæ¥æ˜¯ 7 çš„å€æ•°ã€‚357/7=51 ã€‚å³ä¸ºå‘¨æ•°ã€‚</p></details><h2 id="ç»™-string-å¯¹è±¡æ·»åŠ ä¸€ä¸ªæ–¹æ³•-ä¼ å…¥ä¸€ä¸ª-string-ç±»å‹çš„å‚æ•°-ç„¶åå°†-string-çš„æ¯ä¸ªå­—ç¬¦é—´ä»·æ ¼ç©ºæ ¼è¿”å›-ä¾‹å¦‚" tabindex="-1">ç»™ String å¯¹è±¡æ·»åŠ ä¸€ä¸ªæ–¹æ³•ï¼Œä¼ å…¥ä¸€ä¸ª string ç±»å‹çš„å‚æ•°ï¼Œç„¶åå°† string çš„æ¯ä¸ªå­—ç¬¦é—´ä»·æ ¼ç©ºæ ¼è¿”å›ï¼Œä¾‹å¦‚ <a class="header-anchor" href="#ç»™-string-å¯¹è±¡æ·»åŠ ä¸€ä¸ªæ–¹æ³•-ä¼ å…¥ä¸€ä¸ª-string-ç±»å‹çš„å‚æ•°-ç„¶åå°†-string-çš„æ¯ä¸ªå­—ç¬¦é—´ä»·æ ¼ç©ºæ ¼è¿”å›-ä¾‹å¦‚" aria-label="Permalink to &quot;ç»™ String å¯¹è±¡æ·»åŠ ä¸€ä¸ªæ–¹æ³•ï¼Œä¼ å…¥ä¸€ä¸ª string ç±»å‹çš„å‚æ•°ï¼Œç„¶åå°† string çš„æ¯ä¸ªå­—ç¬¦é—´ä»·æ ¼ç©ºæ ¼è¿”å›ï¼Œä¾‹å¦‚&quot;">â€‹</a></h2><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#61AFEF;">addSpace</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;hello world&quot;</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">// -&gt; &#39;h e l l o ?w o r l d&#39;</span></span>
<span class="line"><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prototype</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">spacify</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">split</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">join</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot; &quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="ç”Ÿæˆ-5-ä¸ªä¸åŒçš„éšæœºæ•°" tabindex="-1">ç”Ÿæˆ 5 ä¸ªä¸åŒçš„éšæœºæ•°ï¼› <a class="header-anchor" href="#ç”Ÿæˆ-5-ä¸ªä¸åŒçš„éšæœºæ•°" aria-label="Permalink to &quot;ç”Ÿæˆ 5 ä¸ªä¸åŒçš„éšæœºæ•°ï¼›&quot;">â€‹</a></h2><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// æ€è·¯ï¼š5 ä¸ªä¸åŒçš„æ•°ï¼Œæ¯ç”Ÿæˆä¸€æ¬¡å°±å’Œå‰é¢çš„æ‰€æœ‰æ•°å­—ç›¸æ¯”è¾ƒï¼Œå¦‚æœæœ‰ç›¸åŒçš„ï¼Œåˆ™æ”¾å¼ƒå½“å‰ç”Ÿæˆçš„æ•°å­—ï¼</span></span>
<span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> num1</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [];</span></span>
<span class="line"><span style="color:#C678DD;">for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#D19A66;"> 5</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">	num1</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#E5C07B;"> Math</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">floor</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Math</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">random</span><span style="color:#ABB2BF;">() </span><span style="color:#56B6C2;">*</span><span style="color:#D19A66;"> 10</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">+</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">; </span><span style="color:#7F848E;font-style:italic;">// èŒƒå›´æ˜¯ [1, 10]</span></span>
<span class="line"><span style="color:#C678DD;">	for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> j</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">j</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E06C75;"> i</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">j</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">num1</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">==</span><span style="color:#E06C75;"> num1</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">j</span><span style="color:#ABB2BF;">]) {</span></span>
<span class="line"><span style="color:#E06C75;">			i</span><span style="color:#56B6C2;">--</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="æœ‰è¿™æ ·ä¸€ä¸ª-url-http-item-taobao-com-item-htm-a-1-b-2-c-d-xxx-e" tabindex="-1">æœ‰è¿™æ ·ä¸€ä¸ª URLï¼š<code>http://item.taobao.com/item.htm?a=1&amp;b=2&amp;c=&amp;d=xxx&amp;e</code> <a class="header-anchor" href="#æœ‰è¿™æ ·ä¸€ä¸ª-url-http-item-taobao-com-item-htm-a-1-b-2-c-d-xxx-e" aria-label="Permalink to &quot;æœ‰è¿™æ ·ä¸€ä¸ª URLï¼š`http://item.taobao.com/item.htm?a=1&amp;b=2&amp;c=&amp;d=xxx&amp;e`&quot;">â€‹</a></h2><p>è¯·å†™ä¸€æ®µ JS ç¨‹åºæå– URL ä¸­çš„å„ä¸ª GET å‚æ•°(å‚æ•°åå’Œå‚æ•°ä¸ªæ•°ä¸ç¡®å®š)ï¼Œå°†å…¶æŒ‰ key-value å½¢å¼è¿”å›åˆ°ä¸€ä¸ª json ç»“æ„ä¸­ï¼Œå¦‚<code>{a:â€™1â€², b:â€™2â€², c:â€, d:â€™xxxâ€™, e:undefined}</code>ã€‚</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> url</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;http://item.taobao.com/item.htm?a=1&amp;b=2&amp;c=&amp;d=xxx&amp;e&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> gets</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> url</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">split</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;?&quot;</span><span style="color:#ABB2BF;">)[</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> getsArr</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> gets</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">split</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;&amp;&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> obj</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {};</span></span>
<span class="line"><span style="color:#C678DD;">for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E5C07B;"> getsArr</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">	obj</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">getsArr</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">].</span><span style="color:#61AFEF;">split</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;=&quot;</span><span style="color:#ABB2BF;">)[</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">]] </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> getsArr</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">].</span><span style="color:#61AFEF;">split</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;=&quot;</span><span style="color:#ABB2BF;">)[</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#C678DD;">return</span><span style="color:#E06C75;"> obj</span><span style="color:#ABB2BF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="è§£æ-url-æˆä¸€ä¸ªå¯¹è±¡" tabindex="-1">è§£æ URL æˆä¸€ä¸ªå¯¹è±¡ï¼Ÿ <a class="header-anchor" href="#è§£æ-url-æˆä¸€ä¸ªå¯¹è±¡" aria-label="Permalink to &quot;è§£æ URL æˆä¸€ä¸ªå¯¹è±¡ï¼Ÿ&quot;">â€‹</a></h2><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prototype</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">urlQueryString</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> url</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">split</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;?&quot;</span><span style="color:#ABB2BF;">)[</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">].</span><span style="color:#61AFEF;">split</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;&amp;&quot;</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#E06C75;">		len</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> url</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">	this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">url</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {};</span></span>
<span class="line"><span style="color:#C678DD;">	for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E06C75;"> len</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> +=</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		var</span><span style="color:#E06C75;"> cell</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> url</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">].</span><span style="color:#61AFEF;">split</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;=&quot;</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#E06C75;">			key</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> cell</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">],</span></span>
<span class="line"><span style="color:#E06C75;">			val</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> cell</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">url</span><span style="color:#ABB2BF;">[</span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#56B6C2;"> +</span><span style="color:#E06C75;"> key</span><span style="color:#56B6C2;"> +</span><span style="color:#98C379;"> &quot;&quot;</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> val</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">url</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> url</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;?name=12&amp;age=23&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">url</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">urlQueryString</span><span style="color:#ABB2BF;">().</span><span style="color:#E06C75;">age</span><span style="color:#ABB2BF;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="å·²çŸ¥æœ‰å­—ç¬¦ä¸²-foo-get-element-by-id-å†™ä¸€ä¸ª-function" tabindex="-1">å·²çŸ¥æœ‰å­—ç¬¦ä¸² foo=&quot;get-element-by-id&quot;,å†™ä¸€ä¸ª function <a class="header-anchor" href="#å·²çŸ¥æœ‰å­—ç¬¦ä¸²-foo-get-element-by-id-å†™ä¸€ä¸ª-function" aria-label="Permalink to &quot;å·²çŸ¥æœ‰å­—ç¬¦ä¸² foo=&quot;get-element-by-id&quot;,å†™ä¸€ä¸ª function&quot;">â€‹</a></h2><p>ç­”æ¡ˆï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> combo</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">msg</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> arr</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> msg</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">split</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;-&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> len</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> arr</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">; </span><span style="color:#7F848E;font-style:italic;">// å°† arr.length å­˜å‚¨åœ¨ä¸€ä¸ªå±€éƒ¨å˜é‡å¯ä»¥æé«˜ for å¾ªç¯æ•ˆç‡</span></span>
<span class="line"><span style="color:#C678DD;">	for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E06C75;"> len</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">		arr</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span></span>
<span class="line"><span style="color:#E06C75;">			arr</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">].</span><span style="color:#61AFEF;">charAt</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">toUpperCase</span><span style="color:#ABB2BF;">() </span><span style="color:#56B6C2;">+</span><span style="color:#E06C75;"> arr</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">].</span><span style="color:#61AFEF;">substr</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">arr</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">].</span><span style="color:#E06C75;">length</span><span style="color:#56B6C2;"> -</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#E06C75;">	msg</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> arr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">join</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> msg</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="å†™å‡ºå‡½æ•°-datedemo-çš„è¿”å›ç»“æœ-ç³»ç»Ÿæ—¶é—´å‡å®šä¸ºä»Šå¤©" tabindex="-1">å†™å‡ºå‡½æ•° DateDemo çš„è¿”å›ç»“æœï¼Œç³»ç»Ÿæ—¶é—´å‡å®šä¸ºä»Šå¤© <a class="header-anchor" href="#å†™å‡ºå‡½æ•°-datedemo-çš„è¿”å›ç»“æœ-ç³»ç»Ÿæ—¶é—´å‡å®šä¸ºä»Šå¤©" aria-label="Permalink to &quot;å†™å‡ºå‡½æ•° DateDemo çš„è¿”å›ç»“æœï¼Œç³»ç»Ÿæ—¶é—´å‡å®šä¸ºä»Šå¤©&quot;">â€‹</a></h2><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> DateDemo</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> d</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">		s</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;ä»Šå¤©æ—¥æœŸæ˜¯ï¼š&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">	d</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Date</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E06C75;">	s</span><span style="color:#56B6C2;"> +=</span><span style="color:#E5C07B;"> d</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getMonth</span><span style="color:#ABB2BF;">() </span><span style="color:#56B6C2;">+</span><span style="color:#98C379;"> &quot;/&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">	s</span><span style="color:#56B6C2;"> +=</span><span style="color:#E5C07B;"> d</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getDate</span><span style="color:#ABB2BF;">() </span><span style="color:#56B6C2;">+</span><span style="color:#98C379;"> &quot;/&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">	s</span><span style="color:#56B6C2;"> +=</span><span style="color:#E5C07B;"> d</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getFullYear</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> s</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>ç»“æœï¼šä»Šå¤©æ—¥æœŸæ˜¯ï¼š7/17/2024</p><h2 id="è¾“å‡ºä»Šå¤©çš„æ—¥æœŸ" tabindex="-1">è¾“å‡ºä»Šå¤©çš„æ—¥æœŸ <a class="header-anchor" href="#è¾“å‡ºä»Šå¤©çš„æ—¥æœŸ" aria-label="Permalink to &quot;è¾“å‡ºä»Šå¤©çš„æ—¥æœŸ&quot;">â€‹</a></h2><p>ä»¥ YYYY-MM-DD çš„æ–¹å¼ï¼Œæ¯”å¦‚ä»Šå¤©æ˜¯ 2024 å¹´ 9 æœˆ 26 æ—¥ï¼Œåˆ™è¾“å‡º 2024-09-26</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> log</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">	console</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">log</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">apply</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">console</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">arguments</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> d</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Date</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// è·å–å¹´ï¼ŒgetFullYear()è¿”å› 4 ä½çš„æ•°å­—</span></span>
<span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> year</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> d</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getFullYear</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// è·å–æœˆï¼Œæœˆä»½æ¯”è¾ƒç‰¹æ®Šï¼Œ0 æ˜¯ 1 æœˆï¼Œ11 æ˜¯ 12 æœˆ</span></span>
<span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> month</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> d</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getMonth</span><span style="color:#ABB2BF;">() </span><span style="color:#56B6C2;">+</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// å˜æˆä¸¤ä½</span></span>
<span class="line"><span style="color:#E06C75;">month</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> month</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#D19A66;"> 10</span><span style="color:#C678DD;"> ?</span><span style="color:#98C379;"> &quot;0&quot;</span><span style="color:#56B6C2;"> +</span><span style="color:#E06C75;"> month</span><span style="color:#C678DD;"> :</span><span style="color:#E06C75;"> month</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// è·å–æ—¥</span></span>
<span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> day</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> d</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getDate</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E06C75;">day</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> day</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#D19A66;"> 10</span><span style="color:#C678DD;"> ?</span><span style="color:#98C379;"> &quot;0&quot;</span><span style="color:#56B6C2;"> +</span><span style="color:#E06C75;"> day</span><span style="color:#C678DD;"> :</span><span style="color:#E06C75;"> day</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#61AFEF;">alert</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">year</span><span style="color:#56B6C2;"> +</span><span style="color:#98C379;"> &quot;-&quot;</span><span style="color:#56B6C2;"> +</span><span style="color:#E06C75;"> month</span><span style="color:#56B6C2;"> +</span><span style="color:#98C379;"> &quot;-&quot;</span><span style="color:#56B6C2;"> +</span><span style="color:#E06C75;"> day</span><span style="color:#ABB2BF;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="è¾“å‡ºä»Šå¤©çš„æ—¥æœŸ-ä»¥-yyyy-mm-dd-çš„æ–¹å¼-æ¯”å¦‚ä»Šå¤©æ˜¯-2024-å¹´-9-æœˆ-26-æ—¥-åˆ™è¾“å‡º-2024-09-26" tabindex="-1">è¾“å‡ºä»Šå¤©çš„æ—¥æœŸï¼Œä»¥ YYYY-MM-DD çš„æ–¹å¼ï¼Œæ¯”å¦‚ä»Šå¤©æ˜¯ 2024 å¹´ 9 æœˆ 26 æ—¥ï¼Œåˆ™è¾“å‡º 2024-09-26 <a class="header-anchor" href="#è¾“å‡ºä»Šå¤©çš„æ—¥æœŸ-ä»¥-yyyy-mm-dd-çš„æ–¹å¼-æ¯”å¦‚ä»Šå¤©æ˜¯-2024-å¹´-9-æœˆ-26-æ—¥-åˆ™è¾“å‡º-2024-09-26" aria-label="Permalink to &quot;è¾“å‡ºä»Šå¤©çš„æ—¥æœŸï¼Œä»¥ YYYY-MM-DD çš„æ–¹å¼ï¼Œæ¯”å¦‚ä»Šå¤©æ˜¯ 2024 å¹´ 9 æœˆ 26 æ—¥ï¼Œåˆ™è¾“å‡º 2024-09-26&quot;">â€‹</a></h2><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> d</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Date</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// è·å–å¹´ï¼ŒgetFullYear()è¿”å› 4 ä½çš„æ•°å­—</span></span>
<span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> year</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> d</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getFullYear</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// è·å–æœˆï¼Œæœˆä»½æ¯”è¾ƒç‰¹æ®Šï¼Œ0 æ˜¯ 1 æœˆï¼Œ11 æ˜¯ 12 æœˆ</span></span>
<span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> month</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> d</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getMonth</span><span style="color:#ABB2BF;">() </span><span style="color:#56B6C2;">+</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// å˜æˆä¸¤ä½</span></span>
<span class="line"><span style="color:#E06C75;">month</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> month</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#D19A66;"> 10</span><span style="color:#C678DD;"> ?</span><span style="color:#98C379;"> &quot;0&quot;</span><span style="color:#56B6C2;"> +</span><span style="color:#E06C75;"> month</span><span style="color:#C678DD;"> :</span><span style="color:#E06C75;"> month</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// è·å–æ—¥</span></span>
<span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> day</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> d</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getDate</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E06C75;">day</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> day</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#D19A66;"> 10</span><span style="color:#C678DD;"> ?</span><span style="color:#98C379;"> &quot;0&quot;</span><span style="color:#56B6C2;"> +</span><span style="color:#E06C75;"> day</span><span style="color:#C678DD;"> :</span><span style="color:#E06C75;"> day</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#61AFEF;">alert</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">year</span><span style="color:#56B6C2;"> +</span><span style="color:#98C379;"> &quot;-&quot;</span><span style="color:#56B6C2;"> +</span><span style="color:#E06C75;"> month</span><span style="color:#56B6C2;"> +</span><span style="color:#98C379;"> &quot;-&quot;</span><span style="color:#56B6C2;"> +</span><span style="color:#E06C75;"> day</span><span style="color:#ABB2BF;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="è¯·è®¾è®¡ä¸€ä¸ªè®¡ç®—å™¨-counter-ç±»-å®ƒèƒ½ä½¿ç”¨åŠ æ³•ã€å‡æ³•ã€ä¹˜æ³•ã€é™¤æ³•çš„æ“ä½œ-å¹¶ä¸”æœ‰ä¸€ä¸ªèƒ½è·å–ç»“æœ-get-çš„æ–¹æ³•-å¹¶é€šè¿‡å¯é€‰é“¾å¼è°ƒç”¨è€Œå·¥ä½œã€‚" tabindex="-1">è¯·è®¾è®¡ä¸€ä¸ªè®¡ç®—å™¨ï¼ˆCounterï¼‰ç±»ï¼Œå®ƒèƒ½ä½¿ç”¨åŠ æ³•ã€å‡æ³•ã€ä¹˜æ³•ã€é™¤æ³•çš„æ“ä½œï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ªèƒ½è·å–ç»“æœï¼ˆgetï¼‰çš„æ–¹æ³•ï¼Œå¹¶é€šè¿‡å¯é€‰é“¾å¼è°ƒç”¨è€Œå·¥ä½œã€‚ <a class="header-anchor" href="#è¯·è®¾è®¡ä¸€ä¸ªè®¡ç®—å™¨-counter-ç±»-å®ƒèƒ½ä½¿ç”¨åŠ æ³•ã€å‡æ³•ã€ä¹˜æ³•ã€é™¤æ³•çš„æ“ä½œ-å¹¶ä¸”æœ‰ä¸€ä¸ªèƒ½è·å–ç»“æœ-get-çš„æ–¹æ³•-å¹¶é€šè¿‡å¯é€‰é“¾å¼è°ƒç”¨è€Œå·¥ä½œã€‚" aria-label="Permalink to &quot;è¯·è®¾è®¡ä¸€ä¸ªè®¡ç®—å™¨ï¼ˆCounterï¼‰ç±»ï¼Œå®ƒèƒ½ä½¿ç”¨åŠ æ³•ã€å‡æ³•ã€ä¹˜æ³•ã€é™¤æ³•çš„æ“ä½œï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ªèƒ½è·å–ç»“æœï¼ˆgetï¼‰çš„æ–¹æ³•ï¼Œå¹¶é€šè¿‡å¯é€‰é“¾å¼è°ƒç”¨è€Œå·¥ä½œã€‚&quot;">â€‹</a></h2><p>å…·ä½“åŸé¢˜æè¿°å°ç¼–å·²ç»è®°ä¸å¤ªæ¸…äº† ğŸ˜—ï¼Œåæ­£å°±æ˜¯æä¸€ä¸ªè®¡ç®—å™¨åŠŸèƒ½ï¼Œå…³é”®æ­¥éª¤æ˜¯è¦å®ç°é“¾å¼è°ƒç”¨ï¼Œæœ‰ç‚¹åƒæ˜¯æŸ¯é‡ŒåŒ–å‡½æ•°ï¼Œä½†å¯èƒ½ç¨å¾®æ›´ç®€å•ä¸€äº›ã€‚</p><p>ï¼ˆå…³äºæŸ¯é‡ŒåŒ–å‡½æ•°ï¼Œå¯ä»¥çœ‹çœ‹å°ç¼–ä¹‹å‰å†™å¾—ä¸€ç¯‡æ–‡ç« ï¼Œ<a href="https://juejin.cn/post/6979778428505423886#heading-14" target="_blank" rel="noreferrer">ä¼ é€é—¨</a>ï¼‰</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">class</span><span style="color:#E5C07B;"> Counter</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">	result</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// åŠ æ³•</span></span>
<span class="line"><span style="color:#61AFEF;">	addition</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">val</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">result</span><span style="color:#56B6C2;"> +=</span><span style="color:#E06C75;"> val</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// å‡æ³•</span></span>
<span class="line"><span style="color:#61AFEF;">	subtraction</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">val</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">result</span><span style="color:#56B6C2;"> -=</span><span style="color:#E06C75;"> val</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// ä¹˜æ³•</span></span>
<span class="line"><span style="color:#61AFEF;">	multiplication</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">val</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">result</span><span style="color:#56B6C2;"> *=</span><span style="color:#E06C75;"> val</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// é™¤æ³•</span></span>
<span class="line"><span style="color:#61AFEF;">	division</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">val</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">result</span><span style="color:#56B6C2;"> /=</span><span style="color:#E06C75;"> val</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#61AFEF;">	get</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">result</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>å…·ä½“ä½¿ç”¨ï¼š</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> counter</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Counter</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> result</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> counter</span></span>
<span class="line"><span style="color:#ABB2BF;">	.</span><span style="color:#61AFEF;">addition</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">	.</span><span style="color:#61AFEF;">subtraction</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">	.</span><span style="color:#61AFEF;">addition</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">19</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">	.</span><span style="color:#61AFEF;">division</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">	.</span><span style="color:#61AFEF;">multiplication</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">	.</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(); </span><span style="color:#7F848E;font-style:italic;">// 20</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>åŸºç¡€åŠŸèƒ½è¿˜æ˜¯ç›¸å¯¹æ¯”è¾ƒç®€å•ï¼Œä½†åé¢å¥½åƒè¿˜æœ‰ä¸€ä¸ªè¦æ±‚æ˜¯å®ç°&quot;å…ˆä¹˜é™¤ååŠ å‡&quot;çš„è§„åˆ™ï¼Œå¥ˆä½•å°ç¼–å¤ªèœå°±æ²¡å†™å‡ºæ¥ï¼Œå¦‚æœæœ‰å¤§ä½¬å†™å‡ºæ¥äº†ï¼Œæ¬¢è¿è¯„è®ºåŒºç•™è¨€ ğŸ˜ã€‚</p><p>å“¦ï¼Œå¯¹äº†ï¼Œè¿˜æœ‰ä¸€ä¸ªå‡½æ•°ç‰ˆæœ¬çš„ï¼Œæ„Ÿå…´è¶£å¯ä»¥ç§ç§ï¼š</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> counter</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> result</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	function</span><span style="color:#61AFEF;"> addition</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">val</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">		result</span><span style="color:#56B6C2;"> +=</span><span style="color:#E06C75;"> val</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#C678DD;">	function</span><span style="color:#61AFEF;"> subtraction</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">val</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">		result</span><span style="color:#56B6C2;"> -=</span><span style="color:#E06C75;"> val</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#C678DD;">	function</span><span style="color:#61AFEF;"> multiplication</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">val</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">		result</span><span style="color:#56B6C2;"> *=</span><span style="color:#E06C75;"> val</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#C678DD;">	function</span><span style="color:#61AFEF;"> division</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">val</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">		result</span><span style="color:#56B6C2;"> /=</span><span style="color:#E06C75;"> val</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#C678DD;">	function</span><span style="color:#61AFEF;"> get</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E06C75;"> result</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">addition</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">subtraction</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">multiplication</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">division</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">get</span><span style="color:#ABB2BF;"> };</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h2 id="å®ç°ä¸€ä¸ªå‡½æ•°-clone" tabindex="-1">å®ç°ä¸€ä¸ªå‡½æ•° clone <a class="header-anchor" href="#å®ç°ä¸€ä¸ªå‡½æ•°-clone" aria-label="Permalink to &quot;å®ç°ä¸€ä¸ªå‡½æ•° clone&quot;">â€‹</a></h2><p>å¯ä»¥å¯¹ JavaScript ä¸­çš„ 5 ç§ä¸»è¦çš„æ•°æ®ç±»å‹,åŒ…æ‹¬ Number ã€ String ã€Object ã€ Array ã€ Boolean ï¼‰è¿›è¡Œå€¼å¤åˆ¶</p><ul><li>è€ƒå¯Ÿç‚¹ 1ï¼šå¯¹äºåŸºæœ¬æ•°æ®ç±»å‹å’Œå¼•ç”¨æ•°æ®ç±»å‹åœ¨å†…å­˜ä¸­å­˜æ”¾çš„æ˜¯å€¼è¿˜æ˜¯æŒ‡é’ˆè¿™ä¸€åŒºåˆ«æ˜¯å¦æ¸…æ¥š</li><li>è€ƒå¯Ÿç‚¹ 2ï¼šæ˜¯å¦çŸ¥é“å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå˜é‡æ˜¯ä»€ä¹ˆç±»å‹çš„</li></ul><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// æ–¹æ³•ä¸€ï¼š</span></span>
<span class="line"><span style="color:#E5C07B;">Object</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prototype</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">clone</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> o</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">constructor</span><span style="color:#56B6C2;"> ===</span><span style="color:#E06C75;"> Array</span><span style="color:#C678DD;"> ?</span><span style="color:#ABB2BF;"> [] </span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> {};</span></span>
<span class="line"><span style="color:#C678DD;">	for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> e</span><span style="color:#C678DD;"> in</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">		o</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">e</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#C678DD;"> typeof</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">e</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">===</span><span style="color:#98C379;"> &quot;object&quot;</span><span style="color:#C678DD;"> ?</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">e</span><span style="color:#ABB2BF;">].</span><span style="color:#61AFEF;">clone</span><span style="color:#ABB2BF;">() </span><span style="color:#C678DD;">:</span><span style="color:#E06C75;"> th</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> o</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// æ–¹æ³•äºŒï¼š</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> * å…‹éš†ä¸€ä¸ªå¯¹è±¡</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> * </span><span style="color:#C678DD;font-style:italic;">@param</span><span style="color:#E06C75;font-style:italic;"> Obj</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> * </span><span style="color:#C678DD;font-style:italic;">@returns</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> clone</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">Obj</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> buf</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">Obj</span><span style="color:#C678DD;"> instanceof</span><span style="color:#E5C07B;"> Array</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">		buf</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> []; </span><span style="color:#7F848E;font-style:italic;">//åˆ›å»ºä¸€ä¸ªç©ºçš„æ•°ç»„</span></span>
<span class="line"><span style="color:#C678DD;">		var</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Obj</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">		while</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">--</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">			buf</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#61AFEF;"> clone</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">Obj</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">]);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E06C75;"> buf</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	} </span><span style="color:#C678DD;">else</span><span style="color:#C678DD;"> if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">Obj</span><span style="color:#C678DD;"> instanceof</span><span style="color:#E5C07B;"> Object</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">		buf</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {}; </span><span style="color:#7F848E;font-style:italic;">//åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡</span></span>
<span class="line"><span style="color:#C678DD;">		for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> k</span><span style="color:#C678DD;"> in</span><span style="color:#E06C75;"> Obj</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			//ä¸ºè¿™ä¸ªå¯¹è±¡æ·»åŠ æ–°çš„å±æ€§</span></span>
<span class="line"><span style="color:#E06C75;">			buf</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">k</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#61AFEF;"> clone</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">Obj</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">k</span><span style="color:#ABB2BF;">]);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E06C75;"> buf</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		//æ™®é€šå˜é‡ç›´æ¥èµ‹å€¼</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E06C75;"> Obj</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">/** * å¯¹è±¡å…‹éš† * æ”¯æŒåŸºæœ¬æ•°æ®ç±»å‹åŠå¯¹è±¡ * é€’å½’æ–¹æ³• */</span><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> clone</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">obj</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">    var</span><span style="color:#E06C75;"> o</span><span style="color:#ABB2BF;">; </span></span>
<span class="line"><span style="color:#C678DD;">    switch</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">typeof</span><span style="color:#E06C75;"> obj</span><span style="color:#ABB2BF;">) { </span></span>
<span class="line"><span style="color:#C678DD;">        case</span><span style="color:#98C379;"> &quot;undefined&quot;</span><span style="color:#ABB2BF;">: </span></span>
<span class="line"><span style="color:#C678DD;">            break</span><span style="color:#ABB2BF;">; </span></span>
<span class="line"><span style="color:#C678DD;">        case</span><span style="color:#98C379;"> &quot;string&quot;</span><span style="color:#ABB2BF;">: </span></span>
<span class="line"><span style="color:#E06C75;">            o</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> obj</span><span style="color:#56B6C2;"> +</span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;">; </span></span>
<span class="line"><span style="color:#C678DD;">            break</span><span style="color:#ABB2BF;">; </span></span>
<span class="line"><span style="color:#C678DD;">        case</span><span style="color:#98C379;"> &quot;number&quot;</span><span style="color:#ABB2BF;">: </span></span>
<span class="line"><span style="color:#E06C75;">            o</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> obj</span><span style="color:#56B6C2;"> -</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">; </span></span>
<span class="line"><span style="color:#C678DD;">            break</span><span style="color:#ABB2BF;">; </span></span>
<span class="line"><span style="color:#C678DD;">        case</span><span style="color:#98C379;"> &quot;boolean&quot;</span><span style="color:#ABB2BF;">: </span></span>
<span class="line"><span style="color:#E06C75;">            o</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> obj</span><span style="color:#ABB2BF;">; </span></span>
<span class="line"><span style="color:#C678DD;">            break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">        case</span><span style="color:#98C379;"> &quot;object&quot;</span><span style="color:#ABB2BF;">: </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // object åˆ†ä¸ºä¸¤ç§æƒ…å†µ å¯¹è±¡(Object)æˆ–æ•°ç»„(Array) </span></span>
<span class="line"><span style="color:#C678DD;">        if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">obj</span><span style="color:#56B6C2;"> ===</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">) { </span></span>
<span class="line"><span style="color:#E06C75;">            o</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">; </span></span>
<span class="line"><span style="color:#ABB2BF;">        } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> { </span></span>
<span class="line"><span style="color:#C678DD;">            if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">Object</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prototype</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">toString</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">call</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">slice</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">8</span><span style="color:#ABB2BF;">, </span><span style="color:#56B6C2;">-</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">===</span><span style="color:#98C379;"> &quot;Array&quot;</span><span style="color:#ABB2BF;">) { </span></span>
<span class="line"><span style="color:#E06C75;">                o</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> []; </span></span>
<span class="line"><span style="color:#C678DD;">                for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E5C07B;"> obj</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) { </span></span>
<span class="line"><span style="color:#E5C07B;">                    o</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">clone</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">])); </span></span>
<span class="line"><span style="color:#ABB2BF;">                } </span></span>
<span class="line"><span style="color:#ABB2BF;">            } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> { </span></span>
<span class="line"><span style="color:#E06C75;">                o</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {};</span></span>
<span class="line"><span style="color:#C678DD;">                for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> k</span><span style="color:#C678DD;"> in</span><span style="color:#E06C75;"> obj</span><span style="color:#ABB2BF;">) { </span></span>
<span class="line"><span style="color:#E06C75;">                    o</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">k</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#61AFEF;"> clone</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">k</span><span style="color:#ABB2BF;">]); </span></span>
<span class="line"><span style="color:#ABB2BF;">                } </span></span>
<span class="line"><span style="color:#ABB2BF;">            } </span></span>
<span class="line"><span style="color:#ABB2BF;">        } </span></span>
<span class="line"><span style="color:#C678DD;">            break</span><span style="color:#ABB2BF;">; </span></span>
<span class="line"><span style="color:#C678DD;">        default</span><span style="color:#ABB2BF;">: </span></span>
<span class="line"><span style="color:#E06C75;">            o</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> obj</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">			break</span><span style="color:#ABB2BF;">; </span></span>
<span class="line"><span style="color:#ABB2BF;">    } </span></span>
<span class="line"><span style="color:#C678DD;">    return</span><span style="color:#E06C75;"> o</span><span style="color:#ABB2BF;">; </span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br></div></div><h4 id="ç¬¬ä¸‰æ–¹åº“" tabindex="-1">ç¬¬ä¸‰æ–¹åº“ <a class="header-anchor" href="#ç¬¬ä¸‰æ–¹åº“" aria-label="Permalink to &quot;ç¬¬ä¸‰æ–¹åº“&quot;">â€‹</a></h4><p>å¯ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“æ¥å®ç°æ·±æ‹·è´ã€‚ä¾‹å¦‚ï¼ŒUnderscore.js å’Œ Lodash éƒ½æä¾›äº†æ·±æ‹·è´çš„æ–¹æ³•ã€‚</p><h2 id="å®ç°ä¸€ä¸ªå‡½æ•°-clone-1" tabindex="-1">å®ç°ä¸€ä¸ªå‡½æ•° clone <a class="header-anchor" href="#å®ç°ä¸€ä¸ªå‡½æ•°-clone-1" aria-label="Permalink to &quot;å®ç°ä¸€ä¸ªå‡½æ•° clone&quot;">â€‹</a></h2><p><strong>å¯ä»¥å¯¹ JavaScript ä¸­çš„ 5 ç§ä¸»è¦çš„æ•°æ®ç±»å‹ï¼ˆåŒ…æ‹¬ Numberã€Stringã€Objectã€Arrayã€Booleanï¼‰è¿›è¡Œå€¼å¤åˆ¶</strong></p><p>ï‚· è€ƒå¯Ÿç‚¹ 1ï¼šå¯¹äºåŸºæœ¬æ•°æ®ç±»å‹å’Œå¼•ç”¨æ•°æ®ç±»å‹åœ¨å†…å­˜ä¸­å­˜æ”¾çš„æ˜¯å€¼è¿˜æ˜¯æŒ‡é’ˆè¿™ä¸€åŒºåˆ«æ˜¯å¦æ¸…æ¥š ï‚· è€ƒå¯Ÿç‚¹ 2ï¼šæ˜¯å¦çŸ¥é“å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå˜é‡æ˜¯ä»€ä¹ˆç±»å‹çš„ ï‚· è€ƒå¯Ÿç‚¹ 3ï¼šé€’å½’ç®—æ³•çš„è®¾è®¡</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// æ–¹æ³•ä¸€ï¼š</span></span>
<span class="line"><span style="color:#E5C07B;">Object</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prototype</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">clone</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> o</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">constructor</span><span style="color:#56B6C2;"> ===</span><span style="color:#E06C75;"> Array</span><span style="color:#C678DD;"> ?</span><span style="color:#ABB2BF;"> [] </span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> {};</span></span>
<span class="line"><span style="color:#C678DD;">	for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> e</span><span style="color:#C678DD;"> in</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">		o</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">e</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#C678DD;"> typeof</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">e</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">===</span><span style="color:#98C379;"> &quot;object&quot;</span><span style="color:#C678DD;"> ?</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">e</span><span style="color:#ABB2BF;">].</span><span style="color:#61AFEF;">clone</span><span style="color:#ABB2BF;">() </span><span style="color:#C678DD;">:</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">e</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> o</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//æ–¹æ³•äºŒï¼š</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">/**</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">å…‹éš†ä¸€ä¸ªå¯¹è±¡</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;font-style:italic;">@param</span><span style="color:#E06C75;font-style:italic;"> Obj</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;font-style:italic;">@returns</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">*/</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> clone</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">Obj</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> buf</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">Obj</span><span style="color:#C678DD;"> instanceof</span><span style="color:#E5C07B;"> Array</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">		buf</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> []; </span><span style="color:#7F848E;font-style:italic;">//åˆ›å»ºä¸€ä¸ªç©ºçš„æ•°ç»„</span></span>
<span class="line"><span style="color:#C678DD;">		var</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Obj</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">		while</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">--</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">			buf</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#61AFEF;"> clone</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">Obj</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">]);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E06C75;"> buf</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	} </span><span style="color:#C678DD;">else</span><span style="color:#C678DD;"> if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">Obj</span><span style="color:#C678DD;"> instanceof</span><span style="color:#E5C07B;"> Object</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">		buf</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {}; </span><span style="color:#7F848E;font-style:italic;">//åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡</span></span>
<span class="line"><span style="color:#C678DD;">		for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> k</span><span style="color:#C678DD;"> in</span><span style="color:#E06C75;"> Obj</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			//ä¸ºè¿™ä¸ªå¯¹è±¡æ·»åŠ æ–°çš„å±æ€§</span></span>
<span class="line"><span style="color:#E06C75;">			buf</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">k</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#61AFEF;"> clone</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">Obj</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">k</span><span style="color:#ABB2BF;">]);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E06C75;"> buf</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		//æ™®é€šå˜é‡ç›´æ¥èµ‹å€¼</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E06C75;"> Obj</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><h2 id="å¦‚ä½•æ¶ˆé™¤ä¸€ä¸ªæ•°ç»„é‡Œé¢é‡å¤çš„å…ƒç´ " tabindex="-1">å¦‚ä½•æ¶ˆé™¤ä¸€ä¸ªæ•°ç»„é‡Œé¢é‡å¤çš„å…ƒç´ ï¼Ÿ <a class="header-anchor" href="#å¦‚ä½•æ¶ˆé™¤ä¸€ä¸ªæ•°ç»„é‡Œé¢é‡å¤çš„å…ƒç´ " aria-label="Permalink to &quot;å¦‚ä½•æ¶ˆé™¤ä¸€ä¸ªæ•°ç»„é‡Œé¢é‡å¤çš„å…ƒç´ ï¼Ÿ&quot;">â€‹</a></h2><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> arr</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">4</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">4</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">5</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">5</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">6</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">9</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">25</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">4</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> deRepeat</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> newArr</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [];</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> obj</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {};</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> index</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> l</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> arr</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E06C75;"> l</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">arr</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">]] </span><span style="color:#56B6C2;">==</span><span style="color:#D19A66;"> undefined</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">			obj</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">arr</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">]] </span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">			newArr</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">index</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> arr</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#ABB2BF;">		} </span><span style="color:#C678DD;">else</span><span style="color:#C678DD;"> if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">arr</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">]] </span><span style="color:#56B6C2;">==</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">continue</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> newArr</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> newArr2</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> deRepeat</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">arr</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#61AFEF;">alert</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">newArr2</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">//è¾“å‡º 1,2,3,4,5,6,9,25</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="å°è´¤æ˜¯ä¸€æ¡å¯çˆ±çš„å°ç‹—-dog-å®ƒçš„å«å£°å¾ˆå¥½å¬-wow-æ¯æ¬¡çœ‹åˆ°ä¸»äººçš„æ—¶å€™å°±ä¼šä¹–ä¹–å«ä¸€å£°-yelp" tabindex="-1">å°è´¤æ˜¯ä¸€æ¡å¯çˆ±çš„å°ç‹—(Dog)ï¼Œå®ƒçš„å«å£°å¾ˆå¥½å¬(wow)ï¼Œæ¯æ¬¡çœ‹åˆ°ä¸»äººçš„æ—¶å€™å°±ä¼šä¹–ä¹–å«ä¸€å£°(yelp) <a class="header-anchor" href="#å°è´¤æ˜¯ä¸€æ¡å¯çˆ±çš„å°ç‹—-dog-å®ƒçš„å«å£°å¾ˆå¥½å¬-wow-æ¯æ¬¡çœ‹åˆ°ä¸»äººçš„æ—¶å€™å°±ä¼šä¹–ä¹–å«ä¸€å£°-yelp" aria-label="Permalink to &quot;å°è´¤æ˜¯ä¸€æ¡å¯çˆ±çš„å°ç‹—(Dog)ï¼Œå®ƒçš„å«å£°å¾ˆå¥½å¬(wow)ï¼Œæ¯æ¬¡çœ‹åˆ°ä¸»äººçš„æ—¶å€™å°±ä¼šä¹–ä¹–å«ä¸€å£°(yelp)&quot;">â€‹</a></h2><p>ä»è¿™æ®µæè¿°å¯ä»¥å¾—åˆ°ä»¥ä¸‹å¯¹è±¡ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> Dog</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">	this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">wow</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#61AFEF;">		alert</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Wow&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	};</span></span>
<span class="line"><span style="color:#E5C07B;">	this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">yelp</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">wow</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">	};</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>å°èŠ’å’Œå°è´¤ä¸€æ ·ï¼ŒåŸæ¥ä¹Ÿæ˜¯ä¸€æ¡å¯çˆ±çš„å°ç‹—ï¼Œå¯æ˜¯çªç„¶æœ‰ä¸€å¤©ç–¯äº†(MadDog)ï¼Œä¸€çœ‹åˆ°äººå°±ä¼šæ¯éš”åŠç§’å«ä¸€å£°(wow)åœ°ä¸åœå«å”¤(yelp)ã€‚è¯·æ ¹æ®æè¿°ï¼ŒæŒ‰ç¤ºä¾‹çš„å½¢å¼ç”¨ä»£ç æ¥å®ã€‚ï¼ˆç»§æ‰¿ï¼ŒåŸå‹ï¼ŒsetIntervalï¼‰</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> MadDog</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">	this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">yelp</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#C678DD;">		var</span><span style="color:#E06C75;"> self</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#61AFEF;">		setInterval</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#E5C07B;">			self</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">wow</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">		}, </span><span style="color:#D19A66;">500</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	};</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#E5C07B;">MadDog</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prototype</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Dog</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//for test</span></span>
<span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> dog</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Dog</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E5C07B;">dog</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">yelp</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> madDog</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> MadDog</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E5C07B;">madDog</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">yelp</span><span style="color:#ABB2BF;">();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="ä¸‹é¢è¿™ä¸ª-ul-å¦‚ä½•ç‚¹å‡»æ¯ä¸€åˆ—çš„æ—¶å€™-alert-å…¶-index-é—­åŒ…" tabindex="-1">ä¸‹é¢è¿™ä¸ª ulï¼Œå¦‚ä½•ç‚¹å‡»æ¯ä¸€åˆ—çš„æ—¶å€™ alert å…¶ index?ï¼ˆé—­åŒ…ï¼‰ <a class="header-anchor" href="#ä¸‹é¢è¿™ä¸ª-ul-å¦‚ä½•ç‚¹å‡»æ¯ä¸€åˆ—çš„æ—¶å€™-alert-å…¶-index-é—­åŒ…" aria-label="Permalink to &quot;ä¸‹é¢è¿™ä¸ª ulï¼Œå¦‚ä½•ç‚¹å‡»æ¯ä¸€åˆ—çš„æ—¶å€™ alert å…¶ index?ï¼ˆé—­åŒ…ï¼‰&quot;">â€‹</a></h2><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">ul</span><span style="color:#D19A66;"> id</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;test&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">li</span><span style="color:#ABB2BF;">&gt;è¿™æ˜¯ç¬¬ä¸€æ¡&lt;/</span><span style="color:#E06C75;">li</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">li</span><span style="color:#ABB2BF;">&gt;è¿™æ˜¯ç¬¬äºŒæ¡&lt;/</span><span style="color:#E06C75;">li</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">li</span><span style="color:#ABB2BF;">&gt;è¿™æ˜¯ç¬¬ä¸‰æ¡&lt;/</span><span style="color:#E06C75;">li</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">ul</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>js</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// æ–¹æ³•ä¸€ï¼š</span></span>
<span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> lis</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> document</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getElementById</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;2223&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">getElementsByTagName</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;li&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#D19A66;"> 3</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">	lis</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">].</span><span style="color:#E06C75;">index</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> i</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">	lis</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">].</span><span style="color:#61AFEF;">onclick</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#61AFEF;">		alert</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">index</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	};</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//æ–¹æ³•äºŒï¼š</span></span>
<span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> lis</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> document</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getElementById</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;2223&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">getElementsByTagName</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;li&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#D19A66;"> 3</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">	lis</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">].</span><span style="color:#E06C75;">index</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> i</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">	lis</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">].</span><span style="color:#E06C75;">onclick</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">a</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#61AFEF;">			alert</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		};</span></span>
<span class="line"><span style="color:#ABB2BF;">	})(</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h2 id="ç¼–å†™ä¸€ä¸ª-javascript-å‡½æ•°-è¦æ±‚å®ç°" tabindex="-1">ç¼–å†™ä¸€ä¸ª JavaScript å‡½æ•°ï¼Œè¦æ±‚å®ç°ï¼š <a class="header-anchor" href="#ç¼–å†™ä¸€ä¸ª-javascript-å‡½æ•°-è¦æ±‚å®ç°" aria-label="Permalink to &quot;ç¼–å†™ä¸€ä¸ª JavaScript å‡½æ•°ï¼Œè¦æ±‚å®ç°ï¼š&quot;">â€‹</a></h2><p>è¾“å…¥æŒ‡å®šç±»å‹çš„é€‰æ‹©å™¨(ä»…éœ€æ”¯æŒ idï¼Œclassï¼ŒtagName ä¸‰ç§ç®€å• CSS é€‰æ‹©å™¨ï¼Œæ— éœ€å…¼å®¹ç»„åˆé€‰æ‹©å™¨)å¯ä»¥è¿”å›åŒ¹é…çš„ DOM èŠ‚ç‚¹ï¼Œéœ€è€ƒè™‘æµè§ˆå™¨å…¼å®¹æ€§å’Œæ€§èƒ½ã€‚</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#7F848E;font-style:italic;">/*** </span><span style="color:#C678DD;font-style:italic;">@param</span><span style="color:#E06C75;font-style:italic;"> selector</span><span style="color:#7F848E;font-style:italic;"> {String} ä¼ å…¥çš„ CSS é€‰æ‹©å™¨ã€‚* </span><span style="color:#C678DD;font-style:italic;">@return</span><span style="color:#E5C07B;font-style:italic;"> {Array}</span><span style="color:#7F848E;font-style:italic;">*/</span></span>
<span class="line"><span style="color:#C678DD;">var</span><span style="color:#61AFEF;"> query</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">selector</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> reg</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> /</span><span style="color:#C678DD;">^</span><span style="color:#E06C75;">(#)</span><span style="color:#D19A66;">?</span><span style="color:#E06C75;">(</span><span style="color:#56B6C2;">\.</span><span style="color:#E06C75;">)</span><span style="color:#D19A66;">?</span><span style="color:#E06C75;">(\w</span><span style="color:#D19A66;">+</span><span style="color:#E06C75;">)</span><span style="color:#C678DD;">$</span><span style="color:#E06C75;">/</span><span style="color:#C678DD;">gim</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> regResult</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> reg</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">exec</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">selector</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> result</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [];</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// å¦‚æœæ˜¯ id é€‰æ‹©å™¨</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">regResult</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">]) {</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">regResult</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">]) {</span></span>
<span class="line"><span style="color:#C678DD;">			if</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">typeof</span><span style="color:#E5C07B;"> document</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">querySelector</span><span style="color:#56B6C2;"> ===</span><span style="color:#98C379;"> &quot;function&quot;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">				result</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">document</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">querySelector</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">regResult</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">]));</span></span>
<span class="line"><span style="color:#ABB2BF;">			} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">				result</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">document</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getElementById</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">regResult</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">]));</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// å¦‚æœæ˜¯ class é€‰æ‹©å™¨</span></span>
<span class="line"><span style="color:#C678DD;">	else</span><span style="color:#C678DD;"> if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">regResult</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">]) {</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">regResult</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">]) {</span></span>
<span class="line"><span style="color:#C678DD;">			if</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">typeof</span><span style="color:#E5C07B;"> document</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">getElementsByClassName</span><span style="color:#56B6C2;"> ===</span><span style="color:#98C379;"> &quot;function&quot;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">				var</span><span style="color:#E06C75;"> doms</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> document</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getElementsByClassName</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">regResult</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">]);</span></span>
<span class="line"><span style="color:#C678DD;">				if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">doms</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">					result</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> converToArray</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">doms</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">				}</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// å¦‚æœä¸æ”¯æŒ getElementsByClassName å‡½æ•°</span></span>
<span class="line"><span style="color:#C678DD;">			else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">				var</span><span style="color:#E06C75;"> allDoms</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> document</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getElementsByTagName</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;*&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">				for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">len</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> allDoms</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E06C75;"> len</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">					if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">allDoms</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">].</span><span style="color:#E5C07B;">className</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">search</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">new</span><span style="color:#61AFEF;"> RegExp</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">regResult</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">])) </span><span style="color:#56B6C2;">&gt;</span><span style="color:#56B6C2;"> -</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">						result</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">allDoms</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">]);</span></span>
<span class="line"><span style="color:#ABB2BF;">					}</span></span>
<span class="line"><span style="color:#ABB2BF;">				}</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// å¦‚æœæ˜¯æ ‡ç­¾é€‰æ‹©å™¨</span></span>
<span class="line"><span style="color:#C678DD;">	else</span><span style="color:#C678DD;"> if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">regResult</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">]) {</span></span>
<span class="line"><span style="color:#C678DD;">		var</span><span style="color:#E06C75;"> doms</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> document</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getElementsByTagName</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">regResult</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">].</span><span style="color:#61AFEF;">toLowerCase</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">doms</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">			result</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> converToArray</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">doms</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> result</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> converToArray</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">nodes</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> array</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	try</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">		array</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Array</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prototype</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">slice</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">call</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">nodes</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">// é’ˆå¯¹é IE æµè§ˆå™¨</span></span>
<span class="line"><span style="color:#ABB2BF;">	} </span><span style="color:#C678DD;">catch</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">ex</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">		array</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Array</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">		for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">len</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> nodes</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E06C75;"> len</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">			array</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">nodes</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">]);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> array</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br></div></div><h2 id="åˆ¤æ–­æ•°ç»„çš„æ·±åº¦" tabindex="-1">åˆ¤æ–­æ•°ç»„çš„æ·±åº¦ <a class="header-anchor" href="#åˆ¤æ–­æ•°ç»„çš„æ·±åº¦" aria-label="Permalink to &quot;åˆ¤æ–­æ•°ç»„çš„æ·±åº¦&quot;">â€‹</a></h2><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#7F848E;font-style:italic;">/*</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">å¦‚ä½•åˆ¤æ–­æ•°ç»„çš„æœ€æ·±å±‚æœ‰å¤šå°‘å±‚ï¼Ÿ</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">ä¾‹å¦‚ï¼š[1,3,3[4,6,7,[5,6,7,43,[23,4]]]],è¿”å›4ï¼</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">*/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//è®°å½•æ¯ä¸€æ¬¡åˆ°åº•çš„æ·±åº¦å€¼ï¼Œå–æœ€å¤§</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> getMaxDeepArr</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">arr</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> curDep</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> res</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [];</span></span>
<span class="line"><span style="color:#C678DD;">	function</span><span style="color:#61AFEF;"> forArr</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">arr</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		for</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">i</span><span style="color:#C678DD;"> of</span><span style="color:#E06C75;"> arr</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">			if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">Array</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">isArray</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#E06C75;">				curDep</span><span style="color:#56B6C2;"> +=</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#61AFEF;">				forArr</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#E5C07B;">		res</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">curDep</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;">		curDep</span><span style="color:#56B6C2;"> -=</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">		console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">arr</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;åˆ°åº•äº†&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#61AFEF;">	forArr</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">arr</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E5C07B;"> Math</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">max</span><span style="color:#ABB2BF;">(...</span><span style="color:#E06C75;">res</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#61AFEF;">	getMaxDeepArr</span><span style="color:#ABB2BF;">([</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">, [</span><span style="color:#D19A66;">4</span><span style="color:#ABB2BF;">, [</span><span style="color:#D19A66;">6</span><span style="color:#ABB2BF;">], </span><span style="color:#D19A66;">7</span><span style="color:#ABB2BF;">, [</span><span style="color:#D19A66;">5</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">6</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">7</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">43</span><span style="color:#ABB2BF;">, [</span><span style="color:#D19A66;">23</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">4</span><span style="color:#ABB2BF;">]]], [</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">]])</span></span>
<span class="line"><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//éå†å¤šå±‚æ•°ç»„ï¼ŒæŠŠæ¯ä¸ªå€¼æ¢æˆå½“å‰æ·±åº¦</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> fn</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">arr</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">dep</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E5C07B;">Array</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">isArray</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">arr</span><span style="color:#ABB2BF;">)) </span><span style="color:#C678DD;">return</span><span style="color:#E06C75;"> dep</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E5C07B;"> Math</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">max</span><span style="color:#ABB2BF;">(...</span><span style="color:#E5C07B;">arr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">map</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">i</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#61AFEF;"> fn</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">dep</span><span style="color:#56B6C2;"> +</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">)));</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">fn</span><span style="color:#ABB2BF;">([[</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">], </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">, [</span><span style="color:#D19A66;">4</span><span style="color:#ABB2BF;">, [</span><span style="color:#D19A66;">6</span><span style="color:#ABB2BF;">], </span><span style="color:#D19A66;">7</span><span style="color:#ABB2BF;">, [</span><span style="color:#D19A66;">5</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">6</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">7</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">43</span><span style="color:#ABB2BF;">, [</span><span style="color:#D19A66;">23</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">4</span><span style="color:#ABB2BF;">]]], [</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">]]));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//æ‰“å¹³æ•°ç»„ï¼Œçœ‹æ‰“å¹³å¤šå°‘æ¬¡</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> s</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">arr</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	function</span><span style="color:#61AFEF;"> l</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">arr</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">arr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">find</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">item</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#E5C07B;"> Array</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">isArray</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">item</span><span style="color:#ABB2BF;">))) {</span></span>
<span class="line"><span style="color:#E06C75;">			i</span><span style="color:#56B6C2;"> +=</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#61AFEF;">			l</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">arr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">flat</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#61AFEF;">	l</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">arr</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> i</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">s</span><span style="color:#ABB2BF;">([[</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">], </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">, [</span><span style="color:#D19A66;">4</span><span style="color:#ABB2BF;">, [</span><span style="color:#D19A66;">6</span><span style="color:#ABB2BF;">], </span><span style="color:#D19A66;">7</span><span style="color:#ABB2BF;">, [</span><span style="color:#D19A66;">5</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">6</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">7</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">43</span><span style="color:#ABB2BF;">, [</span><span style="color:#D19A66;">23</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">4</span><span style="color:#ABB2BF;">]]], [</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">]]));</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">/*</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">è¯·å®ç°æŠ½å¥–å‡½æ•°randï¼Œä¿è¯éšæœºæ€§</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">è¾“å…¥ä¸ºè¡¨ç¤ºå¯¹è±¡æ•°ç»„ï¼Œå¯¹è±¡æœ‰å±æ€§nè¡¨ç¤ºäººåï¼Œwè¡¨ç¤ºæƒé‡</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">éšæœºè¿”å›ä¸€ä¸ªä¸­å¥–äººåï¼Œä¸­å¥–æ¦‚ç‡å’Œwæˆæ­£æ¯”</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">*/</span></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> peoples</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [</span></span>
<span class="line"><span style="color:#ABB2BF;">	{ </span><span style="color:#E06C75;">n</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;p1&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">w</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">100</span><span style="color:#ABB2BF;"> },</span></span>
<span class="line"><span style="color:#ABB2BF;">	{ </span><span style="color:#E06C75;">n</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;p2&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">w</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">200</span><span style="color:#ABB2BF;"> },</span></span>
<span class="line"><span style="color:#ABB2BF;">	{ </span><span style="color:#E06C75;">n</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;p3&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">w</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">100</span><span style="color:#ABB2BF;"> },</span></span>
<span class="line"><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#61AFEF;"> rand</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">p</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> allW</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">	p</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">forEach</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">element</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">		allW</span><span style="color:#56B6C2;"> +=</span><span style="color:#E5C07B;"> element</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">w</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	});</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> randNum</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Math</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">floor</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Math</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">random</span><span style="color:#ABB2BF;">() </span><span style="color:#56B6C2;">*</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">allW</span><span style="color:#56B6C2;"> -</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">)) </span><span style="color:#56B6C2;">+</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">	console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">randNum</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> helpNum</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> res</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> p</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">filter</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">e</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">		console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">helpNum</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">e</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">w</span><span style="color:#56B6C2;"> +</span><span style="color:#E06C75;"> helpNum</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">helpNum</span><span style="color:#56B6C2;"> &lt;=</span><span style="color:#E06C75;"> randNum</span><span style="color:#56B6C2;"> &amp;&amp;</span><span style="color:#E06C75;"> randNum</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E5C07B;"> e</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">w</span><span style="color:#56B6C2;"> +</span><span style="color:#E06C75;"> helpNum</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">			helpNum</span><span style="color:#56B6C2;"> +=</span><span style="color:#E5C07B;"> e</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">w</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">			return</span><span style="color:#D19A66;"> true</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">			helpNum</span><span style="color:#56B6C2;"> +=</span><span style="color:#E5C07B;"> e</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">w</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">			return</span><span style="color:#D19A66;"> false</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	});</span></span>
<span class="line"><span style="color:#E5C07B;">	console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">res</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">]);</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> res</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#61AFEF;">rand</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">peoples</span><span style="color:#ABB2BF;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br></div></div><h2 id="æ‰‹å†™æµ…æ‹·è´ä¸æ·±æ‹·è´" tabindex="-1">æ‰‹å†™æµ…æ‹·è´ä¸æ·±æ‹·è´ <a class="header-anchor" href="#æ‰‹å†™æµ…æ‹·è´ä¸æ·±æ‹·è´" aria-label="Permalink to &quot;æ‰‹å†™æµ…æ‹·è´ä¸æ·±æ‹·è´&quot;">â€‹</a></h2><h3 id="æ·±æµ…æ‹·è´çš„åŒºåˆ«" tabindex="-1">æ·±æµ…æ‹·è´çš„åŒºåˆ« <a class="header-anchor" href="#æ·±æµ…æ‹·è´çš„åŒºåˆ«" aria-label="Permalink to &quot;æ·±æµ…æ‹·è´çš„åŒºåˆ«&quot;">â€‹</a></h3><ul><li><p><strong>æµ…æ‹·è´</strong>ï¼šåªæ˜¯æ‹·è´äº†åŸºæœ¬ç±»å‹çš„æ•°æ®ï¼Œè€Œå¼•ç”¨ç±»å‹æ•°æ®ï¼Œå¤åˆ¶åä¹Ÿæ˜¯ä¼šå‘ç”Ÿå¼•ç”¨ï¼Œæˆ‘ä»¬æŠŠè¿™ç§æ‹·è´å«åšæµ…æ‹·è´(æµ…å¤åˆ¶)</p><p>æµ…æ‹·è´åªå¤åˆ¶æŒ‡å‘æŸä¸ªå¯¹è±¡çš„æŒ‡é’ˆï¼Œè€Œä¸å¤åˆ¶å¯¹è±¡æœ¬èº«ï¼Œæ–°æ—§å¯¹è±¡è¿˜æ˜¯å…±äº«åŒä¸€å—å†…å­˜ã€‚</p></li><li><p><strong>æ·±æ‹·è´</strong>ï¼šåœ¨å †ä¸­é‡æ–°åˆ†é…å†…å­˜ï¼Œå¹¶ä¸”æŠŠæºå¯¹è±¡æ‰€æœ‰å±æ€§éƒ½è¿›è¡Œæ–°å»ºæ‹·è´ï¼Œä»¥ä¿è¯æ·±æ‹·è´çš„å¯¹è±¡çš„å¼•ç”¨å›¾ä¸åŒ…å«ä»»ä½•åŸæœ‰å¯¹è±¡æˆ–å¯¹è±¡å›¾ä¸Šçš„ä»»ä½•å¯¹è±¡ï¼Œæ‹·è´åçš„å¯¹è±¡ä¸åŸæ¥çš„å¯¹è±¡æ˜¯å®Œå…¨éš”ç¦»ï¼Œäº’ä¸å½±å“ã€‚</p></li></ul><table><thead><tr><th></th><th>å’ŒåŸæ•°æ®æ˜¯å¦æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡</th><th>ç¬¬ä¸€å±‚æ•°æ®ä¸ºåŸºæœ¬æ•°æ®ç±»å‹</th><th>åŸæ•°æ®ä¸­åŒ…å«çš„å­å¯¹è±¡</th></tr></thead><tbody><tr><td>èµ‹å€¼</td><td>æ˜¯</td><td>ä¼šä½¿åŸæ•°æ®ä¸€èµ·æ”¹å˜</td><td>ä¼šä½¿åŸæ•°æ®ä¸€èµ·æ”¹å˜</td></tr><tr><td>æµ…æ‹·è´</td><td>å¦</td><td>ä¸ä¼šä½¿åŸæ•°æ®ä¸€èµ·æ”¹å˜</td><td>ä¼šä½¿åŸæ•°æ®ä¸€èµ·æ”¹å˜</td></tr><tr><td>æ·±æ‹·è´</td><td>å¦</td><td>ä¸ä¼šä½¿åŸæ•°æ®ä¸€èµ·æ”¹å˜</td><td>ä¸ä¼šä½¿åŸæ•°æ®ä¸€èµ·æ”¹å˜</td></tr></tbody></table><h3 id="å¸¸è§æƒ…å†µ" tabindex="-1">å¸¸è§æƒ…å†µï¼š <a class="header-anchor" href="#å¸¸è§æƒ…å†µ" aria-label="Permalink to &quot;å¸¸è§æƒ…å†µï¼š&quot;">â€‹</a></h3><ol><li><strong><code>åŸºæœ¬æ•°æ®ç±»å‹</code></strong>ï¼šå¯¹äºåŸºæœ¬æ•°æ®ç±»å‹(å¦‚ Numberã€Stringã€Booleanã€Undefinedã€Nullã€Symbol)ï¼Œæµ…æ‹·è´å’Œæ·±æ‹·è´å®é™…ä¸Šæ˜¯ä¸€æ ·çš„ï¼Œå› ä¸ºå®ƒä»¬éƒ½æ˜¯å€¼ç±»å‹ï¼Œå¤åˆ¶çš„æ˜¯å€¼æœ¬èº«ã€‚</li><li><strong><code>å¼•ç”¨æ•°æ®ç±»å‹</code></strong>ï¼šå¯¹äºå¼•ç”¨æ•°æ®ç±»å‹(å¦‚ Objectã€Arrayã€Function)ï¼Œæµ…æ‹·è´å’Œæ·±æ‹·è´çš„åŒºåˆ«å°±æ˜¾ç°å‡ºæ¥äº†ã€‚æµ…æ‹·è´åªå¤åˆ¶å¼•ç”¨ï¼Œè€Œæ·±æ‹·è´ä¼šå¤åˆ¶å¼•ç”¨æŒ‡å‘çš„å¯¹è±¡ã€‚</li><li><strong><code>åµŒå¥—å¯¹è±¡</code></strong>ï¼šå½“å¤„ç†åµŒå¥—å¯¹è±¡æ—¶ï¼Œæµ…æ‹·è´çš„é—®é¢˜å°¤ä¸ºçªå‡ºã€‚å› ä¸ºæµ…æ‹·è´åªä¼šå¤åˆ¶æœ€å¤–å±‚çš„å¼•ç”¨ï¼Œè€Œå†…éƒ¨çš„å¯¹è±¡ä»ç„¶æ˜¯å…±äº«çš„ã€‚è¿™å¯èƒ½å¯¼è‡´åœ¨ä¿®æ”¹æ–°å¯¹è±¡æ—¶ï¼ŒåŸå¯¹è±¡ä¹Ÿè¢«æ„å¤–ä¿®æ”¹ã€‚è€Œæ·±æ‹·è´åˆ™å¯ä»¥é¿å…è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸ºå®ƒä¼šé€’å½’åœ°å¤åˆ¶æ‰€æœ‰çš„å­å¯¹è±¡ã€‚</li></ol><h3 id="æµ…æ‹·è´" tabindex="-1">æµ…æ‹·è´ <a class="header-anchor" href="#æµ…æ‹·è´" aria-label="Permalink to &quot;æµ…æ‹·è´&quot;">â€‹</a></h3><p>æµ…æ‹·è´æ˜¯åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æœ‰ç€åŸå§‹å¯¹è±¡å±æ€§å€¼çš„ä¸€ä»½ç²¾ç¡®æ‹·è´ã€‚å¦‚æœå±æ€§æ˜¯åŸºæœ¬ç±»å‹ï¼Œæ‹·è´çš„å°±æ˜¯åŸºæœ¬ç±»å‹çš„å€¼ï¼Œå¦‚æœå±æ€§æ˜¯å¼•ç”¨ç±»å‹ï¼Œæ‹·è´çš„å°±æ˜¯å†…å­˜åœ°å€ï¼Œæ‰€ä»¥å¦‚æœå…¶ä¸­ä¸€ä¸ªå¯¹è±¡æ”¹å˜äº†è¿™ä¸ªåœ°å€ï¼Œå°±ä¼šå½±å“åˆ°å¦ä¸€ä¸ªå¯¹è±¡ã€‚</p><p>å¦‚æœæ˜¯æ•°ç»„ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨æ•°ç»„çš„ä¸€äº›æ–¹æ³•ï¼Œæ¯”å¦‚ sliceï¼Œconcat æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°æ•°ç»„çš„ç‰¹æ€§æ¥å®ç°æ‹·è´ï¼Œä½†å‡å¦‚æ•°ç»„åµŒå¥—äº†å¯¹è±¡æˆ–è€…æ•°ç»„çš„è¯ï¼Œä½¿ç”¨ concat æ–¹æ³•å…‹éš†å¹¶ä¸å®Œæ•´ï¼Œå¦‚æœæ•°ç»„å…ƒç´ æ˜¯åŸºæœ¬ç±»å‹ï¼Œå°±ä¼šæ‹·è´ä¸€ä»½ï¼Œäº’ä¸å½±å“ï¼Œè€Œå¦‚æœæ˜¯å¯¹è±¡æˆ–æ•°ç»„ï¼Œå°±ä¼šåªæ‹·è´å¯¹è±¡å’Œæ•°ç»„çš„å¼•ç”¨ï¼Œè¿™æ ·æˆ‘ä»¬æ— è®ºåœ¨æ–°æ—§æ•°ç»„è¿›è¡Œäº†ä¿®æ”¹ï¼Œä¸¤è€…éƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œæˆ‘ä»¬æŠŠè¿™ç§å¤åˆ¶å¼•ç”¨çš„æ‹·è´æ–¹æ³•ç§°ä¸ºæµ…æ‹·è´ã€‚</p><h4 id="æµ…æ‹·è´æ–¹æ³•" tabindex="-1">æµ…æ‹·è´æ–¹æ³• <a class="header-anchor" href="#æµ…æ‹·è´æ–¹æ³•" aria-label="Permalink to &quot;æµ…æ‹·è´æ–¹æ³•&quot;">â€‹</a></h4><ol><li>ç›´æ¥èµ‹å€¼</li><li><code>Object.assign</code> æ–¹æ³•ï¼šå¯ä»¥æŠŠä»»æ„å¤šä¸ªçš„æºå¯¹è±¡è‡ªèº«çš„å¯æšä¸¾å±æ€§æ‹·è´ç»™ç›®æ ‡å¯¹è±¡ï¼Œç„¶åè¿”å›ç›®æ ‡å¯¹è±¡ã€‚å½“æ‹·è´çš„ <code>object</code> åªæœ‰ä¸€å±‚çš„æ—¶å€™ï¼Œæ˜¯æ·±æ‹·è´ï¼Œä½†æ˜¯å½“æ‹·è´çš„å¯¹è±¡å±æ€§å€¼åˆæ˜¯ä¸€ä¸ªå¼•ç”¨æ—¶ï¼Œæ¢å¥è¯è¯´æœ‰å¤šå±‚æ—¶ï¼Œå°±æ˜¯ä¸€ä¸ªæµ…æ‹·è´ã€‚</li><li><code>ES6</code> æ‰©å±•è¿ç®—ç¬¦ï¼Œå½“ <code>object</code> åªæœ‰ä¸€å±‚çš„æ—¶å€™ï¼Œä¹Ÿæ˜¯æ·±æ‹·è´ã€‚æœ‰å¤šå±‚æ—¶æ˜¯æµ…æ‹·è´ã€‚</li><li><code>Array.prototype.concat</code> æ–¹æ³•</li><li><code>Array.prototype.slice</code> æ–¹æ³•</li><li><code>jQuery</code> ä¸­çš„ <code>.extend</code>ï¼šåœ¨ <code>jQuery</code> ä¸­ï¼Œ<code>.extendâˆ—ï¼šåœ¨ âˆ—jQueryâˆ— ä¸­ï¼Œâˆ—.extend(deep,target,object1,objectN)</code> æ–¹æ³•å¯ä»¥è¿›è¡Œæ·±æµ…æ‹·è´ã€‚<code>deep</code> å¦‚è¿‡è®¾ä¸º <code>true</code> ä¸ºæ·±æ‹·è´ï¼Œé»˜è®¤æ˜¯ <code>false</code> æµ…æ‹·è´ã€‚</li><li><code>Object.getOwnPropertyDescriptors()</code>+<code>Object.defineProperties()</code></li></ol><h4 id="å®ç°æµ…æ‹·è´" tabindex="-1">å®ç°æµ…æ‹·è´ <a class="header-anchor" href="#å®ç°æµ…æ‹·è´" aria-label="Permalink to &quot;å®ç°æµ…æ‹·è´&quot;">â€‹</a></h4><p>æ·±æ‹·è´å°±æ˜¯æŒ‡å®Œå…¨çš„æ‹·è´ä¸€ä¸ªå¯¹è±¡ï¼Œå³ä½¿åµŒå¥—äº†å¯¹è±¡ï¼Œä¸¤è€…ä¹Ÿäº’ç›¸åˆ†ç¦»ï¼Œä¿®æ”¹ä¸€ä¸ªå¯¹è±¡çš„å±æ€§ï¼Œä¸ä¼šå½±å“å¦ä¸€ä¸ª å¦‚ä½•æ·±æ‹·è´ä¸€ä¸ªæ•°ç»„</p><p>1ã€è¿™é‡Œä»‹ç»ä¸€ä¸ªæŠ€å·§ï¼Œä¸ä»…é€‚ç”¨äºæ•°ç»„è¿˜é€‚ç”¨äºå¯¹è±¡ï¼é‚£å°±æ˜¯ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> arr</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [</span><span style="color:#98C379;">&quot;old&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">, [</span><span style="color:#98C379;">&quot;old1&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;old2&quot;</span><span style="color:#ABB2BF;">], { </span><span style="color:#E06C75;">old</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;"> }];</span></span>
<span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> new_arr</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> JSON</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">parse</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">JSON</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">stringify</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">arr</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">new_arr</span><span style="color:#ABB2BF;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>åŸç†æ˜¯ JOSN å¯¹è±¡ä¸­çš„ stringify å¯ä»¥æŠŠä¸€ä¸ª js å¯¹è±¡åºåˆ—åŒ–ä¸ºä¸€ä¸ª JSON å­—ç¬¦ä¸²ï¼Œparse å¯ä»¥æŠŠ JSON å­—ç¬¦ä¸²ååºåˆ—åŒ–ä¸ºä¸€ä¸ª js å¯¹è±¡ï¼Œé€šè¿‡è¿™ä¸¤ä¸ªæ–¹æ³•ï¼Œä¹Ÿå¯ä»¥å®ç°å¯¹è±¡çš„æ·±å¤åˆ¶ã€‚ä½†æ˜¯è¿™ä¸ªæ–¹æ³•ä¸èƒ½å¤Ÿæ‹·è´å‡½æ•°</p><h4 id="æµ…æ‹·è´çš„å®ç°" tabindex="-1">æµ…æ‹·è´çš„å®ç° <a class="header-anchor" href="#æµ…æ‹·è´çš„å®ç°" aria-label="Permalink to &quot;æµ…æ‹·è´çš„å®ç°&quot;">â€‹</a></h4><p>ä»¥ä¸Šä¸‰ä¸ªæ–¹æ³• concatã€slice ã€JSON.stringify éƒ½æ˜¯æŠ€å·§ç±»ï¼Œæ ¹æ®å®é™…é¡¹ç›®æƒ…å†µé€‰æ‹©ä½¿ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥æ€è€ƒä¸‹å¦‚ä½•å®ç°ä¸€ä¸ªå¯¹è±¡æˆ–æ•°ç»„çš„æµ…æ‹·è´ï¼Œéå†å¯¹è±¡ï¼Œç„¶åæŠŠå±æ€§å’Œå±æ€§å€¼éƒ½æ”¾åœ¨ä¸€ä¸ªæ–°çš„å¯¹è±¡é‡Œå³å¯</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">var</span><span style="color:#61AFEF;"> shallowCopy</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">obj</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// åªæ‹·è´å¯¹è±¡</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">typeof</span><span style="color:#E06C75;"> obj</span><span style="color:#56B6C2;"> !==</span><span style="color:#98C379;"> &quot;object&quot;</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// æ ¹æ® obj çš„ç±»å‹åˆ¤æ–­æ˜¯æ–°å»ºä¸€ä¸ªæ•°ç»„è¿˜æ˜¯å¯¹è±¡</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> newObj</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> obj</span><span style="color:#C678DD;"> instanceof</span><span style="color:#E5C07B;"> Array</span><span style="color:#C678DD;"> ?</span><span style="color:#ABB2BF;"> [] </span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> {};</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// éå† objï¼Œå¹¶ä¸”åˆ¤æ–­æ˜¯ obj çš„å±æ€§æ‰æ‹·è´</span></span>
<span class="line"><span style="color:#C678DD;">	for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> key</span><span style="color:#C678DD;"> in</span><span style="color:#E06C75;"> obj</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">obj</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">hasOwnProperty</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#E06C75;">			newObj</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> obj</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> newObj</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="å®ç°æµ…æ‹·è´-1" tabindex="-1">å®ç°æµ…æ‹·è´ <a class="header-anchor" href="#å®ç°æµ…æ‹·è´-1" aria-label="Permalink to &quot;å®ç°æµ…æ‹·è´&quot;">â€‹</a></h4><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// å®ç°æµ…æ‹·è´</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> shallowCopy</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">obj</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// åªæ‹·è´å¯¹è±¡ï¼ŒåŸºæœ¬ç±»å‹æˆ–nullç›´æ¥è¿”å›</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">typeof</span><span style="color:#E06C75;"> obj</span><span style="color:#56B6C2;"> !==</span><span style="color:#98C379;"> &quot;object&quot;</span><span style="color:#56B6C2;"> ||</span><span style="color:#E06C75;"> obj</span><span style="color:#56B6C2;"> ===</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E06C75;"> obj</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// åˆ¤æ–­æ˜¯æ–°å»ºä¸€ä¸ªæ•°ç»„è¿˜æ˜¯å¯¹è±¡</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> newObj</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Array</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">isArray</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">?</span><span style="color:#ABB2BF;"> [] </span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> {};</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	//forâ€¦inä¼šéå†å¯¹è±¡çš„æ•´ä¸ªåŸå‹é“¾ï¼Œå¦‚æœåªè€ƒè™‘å¯¹è±¡æœ¬èº«çš„å±æ€§ï¼Œéœ€è¦æ­é…hasOwnProperty</span></span>
<span class="line"><span style="color:#C678DD;">	for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> key</span><span style="color:#C678DD;"> in</span><span style="color:#E06C75;"> obj</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		//hasOwnPropertyåˆ¤æ–­æ˜¯å¦æ˜¯å¯¹è±¡è‡ªèº«å±æ€§ï¼Œä¼šå¿½ç•¥ä»åŸå‹é“¾ä¸Šç»§æ‰¿çš„å±æ€§</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">obj</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">hasOwnProperty</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#E06C75;">			newObj</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> obj</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">]; </span><span style="color:#7F848E;font-style:italic;">//åªæ‹·è´å¯¹è±¡æœ¬èº«çš„å±æ€§</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> newObj</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// æµ‹è¯•</span></span>
<span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> obj</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">	name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;å¼ ä¸‰&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	age</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">8</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	pal</span><span style="color:#ABB2BF;">: [</span><span style="color:#98C379;">&quot;ç‹äº”&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;ç‹å…­&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;ç‹ä¸ƒ&quot;</span><span style="color:#ABB2BF;">],</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> obj2</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> shallowCopy</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">obj2</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">name</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;æå››&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">obj2</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">pal</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#98C379;"> &quot;ç‹éº»å­&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">//{age: 8, name: &quot;å¼ ä¸‰&quot;, pal: [&#39;ç‹éº»å­&#39;, &#39;ç‹å…­&#39;, &#39;ç‹ä¸ƒ&#39;]}</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obj2</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">//{age: 8, name: &quot;æå››&quot;, pal: [&#39;ç‹éº»å­&#39;, &#39;ç‹å…­&#39;, &#39;ç‹ä¸ƒ&#39;]}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p>æµ‹è¯•ç»“æœï¼š</p><p><img src="/FrontEndInterviewQuestion/assets/1825706db831444abc680e65cd552879tplv-k3u1fbpfcp-jj-mark3024000q75.BiAquOHv.webp" alt="6.png"></p><h4 id="å®ç°-2-1" tabindex="-1">å®ç° 2 <a class="header-anchor" href="#å®ç°-2-1" aria-label="Permalink to &quot;å®ç° 2&quot;">â€‹</a></h4><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#61AFEF;"> shallowClone</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">target</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">typeof</span><span style="color:#E06C75;"> target</span><span style="color:#56B6C2;"> ===</span><span style="color:#98C379;"> &quot;object&quot;</span><span style="color:#56B6C2;"> &amp;&amp;</span><span style="color:#E06C75;"> target</span><span style="color:#56B6C2;"> !==</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		const</span><span style="color:#E5C07B;"> cloneTarget</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Array</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">isArray</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">target</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">?</span><span style="color:#ABB2BF;"> [] </span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> {};</span></span>
<span class="line"><span style="color:#C678DD;">		for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> prop</span><span style="color:#C678DD;"> in</span><span style="color:#E06C75;"> target</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">			if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">target</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">hasOwnProperty</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">prop</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#E06C75;">				cloneTarget</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">prop</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> target</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">prop</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E06C75;"> cloneTarget</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E06C75;"> target</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="ä½¿ç”¨-object-assign-å®ç°æµ…æ‹·è´" tabindex="-1">ä½¿ç”¨ Object.assign å®ç°æµ…æ‹·è´ <a class="header-anchor" href="#ä½¿ç”¨-object-assign-å®ç°æµ…æ‹·è´" aria-label="Permalink to &quot;ä½¿ç”¨ Object.assign å®ç°æµ…æ‹·è´&quot;">â€‹</a></h4><p>ä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒObject.assgin() æ‹·è´çš„æ˜¯å¯¹è±¡çš„å±æ€§çš„å¼•ç”¨ï¼Œè€Œä¸æ˜¯å¯¹è±¡æœ¬èº«ã€‚</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> obj</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;sy&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">age</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">18</span><span style="color:#ABB2BF;"> };</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> obj2</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Object</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">assign</span><span style="color:#ABB2BF;">({}, </span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">, { </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;sss&quot;</span><span style="color:#ABB2BF;"> });</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obj2</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">//{ name: &#39;sss&#39;, age: 18 }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="concat-æµ…æ‹·è´æ•°ç»„" tabindex="-1">concat æµ…æ‹·è´æ•°ç»„ <a class="header-anchor" href="#concat-æµ…æ‹·è´æ•°ç»„" aria-label="Permalink to &quot;concat æµ…æ‹·è´æ•°ç»„&quot;">â€‹</a></h4><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> arr</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> newArr</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> arr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">concat</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E06C75;">newArr</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;"> 100</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">arr</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">//[ 1, 2, 3 ]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="slice-æµ…æ‹·è´" tabindex="-1">slice æµ…æ‹·è´ <a class="header-anchor" href="#slice-æµ…æ‹·è´" aria-label="Permalink to &quot;slice æµ…æ‹·è´&quot;">â€‹</a></h4><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> arr</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> newArr</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> arr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">slice</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E06C75;">newArr</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;"> 100</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">arr</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">//[1, 2, 3]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="ä½¿ç”¨æ‰©å±•-å±•å¼€-è¿ç®—ç¬¦å®ç°æµ…æ‹·è´" tabindex="-1">ä½¿ç”¨æ‰©å±•(å±•å¼€)è¿ç®—ç¬¦å®ç°æµ…æ‹·è´ <a class="header-anchor" href="#ä½¿ç”¨æ‰©å±•-å±•å¼€-è¿ç®—ç¬¦å®ç°æµ…æ‹·è´" aria-label="Permalink to &quot;ä½¿ç”¨æ‰©å±•(å±•å¼€)è¿ç®—ç¬¦å®ç°æµ…æ‹·è´&quot;">â€‹</a></h4><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> arr</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> newArr</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [...</span><span style="color:#E06C75;">arr</span><span style="color:#ABB2BF;">]; </span><span style="color:#7F848E;font-style:italic;">// è·Ÿarr.slice()æ˜¯ä¸€æ ·çš„æ•ˆæœ</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> copyOfObject</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> { ...</span><span style="color:#E06C75;">originalObject</span><span style="color:#ABB2BF;"> };</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> copyOfArray</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [...</span><span style="color:#E06C75;">originalArray</span><span style="color:#ABB2BF;">];</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>æ‰©å±•è¿ç®—ç¬¦ä¸è¶³å’Œç‰¹æ€§ã€‚</p><table><thead><tr><th>ä¸è¶³&amp;ç‰¹æ€§</th></tr></thead><tbody><tr><td>ä¸èƒ½å¤åˆ¶æ™®é€šå¯¹è±¡çš„<code>prototype</code>å±æ€§</td></tr><tr><td>ä¸èƒ½å¤åˆ¶<em>å†…ç½®å¯¹è±¡</em>çš„<strong>ç‰¹æ®Šå±æ€§</strong>(internal slots)</td></tr><tr><td>åªå¤åˆ¶å¯¹è±¡çš„æœ¬èº«çš„å±æ€§(éç»§æ‰¿)</td></tr><tr><td>åªå¤åˆ¶å¯¹è±¡çš„å¯æšä¸¾å±æ€§(enumerable)</td></tr><tr><td>å¤åˆ¶çš„æ•°æ®å±æ€§éƒ½æ˜¯<strong>å¯å†™çš„</strong>(writable)å’Œ<strong>å¯é…ç½®çš„</strong>(configurable)</td></tr></tbody></table><h4 id="object-assign" tabindex="-1">Object.assign() <a class="header-anchor" href="#object-assign" aria-label="Permalink to &quot;Object.assign()&quot;">â€‹</a></h4><p><code>Object.assign()</code>çš„å·¥ä½œæ–¹å¼å’Œæ‰©å±•è¿ç®—ç¬¦ç±»ä¼¼ã€‚</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> copy1</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> { ...</span><span style="color:#E06C75;">original</span><span style="color:#ABB2BF;"> };</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> copy2</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Object</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">assign</span><span style="color:#ABB2BF;">({}, </span><span style="color:#E06C75;">original</span><span style="color:#ABB2BF;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>Object.assign()</code>å¹¶éå®Œå…¨å’Œæ‰©å±•è¿ç®—ç¬¦ç­‰åŒï¼Œä»–ä»¬ä¹‹é—´å­˜åœ¨ä¸€äº›ç»†å¾®çš„å·®åˆ«ã€‚</p><ul><li>æ‰©å±•è¿ç®—ç¬¦åœ¨å‰¯æœ¬ä¸­<strong>ç›´æ¥å®šä¹‰æ–°çš„å±æ€§</strong></li><li><code>Object.assign()</code>é€šè¿‡<strong>èµ‹å€¼çš„æ–¹å¼</strong>æ¥å¤„ç†å‰¯æœ¬ä¸­å¯¹åº”å±æ€§</li></ul><h4 id="object-assign-å’Œæ‰©å±•è¿ç®—æ³•æ˜¯æ·±æ‹·è´è¿˜æ˜¯æµ…æ‹·è´" tabindex="-1"><code>object.assign</code> å’Œæ‰©å±•è¿ç®—æ³•æ˜¯æ·±æ‹·è´è¿˜æ˜¯æµ…æ‹·è´ <a class="header-anchor" href="#object-assign-å’Œæ‰©å±•è¿ç®—æ³•æ˜¯æ·±æ‹·è´è¿˜æ˜¯æµ…æ‹·è´" aria-label="Permalink to &quot;`object.assign` å’Œæ‰©å±•è¿ç®—æ³•æ˜¯æ·±æ‹·è´è¿˜æ˜¯æµ…æ‹·è´&quot;">â€‹</a></h4><p>è¿™ä¸¤ä¸ªæ–¹å¼éƒ½æ˜¯æµ…æ‹·è´ã€‚</p><p>åœ¨æ‹·è´çš„å¯¹è±¡åªæœ‰ä¸€å±‚æ—¶æ˜¯æ·±æ‹·è´ï¼Œä½†æ˜¯ä¸€æ—¦å¯¹è±¡çš„å±æ€§å€¼åˆæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯æœ‰ä¸¤å±‚æˆ–è€…ä¸¤å±‚ä»¥ä¸Šæ—¶ï¼Œå°±ä¼šå‘ç°è¿™ä¸¤ç§æ–¹å¼éƒ½æ˜¯æµ…æ‹·è´ã€‚</p><h4 id="object-getownpropertydescriptors-å’Œobject-defineproperties" tabindex="-1"><code>Object.getOwnPropertyDescriptors()</code>å’Œ<code>Object.defineProperties()</code> <a class="header-anchor" href="#object-getownpropertydescriptors-å’Œobject-defineproperties" aria-label="Permalink to &quot;`Object.getOwnPropertyDescriptors()`å’Œ`Object.defineProperties()`&quot;">â€‹</a></h4><p><code>JavaScript</code>å…è®¸æˆ‘ä»¬é€šè¿‡<strong>å±æ€§æè¿°ç¬¦</strong>æ¥åˆ›å»ºå±æ€§ã€‚</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> copyAllOwnProperties</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">original</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E5C07B;"> Object</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">defineProperties</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">		{},</span></span>
<span class="line"><span style="color:#E5C07B;">		Object</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getOwnPropertyDescriptors</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">original</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">	);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ol><li>èƒ½å¤Ÿå¤åˆ¶æ‰€æœ‰è‡ªæœ‰å±æ€§</li><li>èƒ½å¤Ÿå¤åˆ¶éæšä¸¾å±æ€§</li></ol><h3 id="æ·±æ‹·è´" tabindex="-1">æ·±æ‹·è´ <a class="header-anchor" href="#æ·±æ‹·è´" aria-label="Permalink to &quot;æ·±æ‹·è´&quot;">â€‹</a></h3><p>æ·±æ‹·è´æ˜¯å°†ä¸€ä¸ªå¯¹è±¡ä»å†…å­˜ä¸­å®Œæ•´çš„æ‹·è´ä¸€ä»½å‡ºæ¥ï¼Œä»å †å†…å­˜ä¸­å¼€è¾Ÿä¸€ä¸ªæ–°çš„åŒºåŸŸå­˜æ”¾æ–°å¯¹è±¡ï¼Œä¸”ä¿®æ”¹æ–°å¯¹è±¡ä¸ä¼šå½±å“åŸå¯¹è±¡ã€‚</p><p><code>æ·±æ‹·è´</code>ï¼šå¼€è¾Ÿä¸€ä¸ªæ–°çš„æ ˆï¼Œä¸¤ä¸ªå¯¹è±¡çš„å±æ€§å®Œå…¨ç›¸åŒï¼Œä½†æ˜¯å¯¹åº”ä¸¤ä¸ªä¸åŒçš„åœ°å€ï¼Œä¿®æ”¹ä¸€ä¸ªå¯¹è±¡çš„å±æ€§ï¼Œä¸ä¼šæ”¹å˜å¦ä¸€ä¸ªå¯¹è±¡çš„å±æ€§ã€‚</p><h4 id="æ·±æ‹·è´æ–¹æ³•" tabindex="-1">æ·±æ‹·è´æ–¹æ³• <a class="header-anchor" href="#æ·±æ‹·è´æ–¹æ³•" aria-label="Permalink to &quot;æ·±æ‹·è´æ–¹æ³•&quot;">â€‹</a></h4><ol><li><code>$.extend(deep,target,object1,objectN)</code> ï¼Œå°† <code>deep</code> è®¾ç½®ä¸º <code>true</code></li><li><code>JSON.parse(JSON.stringify)</code> ï¼šç”¨ <code>JSON.stringify</code> å°†å¯¹è±¡è½¬æˆ <code>JSON</code> å­—ç¬¦ä¸²ï¼Œå†ç”¨ <code>JSON.parse</code> æ–¹æ³•æŠŠå­—ç¬¦ä¸²è§£ææˆå¯¹è±¡ï¼Œä¸€å»ä¸€æ¥ï¼Œæ–°çš„å¯¹è±¡äº§ç”Ÿäº†ï¼Œè€Œä¸”å¯¹è±¡ä¼šå¼€è¾Ÿæ–°çš„æ ˆï¼Œå®ç°æ·±æ‹·è´ã€‚è¿™ç§æ–¹æ³•è™½ç„¶å¯ä»¥å®ç°æ•°ç»„æˆ–å¯¹è±¡æ·±æ‹·è´ï¼Œä½†ä¸èƒ½å¤„ç†å‡½æ•°ã€‚</li><li>æ‰‹å†™é€’å½’</li></ol><h4 id="ç®€æ˜“ç‰ˆåŠé—®é¢˜" tabindex="-1">ç®€æ˜“ç‰ˆåŠé—®é¢˜ <a class="header-anchor" href="#ç®€æ˜“ç‰ˆåŠé—®é¢˜" aria-label="Permalink to &quot;ç®€æ˜“ç‰ˆåŠé—®é¢˜&quot;">â€‹</a></h4><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#E5C07B;">JSON</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">parse</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">JSON</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">stringify</span><span style="color:#ABB2BF;">());</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>ä¼°è®¡è¿™ä¸ª api èƒ½è¦†ç›–å¤§å¤šæ•°çš„åº”ç”¨åœºæ™¯ï¼Œæ²¡é”™ï¼Œè°ˆåˆ°æ·±æ‹·è´ï¼Œæˆ‘ç¬¬ä¸€ä¸ªæƒ³åˆ°çš„ä¹Ÿæ˜¯å®ƒã€‚ä½†æ˜¯å®é™…ä¸Šï¼Œå¯¹äºæŸäº›ä¸¥æ ¼çš„åœºæ™¯æ¥è¯´ï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯æœ‰å·¨å¤§çš„å‘çš„ã€‚é—®é¢˜å¦‚ä¸‹ï¼š</p><p>æ— æ³•è§£å†³ å¾ªç¯å¼•ç”¨ çš„é—®é¢˜ã€‚ä¸¾ä¸ªä¾‹å­ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> a</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">val</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;"> };</span></span>
<span class="line"><span style="color:#E5C07B;">a</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">target</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> a</span><span style="color:#ABB2BF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>æ‹·è´ a ä¼šå‡ºç°ç³»ç»Ÿæ ˆæº¢å‡ºï¼Œå› ä¸ºå‡ºç°äº† æ— é™é€’å½’ çš„æƒ…å†µã€‚</li><li>æ— æ³•æ‹·è´ä¸€å†™ ç‰¹æ®Šçš„å¯¹è±¡ ï¼Œè¯¸å¦‚ RegExp, Date, Set, Map ç­‰ã€‚</li><li>æ— æ³•æ‹·è´ å‡½æ•° (åˆ’é‡ç‚¹)ã€‚</li></ul><p>å› æ­¤è¿™ä¸ª api å…ˆ pass æ‰ï¼Œæˆ‘ä»¬é‡æ–°å†™ä¸€ä¸ªæ·±æ‹·è´ï¼Œç®€æ˜“ç‰ˆå¦‚ä¸‹ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#61AFEF;"> deepClone</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">target</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">typeof</span><span style="color:#E06C75;"> target</span><span style="color:#56B6C2;"> ===</span><span style="color:#98C379;"> &quot;object&quot;</span><span style="color:#56B6C2;"> &amp;&amp;</span><span style="color:#E06C75;"> target</span><span style="color:#56B6C2;"> !==</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		const</span><span style="color:#E5C07B;"> cloneTarget</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Array</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">isArray</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">target</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">?</span><span style="color:#ABB2BF;"> [] </span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> {};</span></span>
<span class="line"><span style="color:#C678DD;">		for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> prop</span><span style="color:#C678DD;"> in</span><span style="color:#E06C75;"> target</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">			if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">target</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">hasOwnProperty</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">prop</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#E06C75;">				cloneTarget</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">prop</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#61AFEF;"> deepClone</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">target</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">prop</span><span style="color:#ABB2BF;">]);</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E06C75;"> cloneTarget</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E06C75;"> target</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>ç°åœ¨ï¼Œæˆ‘ä»¬ä»¥åˆšåˆšå‘ç°çš„ä¸‰ä¸ªé—®é¢˜ä¸ºå¯¼å‘ï¼Œä¸€æ­¥æ­¥æ¥å®Œå–„ã€ä¼˜åŒ–æˆ‘ä»¬çš„æ·±æ‹·è´ä»£ç ã€‚</p><ul><li>è€ƒè™‘åŸºç¡€ç±»å‹</li><li>å¼•ç”¨ç±»å‹ <ul><li>RegExpã€Dateã€å‡½æ•° ä¸æ˜¯ JSON å®‰å…¨çš„</li><li>ä¼šä¸¢å¤± constructorï¼Œæ‰€æœ‰çš„æ„é€ å‡½æ•°éƒ½æŒ‡å‘ Object</li><li>ç ´è§£å¾ªç¯å¼•ç”¨</li></ul></li></ul><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> deepCopy</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">obj</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">typeof</span><span style="color:#E06C75;"> obj</span><span style="color:#56B6C2;"> ===</span><span style="color:#98C379;"> &quot;object&quot;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		var</span><span style="color:#E06C75;"> result</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> obj</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">constructor</span><span style="color:#56B6C2;"> ===</span><span style="color:#E06C75;"> Array</span><span style="color:#C678DD;"> ?</span><span style="color:#ABB2BF;"> [] </span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> {};</span></span>
<span class="line"><span style="color:#C678DD;">		for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> i</span><span style="color:#C678DD;"> in</span><span style="color:#E06C75;"> obj</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">			result</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#C678DD;"> typeof</span><span style="color:#E06C75;"> obj</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">===</span><span style="color:#98C379;"> &quot;object&quot;</span><span style="color:#C678DD;"> ?</span><span style="color:#61AFEF;"> deepCopy</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">]) </span><span style="color:#C678DD;">:</span><span style="color:#E06C75;"> obj</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">		var</span><span style="color:#E06C75;"> result</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> obj</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> result</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h5 id="è§£å†³å¾ªç¯å¼•ç”¨" tabindex="-1">è§£å†³å¾ªç¯å¼•ç”¨ <a class="header-anchor" href="#è§£å†³å¾ªç¯å¼•ç”¨" aria-label="Permalink to &quot;è§£å†³å¾ªç¯å¼•ç”¨&quot;">â€‹</a></h5><p>ç°åœ¨é—®é¢˜å¦‚ä¸‹ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> obj</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">val</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">100</span><span style="color:#ABB2BF;"> };</span></span>
<span class="line"><span style="color:#E5C07B;">obj</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">target</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> obj</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#61AFEF;">deepClone</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">// æŠ¥é”™: RangeError: Maximum call stack size exceeded</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>è¿™å°±æ˜¯å¾ªç¯å¼•ç”¨ã€‚æˆ‘ä»¬æ€ä¹ˆæ¥è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ</p><p>åˆ›å»ºä¸€ä¸ª Mapã€‚è®°å½•ä¸‹å·²ç»æ‹·è´è¿‡çš„å¯¹è±¡ï¼Œå¦‚æœè¯´å·²ç»æ‹·è´è¿‡ï¼Œé‚£ç›´æ¥è¿”å›å®ƒè¡Œäº†ã€‚</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#61AFEF;"> isObject</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">target</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	(</span><span style="color:#C678DD;">typeof</span><span style="color:#E06C75;"> target</span><span style="color:#56B6C2;"> ===</span><span style="color:#98C379;"> &quot;object&quot;</span><span style="color:#56B6C2;"> ||</span><span style="color:#C678DD;"> typeof</span><span style="color:#E06C75;"> target</span><span style="color:#56B6C2;"> ===</span><span style="color:#98C379;"> &quot;function&quot;</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">&amp;&amp;</span></span>
<span class="line"><span style="color:#E06C75;">	target</span><span style="color:#56B6C2;"> !==</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#61AFEF;"> deepClone</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">target</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">map</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Map</span><span style="color:#ABB2BF;">()) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">map</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">target</span><span style="color:#ABB2BF;">)) </span><span style="color:#C678DD;">return</span><span style="color:#E06C75;"> target</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#61AFEF;">isObject</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">target</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#E5C07B;">		map</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">set</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">target</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">		const</span><span style="color:#E5C07B;"> cloneTarget</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Array</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">isArray</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">target</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">?</span><span style="color:#ABB2BF;"> [] </span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> {};</span></span>
<span class="line"><span style="color:#C678DD;">		for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> prop</span><span style="color:#C678DD;"> in</span><span style="color:#E06C75;"> target</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">			if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">target</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">hasOwnProperty</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">prop</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#E06C75;">				cloneTarget</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">prop</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#61AFEF;"> deepClone</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">target</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">prop</span><span style="color:#ABB2BF;">], </span><span style="color:#E06C75;">map</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E06C75;"> cloneTarget</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E06C75;"> target</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>ç°åœ¨æ¥è¯•ä¸€è¯•ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> a</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">val</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;"> };</span></span>
<span class="line"><span style="color:#E5C07B;">a</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">target</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> a</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> newA</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> deepClone</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">newA</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">//{ val: 2, target: { val: 2, target: [Circular] } }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>å¥½åƒæ˜¯æ²¡æœ‰é—®é¢˜äº†, æ‹·è´ä¹Ÿå®Œæˆäº†ã€‚ä½†è¿˜æ˜¯æœ‰ä¸€ä¸ªæ½œåœ¨çš„å‘, å°±æ˜¯ map ä¸Šçš„ key å’Œ map æ„æˆäº† å¼ºå¼•ç”¨å…³ç³» ï¼Œè¿™æ˜¯ç›¸å½“å±é™©çš„ã€‚æˆ‘ç»™ä½ è§£é‡Šä¸€ä¸‹ä¸ä¹‹ç›¸å¯¹çš„å¼±å¼•ç”¨çš„æ¦‚å¿µä½ å°±æ˜ç™½äº†ï¼š</p><blockquote><p>åœ¨è®¡ç®—æœºç¨‹åºè®¾è®¡ä¸­ï¼Œå¼±å¼•ç”¨ä¸å¼ºå¼•ç”¨ç›¸å¯¹ï¼Œæ˜¯æŒ‡ä¸èƒ½ç¡®ä¿å…¶å¼•ç”¨çš„å¯¹è±¡ä¸ä¼šè¢«åƒåœ¾å›æ”¶å™¨å›æ”¶çš„å¼•ç”¨ã€‚ ä¸€ä¸ªå¯¹è±¡è‹¥åªè¢«å¼±å¼•ç”¨æ‰€å¼•ç”¨ï¼Œåˆ™è¢«è®¤ä¸ºæ˜¯ä¸å¯è®¿é—®ï¼ˆæˆ–å¼±å¯è®¿é—®ï¼‰çš„ï¼Œå¹¶å› æ­¤å¯èƒ½åœ¨ä»»ä½•æ—¶åˆ»è¢«å›æ”¶ã€‚ --ç™¾åº¦ç™¾ç§‘</p></blockquote><p>å¤§ç™½è¯è§£é‡Šä¸€ä¸‹ï¼Œè¢«å¼±å¼•ç”¨çš„å¯¹è±¡å¯ä»¥åœ¨ä»»ä½•æ—¶å€™è¢«å›æ”¶ï¼Œè€Œå¯¹äºå¼ºå¼•ç”¨æ¥è¯´ï¼Œåªè¦è¿™ä¸ªå¼ºå¼•ç”¨è¿˜åœ¨ï¼Œé‚£ä¹ˆå¯¹è±¡æ— æ³•è¢«å›æ”¶ã€‚æ‹¿ä¸Šé¢çš„ä¾‹å­è¯´ï¼Œmap å’Œ a ä¸€ç›´æ˜¯å¼ºå¼•ç”¨çš„å…³ç³»ï¼Œ åœ¨ç¨‹åºç»“æŸä¹‹å‰ï¼Œa æ‰€å çš„å†…å­˜ç©ºé—´ä¸€ç›´ä¸ä¼šè¢«é‡Šæ”¾ã€‚</p><p><strong>æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜ï¼Ÿ</strong></p><p>å¾ˆç®€å•ï¼Œè®© map çš„ key å’Œ map æ„æˆ å¼±å¼•ç”¨ å³å¯ã€‚ES6 ç»™æˆ‘ä»¬æä¾›äº†è¿™æ ·çš„æ•°æ®ç»“æ„ï¼Œå®ƒçš„åå­—å« WeakMap ï¼Œå®ƒæ˜¯ä¸€ç§ç‰¹æ®Šçš„ Map, å…¶ä¸­çš„é”®æ˜¯ å¼±å¼•ç”¨ çš„ã€‚å…¶é”®å¿…é¡»æ˜¯å¯¹è±¡ï¼Œè€Œå€¼å¯ä»¥æ˜¯ä»»æ„çš„ã€‚</p><p>ç¨å¾®æ”¹é€ ä¸€ä¸‹å³å¯ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#61AFEF;"> deepClone</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">target</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">map</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> WeakMap</span><span style="color:#ABB2BF;">()) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	//...</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h5 id="æ‹·è´ç‰¹æ®Šå¯¹è±¡" tabindex="-1">æ‹·è´ç‰¹æ®Šå¯¹è±¡ <a class="header-anchor" href="#æ‹·è´ç‰¹æ®Šå¯¹è±¡" aria-label="Permalink to &quot;æ‹·è´ç‰¹æ®Šå¯¹è±¡&quot;">â€‹</a></h5><h6 id="_1-å¯ç»§ç»­éå†" tabindex="-1">ï¼ˆ1ï¼‰å¯ç»§ç»­éå† <a class="header-anchor" href="#_1-å¯ç»§ç»­éå†" aria-label="Permalink to &quot;ï¼ˆ1ï¼‰å¯ç»§ç»­éå†&quot;">â€‹</a></h6><p>å¯¹äºç‰¹æ®Šçš„å¯¹è±¡ï¼Œæˆ‘ä»¬ä½¿ç”¨ä»¥ä¸‹æ–¹å¼æ¥é‰´åˆ«ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#E5C07B;">Object</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prototype</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">toString</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">call</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>æ¢³ç†ä¸€ä¸‹å¯¹äºå¯éå†å¯¹è±¡ä¼šæœ‰ä»€ä¹ˆç»“æœï¼š</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#ABB2BF;">[</span><span style="color:#98C379;">&quot;object Map&quot;</span><span style="color:#ABB2BF;">]</span></span>
<span class="line"><span style="color:#ABB2BF;">[</span><span style="color:#98C379;">&quot;object Set&quot;</span><span style="color:#ABB2BF;">]</span></span>
<span class="line"><span style="color:#ABB2BF;">[</span><span style="color:#98C379;">&quot;object Array&quot;</span><span style="color:#ABB2BF;">]</span></span>
<span class="line"><span style="color:#ABB2BF;">[</span><span style="color:#98C379;">&quot;object Object&quot;</span><span style="color:#ABB2BF;">]</span></span>
<span class="line"><span style="color:#ABB2BF;">[</span><span style="color:#98C379;">&quot;object Arguments&quot;</span><span style="color:#ABB2BF;">]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>å¥½ï¼Œä»¥è¿™äº›ä¸åŒçš„å­—ç¬¦ä¸²ä¸ºä¾æ®ï¼Œæˆ‘ä»¬å°±å¯ä»¥æˆåŠŸåœ°é‰´åˆ«è¿™äº›å¯¹è±¡ã€‚</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> getType</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Object</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prototype</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">toString</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">call</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> canTraverse</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#98C379;">	&quot;[object Map]&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;">	&quot;[object Set]&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;">	&quot;[object Array]&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;">	&quot;[object Object]&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;">	&quot;[object Arguments]&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#61AFEF;"> deepClone</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">target</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">map</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Map</span><span style="color:#ABB2BF;">()) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#61AFEF;">isObject</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">target</span><span style="color:#ABB2BF;">)) </span><span style="color:#C678DD;">return</span><span style="color:#E06C75;"> target</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> type</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> getType</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">target</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> cloneTarget</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E06C75;">canTraverse</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">type</span><span style="color:#ABB2BF;">]) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// å¤„ç†ä¸èƒ½éå†çš„å¯¹è±¡</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// è¿™æ³¢æ“ä½œç›¸å½“å…³é”®ï¼Œå¯ä»¥ä¿è¯å¯¹è±¡çš„åŸå‹ä¸ä¸¢å¤±ï¼</span></span>
<span class="line"><span style="color:#C678DD;">		let</span><span style="color:#E06C75;"> ctor</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> target</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prototype</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">		cloneTarget</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> ctor</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">map</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">target</span><span style="color:#ABB2BF;">)) </span><span style="color:#C678DD;">return</span><span style="color:#E06C75;"> target</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">	map</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">put</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">target</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">type</span><span style="color:#56B6C2;"> ===</span><span style="color:#E06C75;"> mapTag</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		//å¤„ç†Map</span></span>
<span class="line"><span style="color:#E5C07B;">		target</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">forEach</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">item</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">key</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">			cloneTarget</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">set</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">deepClone</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">), </span><span style="color:#61AFEF;">deepClone</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">item</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">		});</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">type</span><span style="color:#56B6C2;"> ===</span><span style="color:#E06C75;"> setTag</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		//å¤„ç†Set</span></span>
<span class="line"><span style="color:#E5C07B;">		target</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">forEach</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">item</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">			target</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">add</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">deepClone</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">item</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">		});</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// å¤„ç†æ•°ç»„å’Œå¯¹è±¡</span></span>
<span class="line"><span style="color:#C678DD;">	for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> prop</span><span style="color:#C678DD;"> in</span><span style="color:#E06C75;"> target</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">target</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">hasOwnProperty</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">prop</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#E06C75;">			cloneTarget</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">prop</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#61AFEF;"> deepClone</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">target</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">prop</span><span style="color:#ABB2BF;">]);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> cloneTarget</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div></div><h6 id="_2-ä¸å¯éå†çš„å¯¹è±¡" tabindex="-1">ï¼ˆ2ï¼‰ä¸å¯éå†çš„å¯¹è±¡ <a class="header-anchor" href="#_2-ä¸å¯éå†çš„å¯¹è±¡" aria-label="Permalink to &quot;ï¼ˆ2ï¼‰ä¸å¯éå†çš„å¯¹è±¡&quot;">â€‹</a></h6><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#61AFEF;">const</span><span style="color:#98C379;"> boolTag</span><span style="color:#98C379;"> =</span><span style="color:#98C379;"> &#39;[object Boolean]&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#61AFEF;">const</span><span style="color:#98C379;"> numberTag</span><span style="color:#98C379;"> =</span><span style="color:#98C379;"> &#39;[object Number]&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#61AFEF;">const</span><span style="color:#98C379;"> stringTag</span><span style="color:#98C379;"> =</span><span style="color:#98C379;"> &#39;[object String]&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#61AFEF;">const</span><span style="color:#98C379;"> dateTag</span><span style="color:#98C379;"> =</span><span style="color:#98C379;"> &#39;[object Date]&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#61AFEF;">const</span><span style="color:#98C379;"> errorTag</span><span style="color:#98C379;"> =</span><span style="color:#98C379;"> &#39;[object Error]&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#61AFEF;">const</span><span style="color:#98C379;"> regexpTag</span><span style="color:#98C379;"> =</span><span style="color:#98C379;"> &#39;[object RegExp]&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#61AFEF;">const</span><span style="color:#98C379;"> funcTag</span><span style="color:#98C379;"> =</span><span style="color:#98C379;"> &#39;[object Function]&#39;</span><span style="color:#ABB2BF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>å¯¹äºä¸å¯éå†çš„å¯¹è±¡ï¼Œä¸åŒçš„å¯¹è±¡æœ‰ä¸åŒçš„å¤„ç†ã€‚</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#61AFEF;"> handleRegExp</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">target</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#ABB2BF;"> { </span><span style="color:#E5C07B;">source</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">flags</span><span style="color:#ABB2BF;"> } </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> target</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#C678DD;"> new</span><span style="color:#E5C07B;"> target</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">constructor</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">source</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">flags</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#61AFEF;"> handleFunc</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">target</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// å¾…ä¼šçš„é‡ç‚¹éƒ¨åˆ†</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#61AFEF;"> handleNotTraverse</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">target</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">tag</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> Ctor</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> targe</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">constructor</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	switch</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">tag</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		case</span><span style="color:#E06C75;"> boolTag</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#C678DD;">		case</span><span style="color:#E06C75;"> numberTag</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#C678DD;">		case</span><span style="color:#E06C75;"> stringTag</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#C678DD;">		case</span><span style="color:#E06C75;"> errorTag</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#C678DD;">		case</span><span style="color:#E06C75;"> dateTag</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#C678DD;">			return</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Ctor</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">target</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">		case</span><span style="color:#E06C75;"> regexpTag</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#C678DD;">			return</span><span style="color:#61AFEF;"> handleRegExp</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">target</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">		case</span><span style="color:#E06C75;"> funcTag</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#C678DD;">			return</span><span style="color:#61AFEF;"> handleFunc</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">target</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">		default</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#C678DD;">			return</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Ctor</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">target</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h5 id="æ‹·è´å‡½æ•°" tabindex="-1">æ‹·è´å‡½æ•° <a class="header-anchor" href="#æ‹·è´å‡½æ•°" aria-label="Permalink to &quot;æ‹·è´å‡½æ•°&quot;">â€‹</a></h5><p>è™½ç„¶å‡½æ•°ä¹Ÿæ˜¯å¯¹è±¡ï¼Œä½†æ˜¯å®ƒè¿‡äºç‰¹æ®Šï¼Œæˆ‘ä»¬å•ç‹¬æŠŠå®ƒæ‹¿å‡ºæ¥æ‹†è§£ã€‚</p><p>æåˆ°å‡½æ•°ï¼Œåœ¨ JS ç§æœ‰ä¸¤ç§å‡½æ•°ï¼Œä¸€ç§æ˜¯æ™®é€šå‡½æ•°ï¼Œå¦ä¸€ç§æ˜¯ç®­å¤´å‡½æ•°ã€‚æ¯ä¸ªæ™®é€šå‡½æ•°éƒ½æ˜¯ Function çš„å®ä¾‹ï¼Œè€Œç®­å¤´å‡½æ•°ä¸æ˜¯ä»»ä½•ç±»çš„å®ä¾‹ï¼Œæ¯æ¬¡è°ƒç”¨éƒ½æ˜¯ä¸ä¸€æ ·çš„å¼•ç”¨ã€‚é‚£æˆ‘ä»¬åªéœ€è¦ å¤„ç†æ™®é€šå‡½æ•°çš„æƒ…å†µï¼Œç®­å¤´å‡½æ•°ç›´æ¥è¿”å›å®ƒæœ¬èº«å°±å¥½äº†ã€‚</p><p><strong>é‚£ä¹ˆå¦‚ä½•æ¥åŒºåˆ†ä¸¤è€…å‘¢ï¼Ÿ</strong></p><p>ç­”æ¡ˆæ˜¯ï¼šåˆ©ç”¨åŸå‹ã€‚ç®­å¤´å‡½æ•°æ˜¯ä¸å­˜åœ¨åŸå‹çš„ã€‚</p><p>ä»£ç å¦‚ä¸‹ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#61AFEF;"> handleFunc</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">func</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// ç®­å¤´å‡½æ•°ç›´æ¥è¿”å›è‡ªèº«</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E5C07B;">func</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prototype</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">return</span><span style="color:#E06C75;"> func</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> bodyReg</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> /(?&lt;={)(.</span><span style="color:#ABB2BF;">|</span><span style="color:#E06C75;">\n)</span><span style="color:#D19A66;">+</span><span style="color:#E06C75;">(?=})/</span><span style="color:#C678DD;">m</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> paramReg</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> /(?&lt;=</span><span style="color:#56B6C2;">\(</span><span style="color:#E06C75;">).</span><span style="color:#D19A66;">+</span><span style="color:#E06C75;">(?=</span><span style="color:#56B6C2;">\)</span><span style="color:#E06C75;">\s</span><span style="color:#D19A66;">+</span><span style="color:#E06C75;">{)/</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> funcString</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> func</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">toString</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// åˆ†åˆ«åŒ¹é… å‡½æ•°å‚æ•° å’Œ å‡½æ•°ä½“</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> param</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> paramReg</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">exec</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">funcString</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> body</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> bodyReg</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">exec</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">funcString</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">return</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">param</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		const</span><span style="color:#E5C07B;"> paramArr</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> param</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">].</span><span style="color:#61AFEF;">split</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;,&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Function</span><span style="color:#ABB2BF;">(...</span><span style="color:#E06C75;">paramArr</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">]);</span></span>
<span class="line"><span style="color:#ABB2BF;">	} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Function</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">]);</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>åˆ°ç°åœ¨ï¼Œæˆ‘ä»¬çš„æ·±æ‹·è´å°±å®ç°åœ°æ¯”è¾ƒå®Œå–„äº†ã€‚ä¸è¿‡åœ¨æµ‹è¯•çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä¹Ÿå‘ç°äº†ä¸€ä¸ªå°å°çš„ bugã€‚</p><h5 id="å°å°çš„-bug" tabindex="-1">å°å°çš„ bug <a class="header-anchor" href="#å°å°çš„-bug" aria-label="Permalink to &quot;å°å°çš„ bug&quot;">â€‹</a></h5><p>å¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> target</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Boolean</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">false</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> Ctor</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> target</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">constructor</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">new</span><span style="color:#61AFEF;"> Ctor</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">target</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">// ç»“æœä¸º Boolean {true} è€Œä¸æ˜¯ falseã€‚</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>å¯¹äºè¿™æ ·ä¸€ä¸ª bugï¼Œæˆ‘ä»¬å¯ä»¥å¯¹ Boolean æ‹·è´åšæœ€ç®€å•çš„ä¿®æ”¹ï¼Œ è°ƒç”¨ valueOf: new target.constructor(target.valueOf())ã€‚</p><p>ä½†å®é™…ä¸Šï¼Œè¿™ç§å†™æ³•æ˜¯ä¸æ¨èçš„ã€‚å› ä¸ºåœ¨ ES6 åä¸æ¨èä½¿ç”¨ã€new åŸºæœ¬ç±»å‹()ã€‘è¿™ æ ·çš„è¯­æ³•ï¼Œæ‰€ä»¥ es6 ä¸­çš„æ–°ç±»å‹ Symbol æ˜¯ä¸èƒ½ç›´æ¥ new çš„ï¼Œåªèƒ½é€šè¿‡ new Object(SymbelType)ã€‚</p><p>å› æ­¤æˆ‘ä»¬æ¥ä¸‹æ¥ç»Ÿä¸€ä¸€ä¸‹ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#61AFEF;"> handleNotTraverse</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">target</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">tag</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> Ctor</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> targe</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">constructor</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	switch</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">tag</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		case</span><span style="color:#E06C75;"> boolTag</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#C678DD;">			return</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Object</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Boolean</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prototype</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">valueOf</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">call</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">target</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#C678DD;">		case</span><span style="color:#E06C75;"> numberTag</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#C678DD;">			return</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Object</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Number</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prototype</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">valueOf</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">call</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">target</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#C678DD;">		case</span><span style="color:#E06C75;"> stringTag</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#C678DD;">			return</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Object</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prototype</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">valueOf</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">call</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">target</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#C678DD;">		case</span><span style="color:#E06C75;"> errorTag</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#C678DD;">		case</span><span style="color:#E06C75;"> dateTag</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#C678DD;">			return</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Ctor</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">target</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">		case</span><span style="color:#E06C75;"> regexpTag</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#C678DD;">			return</span><span style="color:#61AFEF;"> handleRegExp</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">target</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">		case</span><span style="color:#E06C75;"> funcTag</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#C678DD;">			return</span><span style="color:#61AFEF;"> handleFunc</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">target</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">		default</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#C678DD;">			return</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Ctor</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">target</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h5 id="å®Œæ•´ä»£ç å±•ç¤º" tabindex="-1">å®Œæ•´ä»£ç å±•ç¤º <a class="header-anchor" href="#å®Œæ•´ä»£ç å±•ç¤º" aria-label="Permalink to &quot;å®Œæ•´ä»£ç å±•ç¤º&quot;">â€‹</a></h5><p>å®Œæ•´ç‰ˆçš„æ·±æ‹·è´ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#61AFEF;"> getType</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">obj</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#E5C07B;"> Object</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prototype</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">toString</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">call</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#61AFEF;"> isObject</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">target</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	(</span><span style="color:#C678DD;">typeof</span><span style="color:#E06C75;"> target</span><span style="color:#56B6C2;"> ===</span><span style="color:#98C379;"> &quot;object&quot;</span><span style="color:#56B6C2;"> ||</span><span style="color:#C678DD;"> typeof</span><span style="color:#E06C75;"> target</span><span style="color:#56B6C2;"> ===</span><span style="color:#98C379;"> &quot;function&quot;</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">&amp;&amp;</span></span>
<span class="line"><span style="color:#E06C75;">	target</span><span style="color:#56B6C2;"> !==</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> canTraverse</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#98C379;">	&quot;[object Map]&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;">	&quot;[object Set]&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;">	&quot;[object Array]&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;">	&quot;[object Object]&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;">	&quot;[object Arguments]&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> mapTag</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;[object Map]&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> setTag</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;[object Set]&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> boolTag</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;[object Boolean]&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> numberTag</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;[object Number]&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> stringTag</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;[object String]&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> symbolTag</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;[object Symbol]&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> dateTag</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;[object Date]&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> errorTag</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;[object Error]&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> regexpTag</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;[object RegExp]&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> funcTag</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;[object Function]&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#61AFEF;"> handleRegExp</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">target</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#ABB2BF;"> { </span><span style="color:#E5C07B;">source</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">flags</span><span style="color:#ABB2BF;"> } </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> target</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#C678DD;"> new</span><span style="color:#E5C07B;"> target</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">constructor</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">source</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">flags</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#61AFEF;"> handleFunc</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">func</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// ç®­å¤´å‡½æ•°ç›´æ¥è¿”å›è‡ªèº«</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E5C07B;">func</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prototype</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">return</span><span style="color:#E06C75;"> func</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> bodyReg</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> /(?&lt;={)(.</span><span style="color:#ABB2BF;">|</span><span style="color:#E06C75;">\n)</span><span style="color:#D19A66;">+</span><span style="color:#E06C75;">(?=})/</span><span style="color:#C678DD;">m</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> paramReg</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> /(?&lt;=</span><span style="color:#56B6C2;">\(</span><span style="color:#E06C75;">).</span><span style="color:#D19A66;">+</span><span style="color:#E06C75;">(?=</span><span style="color:#56B6C2;">\)</span><span style="color:#E06C75;">\s</span><span style="color:#D19A66;">+</span><span style="color:#E06C75;">{)/</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> funcString</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> func</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">toString</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// åˆ†åˆ«åŒ¹é… å‡½æ•°å‚æ•° å’Œ å‡½æ•°ä½“</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> param</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> paramReg</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">exec</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">funcString</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> body</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> bodyReg</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">exec</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">funcString</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">return</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">param</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		const</span><span style="color:#E5C07B;"> paramArr</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> param</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">].</span><span style="color:#61AFEF;">split</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;,&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Function</span><span style="color:#ABB2BF;">(...</span><span style="color:#E06C75;">paramArr</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">]);</span></span>
<span class="line"><span style="color:#ABB2BF;">	} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Function</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">]);</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#61AFEF;"> handleNotTraverse</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">target</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">tag</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> Ctor</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> target</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">constructor</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	switch</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">tag</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		case</span><span style="color:#E06C75;"> boolTag</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#C678DD;">			return</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Object</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Boolean</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prototype</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">valueOf</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">call</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">target</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#C678DD;">		case</span><span style="color:#E06C75;"> numberTag</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#C678DD;">			return</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Object</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Number</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prototype</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">valueOf</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">call</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">target</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#C678DD;">		case</span><span style="color:#E06C75;"> stringTag</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#C678DD;">			return</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Object</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prototype</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">valueOf</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">call</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">target</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#C678DD;">		case</span><span style="color:#E06C75;"> symbolTag</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#C678DD;">			return</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Object</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Symbol</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prototype</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">valueOf</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">call</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">target</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#C678DD;">		case</span><span style="color:#E06C75;"> errorTag</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#C678DD;">		case</span><span style="color:#E06C75;"> dateTag</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#C678DD;">			return</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Ctor</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">target</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">		case</span><span style="color:#E06C75;"> regexpTag</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#C678DD;">			return</span><span style="color:#61AFEF;"> handleRegExp</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">target</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">		case</span><span style="color:#E06C75;"> funcTag</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#C678DD;">			return</span><span style="color:#61AFEF;"> handleFunc</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">target</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">		default</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#C678DD;">			return</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Ctor</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">target</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#61AFEF;"> deepClone</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">target</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">map</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> WeakMap</span><span style="color:#ABB2BF;">()) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#61AFEF;">isObject</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">target</span><span style="color:#ABB2BF;">)) </span><span style="color:#C678DD;">return</span><span style="color:#E06C75;"> target</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> type</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> getType</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">target</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> cloneTarget</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E06C75;">canTraverse</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">type</span><span style="color:#ABB2BF;">]) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// å¤„ç†ä¸èƒ½éå†çš„å¯¹è±¡</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#61AFEF;"> handleNotTraverse</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">target</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">type</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// è¿™æ³¢æ“ä½œç›¸å½“å…³é”®ï¼Œå¯ä»¥ä¿è¯å¯¹è±¡çš„åŸå‹ä¸ä¸¢å¤±ï¼</span></span>
<span class="line"><span style="color:#C678DD;">		let</span><span style="color:#E06C75;"> ctor</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> target</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">constructor</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">		cloneTarget</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> ctor</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">map</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">target</span><span style="color:#ABB2BF;">)) </span><span style="color:#C678DD;">return</span><span style="color:#E06C75;"> target</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">	map</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">set</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">target</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">type</span><span style="color:#56B6C2;"> ===</span><span style="color:#E06C75;"> mapTag</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		//å¤„ç†Map</span></span>
<span class="line"><span style="color:#E5C07B;">		target</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">forEach</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">item</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">key</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">			cloneTarget</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">set</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">deepClone</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">map</span><span style="color:#ABB2BF;">), </span><span style="color:#61AFEF;">deepClone</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">item</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">map</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">		});</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">type</span><span style="color:#56B6C2;"> ===</span><span style="color:#E06C75;"> setTag</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		//å¤„ç†Set</span></span>
<span class="line"><span style="color:#E5C07B;">		target</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">forEach</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">item</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">			cloneTarget</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">add</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">deepClone</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">item</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">map</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">		});</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// å¤„ç†æ•°ç»„å’Œå¯¹è±¡</span></span>
<span class="line"><span style="color:#C678DD;">	for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> prop</span><span style="color:#C678DD;"> in</span><span style="color:#E06C75;"> target</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">target</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">hasOwnProperty</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">prop</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#E06C75;">			cloneTarget</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">prop</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#61AFEF;"> deepClone</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">target</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">prop</span><span style="color:#ABB2BF;">], </span><span style="color:#E06C75;">map</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> cloneTarget</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br></div></div><h4 id="æ·±æ‹·è´çš„å®ç°" tabindex="-1">æ·±æ‹·è´çš„å®ç° <a class="header-anchor" href="#æ·±æ‹·è´çš„å®ç°" aria-label="Permalink to &quot;æ·±æ‹·è´çš„å®ç°&quot;">â€‹</a></h4><p>é‚£å¦‚ä½•å®ç°ä¸€ä¸ªæ·±æ‹·è´å‘¢ï¼Ÿè¯´èµ·æ¥ä¹Ÿå¥½ç®€å•ï¼Œæˆ‘ä»¬åœ¨æ‹·è´çš„æ—¶å€™åˆ¤æ–­ä¸€ä¸‹å±æ€§å€¼çš„ç±»å‹ï¼Œå¦‚æœæ˜¯å¯¹è±¡ï¼Œæˆ‘ä»¬é€’å½’è°ƒç”¨æ·±æ‹·è´å‡½æ•°ä¸å°±å¥½äº†~</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">var</span><span style="color:#61AFEF;"> deepCopy</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">obj</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">typeof</span><span style="color:#E06C75;"> obj</span><span style="color:#56B6C2;"> !==</span><span style="color:#98C379;"> &quot;object&quot;</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> newObj</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> obj</span><span style="color:#C678DD;"> instanceof</span><span style="color:#E5C07B;"> Array</span><span style="color:#C678DD;"> ?</span><span style="color:#ABB2BF;"> [] </span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> {};</span></span>
<span class="line"><span style="color:#C678DD;">	for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> key</span><span style="color:#C678DD;"> in</span><span style="color:#E06C75;"> obj</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">obj</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">hasOwnProperty</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#E06C75;">			newObj</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span></span>
<span class="line"><span style="color:#C678DD;">				typeof</span><span style="color:#E06C75;"> obj</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">===</span><span style="color:#98C379;"> &quot;object&quot;</span><span style="color:#C678DD;"> ?</span><span style="color:#61AFEF;"> deepCopy</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">]) </span><span style="color:#C678DD;">:</span><span style="color:#E06C75;"> obj</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> newObj</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="å®ç°" tabindex="-1">å®ç° <a class="header-anchor" href="#å®ç°" aria-label="Permalink to &quot;å®ç°&quot;">â€‹</a></h4><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> deepCopy</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">oldObj</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">newobj</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;"> for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> key</span><span style="color:#C678DD;"> in</span><span style="color:#E06C75;"> oldObj</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">    var</span><span style="color:#E06C75;"> item</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> oldObj</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">     // åˆ¤æ–­æ˜¯å¦æ˜¯å¯¹è±¡</span></span>
<span class="line"><span style="color:#C678DD;">    if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">item</span><span style="color:#C678DD;"> instanceof</span><span style="color:#E5C07B;"> Object</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">         if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">item</span><span style="color:#C678DD;"> instanceof</span><span style="color:#E5C07B;"> Function</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">            newobj</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> oldObj</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#ABB2BF;">         } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">            newobj</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> {};  </span><span style="color:#7F848E;font-style:italic;">//å®šä¹‰ä¸€ä¸ªç©ºçš„å¯¹è±¡æ¥æ¥æ”¶æ‹·è´çš„å†…å®¹</span></span>
<span class="line"><span style="color:#61AFEF;">             deepCopy</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">item</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">newobj</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">]); </span><span style="color:#7F848E;font-style:italic;">//é€’å½’è°ƒç”¨</span></span>
<span class="line"><span style="color:#ABB2BF;">         }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">         // åˆ¤æ–­æ˜¯å¦æ˜¯æ•°ç»„</span></span>
<span class="line"><span style="color:#ABB2BF;">     } </span><span style="color:#C678DD;">else</span><span style="color:#C678DD;"> if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">item</span><span style="color:#C678DD;"> instanceof</span><span style="color:#E5C07B;"> Array</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">         newobj</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> [];  </span><span style="color:#7F848E;font-style:italic;">//å®šä¹‰ä¸€ä¸ªç©ºçš„æ•°ç»„æ¥æ¥æ”¶æ‹·è´çš„å†…å®¹</span></span>
<span class="line"><span style="color:#61AFEF;">        deepCopy</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">item</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">newobj</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">]); </span><span style="color:#7F848E;font-style:italic;">//é€’å½’è°ƒç”¨</span></span>
<span class="line"><span style="color:#ABB2BF;">     } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">        newobj</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> oldObj</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#ABB2BF;">     }</span></span>
<span class="line"><span style="color:#ABB2BF;"> }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h4 id="å®ç°-1" tabindex="-1">å®ç° <a class="header-anchor" href="#å®ç°-1" aria-label="Permalink to &quot;å®ç°&quot;">â€‹</a></h4><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#7F848E;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> * æ·±æ‹·è´</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> * </span><span style="color:#C678DD;font-style:italic;">@param</span><span style="color:#E5C07B;font-style:italic;"> {Object}</span><span style="color:#E06C75;font-style:italic;"> obj</span><span style="color:#7F848E;font-style:italic;"> è¦æ‹·è´çš„å¯¹è±¡</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> * </span><span style="color:#C678DD;font-style:italic;">@param</span><span style="color:#E5C07B;font-style:italic;"> {Map}</span><span style="color:#E06C75;font-style:italic;"> map</span><span style="color:#7F848E;font-style:italic;"> ç”¨äºå­˜å‚¨å¾ªç¯å¼•ç”¨å¯¹è±¡çš„åœ°å€</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> deepClone</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">obj</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {}, </span><span style="color:#E06C75;font-style:italic;">map</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Map</span><span style="color:#ABB2BF;">()) {</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">obj</span><span style="color:#56B6C2;"> ===</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">return</span><span style="color:#E06C75;"> obj</span><span style="color:#ABB2BF;">; </span><span style="color:#7F848E;font-style:italic;">// å¦‚æœæ˜¯nullæˆ–è€…undefinedæˆ‘å°±ä¸è¿›è¡Œæ‹·è´æ“ä½œ</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">obj</span><span style="color:#C678DD;"> instanceof</span><span style="color:#E5C07B;"> Date</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">return</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Date</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">obj</span><span style="color:#C678DD;"> instanceof</span><span style="color:#E5C07B;"> RegExp</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">return</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> RegExp</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// å¯èƒ½æ˜¯å¯¹è±¡æˆ–è€…æ™®é€šçš„å€¼  å¦‚æœæ˜¯å‡½æ•°çš„è¯æ˜¯ä¸éœ€è¦æ·±æ‹·è´</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">typeof</span><span style="color:#E06C75;"> obj</span><span style="color:#56B6C2;"> !==</span><span style="color:#98C379;"> &quot;object&quot;</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">return</span><span style="color:#E06C75;"> obj</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">map</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E5C07B;"> map</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> result</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {}; </span><span style="color:#7F848E;font-style:italic;">// åˆå§‹åŒ–è¿”å›ç»“æœ</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span></span>
<span class="line"><span style="color:#E06C75;">		obj</span><span style="color:#C678DD;"> instanceof</span><span style="color:#E5C07B;"> Array</span><span style="color:#56B6C2;"> ||</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// åŠ  || çš„åŸå› æ˜¯ä¸ºäº†é˜²æ­¢ Array çš„ prototype è¢«é‡å†™ï¼ŒArray.isArray ä¹Ÿæ˜¯å¦‚æ­¤</span></span>
<span class="line"><span style="color:#E5C07B;">		Object</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prototype</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">toString</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">===</span><span style="color:#98C379;"> &quot;[object Array]&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">	) {</span></span>
<span class="line"><span style="color:#E06C75;">		result</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [];</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// é˜²æ­¢å¾ªç¯å¼•ç”¨</span></span>
<span class="line"><span style="color:#E5C07B;">	map</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">set</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">result</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">	for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> key</span><span style="color:#C678DD;"> in</span><span style="color:#E06C75;"> obj</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// ä¿è¯ key ä¸æ˜¯åŸå‹å±æ€§</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">obj</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">hasOwnProperty</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// é€’å½’è°ƒç”¨</span></span>
<span class="line"><span style="color:#E06C75;">			result</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#61AFEF;"> deepClone</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">], </span><span style="color:#E06C75;">map</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> result</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h4 id="å®ç°ç®€æ˜“æ·±æ‹·è´-2" tabindex="-1">å®ç°ç®€æ˜“æ·±æ‹·è´ 2 <a class="header-anchor" href="#å®ç°ç®€æ˜“æ·±æ‹·è´-2" aria-label="Permalink to &quot;å®ç°ç®€æ˜“æ·±æ‹·è´ 2&quot;">â€‹</a></h4><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> deepCopy</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">obj</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">map</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> WeakMap</span><span style="color:#ABB2BF;">()) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// åŸºæœ¬ç±»å‹æˆ–nullç›´æ¥è¿”å›</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">typeof</span><span style="color:#E06C75;"> obj</span><span style="color:#56B6C2;"> !==</span><span style="color:#98C379;"> &quot;object&quot;</span><span style="color:#56B6C2;"> ||</span><span style="color:#E06C75;"> obj</span><span style="color:#56B6C2;"> ===</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E06C75;"> obj</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// åˆ¤æ–­æ˜¯æ–°å»ºä¸€ä¸ªæ•°ç»„è¿˜æ˜¯å¯¹è±¡</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> newObj</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Array</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">isArray</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">?</span><span style="color:#ABB2BF;"> [] </span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> {};</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// åˆ©ç”¨mapè§£å†³å¾ªç¯å¼•ç”¨</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">map</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">has</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E5C07B;"> map</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#E5C07B;">	map</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">set</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">newObj</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">// å°†å½“å‰å¯¹è±¡ä½œä¸ºkeyï¼Œå…‹éš†å¯¹è±¡ä½œä¸ºvalue</span></span>
<span class="line"><span style="color:#C678DD;">	for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> key</span><span style="color:#C678DD;"> in</span><span style="color:#E06C75;"> obj</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">obj</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">hasOwnProperty</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#E06C75;">			newObj</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#61AFEF;"> deepCopy</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">], </span><span style="color:#E06C75;">map</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">// é€’å½’</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> newObj</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// æµ‹è¯•</span></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> obj1</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">	name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;AKã€å“’å“’å“’&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	arr</span><span style="color:#ABB2BF;">: [</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, [</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">], </span><span style="color:#D19A66;">4</span><span style="color:#ABB2BF;">],</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> obj2</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> deepCopy</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obj1</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">obj2</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">name</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;å“’å“’å“’&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">obj2</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">arr</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> [</span><span style="color:#D19A66;">5</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">6</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">7</span><span style="color:#ABB2BF;">]; </span><span style="color:#7F848E;font-style:italic;">// æ–°å¯¹è±¡è·ŸåŸå¯¹è±¡ä¸å…±äº«å†…å­˜</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;obj1&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">obj1</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">// obj1 { name: &#39;AKã€å“’å“’å“’&#39;, arr: [ 1, [ 2, 3 ], 4 ] }</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;obj2&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">obj2</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">// obj2 { name: &#39;å“’å“’å“’&#39;, arr: [ 1, [ 5, 6, 7 ], 4 ] }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><p>æµ‹è¯•ç»“æœï¼š</p><p><img src="/FrontEndInterviewQuestion/assets/68d6929080f94cafb460cd6e11ab7721tplv-k3u1fbpfcp-jj-mark3024000q75.Vu4x_bBT.webp" alt="7.png"></p><h4 id="ç®€æ˜“ç‰ˆæ·±æ‹·è´" tabindex="-1">ç®€æ˜“ç‰ˆæ·±æ‹·è´ <a class="header-anchor" href="#ç®€æ˜“ç‰ˆæ·±æ‹·è´" aria-label="Permalink to &quot;ç®€æ˜“ç‰ˆæ·±æ‹·è´&quot;">â€‹</a></h4><p>æ²¡æœ‰è€ƒè™‘å¾ªç¯å¼•ç”¨çš„æƒ…å†µå’Œ Bufferã€Promiseã€Setã€Map çš„å¤„ç†ï¼Œå¦‚æœä¸€ä¸€å®ç°ï¼Œè¿‡äºå¤æ‚ï¼Œé¢è¯•çŸ­æ—¶é—´å†™å‡ºæ¥ä¸å¤ªç°å®</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#61AFEF;"> clone</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">parent</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// åˆ¤æ–­ç±»å‹</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#61AFEF;"> isType</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">target</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">type</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span></span>
<span class="line"><span style="color:#98C379;">		`[object </span><span style="color:#C678DD;">${</span><span style="color:#E06C75;">type</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">]`</span><span style="color:#56B6C2;"> ===</span><span style="color:#E5C07B;"> Object</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prototype</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">toString</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">call</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">target</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// å¤„ç†æ­£åˆ™</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#61AFEF;"> getRegExp</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">re</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">		let</span><span style="color:#E06C75;"> flags</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">re</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">global</span><span style="color:#ABB2BF;">) </span><span style="color:#E06C75;">flags</span><span style="color:#56B6C2;"> +=</span><span style="color:#98C379;"> &quot;g&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">re</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">ignoreCase</span><span style="color:#ABB2BF;">) </span><span style="color:#E06C75;">flags</span><span style="color:#56B6C2;"> +=</span><span style="color:#98C379;"> &quot;i&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">re</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">multiline</span><span style="color:#ABB2BF;">) </span><span style="color:#E06C75;">flags</span><span style="color:#56B6C2;"> +=</span><span style="color:#98C379;"> &quot;m&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E06C75;"> flags</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	};</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#61AFEF;"> _clone</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">parent</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">parent</span><span style="color:#56B6C2;"> ===</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">return</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">typeof</span><span style="color:#E06C75;"> parent</span><span style="color:#56B6C2;"> !==</span><span style="color:#98C379;"> &quot;object&quot;</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">return</span><span style="color:#E06C75;"> parent</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">		let</span><span style="color:#E06C75;"> child</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">proto</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#61AFEF;">isType</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">parent</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;Array&quot;</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// å¯¹æ•°ç»„åšç‰¹æ®Šå¤„ç†</span></span>
<span class="line"><span style="color:#E06C75;">			child</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [];</span></span>
<span class="line"><span style="color:#ABB2BF;">		} </span><span style="color:#C678DD;">else</span><span style="color:#C678DD;"> if</span><span style="color:#ABB2BF;"> (</span><span style="color:#61AFEF;">isType</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">parent</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;RegExp&quot;</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// å¯¹æ­£åˆ™å¯¹è±¡åšç‰¹æ®Šå¤„ç†</span></span>
<span class="line"><span style="color:#E06C75;">			child</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> RegExp</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">parent</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">source</span><span style="color:#ABB2BF;">, </span><span style="color:#61AFEF;">getRegExp</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">parent</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#C678DD;">			if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">parent</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">lastIndex</span><span style="color:#ABB2BF;">) </span><span style="color:#E5C07B;">child</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">lastIndex</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> parent</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">lastIndex</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		} </span><span style="color:#C678DD;">else</span><span style="color:#C678DD;"> if</span><span style="color:#ABB2BF;"> (</span><span style="color:#61AFEF;">isType</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">parent</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;Date&quot;</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// å¯¹Dateå¯¹è±¡åšç‰¹æ®Šå¤„ç†</span></span>
<span class="line"><span style="color:#E06C75;">			child</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Date</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">parent</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getTime</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#ABB2BF;">		} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// å¤„ç†å¯¹è±¡åŸå‹</span></span>
<span class="line"><span style="color:#E06C75;">			proto</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Object</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getPrototypeOf</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">parent</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// åˆ©ç”¨Object.createåˆ‡æ–­åŸå‹é“¾</span></span>
<span class="line"><span style="color:#E06C75;">			child</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Object</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">create</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">proto</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#C678DD;">		for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> i</span><span style="color:#C678DD;"> in</span><span style="color:#E06C75;"> parent</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// é€’å½’</span></span>
<span class="line"><span style="color:#E06C75;">			child</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#61AFEF;"> _clone</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">parent</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">]);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E06C75;"> child</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	};</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#61AFEF;"> _clone</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">parent</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><h4 id="ç®€æ˜“æ·±æ‹·è´-3" tabindex="-1">ç®€æ˜“æ·±æ‹·è´ 3 <a class="header-anchor" href="#ç®€æ˜“æ·±æ‹·è´-3" aria-label="Permalink to &quot;ç®€æ˜“æ·±æ‹·è´ 3&quot;">â€‹</a></h4><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> deepClone</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">val</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> type</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> getType</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">val</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">type</span><span style="color:#56B6C2;"> ===</span><span style="color:#98C379;"> &quot;object&quot;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		var</span><span style="color:#E06C75;"> result</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {};</span></span>
<span class="line"><span style="color:#E5C07B;">		Object</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">keys</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">val</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">forEach</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">key</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">			result</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#61AFEF;"> deepClone</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">val</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">]);</span></span>
<span class="line"><span style="color:#ABB2BF;">		});</span></span>
<span class="line"><span style="color:#ABB2BF;">	} </span><span style="color:#C678DD;">else</span><span style="color:#C678DD;"> if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">type</span><span style="color:#56B6C2;"> ===</span><span style="color:#98C379;"> &quot;array&quot;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E5C07B;"> val</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">map</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">item</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#61AFEF;"> deepClone</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">item</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">	} </span><span style="color:#C678DD;">else</span><span style="color:#C678DD;"> if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">type</span><span style="color:#56B6C2;"> ===</span><span style="color:#98C379;"> &quot;date&quot;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Date</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">val</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getTime</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#ABB2BF;">	} </span><span style="color:#C678DD;">else</span><span style="color:#C678DD;"> if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">type</span><span style="color:#56B6C2;"> ===</span><span style="color:#98C379;"> &quot;regexp&quot;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> RegExp</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">val</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">source</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">val</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">flags</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	} </span><span style="color:#C678DD;">else</span><span style="color:#C678DD;"> if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">type</span><span style="color:#56B6C2;"> ===</span><span style="color:#98C379;"> &quot;function&quot;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#61AFEF;"> eval</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;(&quot;</span><span style="color:#56B6C2;"> +</span><span style="color:#E5C07B;"> val</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">tostring</span><span style="color:#ABB2BF;">() </span><span style="color:#56B6C2;">+</span><span style="color:#98C379;"> &quot;)&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	} </span><span style="color:#C678DD;">else</span><span style="color:#C678DD;"> if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">type</span><span style="color:#56B6C2;"> ===</span><span style="color:#98C379;"> &quot;map&quot;</span><span style="color:#56B6C2;"> ||</span><span style="color:#E06C75;"> type</span><span style="color:#56B6C2;"> ===</span><span style="color:#98C379;"> &quot;set&quot;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#C678DD;"> new</span><span style="color:#E5C07B;"> val</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">constructor</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">val</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E06C75;"> val</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h4 id="å®ç°-3" tabindex="-1">å®ç° <a class="header-anchor" href="#å®ç°-3" aria-label="Permalink to &quot;å®ç°&quot;">â€‹</a></h4><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> clone</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">obj</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> copy</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	switch</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">typeof</span><span style="color:#E06C75;"> obj</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		case</span><span style="color:#98C379;"> &quot;undefined&quot;</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#C678DD;">			break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">		case</span><span style="color:#98C379;"> &quot;number&quot;</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#E06C75;">			copy</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> obj</span><span style="color:#56B6C2;"> -</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">			break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">		case</span><span style="color:#98C379;"> &quot;string&quot;</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#E06C75;">			copy</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> obj</span><span style="color:#56B6C2;"> +</span><span style="color:#98C379;"> &quot;&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">			break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">		case</span><span style="color:#98C379;"> &quot;boolean&quot;</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#E06C75;">			copy</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> obj</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">			break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">		case</span><span style="color:#98C379;"> &quot;object&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#7F848E;font-style:italic;">//object åˆ†ä¸ºä¸¤ç§æƒ…å†µ å¯¹è±¡(Object)å’Œæ•°ç»„(Array)</span></span>
<span class="line"><span style="color:#C678DD;">			if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">obj</span><span style="color:#56B6C2;"> ===</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">				copy</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">			} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">				if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">Object</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prototype</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">toString</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">call</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">slice</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">8</span><span style="color:#ABB2BF;">, </span><span style="color:#56B6C2;">-</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">===</span><span style="color:#98C379;"> &quot;Array&quot;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">					copy</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [];</span></span>
<span class="line"><span style="color:#C678DD;">					for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E5C07B;"> obj</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">						copy</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">clone</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">]));</span></span>
<span class="line"><span style="color:#ABB2BF;">					}</span></span>
<span class="line"><span style="color:#ABB2BF;">				} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">					copy</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {};</span></span>
<span class="line"><span style="color:#C678DD;">					for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> j</span><span style="color:#C678DD;"> in</span><span style="color:#E06C75;"> obj</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">						copy</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">j</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#61AFEF;"> clone</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">j</span><span style="color:#ABB2BF;">]);</span></span>
<span class="line"><span style="color:#ABB2BF;">					}</span></span>
<span class="line"><span style="color:#ABB2BF;">				}</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#C678DD;">			break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">		default</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#E06C75;">			copy</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> obj</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">			break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> copy</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><h4 id="ç®€æ˜“æ·±æ‹·è´-4" tabindex="-1">ç®€æ˜“æ·±æ‹·è´ 4 <a class="header-anchor" href="#ç®€æ˜“æ·±æ‹·è´-4" aria-label="Permalink to &quot;ç®€æ˜“æ·±æ‹·è´ 4&quot;">â€‹</a></h4><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> deepClone</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">obj</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> newObj</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> obj</span><span style="color:#C678DD;"> instanceof</span><span style="color:#E5C07B;"> Array</span><span style="color:#C678DD;"> ?</span><span style="color:#ABB2BF;"> [] </span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> {};</span></span>
<span class="line"><span style="color:#C678DD;">	for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> item</span><span style="color:#C678DD;"> in</span><span style="color:#E06C75;"> obj</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		var</span><span style="color:#E06C75;"> temple</span><span style="color:#56B6C2;"> =</span></span>
<span class="line"><span style="color:#C678DD;">			typeof</span><span style="color:#E06C75;"> obj</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">item</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">==</span><span style="color:#98C379;"> &quot;object&quot;</span><span style="color:#C678DD;"> ?</span><span style="color:#61AFEF;"> deepClone</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">item</span><span style="color:#ABB2BF;">]) </span><span style="color:#C678DD;">:</span><span style="color:#E06C75;"> obj</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">item</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#E06C75;">		newObj</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">item</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> temple</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> newObj</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>ES5 çš„å¸¸ç”¨çš„å¯¹è±¡å…‹éš†çš„ä¸€ç§æ–¹å¼ã€‚æ³¨æ„æ•°ç»„æ˜¯å¯¹è±¡ï¼Œä½†æ˜¯è·Ÿå¯¹è±¡åˆæœ‰ä¸€å®šåŒºåˆ«ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸€å¼€å§‹åˆ¤æ–­äº†ä¸€äº›ç±»å‹ï¼Œå†³å®š newObj æ˜¯å¯¹è±¡è¿˜æ˜¯æ•°ç»„~</p><h4 id="é€’å½’å‡½æ•°å®ç°æ·±å¤åˆ¶" tabindex="-1">é€’å½’å‡½æ•°å®ç°æ·±å¤åˆ¶ <a class="header-anchor" href="#é€’å½’å‡½æ•°å®ç°æ·±å¤åˆ¶" aria-label="Permalink to &quot;é€’å½’å‡½æ•°å®ç°æ·±å¤åˆ¶&quot;">â€‹</a></h4><p>å®ç°é€»è¾‘å°±æ˜¯(<code>FHT</code>)</p><ol><li>åˆ©ç”¨ <code>for-in</code>å¯¹å¯¹è±¡çš„å±æ€§è¿›è¡Œéå†(<strong>è‡ªèº«å±æ€§+ç»§æ‰¿å±æ€§</strong>)</li><li><code>source.hasOwnProperty(i)</code>åˆ¤æ–­æ˜¯å¦æ˜¯<strong>éç»§æ‰¿</strong>çš„<strong>å¯æšä¸¾</strong>å±æ€§</li><li><code>typeof source[i] === &#39;object&#39;</code>åˆ¤æ–­å€¼çš„ç±»å‹ï¼Œå¦‚æœæ˜¯å¯¹è±¡ï¼Œé€’å½’å¤„ç†</li></ol><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> clone</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">source</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> target</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {};</span></span>
<span class="line"><span style="color:#C678DD;">	for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> i</span><span style="color:#C678DD;"> in</span><span style="color:#E06C75;"> source</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">source</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">hasOwnProperty</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#C678DD;">			if</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">typeof</span><span style="color:#E06C75;"> source</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">===</span><span style="color:#98C379;"> &quot;object&quot;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">				target</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#61AFEF;"> clone</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">source</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">]); </span><span style="color:#7F848E;font-style:italic;">// é€’å½’å¤„ç†</span></span>
<span class="line"><span style="color:#ABB2BF;">			} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">				target</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> source</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> target</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h4 id="å®ç°-js-ä¸­æ‰€æœ‰å¯¹è±¡çš„æ·±åº¦å…‹éš†-åŒ…è£…å¯¹è±¡-date-å¯¹è±¡-æ­£åˆ™å¯¹è±¡" tabindex="-1">å®ç° js ä¸­æ‰€æœ‰å¯¹è±¡çš„æ·±åº¦å…‹éš†(åŒ…è£…å¯¹è±¡ï¼ŒDate å¯¹è±¡ï¼Œæ­£åˆ™å¯¹è±¡) <a class="header-anchor" href="#å®ç°-js-ä¸­æ‰€æœ‰å¯¹è±¡çš„æ·±åº¦å…‹éš†-åŒ…è£…å¯¹è±¡-date-å¯¹è±¡-æ­£åˆ™å¯¹è±¡" aria-label="Permalink to &quot;å®ç° js ä¸­æ‰€æœ‰å¯¹è±¡çš„æ·±åº¦å…‹éš†(åŒ…è£…å¯¹è±¡ï¼ŒDate å¯¹è±¡ï¼Œæ­£åˆ™å¯¹è±¡)&quot;">â€‹</a></h4><p>é€šè¿‡é€’å½’å¯ä»¥ç®€å•å®ç°å¯¹è±¡çš„æ·±åº¦å…‹éš†ï¼Œä½†æ˜¯è¿™ç§æ–¹æ³•ä¸ç®¡æ˜¯ ES6 è¿˜æ˜¯ ES5 å®ç°ï¼Œéƒ½æœ‰åŒæ ·çš„ç¼ºé™·ï¼Œå°±æ˜¯åªèƒ½å®ç°ç‰¹å®šçš„ object çš„æ·±åº¦å¤åˆ¶(æ¯”å¦‚æ•°ç»„å’Œå‡½æ•°)ï¼Œä¸èƒ½å®ç°åŒ…è£…å¯¹è±¡ Numberï¼ŒString ï¼Œ Booleanï¼Œä»¥åŠ Date å¯¹è±¡ï¼ŒRegExp å¯¹è±¡çš„å¤åˆ¶ã€‚</p><p>(1)å‰æ–‡çš„æ–¹æ³•</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> deepClone</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">obj</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> newObj</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> obj</span><span style="color:#C678DD;"> instanceof</span><span style="color:#E5C07B;"> Array</span><span style="color:#C678DD;"> ?</span><span style="color:#ABB2BF;"> [] </span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> {};</span></span>
<span class="line"><span style="color:#C678DD;">	for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> i</span><span style="color:#C678DD;"> in</span><span style="color:#E06C75;"> obj</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">		newObj</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#C678DD;"> typeof</span><span style="color:#E06C75;"> obj</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">==</span><span style="color:#98C379;"> &quot;object&quot;</span><span style="color:#C678DD;"> ?</span><span style="color:#61AFEF;"> deepClone</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">]) </span><span style="color:#C678DD;">:</span><span style="color:#E06C75;"> obj</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> newObj</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>è¿™ç§æ–¹æ³•å¯ä»¥å®ç°ä¸€èˆ¬å¯¹è±¡å’Œæ•°ç»„å¯¹è±¡çš„å…‹éš†ï¼Œæ¯”å¦‚ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> arr</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> newArr</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> deepClone</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">arr</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// newArr-&gt;[1,2,3]</span></span>
<span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> obj</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">	x</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	y</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> newObj</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> deepClone</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// newObj={x:1,y:2}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>ä½†æ˜¯ä¸èƒ½å®ç°ä¾‹å¦‚åŒ…è£…å¯¹è±¡ Number,String,Boolean,ä»¥åŠæ­£åˆ™å¯¹è±¡ RegExp å’Œ Date å¯¹è±¡çš„å…‹éš†ï¼Œæ¯”å¦‚ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#7F848E;font-style:italic;">//Number åŒ…è£…å¯¹è±¡</span></span>
<span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> num</span><span style="color:#56B6C2;">=</span><span style="color:#C678DD;">new</span><span style="color:#61AFEF;"> Number</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">typeof</span><span style="color:#E06C75;"> num</span><span style="color:#7F848E;font-style:italic;"> // &quot;object&quot;</span></span>
<span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> newNum</span><span style="color:#56B6C2;">=</span><span style="color:#61AFEF;">deepClone</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">num</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//newNum -&gt; {} ç©ºå¯¹è±¡</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//String åŒ…è£…å¯¹è±¡</span></span>
<span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> str</span><span style="color:#56B6C2;">=</span><span style="color:#C678DD;">new</span><span style="color:#61AFEF;"> String</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;hello&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">typeof</span><span style="color:#E06C75;"> str</span><span style="color:#7F848E;font-style:italic;"> //&quot;object&quot;</span></span>
<span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> newStr</span><span style="color:#56B6C2;">=</span><span style="color:#61AFEF;">deepClone</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">str</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//newStr-&gt; {0:&#39;h&#39;,1:&#39;e&#39;,2:&#39;l&#39;,3:&#39;l&#39;,4:&#39;o&#39;};</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//Boolean åŒ…è£…å¯¹è±¡</span></span>
<span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> bol</span><span style="color:#56B6C2;">=</span><span style="color:#C678DD;">new</span><span style="color:#61AFEF;"> Boolean</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">typeof</span><span style="color:#E06C75;"> bol</span><span style="color:#7F848E;font-style:italic;"> //&quot;object&quot;</span></span>
<span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> newBol</span><span style="color:#56B6C2;">=</span><span style="color:#61AFEF;">deepClone</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">bol</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// newBol -&gt;{} ç©ºå¯¹è±¡</span></span>
<span class="line"><span style="color:#ABB2BF;">...</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>(2)valueof()å‡½æ•°</p><p>æ‰€æœ‰å¯¹è±¡éƒ½æœ‰ valueOf æ–¹æ³•ï¼ŒvalueOf æ–¹æ³•å¯¹äºï¼šå¦‚æœå­˜åœ¨ä»»æ„åŸå§‹å€¼ï¼Œå®ƒå°±é»˜è®¤å°†å¯¹è±¡è½¬æ¢ä¸ºè¡¨ç¤ºå®ƒçš„åŸå§‹å€¼ã€‚å¯¹è±¡æ˜¯å¤åˆå€¼ï¼Œè€Œä¸”å¤§å¤šæ•°å¯¹è±¡æ— æ³•çœŸæ­£è¡¨ç¤ºä¸ºä¸€ä¸ªåŸå§‹å€¼ï¼Œå› æ­¤é»˜è®¤çš„ valueOf()æ–¹æ³•ç®€å•åœ°è¿”å›å¯¹è±¡æœ¬èº«ï¼Œè€Œä¸æ˜¯è¿”å›ä¸€ä¸ªåŸå§‹å€¼ã€‚æ•°ç»„ã€å‡½æ•°å’Œæ­£åˆ™è¡¨è¾¾å¼ç®€å•åœ°ç»§æ‰¿äº†è¿™ä¸ªé»˜è®¤æ–¹æ³•ï¼Œè°ƒç”¨è¿™äº›ç±»å‹çš„å®ä¾‹çš„ valueOf()æ–¹æ³•åªæ˜¯ç®€å•è¿”å›è¿™ä¸ªå¯¹è±¡æœ¬èº«ã€‚</p><p>å¯¹äºåŸå§‹å€¼æˆ–è€…åŒ…è£…ç±»ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> baseClone</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">base</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E5C07B;"> base</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">valueOf</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//Number</span></span>
<span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> num</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Number</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> newNum</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> baseClone</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">num</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//newNum-&gt;1</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//String</span></span>
<span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> str</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> String</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;hello&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> newStr</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> baseClone</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">str</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// newStr-&gt;&quot;hello&quot;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//Boolean</span></span>
<span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> bol</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Boolean</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> newBol</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> baseClone</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">bol</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//newBol-&gt; true</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>å…¶å®å¯¹äºåŒ…è£…ç±»ï¼Œå®Œå…¨å¯ä»¥ç”¨=å·æ¥è¿›è¡Œå…‹éš†ï¼Œå…¶å®æ²¡æœ‰æ·±åº¦å…‹éš†ä¸€è¯´ï¼Œè¿™é‡Œç”¨ valueOf å®ç°ï¼Œè¯­æ³•ä¸Šæ¯”è¾ƒç¬¦åˆè§„èŒƒã€‚</p><p>å¯¹äº Date ç±»å‹ï¼š</p><p>å› ä¸º valueOf æ–¹æ³•ï¼Œæ—¥æœŸç±»å®šä¹‰çš„ valueOf()æ–¹æ³•ä¼šè¿”å›å®ƒçš„ä¸€ä¸ªå†…éƒ¨è¡¨ç¤ºï¼š1970 å¹´ 1 æœˆ 1 æ—¥ä»¥æ¥çš„æ¯«ç§’æ•°.å› æ­¤æˆ‘ä»¬å¯ä»¥åœ¨ Date çš„åŸå‹ä¸Šå®šä¹‰å…‹éš†çš„æ–¹æ³•ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#E5C07B;">Date</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prototype</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">clone</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Date</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">valueOf</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> date</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Date</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;2010&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> newDate</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> date</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">clone</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// newDate-&gt; Fri Jan 01 2010 08:00:00 GMT+0800</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>å¯¹äºæ­£åˆ™å¯¹è±¡ RegExpï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#E5C07B;">RegExp</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prototype</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">clone</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> pattern</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">valueOf</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> flags</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">	flags</span><span style="color:#56B6C2;"> +=</span><span style="color:#E5C07B;"> pattern</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">global</span><span style="color:#C678DD;"> ?</span><span style="color:#98C379;"> &quot;g&quot;</span><span style="color:#C678DD;"> :</span><span style="color:#98C379;"> &quot;&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">	flags</span><span style="color:#56B6C2;"> +=</span><span style="color:#E5C07B;"> pattern</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">ignoreCase</span><span style="color:#C678DD;"> ?</span><span style="color:#98C379;"> &quot;i&quot;</span><span style="color:#C678DD;"> :</span><span style="color:#98C379;"> &quot;&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">	flags</span><span style="color:#56B6C2;"> +=</span><span style="color:#E5C07B;"> pattern</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">multiline</span><span style="color:#C678DD;"> ?</span><span style="color:#98C379;"> &quot;m&quot;</span><span style="color:#C678DD;"> :</span><span style="color:#98C379;"> &quot;&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> RegExp</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">pattern</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">source</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">flags</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> reg</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> RegExp</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/111/&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> newReg</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> reg</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">clone</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//newReg-&gt; /\/111\//</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="é€šè¿‡åµŒå¥—æ‰©å±•è¿ç®—ç¬¦å®ç°æ·±å¤åˆ¶" tabindex="-1">é€šè¿‡åµŒå¥—æ‰©å±•è¿ç®—ç¬¦å®ç°æ·±å¤åˆ¶ <a class="header-anchor" href="#é€šè¿‡åµŒå¥—æ‰©å±•è¿ç®—ç¬¦å®ç°æ·±å¤åˆ¶" aria-label="Permalink to &quot;é€šè¿‡åµŒå¥—æ‰©å±•è¿ç®—ç¬¦å®ç°æ·±å¤åˆ¶&quot;">â€‹</a></h4><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> original</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;789&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">work</span><span style="color:#ABB2BF;">: { </span><span style="color:#E06C75;">address</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;BeiJing&quot;</span><span style="color:#ABB2BF;"> } };</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> copy</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">original</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">work</span><span style="color:#ABB2BF;">: { ...</span><span style="color:#E5C07B;">original</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">work</span><span style="color:#ABB2BF;"> } };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">original</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">work</span><span style="color:#56B6C2;"> !==</span><span style="color:#E5C07B;"> copy</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">work</span><span style="color:#ABB2BF;">; </span><span style="color:#7F848E;font-style:italic;">// æŒ‡å‘ä¸åŒçš„å¼•ç”¨åœ°å€</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="ä½¿ç”¨-json-å®ç°æ•°æ®çš„æ·±å¤åˆ¶" tabindex="-1">ä½¿ç”¨ JSON å®ç°æ•°æ®çš„æ·±å¤åˆ¶ <a class="header-anchor" href="#ä½¿ç”¨-json-å®ç°æ•°æ®çš„æ·±å¤åˆ¶" aria-label="Permalink to &quot;ä½¿ç”¨ JSON å®ç°æ•°æ®çš„æ·±å¤åˆ¶&quot;">â€‹</a></h4><p>å…ˆå°†æ™®é€šå¯¹è±¡ï¼Œ</p><ol><li>å…ˆè½¬æ¢ä¸º<code>JSON</code>ä¸²(<code>stringify</code>)</li><li>ç„¶åå†è§£æ(<code>parse</code>)è¯¥ä¸²</li></ol><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> jsonDeepCopy</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">original</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E5C07B;"> JSON</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">parse</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">JSON</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">stringify</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">original</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>è€Œé€šè¿‡è¿™ç§æ–¹å¼æœ‰ä¸€ä¸ªå¾ˆæ˜æ˜¾çš„ç¼ºç‚¹å°±æ˜¯ï¼š</p><blockquote><p>åªèƒ½å¤„ç†<code>JSON</code>æ‰€èƒ½è¯†åˆ«çš„<code>key</code>å’Œ<code>value</code>ã€‚å¯¹äºä¸æ”¯æŒçš„ç±»å‹ï¼Œä¼šè¢«ç›´æ¥å¿½ç•¥æ‰ã€‚</p></blockquote><h4 id="assign-çš„æ·±æ‹·è´" tabindex="-1">assign çš„æ·±æ‹·è´ <a class="header-anchor" href="#assign-çš„æ·±æ‹·è´" aria-label="Permalink to &quot;assign çš„æ·±æ‹·è´&quot;">â€‹</a></h4><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> clone</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">obj</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> copy</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	switch</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">typeof</span><span style="color:#E06C75;"> obj</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		case</span><span style="color:#98C379;"> &quot;undefined&quot;</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#C678DD;">			break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">		case</span><span style="color:#98C379;"> &quot;number&quot;</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#E06C75;">			copy</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> obj</span><span style="color:#56B6C2;"> -</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">			break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">		case</span><span style="color:#98C379;"> &quot;string&quot;</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#E06C75;">			copy</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> obj</span><span style="color:#56B6C2;"> +</span><span style="color:#98C379;"> &quot;&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">			break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">		case</span><span style="color:#98C379;"> &quot;boolean&quot;</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#E06C75;">			copy</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> obj</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">			break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">		case</span><span style="color:#98C379;"> &quot;object&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#7F848E;font-style:italic;">//object åˆ†ä¸ºä¸¤ç§æƒ…å†µ å¯¹è±¡(Object)å’Œæ•°ç»„(Array)</span></span>
<span class="line"><span style="color:#C678DD;">			if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">obj</span><span style="color:#56B6C2;"> ===</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">				copy</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">			} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">				if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">Object</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prototype</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">toString</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">call</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">slice</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">8</span><span style="color:#ABB2BF;">, </span><span style="color:#56B6C2;">-</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">===</span><span style="color:#98C379;"> &quot;Array&quot;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">					copy</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [];</span></span>
<span class="line"><span style="color:#C678DD;">					for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E5C07B;"> obj</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">						copy</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">clone</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">]));</span></span>
<span class="line"><span style="color:#ABB2BF;">					}</span></span>
<span class="line"><span style="color:#ABB2BF;">				} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">					copy</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {};</span></span>
<span class="line"><span style="color:#C678DD;">					for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> j</span><span style="color:#C678DD;"> in</span><span style="color:#E06C75;"> obj</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">						copy</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">j</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#61AFEF;"> clone</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">j</span><span style="color:#ABB2BF;">]);</span></span>
<span class="line"><span style="color:#ABB2BF;">					}</span></span>
<span class="line"><span style="color:#ABB2BF;">				}</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#C678DD;">			break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">		default</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#E06C75;">			copy</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> obj</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">			break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> copy</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><h4 id="é€šè¿‡-json-parse-json-stringify-object-æ¥å®ç°æ·±æ‹·è´" tabindex="-1">é€šè¿‡ JSON.parse(JSON.stringify(object)) æ¥å®ç°æ·±æ‹·è´ <a class="header-anchor" href="#é€šè¿‡-json-parse-json-stringify-object-æ¥å®ç°æ·±æ‹·è´" aria-label="Permalink to &quot;é€šè¿‡ JSON.parse(JSON.stringify(object)) æ¥å®ç°æ·±æ‹·è´&quot;">â€‹</a></h4><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> a</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">	age</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	jobs</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">		first</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;FE&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> b</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> JSON</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">parse</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">JSON</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">stringify</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#E5C07B;">a</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">jobs</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">first</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;native&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">b</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">jobs</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">first</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">// FE</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>è¯¥æ–¹æ³•ä¹Ÿæ˜¯æœ‰å±€é™æ€§çš„</p><ul><li>ä¼šå¿½ç•¥ undefined</li><li>ä¸èƒ½åºåˆ—åŒ–å‡½æ•°</li><li>ä¸èƒ½è§£å†³å¾ªç¯å¼•ç”¨çš„å¯¹è±¡</li></ul><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> obj</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">	a</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	b</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">		c</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">		d</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#E5C07B;">obj</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">c</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> obj</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">b</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">obj</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">e</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> obj</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">obj</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">b</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">c</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> obj</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">c</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">obj</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">b</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">d</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> obj</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">b</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">obj</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">b</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">e</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> obj</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">b</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">c</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> newObj</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> JSON</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">parse</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">JSON</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">stringify</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">newObj</span><span style="color:#ABB2BF;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>åœ¨é‡åˆ°å‡½æ•°ã€ undefined æˆ–è€… symbol çš„æ—¶å€™ï¼Œè¯¥å¯¹è±¡ä¹Ÿä¸èƒ½æ­£å¸¸çš„åºåˆ—åŒ–ã€‚</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> a</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">	age</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">undefined</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	sex</span><span style="color:#ABB2BF;">: </span><span style="color:#61AFEF;">Symbol</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;male&quot;</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#61AFEF;">	jobs</span><span style="color:#ABB2BF;">: </span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> () {},</span></span>
<span class="line"><span style="color:#E06C75;">	name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;yck&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> b</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> JSON</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">parse</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">JSON</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">stringify</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">b</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">// {name: &quot;yck&quot;}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>ä½†æ˜¯åœ¨é€šå¸¸æƒ…å†µä¸‹ï¼Œå¤æ‚æ•°æ®éƒ½æ˜¯å¯ä»¥åºåˆ—åŒ–çš„ï¼Œæ‰€ä»¥è¿™ä¸ªå‡½æ•°å¯ä»¥è§£å†³å¤§éƒ¨åˆ†é—®é¢˜ï¼Œå¹¶ä¸”è¯¥å‡½æ•°æ˜¯å†…ç½®å‡½æ•°ä¸­å¤„ç†æ·±æ‹·â»‰æ€§èƒ½æœ€å¿«çš„ã€‚å½“ç„¶å¦‚æœä½ çš„æ•°æ®ä¸­å«æœ‰ä»¥ä¸Šä¸‰ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨ lodash çš„æ·±æ‹·â»‰å‡½æ•°ã€‚</p><h4 id="_5" tabindex="-1">5 <a class="header-anchor" href="#_5" aria-label="Permalink to &quot;5&quot;">â€‹</a></h4><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> clone</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">obj</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> copy</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	switch</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">typeof</span><span style="color:#E06C75;"> obj</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		case</span><span style="color:#98C379;"> &quot;undefined&quot;</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#C678DD;">			break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">		case</span><span style="color:#98C379;"> &quot;number&quot;</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#E06C75;">			copy</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> obj</span><span style="color:#56B6C2;"> -</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">			break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">		case</span><span style="color:#98C379;"> &quot;string&quot;</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#E06C75;">			copy</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> obj</span><span style="color:#56B6C2;"> +</span><span style="color:#98C379;"> &quot;&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">			break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">		case</span><span style="color:#98C379;"> &quot;boolean&quot;</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#E06C75;">			copy</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> obj</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">			break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">		case</span><span style="color:#98C379;"> &quot;object&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#7F848E;font-style:italic;">//object åˆ†ä¸ºä¸¤ç§æƒ…å†µ å¯¹è±¡(Object)å’Œæ•°ç»„(Array)</span></span>
<span class="line"><span style="color:#C678DD;">			if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">obj</span><span style="color:#56B6C2;"> ===</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">				copy</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">			} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">				if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">Object</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prototype</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">toString</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">call</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">slice</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">8</span><span style="color:#ABB2BF;">, </span><span style="color:#56B6C2;">-</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">===</span><span style="color:#98C379;"> &quot;Array&quot;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">					copy</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [];</span></span>
<span class="line"><span style="color:#C678DD;">					for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E5C07B;"> obj</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">						copy</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">clone</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">]));</span></span>
<span class="line"><span style="color:#ABB2BF;">					}</span></span>
<span class="line"><span style="color:#ABB2BF;">				} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">					copy</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {};</span></span>
<span class="line"><span style="color:#C678DD;">					for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> j</span><span style="color:#C678DD;"> in</span><span style="color:#E06C75;"> obj</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">						copy</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">j</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#61AFEF;"> clone</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">j</span><span style="color:#ABB2BF;">]);</span></span>
<span class="line"><span style="color:#ABB2BF;">					}</span></span>
<span class="line"><span style="color:#ABB2BF;">				}</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#C678DD;">			break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">		default</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#E06C75;">			copy</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> obj</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">			break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> copy</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><h3 id="es5-æ·±æ‹·è´å‡½æ•°å°è£…" tabindex="-1">ES5 æ·±æ‹·è´å‡½æ•°å°è£… <a class="header-anchor" href="#es5-æ·±æ‹·è´å‡½æ•°å°è£…" aria-label="Permalink to &quot;ES5 æ·±æ‹·è´å‡½æ•°å°è£…&quot;">â€‹</a></h3><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// ES5å®ç°æ·±æ‹·è´</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> deepClone</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">origin</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">target</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> tar</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> target</span><span style="color:#56B6C2;"> ||</span><span style="color:#ABB2BF;"> {};</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> toStr</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Object</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prototype</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">toString</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> arrType</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;[object Array]&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">	for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> k</span><span style="color:#C678DD;"> in</span><span style="color:#E06C75;"> origin</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">origin</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">has0wnProperty</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">k</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// å¯¹è±¡è‡ªèº«å±æ€§ä¸­æ˜¯å¦å…·æœ‰æŒ‡å®šçš„kå±æ€§</span></span>
<span class="line"><span style="color:#C678DD;">			if</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">typeof</span><span style="color:#E06C75;"> origin</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">k</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">===</span><span style="color:#98C379;"> &quot;object&quot;</span><span style="color:#56B6C2;"> &amp;&amp;</span><span style="color:#E06C75;"> origin</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">k</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">!==</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">				// toStringæ–¹æ³•é€šè¿‡callè°ƒç”¨ä¹‹å === arrType å°±æ˜¯æ•°ç»„ï¼Œå¦‚æœæ˜¯&quot;[object object]&quot;å°±æ˜¯å¯¹è±¡</span></span>
<span class="line"><span style="color:#E06C75;">				tar</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">k</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#E5C07B;"> toStr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">call</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">origin</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">k</span><span style="color:#ABB2BF;">]) </span><span style="color:#56B6C2;">===</span><span style="color:#E06C75;"> arrType</span><span style="color:#C678DD;"> ?</span><span style="color:#ABB2BF;"> [] </span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> {};</span></span>
<span class="line"><span style="color:#61AFEF;">				deepClone</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">origin</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">k</span><span style="color:#ABB2BF;">], </span><span style="color:#E06C75;">tar</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">k</span><span style="color:#ABB2BF;">]);</span></span>
<span class="line"><span style="color:#ABB2BF;">			} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">				tar</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">k</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> origin</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">k</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> tar</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><hr><p>WeakMap çŸ¥è¯†é“ºå«ï¼š<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/WeakMap" target="_blank" rel="noreferrer">WeakMap - JavaScript | MDN (mozilla.org)</a></p><p>new WeakMap()å®ä¾‹åŒ–åä½¿ç”¨ set æ–¹æ³•ï¼Œæ˜¯å¼±å¼•ç”¨ï¼Œä¸€å¼•ç”¨äº†å…ƒç´ ï¼Œå¼•ç”¨ä¾¿å›æ–­å¼€ï¼Œå…ƒç´ å°±ä¼šè¢«å†…å­˜åƒåœ¾å›æ”¶ï¼Œä¸å ç”¨å†…å­˜ï¼ˆè®¾ç½®å¼±å¼•ç”¨ï¼Œåœ¨ new WeakMap()å®ä¾‹åŒ–çš„å†…å­˜ä¸­å­˜èµ·æ¥ï¼Œå¼•ç”¨åä¼šåˆ æ‰èŠ‚ç‚¹ï¼ŒèŠ‚çœå†…å­˜ï¼‰</p><p><code>Map</code> å’Œ <code>WeakMap</code> æ˜¯ä¸¤ç§æ•°æ®ç»“æ„ï¼Œå¯ç”¨äºæ“çºµé”®å’Œå€¼ä¹‹é—´çš„å…³ç³»ã€‚</p><p>åŒºåˆ«ï¼š</p><p>æˆ‘ä»¬å¯ä»¥å¯¹ <code>Map</code> çš„é”®å’Œå€¼ä½¿ç”¨å¯¹è±¡æˆ–ä»»ä½•åŸºæœ¬ç±»å‹ã€‚</p><p>ä½†æ˜¯ï¼Œ<code>WeakMap</code> ä»…æ¥å—å¯¹è±¡ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬ä¸èƒ½å°†åŸºæœ¬ç±»å‹ç”¨ä½œ <code>WeakMap</code> çš„é”®ã€‚</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> attrs</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> WeakMap</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">attrs</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">set</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;color&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;plum&quot;</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">// error</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>ä¸ <code>Map</code>ä¸åŒï¼Œ<code>WeakMap</code> ä¸æ”¯æŒå¯¹é”®å’Œå€¼è¿›è¡Œè¿­ä»£ã€‚æ— æ³•è·å– <code>WeakMap</code> çš„æ‰€æœ‰é”®æˆ–å€¼ã€‚æ­¤å¤–ï¼Œä¹Ÿæ²¡æœ‰åŠæ³•æ¸…é™¤ <code>WeakMap</code>ã€‚</p><p><strong>æœ€é‡è¦çš„åŒºåˆ«æ˜¯ï¼Œ<code>WeakMap</code> ä¸ä¼šé˜»æ­¢åœ¨æ²¡æœ‰å¯¹é”®çš„å¼•ç”¨æ—¶å¯¹é”®è¿›è¡Œåƒåœ¾æ”¶é›†ã€‚</strong></p><p>å¦ä¸€æ–¹é¢ï¼Œ<code>Map</code> æ— é™æœŸåœ°ç»´æŠ¤å¯¹é”®å’Œå€¼çš„å¼•ç”¨ã€‚ä¸€æ—¦åˆ›å»ºäº†é”®å’Œå€¼ï¼Œå®ƒä»¬å°†å ç”¨å†…å­˜ï¼Œå³ä½¿æ²¡æœ‰å¯¹å®ƒä»¬çš„å¼•ç”¨ï¼Œä¹Ÿä¸ä¼šè¢«åƒåœ¾æ”¶é›†ã€‚è¿™å¯èƒ½ä¼šå¯¼è‡´å†…å­˜æ³„æ¼é—®é¢˜ã€‚</p><p>è€ƒè™‘ä¸‹é¢çš„ä¸€ä¸ªç®€å•ä»£ç ï¼Œæˆ‘ä»¬å°†ä¸€ä¸ªå”¯ä¸€çš„ ID æ˜ å°„åˆ°ç‰¹å®šçš„äººçš„ä¿¡æ¯ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> id</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;"> };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> people</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Map</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E5C07B;">people</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">set</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">id</span><span style="color:#ABB2BF;">, {</span></span>
<span class="line"><span style="color:#E06C75;">	name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;Foo&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	age</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">20</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	address</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;Bar&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// ç§»é™¤ id</span></span>
<span class="line"><span style="color:#E06C75;">id</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>åˆ é™¤é”®å¯¹è±¡ <code>id</code> åï¼Œå®ƒä»ç„¶èƒ½å¤Ÿé€šè¿‡æ˜ å°„é”®è®¿é—®å…¶å¼•ç”¨ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#E5C07B;">people</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">keys</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">next</span><span style="color:#ABB2BF;">().</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">; </span><span style="color:#7F848E;font-style:italic;">// { value: 1 }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>ç”±äºè¿™ç§å·®å¼‚ï¼Œ<code>WeakMap</code>ï¼ˆé¡¾åæ€ä¹‰ï¼‰ä¿å­˜å¯¹é”®çš„å¼±å¼•ç”¨ã€‚å®ƒè§£é‡Šäº†ä¸ºä»€ä¹ˆå®ƒçš„é”®ä¸å¯æšä¸¾ï¼Œè¿™åœ¨å‰é¢çš„åŒºåˆ«ä¸­å·²ç»æåˆ°ã€‚</p><p>ç”±äº <code>WeakMap</code> ä¿å­˜å¯¹é”®çš„å¼±å¼•ç”¨ï¼Œä¸”æ— æ³•æšä¸¾ï¼Œå› æ­¤æ— æ³•ä½¿ç”¨ <code>keys()</code>ã€<code>values()</code>ã€<code>entries()</code> è¿™äº›æ–¹æ³•ã€‚</p><h3 id="es6-å®ç°æ·±æ‹·è´" tabindex="-1">ES6 å®ç°æ·±æ‹·è´ <a class="header-anchor" href="#es6-å®ç°æ·±æ‹·è´" aria-label="Permalink to &quot;ES6 å®ç°æ·±æ‹·è´&quot;">â€‹</a></h3><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// ES6å®ç°æ·±æ‹·è´</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> deepClone</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">origin</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">hashMap</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> WeakMap</span><span style="color:#ABB2BF;">()) {</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">origin</span><span style="color:#56B6C2;"> ==</span><span style="color:#D19A66;"> undefined</span><span style="color:#56B6C2;"> ||</span><span style="color:#C678DD;"> typeof</span><span style="color:#E06C75;"> origin</span><span style="color:#56B6C2;"> !==</span><span style="color:#98C379;"> &quot;object&quot;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E06C75;"> origin</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// å¦‚æœæ˜¯æ—¶é—´æ„é€ å‡½æ•°</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">origin</span><span style="color:#C678DD;"> instanceof</span><span style="color:#E5C07B;"> Date</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Date</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">origin</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// å¦‚æœæ˜¯æ­£åˆ™æ„é€ å‡½æ•°</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">origin</span><span style="color:#C678DD;"> instanceof</span><span style="color:#E5C07B;"> RegExp</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> RegExp</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">origin</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// åˆ¤æ–­æ˜¯å¦å¼±å¼•ç”¨ï¼Œä¸¤ä¸ªå¯¹è±¡-ç›¸äº’æŠŠå¯¹æ–¹ä½œä¸ºé”®åèµ‹å€¼ç»™å¯¹æ–¹</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> hashKey</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> hashMap</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">origin</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">hashKey</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E06C75;"> hashKey</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// æ‰§è¡Œç»§æ‰¿æ¥çš„æ„é€ å™¨ï¼Œå®ä¾‹åŒ–æ„é€ å™¨å¾—åˆ°æ–°çš„å¯¹è±¡ï¼Œå°±ä¸ç”¨åˆ¤æ–­</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> target</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#E5C07B;"> origin</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">constructor</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// è®¾ç½®å¼±å¼•ç”¨ï¼Œå¼•ç”¨åä¼šåˆ æ‰èŠ‚ç‚¹ï¼ŒèŠ‚çœå†…å­˜</span></span>
<span class="line"><span style="color:#E5C07B;">	hashMap</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">set</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">origin</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">target</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">	for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> k</span><span style="color:#C678DD;"> in</span><span style="color:#E06C75;"> origin</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">origin</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">hasOwnProperty</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">k</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// å¯¹è±¡è‡ªèº«å±æ€§ä¸­æ˜¯å¦å…·æœ‰æŒ‡å®šçš„kå±æ€§</span></span>
<span class="line"><span style="color:#E06C75;">			target</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">k</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#61AFEF;"> deepClone</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">origin</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">k</span><span style="color:#ABB2BF;">], </span><span style="color:#E06C75;">hashMap</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">// é€’å½’å†èµ‹å€¼</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> target</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><h2 id="æ‰‹å†™é˜²æŠ–å’ŒèŠ‚æµ" tabindex="-1">æ‰‹å†™é˜²æŠ–å’ŒèŠ‚æµ <a class="header-anchor" href="#æ‰‹å†™é˜²æŠ–å’ŒèŠ‚æµ" aria-label="Permalink to &quot;æ‰‹å†™é˜²æŠ–å’ŒèŠ‚æµ&quot;">â€‹</a></h2><h3 id="é˜²æŠ–å’ŒèŠ‚æµåŒºåˆ«" tabindex="-1">é˜²æŠ–å’ŒèŠ‚æµåŒºåˆ« <a class="header-anchor" href="#é˜²æŠ–å’ŒèŠ‚æµåŒºåˆ«" aria-label="Permalink to &quot;é˜²æŠ–å’ŒèŠ‚æµåŒºåˆ«&quot;">â€‹</a></h3><p><code>é˜²æŠ–</code>ï¼šå¤šæ¬¡è§¦å‘äº‹ä»¶ï¼Œäº‹ä»¶å¤„ç†å‡½æ•°åªæ‰§è¡Œä¸€æ¬¡ï¼Œå¹¶ä¸”æ˜¯åœ¨è§¦å‘æ“ä½œç»“æŸæ—¶æ‰§è¡Œã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ä¸€ä¸ªäº‹ä»¶è¢«è§¦å‘ï¼Œå‡†å¤‡æ‰§è¡Œäº‹ä»¶å‡½æ•°å‰ï¼Œä¼šç­‰å¾…ä¸€å®šçš„æ—¶é—´ï¼Œåœ¨è¿™ä¸ªç­‰å¾…æ—¶é—´å†…ï¼Œå¦‚æœæ²¡æœ‰å†æ¬¡è¢«è§¦å‘ï¼Œé‚£ä¹ˆå°±æ‰§è¡Œï¼Œå¦‚æœåˆè§¦å‘äº†ï¼Œé‚£å°±æœ¬æ¬¡ä½œåºŸï¼Œé‡ç½®ç­‰å¾…æ—¶é—´ï¼Œç›´åˆ°æœ€ç»ˆèƒ½æ‰§è¡Œã€‚ ä¸»è¦åº”ç”¨åœºæ™¯ï¼šæœç´¢æ¡†æœç´¢è¾“å…¥ï¼Œç”¨æˆ·æœ€åä¸€æ¬¡è¾“å…¥å®Œï¼Œå†å‘é€è¯·æ±‚ï¼›æ‰‹æœºå·ã€é‚®ç®±éªŒè¯è¾“å…¥æ£€æµ‹</p><p><code>èŠ‚æµ</code>ï¼šäº‹ä»¶è§¦å‘åï¼Œè§„å®šæ—¶é—´å†…ï¼Œäº‹ä»¶å¤„ç†å‡½æ•°ä¸èƒ½å†æ¬¡è¢«è°ƒç”¨ã€‚ä¹Ÿå°±æ˜¯è¯´åœ¨è§„å®šçš„æ—¶é—´å†…ï¼Œå‡½æ•°åªèƒ½è¢«è°ƒç”¨ä¸€æ¬¡ï¼Œä¸”æ˜¯æœ€å…ˆè¢«è§¦å‘è°ƒç”¨çš„é‚£æ¬¡ã€‚ ä¸»è¦åº”ç”¨åœºæ™¯ï¼šé«˜é¢‘ç‚¹å‡»ã€è¡¨å•é‡å¤æäº¤ç­‰ã€‚</p><h3 id="å¯¹èŠ‚æµä¸é˜²æŠ–çš„ç†è§£" tabindex="-1">å¯¹èŠ‚æµä¸é˜²æŠ–çš„ç†è§£ <a class="header-anchor" href="#å¯¹èŠ‚æµä¸é˜²æŠ–çš„ç†è§£" aria-label="Permalink to &quot;å¯¹èŠ‚æµä¸é˜²æŠ–çš„ç†è§£&quot;">â€‹</a></h3><ul><li>å‡½æ•°é˜²æŠ–æ˜¯æŒ‡åœ¨äº‹ä»¶è¢«è§¦å‘ n ç§’åå†æ‰§è¡Œå›è°ƒï¼Œå¦‚æœåœ¨è¿™ n ç§’å†…äº‹ä»¶åˆè¢«è§¦å‘ï¼Œåˆ™é‡æ–°è®¡æ—¶ã€‚è¿™å¯ä»¥ä½¿ç”¨åœ¨ä¸€äº›ç‚¹å‡»è¯·æ±‚çš„äº‹ä»¶ä¸Šï¼Œé¿å…å› ä¸ºç”¨æˆ·çš„å¤šæ¬¡ç‚¹å‡»å‘åç«¯å‘é€å¤šæ¬¡è¯·æ±‚ã€‚</li><li>å‡½æ•°èŠ‚æµæ˜¯æŒ‡è§„å®šä¸€ä¸ªå•ä½æ—¶é—´ï¼Œåœ¨è¿™ä¸ªå•ä½æ—¶é—´å†…ï¼Œåªèƒ½æœ‰ä¸€æ¬¡è§¦å‘äº‹ä»¶çš„å›è°ƒå‡½æ•°æ‰§è¡Œï¼Œå¦‚æœåœ¨åŒä¸€ä¸ªå•ä½æ—¶é—´å†…æŸäº‹ä»¶è¢«è§¦å‘å¤šæ¬¡ï¼Œåªæœ‰ä¸€æ¬¡èƒ½ç”Ÿæ•ˆã€‚èŠ‚æµå¯ä»¥ä½¿ç”¨åœ¨ scroll å‡½æ•°çš„äº‹ä»¶ç›‘å¬ä¸Šï¼Œé€šè¿‡äº‹ä»¶èŠ‚æµæ¥é™ä½äº‹ä»¶è°ƒç”¨çš„é¢‘ç‡ã€‚</li></ul><p><strong>é˜²æŠ–å‡½æ•°çš„åº”ç”¨åœºæ™¯ï¼š</strong></p><ul><li>æŒ‰é’®æäº¤åœºæ™¯ï¼šé˜²â½Œå¤šæ¬¡æäº¤æŒ‰é’®ï¼Œåªæ‰§â¾æœ€åæäº¤çš„â¼€æ¬¡</li><li>æœåŠ¡ç«¯éªŒè¯åœºæ™¯ï¼šè¡¨å•éªŒè¯éœ€è¦æœåŠ¡ç«¯é…åˆï¼Œåªæ‰§â¾â¼€æ®µè¿ç»­çš„è¾“å…¥äº‹ä»¶çš„æœ€åâ¼€æ¬¡ï¼Œè¿˜æœ‰æœç´¢è”æƒ³è¯åŠŸèƒ½ç±»ä¼¼â½£å­˜ç¯å¢ƒè¯·ç”¨ lodash.debounce</li></ul><p><strong>èŠ‚æµå‡½æ•°çš„é€‚ç”¨åœºæ™¯ï¼š</strong></p><ul><li>æ‹–æ‹½åœºæ™¯ï¼šå›ºå®šæ—¶é—´å†…åªæ‰§â¾â¼€æ¬¡ï¼Œé˜²â½Œè¶…â¾¼é¢‘æ¬¡è§¦å‘ä½ç½®å˜åŠ¨</li><li>ç¼©æ”¾åœºæ™¯ï¼šç›‘æ§æµè§ˆå™¨ resize</li><li>åŠ¨ç”»åœºæ™¯ï¼šé¿å…çŸ­æ—¶é—´å†…å¤šæ¬¡è§¦å‘åŠ¨ç”»å¼•èµ·æ€§èƒ½é—®é¢˜</li></ul><h3 id="é˜²æŠ–" tabindex="-1">é˜²æŠ– <a class="header-anchor" href="#é˜²æŠ–" aria-label="Permalink to &quot;é˜²æŠ–&quot;">â€‹</a></h3><p>é˜²æŠ–æ˜¯æŒ‡åœ¨äº‹ä»¶è¢«è§¦å‘ n ç§’ååœ¨æ‰§è¡Œå›è°ƒï¼Œå¦‚æœåœ¨è¿™ n ç§’å†…æ—¶é—´åˆè¢«è§¦å‘ï¼Œåˆ™é‡æ–°è®¡æ—¶ã€‚</p><p>å¯ä»¥ä½¿ç”¨åœ¨ä¸€äº›ç‚¹å‡»è¯·æ±‚çš„äº‹ä»¶ä¸Šï¼Œé¿å…å› ä¸ºç”¨æˆ·çš„å¤šæ¬¡ç‚¹å‡»å‘åç«¯å‘é€å¤šæ¬¡è¯·æ±‚ã€‚</p><p>ç”¨å¤„ï¼šåœ¨æ»šåŠ¨äº‹ä»¶ä¸­éœ€è¦åšä¸ªå¤æ‚è®¡ç®—æˆ–è€…å®ç°ä¸€ä¸ªæŒ‰é’®çš„é˜²äºŒæ¬¡ç‚¹å‡»æ“ä½œã€‚</p><h4 id="åŸç†" tabindex="-1">åŸç†ï¼š <a class="header-anchor" href="#åŸç†" aria-label="Permalink to &quot;åŸç†ï¼š&quot;">â€‹</a></h4><p>é˜²æŠ–ï¼ˆ debounce ï¼‰ï¼šä¸ç®¡äº‹ä»¶è§¦å‘é¢‘ç‡å¤šé«˜ï¼Œã‡å®šåœ¨äº‹ä»¶è§¦å‘ n ç§’åæ‰æ‰§è¡Œï¼Œå¦‚æœä½ åœ¨ã‡ä¸ªäº‹ä»¶è§¦å‘çš„ n ç§’å†…â¼œè§¦å‘äº†è¿™ä¸ªäº‹ä»¶ï¼Œå°±ä»¥æ–°çš„äº‹ä»¶çš„æ—¶é—´ä¸ºå‡†ï¼Œ n ç§’åæ‰æ‰§è¡Œï¼Œæ€»ä¹‹ï¼Œè§¦å‘å®Œäº‹ä»¶ n ç§’å†…ä¸å†è§¦å‘äº‹ä»¶ï¼Œ n ç§’åå†æ‰§è¡Œã€‚ï¼ˆé¢‘ç¹è§¦å‘å°±æ‰§è¡Œæœ€åã‡æ¬¡ï¼‰</p><p>æ ¸å¿ƒè¦ç‚¹ï¼šå¦‚æœåœ¨å®šæ—¶å™¨çš„æ—¶é—´èŒƒå›´å†…å†æ¬¡è§¦å‘ï¼Œåˆ™é‡æ–°è®¡æ—¶</p><h4 id="åº”ç”¨åœºæ™¯" tabindex="-1">åº”ç”¨åœºæ™¯ï¼š <a class="header-anchor" href="#åº”ç”¨åœºæ™¯" aria-label="Permalink to &quot;åº”ç”¨åœºæ™¯ï¼š&quot;">â€‹</a></h4><ol><li>çª—å£å¤§å°å˜åŒ–ï¼Œè°ƒæ•´æ ·å¼</li><li>æœç´¢æ¡†ï¼Œè¾“å…¥å 1000 æ¯«ç§’æœç´¢</li><li>è¡¨å•éªŒè¯ï¼Œè¾“å…¥ 1000 æ¯«ç§’åéªŒè¯</li><li>é¢‘ç¹ç‚¹å‡»æŒ‰é’®ï¼Œä½¿ç”¨é˜²æŠ–é¿å…é‡å¤æäº¤è¯·æ±‚</li></ol><h4 id="é˜²æŠ–å®ç°" tabindex="-1">é˜²æŠ–å®ç°ï¼š <a class="header-anchor" href="#é˜²æŠ–å®ç°" aria-label="Permalink to &quot;é˜²æŠ–å®ç°ï¼š&quot;">â€‹</a></h4><h5 id="ç®€å•å®ç°" tabindex="-1">ç®€å•å®ç° <a class="header-anchor" href="#ç®€å•å®ç°" aria-label="Permalink to &quot;ç®€å•å®ç°&quot;">â€‹</a></h5><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#61AFEF;"> debounce</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">fn</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">delay</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> timer</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#ABB2BF;"> (...</span><span style="color:#E06C75;font-style:italic;">args</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">		clearTimeout</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">timer</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;">		timer</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> setTimeout</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">			fn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">apply</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">args</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}, </span><span style="color:#E06C75;">delay</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	};</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// æˆ–è€…</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// return function () {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// 	if (timer != null) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// 		clearTimeout(timer);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// 	}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// 	timer = setTimeout(() =&gt; {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// 		fn();</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// 	}, delay);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// };</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// æµ‹è¯•</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> handle</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">	console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Math</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">random</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// çª—å£å¤§å°æ”¹å˜ï¼Œè§¦å‘é˜²æŠ–ï¼Œæ‰§è¡Œhandle</span></span>
<span class="line"><span style="color:#E5C07B;">window</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">addEventListener</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;resize&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#61AFEF;">debounce</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">handle</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">1000</span><span style="color:#ABB2BF;">));</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><ul><li>debunce å®åˆ™æ˜¯ä¸ªåŒ…è£…å‡½æ•°ï¼Œé€šè¿‡ä¼ å…¥æ“ä½œå‡½æ•°å’Œæ—¶é—´é—´éš”ï¼Œæ¥è¿”å›ã‡ä¸ªæ–°å‡½æ•°</li><li>æ–°å‡½æ•°ä¸­ä¸»è¦æ˜¯é€šè¿‡å®šæ—¶å™¨æ¥è®¾ç½®å‡½æ•°è°ƒç”¨çš„é¢‘ç‡</li><li>flag åªæœ‰ç¬¬ã‡æ¬¡è§¦å‘çš„æ—¶å€™ä¼šç«‹å³æ‰§è¡Œ</li></ul><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// fnæ˜¯éœ€è¦é˜²æŠ–çš„å‡½æ•°,delayæ˜¯ç­‰å¾…æ—¶é—´,flagï¼šæ˜¯å¦ç«‹å³æ‰§è¡Œ</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> debounce</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">fn</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">delay</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 500</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">flag</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> timer</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// è¿™é‡Œè¿”å›çš„å‡½æ•°æ˜¯æ¯æ¬¡ç”¨æˆ·å®é™…è°ƒç”¨çš„é˜²æŠ–å‡½æ•°</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> (...</span><span style="color:#E06C75;font-style:italic;">args</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// ...argsæ˜¯es6çš„å‰©ä½™å‚æ•°è¯­æ³•ï¼Œå°†å¤šä½™çš„å‚æ•°æ”¾å…¥æ•°ç»„ï¼Œç”¨æ¥ä»£æ›¿argumentså¯¹è±¡</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// å¦‚æœå·²ç»è®¾å®šè¿‡å®šæ—¶å™¨äº†å°±æ¸…ç©ºä¸Šä¸€æ¬¡çš„å®šæ—¶å™¨</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">timer</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#61AFEF;">			clearTimeout</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">timer</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">flag</span><span style="color:#56B6C2;"> &amp;&amp;</span><span style="color:#56B6C2;"> !</span><span style="color:#E06C75;">timer</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">			fn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">apply</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">args</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// å¼€å§‹ä¸€ä¸ªæ–°çš„å®šæ—¶å™¨ï¼Œå»¶è¿Ÿæ‰§è¡Œç”¨æˆ·ä¼ å…¥çš„æ–¹æ³•ï¼›æ³¨ï¼šå®šæ—¶å™¨çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªæ•°å€¼ï¼Œä½œä¸ºå®šæ—¶å™¨çš„ç¼–å·ï¼Œå¯ä»¥ä¼ å…¥clearTimeoutæ¥å–æ¶ˆå®šæ—¶å™¨</span></span>
<span class="line"><span style="color:#E06C75;">		timer</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> setTimeout</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// è¿™é‡Œå¿…é¡»æ˜¯ç®­å¤´å‡½æ•°ï¼Œä¸ç„¶thisæŒ‡å‘window,è¦è®©thiså°±æŒ‡å‘fnçš„è°ƒç”¨è€…</span></span>
<span class="line"><span style="color:#E5C07B;">			fn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">apply</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">args</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}, </span><span style="color:#E06C75;">delay</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	};</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// use</span></span>
<span class="line"><span style="color:#E5C07B;">window</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">addEventListener</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;resize&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#61AFEF;">debounce</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">handler</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">1000</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> handler</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">	console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;ok&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h4 id="ä½¿ç”¨-underscore-çš„æºç æ¥è§£é‡Šé˜²æŠ–åŠ¨" tabindex="-1">ä½¿ç”¨ underscore çš„æºç æ¥è§£é‡Šé˜²æŠ–åŠ¨ <a class="header-anchor" href="#ä½¿ç”¨-underscore-çš„æºç æ¥è§£é‡Šé˜²æŠ–åŠ¨" aria-label="Permalink to &quot;ä½¿ç”¨ underscore çš„æºç æ¥è§£é‡Šé˜²æŠ–åŠ¨&quot;">â€‹</a></h4><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#7F848E;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> * underscore é˜²æŠ–å‡½æ•°ï¼Œè¿”å›å‡½æ•°è¿ç»­è°ƒç”¨æ—¶ï¼Œç©ºé—²æ—¶é—´å¿…é¡»å¤§äºæˆ–ç­‰äº waitï¼Œfunc æ‰ä¼šæ‰§è¡Œ</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> *</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> * </span><span style="color:#C678DD;font-style:italic;">@param</span><span style="color:#E5C07B;font-style:italic;"> {function}</span><span style="color:#E06C75;font-style:italic;"> func</span><span style="color:#7F848E;font-style:italic;"> å›è°ƒå‡½æ•°</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> * </span><span style="color:#C678DD;font-style:italic;">@param</span><span style="color:#E5C07B;font-style:italic;"> {number}</span><span style="color:#E06C75;font-style:italic;"> wait</span><span style="color:#7F848E;font-style:italic;"> è¡¨ç¤ºæ—¶é—´çª—å£çš„é—´éš”</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> * </span><span style="color:#C678DD;font-style:italic;">@param</span><span style="color:#E5C07B;font-style:italic;"> {boolean}</span><span style="color:#E06C75;font-style:italic;"> immediate</span><span style="color:#7F848E;font-style:italic;"> è®¾ç½®ä¸ºtureæ—¶ï¼Œæ˜¯å¦ç«‹å³è°ƒç”¨å‡½æ•°</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> * </span><span style="color:#C678DD;font-style:italic;">@return</span><span style="color:#E5C07B;font-style:italic;"> {function}</span><span style="color:#7F848E;font-style:italic;"> è¿”å›å®¢æˆ·è°ƒç”¨å‡½æ•°</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#E5C07B;">_</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">debounce</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">func</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">wait</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">immediate</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> timeout</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">args</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">context</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">timestamp</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">result</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#61AFEF;"> later</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// ç°åœ¨å’Œä¸Šä¸€æ¬¡æ—¶é—´æˆ³æ¯”è¾ƒ</span></span>
<span class="line"><span style="color:#C678DD;">		var</span><span style="color:#E06C75;"> last</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> _</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">now</span><span style="color:#ABB2BF;">() </span><span style="color:#56B6C2;">-</span><span style="color:#E06C75;"> timestamp</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// å¦‚æœå½“å‰é—´éš”æ—¶é—´å°‘äºè®¾å®šæ—¶é—´ä¸”å¤§äº0å°±é‡æ–°è®¾ç½®å®šæ—¶å™¨</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">last</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E06C75;"> wait</span><span style="color:#56B6C2;"> &amp;&amp;</span><span style="color:#E06C75;"> last</span><span style="color:#56B6C2;"> &gt;=</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">			timeout</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> setTimeout</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">later</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">wait</span><span style="color:#56B6C2;"> -</span><span style="color:#E06C75;"> last</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// å¦åˆ™çš„è¯å°±æ˜¯æ—¶é—´åˆ°äº†æ‰§è¡Œå›è°ƒå‡½æ•°</span></span>
<span class="line"><span style="color:#E06C75;">			timeout</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">			if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E06C75;">immediate</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">				result</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> func</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">apply</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">context</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">args</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">				if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E06C75;">timeout</span><span style="color:#ABB2BF;">) </span><span style="color:#E06C75;">context</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> args</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	};</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#E06C75;">		context</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">		args</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> arguments</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// è·å¾—æ—¶é—´æˆ³</span></span>
<span class="line"><span style="color:#E06C75;">		timestamp</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> _</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">now</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// å¦‚æœå®šæ—¶å™¨ä¸å­˜åœ¨ä¸”ç«‹å³æ‰§è¡Œå‡½æ•°</span></span>
<span class="line"><span style="color:#C678DD;">		var</span><span style="color:#E06C75;"> callNow</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> immediate</span><span style="color:#56B6C2;"> &amp;&amp;</span><span style="color:#56B6C2;"> !</span><span style="color:#E06C75;">timeout</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// å¦‚æœå®šæ—¶å™¨ä¸å­˜åœ¨å°±åˆ›å»ºä¸€ä¸ª</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E06C75;">timeout</span><span style="color:#ABB2BF;">) </span><span style="color:#E06C75;">timeout</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> setTimeout</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">later</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">wait</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">callNow</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// å¦‚æœéœ€è¦ç«‹å³æ‰§è¡Œå‡½æ•°çš„è¯ é€šè¿‡ apply æ‰§è¡Œ</span></span>
<span class="line"><span style="color:#E06C75;">			result</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> func</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">apply</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">context</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">args</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;">			context</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> args</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E06C75;"> result</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	};</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div></div><h4 id="æ•´ä½“å‡½æ•°å®ç°" tabindex="-1">æ•´ä½“å‡½æ•°å®ç° <a class="header-anchor" href="#æ•´ä½“å‡½æ•°å®ç°" aria-label="Permalink to &quot;æ•´ä½“å‡½æ•°å®ç°&quot;">â€‹</a></h4><p>å¯¹äºæŒ‰é’®é˜²ç‚¹å‡»æ¥è¯´çš„å®ç°</p><ul><li>å¼€å§‹ä¸€ä¸ªå®šæ—¶å™¨ï¼Œåªè¦æˆ‘å®šæ—¶å™¨è¿˜åœ¨ï¼Œä¸ç®¡ä½ æ€ä¹ˆç‚¹å‡»éƒ½ä¸ä¼šæ‰§è¡Œå›è°ƒå‡½æ•°ã€‚ä¸€æ—¦å®šæ—¶å™¨ç»“æŸå¹¶è®¾ç½®ä¸º nullï¼Œå°±å¯ä»¥å†æ¬¡ç‚¹å‡»äº†</li><li>å¯¹äºå»¶æ—¶æ‰§è¡Œå‡½æ•°æ¥è¯´çš„å®ç°ï¼šæ¯æ¬¡è°ƒç”¨é˜²æŠ–åŠ¨å‡½æ•°éƒ½ä¼šåˆ¤æ–­æœ¬æ¬¡è°ƒç”¨å’Œä¹‹å‰çš„æ—¶é—´é—´éš”ï¼Œå¦‚æœå°äºéœ€è¦çš„æ—¶é—´é—´éš”ï¼Œå°±ä¼šé‡æ–°åˆ›å»ºä¸€ä¸ªå®šæ—¶å™¨ï¼Œå¹¶ä¸”å®šæ—¶å™¨çš„å»¶æ—¶ä¸ºè®¾å®šæ—¶é—´å‡å»ä¹‹å‰çš„æ—¶é—´é—´éš”ã€‚ä¸€æ—¦æ—¶é—´åˆ°äº†ï¼Œå°±ä¼šæ‰§è¡Œç›¸åº”çš„å›è°ƒå‡½æ•°</li></ul><h4 id="å®ç°2" tabindex="-1">å®ç°2 <a class="header-anchor" href="#å®ç°2" aria-label="Permalink to &quot;å®ç°2&quot;">â€‹</a></h4><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#7F848E;font-style:italic;">/*** é˜²æŠ–å‡½æ•° n ç§’åå†æ‰§è¡Œè¯¥äº‹ä»¶ï¼Œè‹¥åœ¨ n ç§’å†…è¢«é‡å¤è§¦å‘ï¼Œåˆ™é‡æ–°è®¡æ—¶</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> * </span><span style="color:#C678DD;font-style:italic;">@param</span><span style="color:#E06C75;font-style:italic;"> func</span><span style="color:#7F848E;font-style:italic;"> è¦è¢«é˜²æŠ–çš„å‡½æ•°</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> * </span><span style="color:#C678DD;font-style:italic;">@param</span><span style="color:#E06C75;font-style:italic;"> wait</span><span style="color:#7F848E;font-style:italic;"> è§„å®šçš„æ—¶é—´</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> debounce</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">func</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">wait</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> timeout</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#C678DD;">		let</span><span style="color:#E06C75;"> context</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">; </span><span style="color:#7F848E;font-style:italic;">// ä¿å­˜thisæŒ‡å‘</span></span>
<span class="line"><span style="color:#C678DD;">		let</span><span style="color:#E06C75;"> args</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> arguments</span><span style="color:#ABB2BF;">; </span><span style="color:#7F848E;font-style:italic;">// æ‹¿åˆ°eventå¯¹è±¡</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">		clearTimeout</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">timeout</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;">		timeout</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> setTimeout</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#E5C07B;">			func</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">apply</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">context</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">args</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}, </span><span style="color:#E06C75;">wait</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	};</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="èŠ‚æµ" tabindex="-1">èŠ‚æµ <a class="header-anchor" href="#èŠ‚æµ" aria-label="Permalink to &quot;èŠ‚æµ&quot;">â€‹</a></h3><p>èŠ‚æµå°±æ˜¯ä¸€å®šæ—¶é—´å†…æ‰§è¡Œä¸€æ¬¡äº‹ä»¶ï¼Œå³ä½¿é‡å¤è§¦å‘ï¼Œä¹Ÿåªæœ‰ä¸€æ¬¡ç”Ÿæ•ˆã€‚</p><p>ä¾‹å¦‚é¡µé¢æ»šåŠ¨çš„æ—¶å€™ï¼Œæ¯éš”ä¸€æ®µæ—¶é—´å‘ä¸€æ¬¡è¯·æ±‚ã€‚</p><p>å¯ä»¥ä½¿ç”¨åœ¨ç›‘å¬æ»šåŠ¨ scroll äº‹ä»¶ä¸Šï¼Œé€šè¿‡äº‹ä»¶èŠ‚æµæ¥é™ä½äº‹ä»¶è°ƒç”¨çš„é¢‘ç‡ã€‚</p><p>æ ¸å¿ƒè¦ç‚¹ï¼šå¦‚æœåœ¨å®šæ—¶å™¨çš„æ—¶é—´èŒƒå›´å†…å†æ¬¡è§¦å‘ï¼Œåˆ™ä¸äºˆç†ç¬ï¼Œç­‰å½“å‰å®šæ—¶å™¨å®Œæˆï¼Œæ‰èƒ½å¯åŠ¨ä¸‹ä¸€ä¸ªå®šæ—¶å™¨ã€‚</p><h4 id="åŸç†-1" tabindex="-1">åŸç†ï¼š <a class="header-anchor" href="#åŸç†-1" aria-label="Permalink to &quot;åŸç†ï¼š&quot;">â€‹</a></h4><p>èŠ‚æµï¼ˆ throttle ï¼‰:ä¸ç®¡äº‹ä»¶è§¦å‘é¢‘ç‡å¤šé«˜ï¼Œåªåœ¨å•ä½æ—¶é—´å†…æ‰§è¡Œã‡æ¬¡ã€‚ï¼ˆé¢‘ç¹è§¦å‘ï¼Œè¿˜æ˜¯æŒ‰ç…§æ—¶é—´é—´éš”æ‰§è¡Œï¼‰</p><h4 id="åº”ç”¨åœºæ™¯-1" tabindex="-1">åº”ç”¨åœºæ™¯ï¼š <a class="header-anchor" href="#åº”ç”¨åœºæ™¯-1" aria-label="Permalink to &quot;åº”ç”¨åœºæ™¯ï¼š&quot;">â€‹</a></h4><ol><li>â¿æ ‡ä¸æ–­ç‚¹å‡»è§¦å‘ï¼Œmousedown(å•ä½æ—¶é—´å†…åªè§¦å‘ã‡æ¬¡)</li><li>ç›‘å¬æ»šåŠ¨äº‹ä»¶ï¼Œæ¯”å¦‚æ˜¯å¦æ»‘åˆ°åº•éƒ¨è‡ªåŠ¨åŠ è½½æ›´å¤šï¼Œç”¨ throttle æ¥åˆ¤æ–­</li></ol><h4 id="èŠ‚æµå®ç°" tabindex="-1">èŠ‚æµå®ç° <a class="header-anchor" href="#èŠ‚æµå®ç°" aria-label="Permalink to &quot;èŠ‚æµå®ç°&quot;">â€‹</a></h4><ul><li>å’Œé˜²æŠ–ä¸åŒçš„æ˜¯ï¼Œé˜²æŠ–ä¸­æ˜¯å–æ¶ˆå®šæ—¶å™¨ï¼ŒèŠ‚æµä¸­æ˜¯å®šæ—¶å™¨åˆ°æ—¶é—´è‡ªåŠ¨æ‰§è¡Œï¼Œä»…ä»…æ˜¯å°† timer å˜é‡è®¾ç½®ä¸º null</li><li>é˜²æŠ–åŠ¨å’ŒèŠ‚æµæœ¬è´¨æ˜¯ä¸ä¸€æ ·çš„ã€‚é˜²æŠ–åŠ¨æ˜¯å°†å¤šæ¬¡æ‰§è¡Œå˜ä¸ºæœ€åä¸€æ¬¡æ‰§è¡Œï¼ŒèŠ‚æµæ˜¯å°†å¤šæ¬¡æ‰§è¡Œå˜æˆæ¯éš”ä¸€æ®µæ—¶é—´æ‰§è¡Œ</li><li>å®šæ—¶å™¨ç‰ˆï¼šç¬¬ä¸€æ¬¡ä¸æ‰§è¡Œï¼Œæœ€åä¸€æ¬¡æ‰§è¡Œ</li><li>æ—¶é—´æˆ³ç‰ˆï¼šç¬¬ã‡æ¬¡æ‰§è¡Œï¼Œæœ€åã‡æ¬¡ä¸æ‰§è¡Œ</li></ul><h4 id="ç®€å•å®ç°-1" tabindex="-1">ç®€å•å®ç° <a class="header-anchor" href="#ç®€å•å®ç°-1" aria-label="Permalink to &quot;ç®€å•å®ç°&quot;">â€‹</a></h4><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#61AFEF;"> throttle</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">fn</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">delay</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 500</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> flag</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> true</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#ABB2BF;"> (...</span><span style="color:#E06C75;font-style:italic;">args</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E06C75;">flag</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">		flag</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> false</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#61AFEF;">		setTimeout</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">			fn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">apply</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">args</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;">			flag</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> true</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		}, </span><span style="color:#E06C75;">delay</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	};</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">/*** èŠ‚æµå‡½æ•° n ç§’å†…åªè¿è¡Œä¸€æ¬¡ï¼Œè‹¥åœ¨ n ç§’å†…é‡å¤è§¦å‘ï¼Œåªæœ‰ä¸€æ¬¡ç”Ÿæ•ˆ</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> * </span><span style="color:#C678DD;font-style:italic;">@param</span><span style="color:#E06C75;font-style:italic;"> fn</span><span style="color:#7F848E;font-style:italic;"> è¦è¢«èŠ‚æµçš„å‡½æ•°</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> * </span><span style="color:#C678DD;font-style:italic;">@param</span><span style="color:#E06C75;font-style:italic;"> wait</span><span style="color:#7F848E;font-style:italic;"> è§„å®šçš„æ—¶é—´</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> throttled</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">fn</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">wait</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> timer</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> (...</span><span style="color:#E06C75;font-style:italic;">args</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E06C75;">timer</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">			timer</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> setTimeout</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">				fn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">apply</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">args</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;">				timer</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">			}, </span><span style="color:#E06C75;">wait</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	};</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h4 id="_1-å®šæ—¶å™¨ç‰ˆæœ¬" tabindex="-1">1. å®šæ—¶å™¨ç‰ˆæœ¬ <a class="header-anchor" href="#_1-å®šæ—¶å™¨ç‰ˆæœ¬" aria-label="Permalink to &quot;1. å®šæ—¶å™¨ç‰ˆæœ¬&quot;">â€‹</a></h4><p>ç¬¬ä¸€æ¬¡ä¸æ‰§è¡Œï¼Œæœ€åä¸€æ¬¡æ‰§è¡Œ</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> throttle</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">fn</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">delay</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 500</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> timer</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> (...</span><span style="color:#E06C75;font-style:italic;">args</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// å½“å‰æœ‰ä»»åŠ¡äº†ï¼Œç›´æ¥è¿”å›</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">timer</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">			return</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#E06C75;">		timer</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> setTimeout</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">			fn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">apply</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">args</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			//æ‰§è¡Œå®Œåï¼Œéœ€é‡ç½®å®šæ—¶å™¨ï¼Œä¸ç„¶timerä¸€ç›´æœ‰å€¼ï¼Œæ— æ³•å¼€å¯ä¸‹ä¸€ä¸ªå®šæ—¶å™¨</span></span>
<span class="line"><span style="color:#E06C75;">			timer</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		}, </span><span style="color:#E06C75;">delay</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	};</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h4 id="_2-æ—¶é—´æˆ³ç‰ˆæœ¬" tabindex="-1">2. æ—¶é—´æˆ³ç‰ˆæœ¬ <a class="header-anchor" href="#_2-æ—¶é—´æˆ³ç‰ˆæœ¬" aria-label="Permalink to &quot;2. æ—¶é—´æˆ³ç‰ˆæœ¬&quot;">â€‹</a></h4><p>ç¬¬ã‡æ¬¡æ‰§è¡Œï¼Œæœ€åã‡æ¬¡ä¸æ‰§è¡Œ</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// èŠ‚æµ</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> throttle</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">fn</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">delay</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 500</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> prev</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">; </span><span style="color:#7F848E;font-style:italic;">// ä¸Šä¸€æ¬¡æ‰§è¡Œè¯¥å‡½æ•°çš„æ—¶é—´</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> (...</span><span style="color:#E06C75;font-style:italic;">args</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		let</span><span style="color:#E06C75;"> now</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Date</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">now</span><span style="color:#ABB2BF;">(); </span><span style="color:#7F848E;font-style:italic;">// è¿”å›ä»UTCåˆ°å½“å‰æ—¶é—´çš„æ¯«ç§’æ•°</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// å¦‚æœå·®å€¼å¤§äºç­‰äºè®¾ç½®çš„ç­‰å¾…æ—¶é—´å°±æ‰§è¡Œå‡½æ•°</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">now</span><span style="color:#56B6C2;"> -</span><span style="color:#E06C75;"> prev</span><span style="color:#56B6C2;"> &gt;=</span><span style="color:#E06C75;"> delay</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">			fn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">apply</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">args</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;">			prev</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Date</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">now</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	};</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>å®ç° 2</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> throttle</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">fn</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">wait</span><span style="color:#ABB2BF;">, ...</span><span style="color:#E06C75;font-style:italic;">args</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> pre</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Date</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">now</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// å‡½æ•°å¯èƒ½ä¼šæœ‰å…¥å‚</span></span>
<span class="line"><span style="color:#C678DD;">		var</span><span style="color:#E06C75;"> context</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">		var</span><span style="color:#E06C75;"> now</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Date</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">now</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">now</span><span style="color:#56B6C2;"> -</span><span style="color:#E06C75;"> pre</span><span style="color:#56B6C2;"> &gt;=</span><span style="color:#E06C75;"> wait</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// å°†æ‰§è¡Œå‡½æ•°çš„thisæŒ‡å‘å½“å‰ä½œç”¨åŸŸ</span></span>
<span class="line"><span style="color:#E5C07B;">			fn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">apply</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">context</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">args</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;">			pre</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Date</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">now</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	};</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// æµ‹è¯•</span></span>
<span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> name</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;mu&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> handle</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">val</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">	console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">val</span><span style="color:#56B6C2;"> +</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// æ»šåŠ¨é¼ æ ‡ï¼Œè§¦å‘é˜²æŠ–ï¼Œæ‰§è¡Œhandle</span></span>
<span class="line"><span style="color:#E5C07B;">window</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">addEventListener</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;scroll&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#61AFEF;">throttle</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">handle</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">1000</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;æœ¨ç”±&quot;</span><span style="color:#ABB2BF;">));</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>å¾…å®šç‰ˆæœ¬</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#7F848E;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> * underscore èŠ‚æµå‡½æ•°ï¼Œè¿”å›å‡½æ•°è¿ç»­è°ƒç”¨æ—¶ï¼Œfunc æ‰§è¡Œé¢‘ç‡é™å®šä¸º æ¬¡ / wait</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> *</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> * </span><span style="color:#C678DD;font-style:italic;">@param</span><span style="color:#E5C07B;font-style:italic;"> {function}</span><span style="color:#E06C75;font-style:italic;"> func</span><span style="color:#7F848E;font-style:italic;"> å›è°ƒå‡½æ•°</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> * </span><span style="color:#C678DD;font-style:italic;">@param</span><span style="color:#E5C07B;font-style:italic;"> {number}</span><span style="color:#E06C75;font-style:italic;"> wait</span><span style="color:#7F848E;font-style:italic;"> è¡¨ç¤ºæ—¶é—´çª—å£çš„é—´éš”</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> * </span><span style="color:#C678DD;font-style:italic;">@param</span><span style="color:#E5C07B;font-style:italic;"> {object}</span><span style="color:#E06C75;font-style:italic;"> options</span><span style="color:#7F848E;font-style:italic;"> å¦‚æœæƒ³å¿½ç•¥å¼€å§‹å‡½æ•°çš„çš„è°ƒç”¨ï¼Œä¼ å…¥{leading: false</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> * å¦‚æœæƒ³å¿½ç•¥ç»“å°¾å‡½æ•°çš„è°ƒç”¨ï¼Œä¼ å…¥{trailing: false</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> * ä¸¤è€…ä¸èƒ½å…±å­˜ï¼Œå¦åˆ™å‡½æ•°ä¸èƒ½æ‰§è¡Œ</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> * </span><span style="color:#C678DD;font-style:italic;">@return</span><span style="color:#E5C07B;font-style:italic;"> {function}</span><span style="color:#7F848E;font-style:italic;"> è¿”å›å®¢æˆ·è°ƒç”¨å‡½æ•°</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">_</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">throttle</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">func</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">wait</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">options</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> context</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">args</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">result</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> timeout</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// ä¹‹å‰çš„æ—¶é—´æˆ³</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> previous</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// å¦‚æœ options æ²¡ä¼ åˆ™è®¾ä¸ºç©ºå¯¹è±¡</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E06C75;">options</span><span style="color:#ABB2BF;">) </span><span style="color:#E06C75;">options</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {};</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// å®šæ—¶å™¨å›è°ƒå‡½æ•°</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#61AFEF;"> later</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// å¦‚æœè®¾ç½®äº† leadingï¼Œå°±å°† previous è®¾ä¸º 0</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// ç”¨äºä¸‹é¢å‡½æ•°çš„ç¬¬ä¸€ä¸ª if åˆ¤æ–­</span></span>
<span class="line"><span style="color:#E06C75;">		previous</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> options</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">leading</span><span style="color:#56B6C2;"> ===</span><span style="color:#D19A66;"> false</span><span style="color:#C678DD;"> ?</span><span style="color:#D19A66;"> 0</span><span style="color:#C678DD;"> :</span><span style="color:#E5C07B;"> _</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">now</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// ç½®ç©ºä¸€æ˜¯ä¸ºäº†é˜²æ­¢å†…å­˜æ³„æ¼ï¼ŒäºŒæ˜¯ä¸ºäº†ä¸‹é¢çš„å®šæ—¶å™¨åˆ¤æ–­</span></span>
<span class="line"><span style="color:#E06C75;">		timeout</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">		result</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> func</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">apply</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">context</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">args</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E06C75;">timeout</span><span style="color:#ABB2BF;">) </span><span style="color:#E06C75;">context</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> args</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	};</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// è·å¾—å½“å‰æ—¶é—´æˆ³</span></span>
<span class="line"><span style="color:#C678DD;">		var</span><span style="color:#E06C75;"> now</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> _</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">now</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// é¦–æ¬¡è¿›å…¥å‰è€…è‚¯å®šä¸º true</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// å¦‚æœéœ€è¦ç¬¬ä¸€æ¬¡ä¸æ‰§è¡Œå‡½æ•°</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// å°±å°†ä¸Šæ¬¡æ—¶é—´æˆ³è®¾ä¸ºå½“å‰çš„</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// è¿™æ ·åœ¨æ¥ä¸‹æ¥è®¡ç®— remaining çš„å€¼æ—¶ä¼šå¤§äº0</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E06C75;">previous</span><span style="color:#56B6C2;"> &amp;&amp;</span><span style="color:#E5C07B;"> options</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">leading</span><span style="color:#56B6C2;"> ===</span><span style="color:#D19A66;"> false</span><span style="color:#ABB2BF;">) </span><span style="color:#E06C75;">previous</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> now</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// è®¡ç®—å‰©ä½™æ—¶é—´</span></span>
<span class="line"><span style="color:#C678DD;">		var</span><span style="color:#E06C75;"> remaining</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> wait</span><span style="color:#56B6C2;"> -</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">now</span><span style="color:#56B6C2;"> -</span><span style="color:#E06C75;"> previous</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;">		context</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">		args</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> arguments</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// å¦‚æœå½“å‰è°ƒç”¨å·²ç»å¤§äºä¸Šæ¬¡è°ƒç”¨æ—¶é—´ + wait</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// æˆ–è€…ç”¨æˆ·æ‰‹åŠ¨è°ƒäº†æ—¶é—´</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// å¦‚æœè®¾ç½®äº† trailingï¼Œåªä¼šè¿›å…¥è¿™ä¸ªæ¡ä»¶</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// å¦‚æœæ²¡æœ‰è®¾ç½® leadingï¼Œé‚£ä¹ˆç¬¬ä¸€æ¬¡ä¼šè¿›å…¥è¿™ä¸ªæ¡ä»¶</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// è¿˜æœ‰ä¸€ç‚¹ï¼Œä½ å¯èƒ½ä¼šè§‰å¾—å¼€å¯äº†å®šæ—¶å™¨é‚£ä¹ˆåº”è¯¥ä¸ä¼šè¿›å…¥è¿™ä¸ª if æ¡ä»¶äº†</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// å…¶å®è¿˜æ˜¯ä¼šè¿›å…¥çš„ï¼Œå› ä¸ºå®šæ—¶å™¨çš„å»¶æ—¶</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// å¹¶ä¸æ˜¯å‡†ç¡®çš„æ—¶é—´ï¼Œå¾ˆå¯èƒ½ä½ è®¾ç½®äº†2ç§’</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// ä½†æ˜¯ä»–éœ€è¦2.2ç§’æ‰è§¦å‘ï¼Œè¿™æ—¶å€™å°±ä¼šè¿›å…¥è¿™ä¸ªæ¡ä»¶</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">remaining</span><span style="color:#56B6C2;"> &lt;=</span><span style="color:#D19A66;"> 0</span><span style="color:#56B6C2;"> ||</span><span style="color:#E06C75;"> remaining</span><span style="color:#56B6C2;"> &gt;</span><span style="color:#E06C75;"> wait</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// å¦‚æœå­˜åœ¨å®šæ—¶å™¨å°±æ¸…ç†æ‰å¦åˆ™ä¼šè°ƒç”¨äºŒæ¬¡å›è°ƒ</span></span>
<span class="line"><span style="color:#C678DD;">			if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">timeout</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#61AFEF;">				clearTimeout</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">timeout</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;">				timeout</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#E06C75;">			previous</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> now</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">			result</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> func</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">apply</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">context</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">args</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">			if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E06C75;">timeout</span><span style="color:#ABB2BF;">) </span><span style="color:#E06C75;">context</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> args</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		} </span><span style="color:#C678DD;">else</span><span style="color:#C678DD;"> if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E06C75;">timeout</span><span style="color:#56B6C2;"> &amp;&amp;</span><span style="color:#E5C07B;"> options</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">trailing</span><span style="color:#56B6C2;"> !==</span><span style="color:#D19A66;"> false</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// åˆ¤æ–­æ˜¯å¦è®¾ç½®äº†å®šæ—¶å™¨å’Œ trailing</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// æ²¡æœ‰çš„è¯å°±å¼€å¯ä¸€ä¸ªå®šæ—¶å™¨</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// å¹¶ä¸”ä¸èƒ½ä¸èƒ½åŒæ—¶è®¾ç½® leading å’Œ trailing</span></span>
<span class="line"><span style="color:#E06C75;">			timeout</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> setTimeout</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">later</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">remaining</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E06C75;"> result</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	};</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br></div></div><h2 id="å‡½æ•°æŸ¯é‡ŒåŒ–" tabindex="-1">å‡½æ•°æŸ¯é‡ŒåŒ– <a class="header-anchor" href="#å‡½æ•°æŸ¯é‡ŒåŒ–" aria-label="Permalink to &quot;å‡½æ•°æŸ¯é‡ŒåŒ–&quot;">â€‹</a></h2><p>å‡½æ•°æŸ¯é‡ŒåŒ–æŒ‡çš„æ˜¯ï¼šå°†ä½¿ç”¨å¤šä¸ªå‚æ•°çš„å‡½æ•°è½¬æ¢æˆä½¿ç”¨å•ä¸€å‚æ•°çš„å‡½æ•°ï¼Œå¹¶è¿”å›æ¥å—ä½™ä¸‹å‚æ•°ä¸”è¿”å›ç»“æœçš„æ–°å‡½æ•°çš„æŠ€æœ¯ã€‚</p><p><strong>ä½œç”¨</strong>ï¼šå¯ä»¥<strong>å‚æ•°å¤ç”¨</strong>ï¼ˆå…¬å…±çš„å‚æ•°å·²ç»é€šè¿‡æŸ¯é‡ŒåŒ–é¢„ç½®äº†ï¼‰å’Œ<strong>å»¶è¿Ÿæ‰§è¡Œ</strong>ï¼ˆæŸ¯é‡ŒåŒ–æ—¶åªæ˜¯è¿”å›ä¸€ä¸ª<strong>é¢„ç½®å‚æ•°çš„æ–°å‡½æ•°</strong>ï¼Œå¹¶æ²¡æœ‰ç«‹åˆ»æ‰§è¡Œï¼Œåœ¨æ»¡è¶³æ¡ä»¶åæ‰ä¼šæ‰§è¡Œï¼‰ã€‚</p><p>æŸ¯é‡ŒåŒ–å‡½æ•°å®ç°çš„åŸç†ï¼šåˆ©ç”¨é—­åŒ…åŸç†åœ¨æ‰§è¡Œå¯ä»¥å½¢æˆä¸€ä¸ªä¸é”€æ¯çš„ä½œç”¨åŸŸï¼Œç„¶åæŠŠéœ€è¦é¢„å…ˆå¤„ç†çš„å†…å®¹éƒ½å‚¨å­˜åœ¨è¿™ä¸ªä¸é”€æ¯çš„ä½œç”¨åŸŸä¸­ï¼Œå¹¶ä¸”è¿”å›ä¸€ä¸ªæœ€å°‘å‚æ•°å‡½æ•°ã€‚</p><p>æ¯”å¦‚ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> add</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">a</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">b</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> a</span><span style="color:#56B6C2;"> +</span><span style="color:#E06C75;"> b</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#C678DD;">var</span><span style="color:#61AFEF;"> add1</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">val</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#61AFEF;"> add</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#56B6C2;"> +</span><span style="color:#E06C75;"> val</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="å‚æ•°å®šé•¿çš„æŸ¯é‡ŒåŒ–" tabindex="-1">å‚æ•°å®šé•¿çš„æŸ¯é‡ŒåŒ– <a class="header-anchor" href="#å‚æ•°å®šé•¿çš„æŸ¯é‡ŒåŒ–" aria-label="Permalink to &quot;å‚æ•°å®šé•¿çš„æŸ¯é‡ŒåŒ–&quot;">â€‹</a></h3><p><strong>æ€è·¯</strong>ï¼šé€šè¿‡å‡½æ•°çš„ length å±æ€§è·å–å‡½æ•°çš„å½¢å‚ä¸ªæ•°ï¼Œå½¢å‚çš„ä¸ªæ•°å°±æ˜¯æ‰€éœ€å‚æ•°çš„ä¸ªæ•°ã€‚ç»´æŠ¤ä¸€ä¸ªæ•°ç»„ï¼Œå½“æ•°ç»„çš„é•¿åº¦ä¸å‡½æ•°æ¥æ”¶å‚æ•°çš„ä¸ªæ•°ä¸€è‡´ï¼Œå†æ‰§è¡Œè¯¥å‡½æ•°ã€‚</p><p>æŸ¯é‡ŒåŒ–æœ‰å»¶è¿Ÿè®¡ç®—çš„ä½œç”¨ï¼Œå‚æ•°çš„ç¼“å­˜æ˜¯é€šè¿‡é—­åŒ…å®ç°çš„ï¼Œæ‰€ä»¥å®ç°ä¸Šå¯ä»¥æ˜¯ï¼š</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// å®ç°å‡½æ•°æŸ¯é‡ŒåŒ–</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> curry</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">fn</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// è¿”å›ä¸€ä¸ªæ–°å‡½æ•°</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#C678DD;"> function</span><span style="color:#61AFEF;"> curried</span><span style="color:#ABB2BF;">(...</span><span style="color:#E06C75;font-style:italic;">args</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">args</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#56B6C2;"> &gt;=</span><span style="color:#E5C07B;"> fn</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">			return</span><span style="color:#E5C07B;"> fn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">apply</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">args</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">// å¦‚æœå‚æ•°å¤Ÿäº†ï¼Œå°±æ‰§è¡ŒåŸå‡½æ•°ï¼Œè¿”å›ç»“æœ</span></span>
<span class="line"><span style="color:#ABB2BF;">		} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			//è¿”å›ä¸€ä¸ªæ–°å‡½æ•°ï¼Œç»§ç»­é€’å½’å»è¿›è¡ŒæŸ¯é‡ŒåŒ–ï¼Œåˆ©ç”¨é—­åŒ…ï¼Œå°†å½“å‰å·²ç»ä¼ å…¥çš„å‚æ•°ä¿å­˜ä¸‹æ¥</span></span>
<span class="line"><span style="color:#C678DD;">			return</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> (...</span><span style="color:#E06C75;font-style:italic;">args2</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">				//é€’å½’è°ƒç”¨ curried å‡½æ•°</span></span>
<span class="line"><span style="color:#C678DD;">				return</span><span style="color:#E5C07B;"> curried</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">apply</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">, [...</span><span style="color:#E06C75;">args</span><span style="color:#ABB2BF;">, ...</span><span style="color:#E06C75;">args2</span><span style="color:#ABB2BF;">]); </span><span style="color:#7F848E;font-style:italic;">//æ–°å‡½æ•°è°ƒç”¨æ—¶ä¼šç»§ç»­ä¼ å‚ï¼Œæ‹¼æ¥å‚æ•°</span></span>
<span class="line"><span style="color:#ABB2BF;">			};</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	};</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// æµ‹è¯•</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> sum</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">a</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">b</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">c</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> a</span><span style="color:#56B6C2;"> +</span><span style="color:#E06C75;"> b</span><span style="color:#56B6C2;"> +</span><span style="color:#E06C75;"> c</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> curried</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> curry</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">sum</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">curried</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">)); </span><span style="color:#7F848E;font-style:italic;">//6</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">curried</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">)(</span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">)); </span><span style="color:#7F848E;font-style:italic;">//6</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">curried</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">)(</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">)); </span><span style="color:#7F848E;font-style:italic;">//6</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">curried</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">)(</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">)(</span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">)); </span><span style="color:#7F848E;font-style:italic;">//6</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// å®ç°2</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">* å®ç°è¦ç‚¹ï¼šæŸ¯é‡ŒåŒ–å‡½æ•°æ¥æ”¶åˆ°è¶³å¤Ÿå‚æ•°åï¼Œå°±ä¼šæ‰§è¡ŒåŸå‡½æ•°ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•å»ç¡®å®šä½•æ—¶è¾¾åˆ°è¶³å¤Ÿçš„å‚æ•°å‘¢ï¼Ÿ</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">* æŸ¯é‡ŒåŒ–å‡½æ•°éœ€è¦è®°ä½ä½ å·²ç»ç»™è¿‡ä»–çš„å‚æ•°ï¼Œå¦‚æœæ²¡ç»™çš„è¯ï¼Œåˆ™é»˜è®¤ä¸ºä¸€ä¸ªç©ºæ•°ç»„ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">* æ¥ä¸‹æ¥æ¯æ¬¡è°ƒç”¨çš„æ—¶å€™ï¼Œéœ€è¦æ£€æŸ¥å‚æ•°æ˜¯å¦ç»™å¤Ÿï¼Œå¦‚æœå¤Ÿäº†ï¼Œåˆ™æ‰§è¡Œfnï¼Œæ²¡æœ‰çš„è¯åˆ™è¿”å›ä¸€ä¸ªæ–°çš„ curry</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">å‡½æ•°ï¼Œå°†ç°æœ‰çš„å‚æ•°å¡ç»™ä»–ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">*</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">*/</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// å¾…æŸ¯é‡ŒåŒ–å¤„ç†çš„å‡½æ•°</span></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#61AFEF;"> sum</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">a</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">b</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">c</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">d</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">return</span><span style="color:#E06C75;"> a</span><span style="color:#56B6C2;"> +</span><span style="color:#E06C75;"> b</span><span style="color:#56B6C2;"> +</span><span style="color:#E06C75;"> c</span><span style="color:#56B6C2;"> +</span><span style="color:#E06C75;"> d</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// æŸ¯é‡ŒåŒ–å‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªè¢«å¤„ç†è¿‡çš„å‡½æ•°</span></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#61AFEF;"> curry</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">fn</span><span style="color:#ABB2BF;">, ...</span><span style="color:#E06C75;font-style:italic;">arr</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> { </span><span style="color:#7F848E;font-style:italic;">// arr è®°å½•å·²æœ‰å‚æ•°</span></span>
<span class="line"><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> (...</span><span style="color:#E06C75;font-style:italic;">args</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> { </span><span style="color:#7F848E;font-style:italic;">// args æ¥æ”¶æ–°å‚æ•°</span></span>
<span class="line"><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">fn</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#56B6C2;"> &lt;=</span><span style="color:#ABB2BF;"> (...</span><span style="color:#E06C75;">arr</span><span style="color:#ABB2BF;">,...</span><span style="color:#E06C75;">args</span><span style="color:#ABB2BF;">)) { </span><span style="color:#7F848E;font-style:italic;">// å‚æ•°å¤Ÿæ—¶ï¼Œè§¦å‘æ‰§è¡Œ</span></span>
<span class="line"><span style="color:#C678DD;">return</span><span style="color:#61AFEF;"> fn</span><span style="color:#ABB2BF;">(...</span><span style="color:#E06C75;">arr</span><span style="color:#ABB2BF;">, ...</span><span style="color:#E06C75;">args</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> { </span><span style="color:#7F848E;font-style:italic;">// ç»§ç»­æ·»åŠ å‚æ•°</span></span>
<span class="line"><span style="color:#C678DD;">return</span><span style="color:#61AFEF;"> curry</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">fn</span><span style="color:#ABB2BF;">, [...</span><span style="color:#E06C75;">arr</span><span style="color:#ABB2BF;">, ...</span><span style="color:#E06C75;">args</span><span style="color:#ABB2BF;">])</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> sumPlus</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> curry</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">sum</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#61AFEF;">sumPlus</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">)(</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">)(</span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">)(</span><span style="color:#D19A66;">4</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#61AFEF;">sumPlus</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">)(</span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">)(</span><span style="color:#D19A66;">4</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#61AFEF;">sumPlus</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">)(</span><span style="color:#D19A66;">4</span><span style="color:#ABB2BF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br></div></div><p>æµ‹è¯•ç»“æœï¼š</p><p><img src="data:image/webp;base64,UklGRnYPAABXRUJQVlA4IGoPAABQVACdASrYAboAPpFInkwlpCKiIZHpALASCWlu+/9X4LIDhs/7n+r/cb1z/n3sc9kAZLbf+YD9a/1J99D0FbxtvKOQr+ZP732j/5fwT8R3r7MBxp9YmpH8t+2f7Lyc/4Xgr78tQL2L3Svaxaz/pfQC9g/pf/C8Fv/C9A/ql/vPcA/lv9g9IO9M809gL+cf3v/n+yv/Tf+r/N+dD6e/9XuEfzj+x/9n/Ddob0PP2x//4AjoFxvm5UDkgslkY5Kv9clZyEsDWVkd4lsxLiydXM/k/e2o35wcTTnKMP9O0klgbucOdzFeA7t4AqX0fgMEnbpQe8dSY1yRe8SZoTFyk+oG+9Vmwm6nAMxbSWRC/d1K9HDWSuBoWrTKDHOa8AgmrSYuh0hsa7VCZ37ivNdR5FJ35T3DJ/B/dkP/ikxuTvTcS5+LdHWaHQDZ/xPStNcOpQDq0WAMK0NOpPS64idy+ZOVzv6XrYz1kOwfuA89ypV4x0rmSPFgtuwVRYKosFUWQQlzEIpsVCpgh2gD2uQz9pIaoH6lepsyBIjHMDNxiJ6ouLFFDWwjhK9PNBQRrDzzbqrgYLNJ/Cj6150v1Zeb/opEREtj4vKl/i8ajnnTDQRhYIwsESeg+oLcVFuKi3FRbiotxUVMatkF65L9sSF4brXhGpRXxj3IRO0Z83PHApSlXpSr0pV6Uq9KVelKvSlXpSr0pUGvxH9Gz4tZ8Ws+LWfFrPi1nxaz4tZ8Ws+KywU/Nms6sdR47z0QWu4pXJZc2hN96eba7TjatwMk3FRbiotxUW4qLcVFuKi3FRbiU6HjZE8rVXm392fh4Y/OoUsNbgvu894iLXdDWpOruhrUkoGBFexpeXoDhYbUwA9UtLuhrUnV2zvuzKPDbtlUBA5oeHzJPsfjQaGNcU9AAAD+jzjQ+JcIKrbTfX2ZxSRpYMhfMnh3mezKGTsAIbwYfzaLkZhKUx2YY7a0a6qzH2gA082nklT4mcbsgVFBZnkJtr6ZvPKVK27XZDfYYl5jCg+qK0EN+EgTDLJrt9fUwbHMaq0DQ0RsgrmXeF2ugt/Os2fudLL4aeW6gWgxYnsJZl5mI2O80Mp2hskWKWV4Av7dbB3s9fTEeNAHhzbROHBhGsHLwGVKqxvQHwQK/FglS+THQKa8XEenud0C9T/VV03BasNtaD1rAkn8szdUjSXFX//edVS5yeQN0VLmn0PG6Si1b8NhL6LIVFZnaNMhWZU/8uzCUsCg0kN+iaUp1kaPqQ1DJRF+6XIWq5YUQem/d3v2dI49RlV6TlTDG8kSRht0kWCygdU/fII0pB84nJxLJLhY5bY4XxYdh8Eh/MRpsTY8CUBB2NsT9+7sZT+FTYQsadn8sT7aQAa0ANPHcaBHZuMkIyr4wPyT/aV4zmaKrhEt7D1wYvDHtVzKxYMNi3qPXd4xdFhtVHtXmlnpAjcHx8glDXA+F5A+hI/oH56WnTwk8oUNFP0P3aroStMBYIaeqwscFMOz7VR5Sb2HU2okkPrvJx+6YXyAmGMim0AU9Sgbb9bVCP/hH1xMt5ZHYslx7Z+BIQ7U3XUhs61a1DPqSj+2HV+HycWdsP/9YDRPKX68/ZB7dqziI7nezQTuYt9DppLTzLq90Cvaf+mxjfYx2Rp4bkTR0WmIYHwKOYWr0Rfz0h05aQ++ZDFdPMAn05rQHigJXJsOsaI4+0I1vDZaUbRzzR+iDrMm4Vzlns7sYNFHHGENDYB6uJ2P8sLrJungSwvS8oUiIBI2j5F+JT7gU/pxMIdjUaxpnbx/5A4Zccw8V2/vCOOtynvy9vj9wun8Hg77z0A7W8jOw3uQv/TT/g95BZkRdcWL+GoeuA7YQEhyg9shqbFvNYOln+fa4T19LLRyLcXYNP/7nCMtLC2EawEud3OiuZ1StYgctfcD9kaW40EUR5ryuZOm2qcJ4fh3lYOtxoOLCv+nH2yqANy6eIeIJh7AM4c2cjdxs6OeqT4A9XqV6Qp3Dk47WxNiaeWV3dEkdz0VOuWXYRiaIrju5GXjVJSp17qR8FitYTWrqcvDyYDKSmUkcMDWgrb1E92pEQrk7dmUmDMEZqjGO8cqsLJbVHoOdeU/ZaaQLQFPDvQxj7MDzv3vdt6xCbVaMcyY6TEX0PQjl8M7NGc5PKi99Fvj+zaAz4TKOBbI7FrC2IKqflB16dq9pVRKa0saKvvQ8JnuadsLBJ3B8idWysf/JbRmqGzh1JUzcyG9+PJOnsGeMzPM4bTfqM6s1wUYZTnb1xnBgZleiqnauCz+GVzc9cUB05NbnHjT8oTwSN4BQ5E+WHkG9VSvHkkoJWf02+2/nM2Or+T+59oDGol6kt4rUB+jPpBSUqxNXJlbq8+wgLUfXC6Wgh9tX2VWWxGZ6zYuCo4THxwZtZzwFaqqQvlArt4tRp6j8kMhbZGeL6uI21v22kOcTGyA24eoms19iEbHqFOh83TInoSHTJ5fAG7fDjOYLA+Duwf/0Y6TeaYqGStLuo4Sxj9VPEnIk+heyO7z1mI2gv3L2sl9vZnkfTRmZxKnpdt4jHMbUdsk11Fi3VWDHYqjcHfAeUySDzbg6G8AITY6SzXFAVSVJyvMTT5bFHwranraDUqJjoDjOLCTSEo6kplR3GwLIYWGIPtaXNyPgWXpbuF5evdjIpL4E6Guap5q9JbeIURjzapps/+OmKXifXmwjo2YvpPVnIrf0NNMCl+dHZIsvzCGtI86GJNoFHI/LN04Dj46oJQqr3iHE1OCXKaiz+HotVjfSFN4+S4NxrjPb9Gc9wZj/y79SD14JzpO8uI3SdKUsxvmOHLaAy+fHC9ngJn8o+7w88lwUM1x6lKjcVT8uWxyw3xuyiZt00Iw0VQKoOkE5qjc9yxpEk4bw2GpT2fK24N52sG92kGNvaSgzhhyVlQtFlLcSNXUJYpx++1ySoDEZodBBwXCR+On+88waI81T5Tt+pdAFVBABf2Y4TiHFDxqA5eWKe8l/LBkxOqpk6nEjgkTCyNYjYtbXKQ/ZZEjKgWFQZg16+A0u2vVWeO1tG5o+3mb+PAkvTv4MgDYKC8dSTyq3TXCwDtD7f56J/u5jQhoJouhn3F0oqB1ZEKj/jZx3dC13B4LrKeQ1ffjvrIwSOeqiPpqkxnBMd+iD34dArIwP1+4rGxSbD3ZNMgfdE5DoaeA1yNqMvwDBZzi6TP/2W8+JdvuJean1RHreCuzreaKNADoWIGZuAEmGg29ANNhkfKBfVCGnE7DaWTrXWrtTxHUCQ/JcgBIF1nsH5RHsVPaPwpyjjFKnHVINEAyim/3hPmDYJMcUQ2r/zAs/8t8nLJW0Pxf9tLDbkecUlIhN55Si6atBOaNChN+dIikm58ahpldpQZCjYH/kn4kqyHfWM/TBFNX8WdilUjMMjyvYnbE4VN9/sHhLoZldliEN7eqH/H5oWyx8D+L2CgWdMobOqP4bDIdnO8lgSMpdZrg/lapULG28lvPzyOvkNs8zoOL7+JVX66uSq9XMAcTcCTz8elbweXbu5ldLHYe6MSeWJ9cH6b8/qiZ/y4u5cmnmgEAe8DmD4ILlfBk/+y0+v+tuFClxiZq9PXPVK1SVbV7348gFIF/fdo+gZqudmCayp9nMCab3ITo9N2d8dj9+QPBO03K1pWIQ4+UP7o3AbYSAXDzMtkSQM5vblIoH60Vv0sOO/KGca/Ugo0sZkyJNPS1r5eLue9xrV+vIZSdozYH4cS1xA9nzs0R2fHtJ5bmcCqxiY37MzcpOP5iTmkJgWlAapw/wHkQC03nzu9F4If+nX5Mv2uDPnahCQtWzGtDHbNizC/Xf41OoRdMb91ICE0fzQ41lf7jzgQ5KswfOWfFjxIOA7LvH1XtiKmp6P/xQH1RKA4i/I7m+w7LwrDGD5VDcWF5lllj5t2+S8WHep0KYzP/Ri5VjQOI+ovtLApBvnEq+MhK2vgyhz1iYdSPvIAM8MVW2WqkgW/UjgHnQmgQ6vNNTxHLAsk+Ee8+xrJfzxTVkV9wGUNbAqhn9JXnrNPJket/d0RzSUOeY6BYpWZjI0h8zhdR92/KPMyXze2YJfmCkT6SpN4ph6jE3ghg0VGurAeNAhiY4xrCjBhDmZ3PtKtanb+rFRsIFOEFVtZAcw30IZBdvBSstK93WBcbIJ/g0ENAAAAercHjsDwT7JZy5QDpV4L2WWqR3S15FYClj56JX+EYrCAeu0CwfnxZJWPH58WSVjx+fM3DfaaB7+Ifynejwm+Zcn9G2Kea+9CryJPVoa0CPo1M9t+qu7m5P31hufPs2kCf7FYYMXFHSf4kSTpYA2jCna+aU/O+axru6IAAAAAAAP/xdsfn8Jc0QvGmu+NHEkeE3zLk/o2xTzX3oVeRJ6tDWgR9Gpntv1V3c3KWEp9AR6FyttM4AQB4xcYZ7cSAa20TECxXMyAAAHJbq+871jtIFFhqZjUeTEcOsKYOHlSB93J/RU/0DlO4Btoieoxs9vLnMh/s0hsh/s0hsh/s0hsh/s0hsh/s0hsh/s0hsh/s0hsh/s0hsh/s0hsh/s0hsh/s0hsh4wZpSTcJ8yGfywprT+3yXWGwrIrUK05rbW/53NMD/hF//6aky8cgbSsqEc53BOA1K63rxrpRO57YQv8pFl4HcuYJF7QRCJukAAAAAADuXGI+zGLQxH0kKMDM6S53RW5AAAyGN4dAKUu/7RS+7h4OtbI/LEH3d145/8sABMVvGceXJyB4c86HU+x5c8GG9jy54MN7HlzwYb2PLngw2KKCPgNa9bnfzZuQGolbRUev7wza2ZMjArpFYasAAABRLJ4ico/cOVxEXiO921LOf+c+w8p8+n3VmsqzeygYtx9oF9oPT2/xJLjPwkvmuu132qqvjdRNAAAAKGOQRM9N42Gssj/VDGqTbZaQkiMkMJGytClUR3w7VyV+vv19FV5DPOceg8NEvPAYHpiu/U6F5K036WCk7SpNCxXsURKbKZoIFbcXZxIyV9wC8E/CzNgA/scpDUZllL5lqpz42bZVgx/EeR2ObLgAAU3vSfnJTDfkybDGlbxrlorko9xTVll4jBeVwFU4/oG0LPPwMP9zEIIkRQGbVfH0WlbGOCoU3/x79Rd9cMdPJWs4kewD2WosEZfz/viSfj8ECM/TpnAkjEmB7lmqDgwwhsipCokQeX+YDaKLYVUqllBuXny7Pl2eBn6i6NjA/drAJI8sOqjXK2CoITI3NL6rnd8g2nlhCs/uXEK2m1aS7tvocU53njajnEQykKrtPxmj97eoAAAA" alt="1.png"></p><h3 id="å‚æ•°ä¸å®šé•¿çš„æŸ¯é‡ŒåŒ–" tabindex="-1">å‚æ•°ä¸å®šé•¿çš„æŸ¯é‡ŒåŒ– <a class="header-anchor" href="#å‚æ•°ä¸å®šé•¿çš„æŸ¯é‡ŒåŒ–" aria-label="Permalink to &quot;å‚æ•°ä¸å®šé•¿çš„æŸ¯é‡ŒåŒ–&quot;">â€‹</a></h3><p><strong>é¢˜ç›®</strong>ï¼šå¦‚ä½•å®ç°ä¸€ä¸ªæ–¹æ³•ï¼Œä½¿è®¡ç®—ç»“æœèƒ½å¤Ÿæ»¡è¶³å¦‚ä¸‹é¢„æœŸã€‚</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#61AFEF;">add</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">// 6</span></span>
<span class="line"><span style="color:#61AFEF;">add</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">// 1</span></span>
<span class="line"><span style="color:#61AFEF;">add</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">)(</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">// 3</span></span>
<span class="line"><span style="color:#61AFEF;">add</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">)(</span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">// 6</span></span>
<span class="line"><span style="color:#61AFEF;">add</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">)(</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">)(</span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">// 6</span></span>
<span class="line"><span style="color:#61AFEF;">add</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">)(</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">)(</span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">)(</span><span style="color:#D19A66;">4</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">// 10</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>æ€è·¯</strong>ï¼šåˆ©ç”¨é—­åŒ…å’Œé€’å½’ï¼Œå¦‚æœå‚æ•°ä¸ºç©ºï¼Œåˆ™åˆ¤æ–­é€’å½’ç»“æŸï¼Œæ±‚å’Œï¼Œè¿”å›ç»“æœã€‚</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> addCurry</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// åˆ©ç”¨é—­åŒ…çš„ç‰¹æ€§æ”¶é›†æ‰€æœ‰å‚æ•°å€¼</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> arr</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [...</span><span style="color:#E5C07B;">arguments</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	//è¿”å›å‡½æ•°</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#C678DD;"> function</span><span style="color:#61AFEF;"> fn</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// å¦‚æœå‚æ•°ä¸ºç©ºï¼Œåˆ™åˆ¤æ–­é€’å½’ç»“æŸï¼Œå³ä¼ å…¥ä¸€ä¸ª()æ‰§è¡Œå‡½æ•°</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">arguments</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#56B6C2;"> ===</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">			return</span><span style="color:#E5C07B;"> arr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">reduce</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">a</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">b</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#E06C75;"> a</span><span style="color:#56B6C2;"> +</span><span style="color:#E06C75;"> b</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">// æ±‚å’Œ</span></span>
<span class="line"><span style="color:#ABB2BF;">		} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">			arr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(...</span><span style="color:#E5C07B;">arguments</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">			return</span><span style="color:#E06C75;"> fn</span><span style="color:#ABB2BF;">; </span><span style="color:#7F848E;font-style:italic;">//é€’å½’</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	};</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// æµ‹è¯•</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">addCurry</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">)()); </span><span style="color:#7F848E;font-style:italic;">//1</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">addCurry</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">)(</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">)()); </span><span style="color:#7F848E;font-style:italic;">//3</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">addCurry</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">)(</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">)(</span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">)()); </span><span style="color:#7F848E;font-style:italic;">//6</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">addCurry</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">)(</span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">)()); </span><span style="color:#7F848E;font-style:italic;">//6</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">addCurry</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">)()); </span><span style="color:#7F848E;font-style:italic;">//6</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>ä¸Šè¿°å†™æ³•ï¼Œæ€»æ˜¯è¦ä»¥ç©ºæ‹¬å·()ç»“å°¾ï¼Œäºæ˜¯å†æ”¹è¿›ä¸ºéšå¼è½¬æ¢<code>.toString</code>å†™æ³•ï¼ŒåŸç†ï¼šå½“ç”¨ Function çš„å€¼åšè®¡ç®—çš„æ—¶å€™ï¼Œä¼šè°ƒç”¨ toString åšéšå¼è½¬æ¢ã€‚æ³¨æ„ä¸€äº›æ—§ç‰ˆæœ¬çš„æµè§ˆå™¨éšå¼è½¬æ¢ä¼šé»˜è®¤æ‰§è¡Œï¼Œæ–°ç‰ˆæœ¬ä¸è¡Œäº†ã€‚å¯ä»¥åˆ©ç”¨éšå¼è½¬æ¢æˆ–è€… alertã€‚</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> addCurry</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> arr</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [...</span><span style="color:#E5C07B;">arguments</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// åˆ©ç”¨é—­åŒ…çš„ç‰¹æ€§æ”¶é›†æ‰€æœ‰å‚æ•°å€¼</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#61AFEF;"> fn</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#E5C07B;">		arr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(...</span><span style="color:#E5C07B;">arguments</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E06C75;"> fn</span><span style="color:#ABB2BF;">; </span><span style="color:#7F848E;font-style:italic;">//é€’å½’</span></span>
<span class="line"><span style="color:#ABB2BF;">	};</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// åˆ©ç”¨ toString éšå¼è½¬æ¢ï¼Œè½¬æ¢çš„æ—¶å€™å†è¿”å›ç»“æœ</span></span>
<span class="line"><span style="color:#E5C07B;">	fn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">toString</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E5C07B;"> arr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">reduce</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">a</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">b</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">			return</span><span style="color:#E06C75;"> a</span><span style="color:#56B6C2;"> +</span><span style="color:#E06C75;"> b</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		});</span></span>
<span class="line"><span style="color:#ABB2BF;">	};</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> fn</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// æµ‹è¯•</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">addCurry</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">)(</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">==</span><span style="color:#D19A66;"> 3</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">//true åˆ©ç”¨éšå¼è½¬æ¢ï¼Œè‡ªåŠ¨è°ƒç”¨toStringæ–¹æ³•å¾—åˆ°æŸ¯é‡ŒåŒ–çš„ç»“æœ</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//alert(addCurry(1)(2)(3))//6 alertå‚æ•°åªèƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œå¦‚æœå…¶ä»–ç±»å‹çš„å€¼ï¼Œä¼šè½¬æ¢æˆå­—ç¬¦ä¸²ï¼Œä¼šè°ƒç”¨toStringæ–¹æ³•</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">addCurry</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">toString</span><span style="color:#ABB2BF;">()); </span><span style="color:#7F848E;font-style:italic;">//1 æ‰‹åŠ¨è°ƒç”¨toString</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">addCurry</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">)(</span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">toString</span><span style="color:#ABB2BF;">()); </span><span style="color:#7F848E;font-style:italic;">//6</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">addCurry</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">)(</span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">)(</span><span style="color:#D19A66;">4</span><span style="color:#ABB2BF;">)(</span><span style="color:#D19A66;">5</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">toString</span><span style="color:#ABB2BF;">()); </span><span style="color:#7F848E;font-style:italic;">//15</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>æµ‹è¯•ç»“æœï¼š</p><p><img src="data:image/webp;base64,UklGRqgOAABXRUJQVlA4IJwOAADwWACdASrXAbkAPpFIn0ulpCKio1MIyLASCWdu5KgXLjvZ8N6ANsV3gHvWeeTvinoAeCr8J3+myWzyl/Zu0/+7+E/jNha/yHhY6L80f5N91P1/9s9C/9x4O/GrUC9c/6vxG/3TteNV/1X+q9QL1x+j/7b+1+O//cegf199gD+U/1T/pepP+08K7xb2AP5t/a/+D93n0u/zv/m/0Hnc+lv/N/lfgH/mX9n/6/9+9tD2I/un7DP7I//8URtwSmEV1aSSVQIRbwwAWbRXTj6/gmHp+J6klUCi+oLjApE/+ULrufiLabqWQokuWYLEjuhTonP+R27zXQb/97WsNnM2yvYyJ7wa3tO/iu5u+MAH4Oh0fcRS2vf1voNn10fXCgACAgaBQv2z75KzNc4K+fxBvdast411ifsS+JdRdtPUUUOx5WzjOFx3RaumACAUjASH6kKFrBEkoBxQzGqpJLryT/tovgmZTBt3duLByoqZlcYt/Ja5g32EwBAki4JVfnMxEXBKr5TL6thwlk26ZWBvKoUwT5WA46cI52D5W/ttn+wBSWKDehJsgGXYa/heVUZENRCeN4HtjBx3mC4oKyTF7uscZXO12POB+uqg3W3hWJDHcF/r5D4aBL8M/KWQaFBX5d8CvzmYiLglV+czERcEivJKbatNSxhkvz3kR1NN6WvCRcEqvzmYiLglV+czERb6FpS/VEEn9YX//i7NXhIuCVX5zMRFwSq/OZWmDTov9eEi4JVfnMxEXBKr85mIi4JVfnMrSiC+YJftxmzvS14SLglV+czERcEqvzmYiLglV92fk0z95xhEeSuJwSq/OZiIuCVX5zMRFwSq/OZh/uey7AePagvqwva5d/3FnfL4Avp6PVtANKflnfL2uXf9xX0b3lN5lFKjHp5R69xHGS5iLELxZ3y9rl3/cWd7viyZNM3snUOY3f3/XkFHrV3hiTxtrcAA/v9Zaztvrw1ovW3mlRPom026o8R46cr3NHl7+5IlLsoDhUj4w/4Dnd2JMwndZZphsvjaKQr6Oowb3mspCCrJMEXXkniwax06SIg3iUnjr5pQoJc+COsICAHglTQUKprLcaoM8yJ6fDwUva3YVkn1bIscj6In2d6joI0pcS5kRpMkBVJ3Ykmv0OFhfOj6xtXCSIq0jxfBeBAozV/w3H4QynQ77xFCPSeg/M6pcFjhg9MvjTwQKhGqa+SpRsE+5BatbAXYMJljIngBzkMxquT9KaE+RiTMNxZ1iErmR1dOkdzYosg6zUtHXz3S3vDKh83h3XyBWr3acoKm+0mhhCAFMC4MQVlD1/sTsOWhqtjzLWHh6LybMop/4Z6setTaBQ4+WQaeyqY4k00sdUGy7nzj8CPrk3qOkMPUwk4ffhGNpPU8QHNt9u1+z+eNG7qdBl3TlZ3XBEWaKWLeeDlmBnM7HCvcIgCIFCv7vB4w6/NKKMq7ZjCaQmFGoFjP4UgNdlgXXVwrXisRlq67BpMYzV9D5xsMCR1PSyjPJY7HC0ibE1VcSRxT7bj8EG0gO8WnSuCLqko8AJlQSFDwnv2mvZwZURrLKNU1HZ5iNWKS/FQFCCUIa1eUTXGAxab5zq3aiDaGtQ+nu4jnwk5lsN3ZC5olOQiJZw71MsJ7d5W0BsQb9ZJ/GAqTyR371pHx0WQBzxYyBAtie7hmnL2LnnnqkDfKCaux80jI6dRiEjQ/YA5mHWqM+Q7PiEtINMMEMiw5RLeSa7NUYGCzLPcliQ3wuMBvJMXoYctaDTmiXtsAv86Armpqwe84pl1pge9RkJQ+bY0OLzT7z+wVJnlFm4+Mk+cvyeAsNCxsRuPce4fspV6RJi9rE/Whyd/Zfi2a0WoODQeCbh4SJ/RtVYD+NOw7qooIEb/4H6nEJxTJem33o/QHiIBmoOmpk/DiJaYSicjq5I1hS0RIyc+ol93CBG9aKGT387avvOnyDwp/n1dHASz+msmm70hfjmB9TrSU5PRx0jkOoblT47/JdGvgSJH9KeKnVL1rc7MVQpL8kNeIPjTqLtg4TlwLvhF6iF89smsRkUqGkUC1n4fdv40mgH/UhsThazgxtA4sylYjjup4Yzp/GWIfhq79OoR4dSYTAhAFE6ASv1yQIzl4YZaCqo1xtJ2+qsQqLxl3LcuJHbSnpmoLUgpGf8DJXTT6yA/W4uV/HxWIZS1SXZBQa8fMOadMSWg/xIZT1Q4m+ywP9Y9rKO7ZBHnrUg9kLDKjNGKHEB+vGoHYIRCTauZ7T5gGd36VAIB8vjgxA74jtZPRO4tifgajuH30IwoM537v4e/mCJEzk0DLRthWM0S5wFimR7IokQqrLLiwlqPQpPBCwMl2RZcA4mbQ89uZgLsInz32Wo16tbVRuvRcWLS6WvbMEfpKBl5HTz3+PfIBL/pWn1grZyIIjanVz3nxJYFcONn7cgJGzzNo59Xh/uCfFxASB5ETc6u5sfl05O7FaHpGJX64yW07ug4gIUQ3o7GhzfEMd0FHV/uEnzW9mGclYP4733jdFKDlSYtsyyiHlZKXtxH77gW2XRDm/ho0bVI7J6NYUd8G5/fFCfX50FEE4bXRf8jMt7HQUrn42xhr/er9cPdKl9kKPYarC+lHrZkrr/WLJL6rEOUgwnuX2cxkCkrYZm9JXGIO5SL1x0WzAYsaZMQcnyJvVODh1JaHW4JEhl2AKKyYjA3wKcef3QLR+nIhykGp5GQ1VcuJ+FX2Cvlu7WYHrQs3yfMy9KNbrACkL8PVrQo+gV47m2rNplPGiA56dXLOO1Lp29zpTpbxW59ncd5vuuPTgO8u7R2gOi5VKxvPQEPZ3l5tNRtY8gDd2ynjPgU6b7KTLB37297LAbhaj5FO6rzlqds415xXFEkjoYPhJnNAsqlrtQoL7E+99Uuf9CHK6wFCPoTYcqu7DS2Gv0ymtD1HdknOUbaAHvL/3sXJLOymBuSWdcX5U5wlMbNKpYCyerzuyaoXATsQ5tBNEJiEe9P1JjPZQYa801vGnzbcqcNkCIHI9JhRJ184j0NVoC5FmYmSr+6lM9afRnWOoUjwT6R93AImELr660X/aQD2pMFirCmUIqJtRenvryr78XHJCC8Jm0582wcuf2r3JnWMl9IKnyzkqx/fuy7uzVU/lYXCYGFZwPNRrzA0uxM0t5SbpattCWxdOhnIkYsqZMBlQyCg4z7oCIj901+dWDgnyeU0/FRB9BWVwkBoGFO2Zopqae936O2YPhTQq6ebzOoCsmtKPMKQh/omE+MRLUsBFfPJ4QXeZ7MYSoYgIZaKFdVqfTNV9HJkjiP0LfUfLOwMsekgJNGWH0nKreNDNN++4JIunR6uEIodxSZW4P+L3oMllnlN/fJyVAyyQ/ZBWHMEIe95x4ypIZwBrN/YFplfJmepdLdMQjMJnfnFt67TWziOyMF4Lmi+NgQUiiV7GIz8etWDN94co2x6pjx0Hn7f6vSgYHRs9j0LvOXMZSL+2Q/ppWbpGvoSh/Fw91377LB8/zMlvZbz/BlDM99ENd1lHjqup20f6VSt8J4orftI6+po4XL0KmCiyVd42IvSnfFqclrfF/Ndk9eYWgy09wqGKqRbQI4HfnzwWXba4xtAQSaxWLW1pftDrqbG57Va64rDkniinUeAMzcxxlhzcsIocSo32V5Ll8b+4aypWGZOJZtPtHzmX9ugBG9TYa61JpAYR3xUKACUhvGQHWoDPApEvC2KAV1NLb4fTnFoz5kBb0e2b5RfRXVmtRDJ3JdoGqoxVOnlKSYgsJyOqliR7UE5V2A/uDEAAABTkQ6ZjPtTmOkrE5X7XjlIVrpEbxTEGLttTQ/BmAoS8Hh8KoPqN+7PsWfKEbuJC2P73kUdjjT8Q9aCwFmQHLkarN3NkFWPsljNvoVCCsIqL8ye0Gl847KqAUdKFSwe/SjYF9YUX90oy3MSUmNN1nneJys1Wadtxt6ncAnofg8WptilVUOoB/8LSpZ92aQ6hRnp+0iB4NlzhgIvH8SmAEOGDMixE40LILMJtzrPqAsaJpSxLiQgGGZAFwVTtrjjn3//FgeHn8nAUsYeK5rpE8/nFq6Qpyehqa5efw23b5M40nk46sGGlACg0EsSWBQ8qacGohCyWvdZZK/uo6cGohf3UdODUQv7qOfMcbULv5pkNLqatcf0HpFTZtz+XehQ5fYijU83NvY5A8gb6nzoFqeCagyUmU4TrB0zp1yi7VRXabAQIhFyQLDY/PF/TBvbO7BxKmI3WMEXbpHWOjAfQWI74MGM3YH/VxceCfUVCman7P/8P3/Y7hEcLk+bBNHDxxKD7TKRJNHhKxVe7cH2ql3ZBZGe/3tpY8PpHFkd5A4g31WPSmTFXClYAbqrHxbB9rH+10vhxpFczkCqBFW2A7O/JbRo67GJ5WjrsYnlaOuxieVo68t0WFsNi4STeGSVpfETOyoDZH19HAVgfNT9AEq0t+sEQoqkptE0E/vgHsJdYKrhjfHKFDxxL8jCPrvL+jJa7nehI9r6YVFoOndAAAN/TTz42qzIv8NvHGOzMkxQKUZ1Y3KFwG1XqmO+CYTstYc3aQTovAmHE0crVOkLoAAABvw7sxcLkknsxISsdKLuEfcsTkUzO1u4uX9P14ayYhDeTgEL+v60/RyBAJQICfqq9RXm4B7KAACGnFlJICG8v2q5xbnVg27POZ7v7PlOZjg67JZUjRtveD0KcM6idlX6O3WMeONP0TVGDG/daSD4C0d8pQB+NTX6Mh0eIukHx0J6wgKngEJdUcK4Y9tIuKwtXaWGFsgDeJzs2VRlffk3KRUS0v7Lv8G5yR8KqGhKlEJ4YbmySA1rRWWqhl+KrSVh6wPWtAduNc1IAABF237EwKwEZPiDgeaF1+OaRItNBP1b2rfPzutTwKZNavxL3UBur4Qc6e66DxWg0rL9IH8D1YanXTF/2mf5i0RNJHAx42IJ5FlMGmavgpmI36FMGXwLsEt6A+B2tCRGZqp/YMMcwg/IaUPP/AAAAA==" alt="8.png"></p><p>ä¸å›ºå®šä¼ å…¥å‚æ•°ï¼Œéšæ—¶æ‰§è¡Œ</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#7F848E;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> * å½“ç„¶äº†ï¼ŒæŸ¯é‡ŒåŒ–å‡½æ•°çš„ä¸»è¦ä½œç”¨è¿˜æ˜¯å»¶è¿Ÿæ‰§è¡Œï¼Œæ‰§è¡Œçš„è§¦å‘æ¡ä»¶ä¸ä¸€å®šæ˜¯å‚æ•°ä¸ªæ•°ç›¸ç­‰ï¼Œä¹Ÿå¯ä»¥æ˜¯å…¶ä»–çš„æ¡ä»¶ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> * ä¾‹å¦‚å‚æ•°ä¸ªä¸º0çš„æƒ…å†µï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦å¯¹ä¸Šé¢curryå‡½æ•°ç¨å¾®åšä¿®æ”¹</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// å¾…æŸ¯é‡ŒåŒ–å¤„ç†çš„å‡½æ•°</span></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#61AFEF;"> sum</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">arr</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E5C07B;"> arr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">reduce</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">a</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">b</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E06C75;"> a</span><span style="color:#56B6C2;"> +</span><span style="color:#E06C75;"> b</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	});</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#61AFEF;"> curry</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">fn</span><span style="color:#ABB2BF;">, ...</span><span style="color:#E06C75;font-style:italic;">arr</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// arr è®°å½•å·²æœ‰å‚æ•°</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#ABB2BF;"> (...</span><span style="color:#E06C75;font-style:italic;">args</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// args æ¥æ”¶æ–°å‚æ•°</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">args</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#56B6C2;"> ===</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// å‚æ•°ä¸ºç©ºæ—¶ï¼Œè§¦å‘æ‰§è¡Œ</span></span>
<span class="line"><span style="color:#C678DD;">			return</span><span style="color:#61AFEF;"> fn</span><span style="color:#ABB2BF;">(...</span><span style="color:#E06C75;">arr</span><span style="color:#ABB2BF;">, ...</span><span style="color:#E06C75;">args</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// ç»§ç»­æ·»åŠ å‚æ•°</span></span>
<span class="line"><span style="color:#C678DD;">			return</span><span style="color:#61AFEF;"> curry</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">fn</span><span style="color:#ABB2BF;">, ...</span><span style="color:#E06C75;">arr</span><span style="color:#ABB2BF;">, ...</span><span style="color:#E06C75;">args</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	};</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> sumPlus</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> curry</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">sum</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#61AFEF;">sumPlus</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">)(</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">)(</span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">)(</span><span style="color:#D19A66;">4</span><span style="color:#ABB2BF;">)();</span></span>
<span class="line"><span style="color:#61AFEF;">sumPlus</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">)(</span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">)(</span><span style="color:#D19A66;">4</span><span style="color:#ABB2BF;">)();</span></span>
<span class="line"><span style="color:#61AFEF;">sumPlus</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">)(</span><span style="color:#D19A66;">4</span><span style="color:#ABB2BF;">)();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h3 id="ç»“åˆå®ç°" tabindex="-1">ç»“åˆå®ç° <a class="header-anchor" href="#ç»“åˆå®ç°" aria-label="Permalink to &quot;ç»“åˆå®ç°&quot;">â€‹</a></h3><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// æŒ‰å®šä¹‰å®ç°</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> curry</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">fn</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">presetParam</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E5C07B;"> fn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">apply</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">, [</span><span style="color:#E06C75;">presetParam</span><span style="color:#ABB2BF;">, ...</span><span style="color:#E5C07B;">arguments</span><span style="color:#ABB2BF;">]);</span></span>
<span class="line"><span style="color:#ABB2BF;">	};</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// æ‰©å±•å¤šå‚æ•°</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> curry</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">fn</span><span style="color:#ABB2BF;">, ...</span><span style="color:#E06C75;font-style:italic;">args</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E5C07B;"> fn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">apply</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">, [...</span><span style="color:#E06C75;">args</span><span style="color:#ABB2BF;">, ...</span><span style="color:#E5C07B;">arguments</span><span style="color:#ABB2BF;">]);</span></span>
<span class="line"><span style="color:#ABB2BF;">	};</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// å®šé•¿æŸ¯é‡ŒåŒ–ï¼Œæ‰§è¡Œæ—¶æœºåˆ¤æ–­</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> curry</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">fn</span><span style="color:#ABB2BF;">, ...</span><span style="color:#E06C75;font-style:italic;">args</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> len</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> fn</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#C678DD;">		var</span><span style="color:#E06C75;"> allArgs</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [...</span><span style="color:#E06C75;">args</span><span style="color:#ABB2BF;">, ...</span><span style="color:#E5C07B;">arguments</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">allArgs</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#56B6C2;"> &gt;=</span><span style="color:#E06C75;"> len</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">			return</span><span style="color:#E5C07B;"> fn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">apply</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">allArgs</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">			return</span><span style="color:#E5C07B;"> curry</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">call</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">fn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">bind</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">), ...</span><span style="color:#E06C75;">allArgs</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	};</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// ä¸å®šé•¿æŸ¯é‡ŒåŒ–</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> curry</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">fn</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> len</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> fn</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> (...</span><span style="color:#E06C75;font-style:italic;">args</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">args</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#56B6C2;"> &gt;=</span><span style="color:#E06C75;"> len</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">			return</span><span style="color:#E5C07B;"> fn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">apply</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">args</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">			return</span><span style="color:#E5C07B;"> curry</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">call</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">fn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">bind</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">), ...</span><span style="color:#E06C75;">args</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	};</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><p>å®ç° 3</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// å‡½æ•°æŸ¯é‡ŒåŒ–æŒ‡çš„æ˜¯ä¸€ç§å°†ä½¿ç”¨å¤šä¸ªå‚æ•°çš„ä¸€ä¸ªå‡½æ•°è½¬æ¢æˆä¸€ç³»åˆ—ä½¿ç”¨ä¸€ä¸ªå‚æ•°çš„å‡½æ•°çš„æŠ€æœ¯ã€‚</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> curry</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">fn</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">args</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// è·å–å‡½æ•°éœ€è¦çš„å‚æ•°é•¿åº¦</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> length</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> fn</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">	args</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> args</span><span style="color:#56B6C2;"> ||</span><span style="color:#ABB2BF;"> [];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#C678DD;">		let</span><span style="color:#E06C75;"> subArgs</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> args</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">slice</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// æ‹¼æ¥å¾—åˆ°ç°æœ‰çš„æ‰€æœ‰å‚æ•°</span></span>
<span class="line"><span style="color:#C678DD;">		for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E5C07B;"> arguments</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">			subArgs</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">arguments</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">]);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// åˆ¤æ–­å‚æ•°çš„é•¿åº¦æ˜¯å¦å·²ç»æ»¡è¶³å‡½æ•°æ‰€éœ€å‚æ•°çš„é•¿åº¦</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">subArgs</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#56B6C2;"> &gt;=</span><span style="color:#E06C75;"> length</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// å¦‚æœæ»¡è¶³ï¼Œæ‰§è¡Œå‡½æ•°</span></span>
<span class="line"><span style="color:#C678DD;">			return</span><span style="color:#E5C07B;"> fn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">apply</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">subArgs</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// å¦‚æœä¸æ»¡è¶³ï¼Œé€’å½’è¿”å›ç§‘é‡ŒåŒ–çš„å‡½æ•°ï¼Œç­‰å¾…å‚æ•°çš„ä¼ å…¥</span></span>
<span class="line"><span style="color:#C678DD;">			return</span><span style="color:#E5C07B;"> curry</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">call</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">fn</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">subArgs</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	};</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// es6 å®ç°</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> curry</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">fn</span><span style="color:#ABB2BF;">, ...</span><span style="color:#E06C75;font-style:italic;">args</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E5C07B;"> fn</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#56B6C2;"> &lt;=</span><span style="color:#E5C07B;"> args</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#C678DD;"> ?</span><span style="color:#61AFEF;"> fn</span><span style="color:#ABB2BF;">(...</span><span style="color:#E06C75;">args</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">:</span><span style="color:#E5C07B;"> curry</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">bind</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">fn</span><span style="color:#ABB2BF;">, ...</span><span style="color:#E06C75;">args</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h2 id="æ•°ç»„æ‰å¹³åŒ–" tabindex="-1">æ•°ç»„æ‰å¹³åŒ– <a class="header-anchor" href="#æ•°ç»„æ‰å¹³åŒ–" aria-label="Permalink to &quot;æ•°ç»„æ‰å¹³åŒ–&quot;">â€‹</a></h2><p>æ•°ç»„æ‰å¹³åŒ–å…¶å®å°±æ˜¯å°†å¤šç»´æ•°ç»„è½¬ä¸ºä¸€ç»´æ•°ç»„ã€‚</p><p><strong>1. ES6 ä¸­çš„ flat</strong></p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> arr</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, [</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">, [</span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">, [</span><span style="color:#D19A66;">4</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">5</span><span style="color:#ABB2BF;">]]], </span><span style="color:#D19A66;">6</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//  arr.flat([depth]) flatçš„å‚æ•°ä»£è¡¨çš„æ˜¯éœ€è¦å±•å¼€å‡ å±‚ï¼Œå¦‚æœæ˜¯Infinityçš„è¯ï¼Œå°±æ˜¯ä¸ç®¡åµŒå¥—å‡ å±‚ï¼Œå…¨éƒ¨éƒ½å±•å¼€</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">arr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">flat</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">Infinity</span><span style="color:#ABB2BF;">)); </span><span style="color:#7F848E;font-style:italic;">// [1,2,3,4,5,6]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>2. é€’å½’</strong></p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> flatten</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">arr</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> result</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">	for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E5C07B;"> arr</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// å¦‚æœå½“å‰å…ƒç´ è¿˜æ˜¯ä¸€ä¸ªæ•°ç»„</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">Array</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">isArray</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">arr</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">])) {</span></span>
<span class="line"><span style="color:#E06C75;">			result</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> result</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">concat</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">flatten</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">arr</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">])); </span><span style="color:#7F848E;font-style:italic;">// é€’å½’æ‹¼æ¥</span></span>
<span class="line"><span style="color:#ABB2BF;">		} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">			result</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">arr</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">]);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// æˆ–</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// result = result.concat(arr[i]);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> result</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> arr</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, [</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">, [</span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">4</span><span style="color:#ABB2BF;">]]];</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">flatten</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">arr</span><span style="color:#ABB2BF;">)); </span><span style="color:#7F848E;font-style:italic;">//  [1, 2, 3, 4]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p><strong>3. reduce å‡½æ•°è¿­ä»£</strong></p><p>ä»ä¸Šé¢æ™®é€šçš„é€’å½’å‡½æ•°ä¸­å¯ä»¥çœ‹å‡ºï¼Œå…¶å®å°±æ˜¯å¯¹æ•°ç»„çš„æ¯ä¸€é¡¹è¿›è¡Œå¤„ç†ï¼Œé‚£ä¹ˆå…¶å®ä¹Ÿå¯ä»¥ç”¨ reduce æ¥å®ç°æ•°ç»„çš„æ‹¼æ¥ï¼Œä»è€Œç®€åŒ–ç¬¬ä¸€ç§æ–¹æ³•çš„ä»£ç ã€‚</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> flatten</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">arr</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E5C07B;">arr</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> [];</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E5C07B;"> arr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">reduce</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">total</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">cur</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E5C07B;"> total</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">concat</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Array</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">isArray</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cur</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">?</span><span style="color:#61AFEF;"> flatten</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cur</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">:</span><span style="color:#E06C75;"> cur</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// é€’å½’å®ç°ç‰ˆ</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// return Array.isArray(cur) ? [...total, ...flatter(cur)] : [...pre, cur]</span></span>
<span class="line"><span style="color:#ABB2BF;">	}, []); </span><span style="color:#7F848E;font-style:italic;">// ä¼ é€’åˆå§‹å€¼ç©ºæ•°ç»„[]ï¼Œå°±ä¼šä»æ•°ç»„ç´¢å¼•ä¸º 0 çš„å…ƒç´ å¼€å§‹æ‰§è¡Œ</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">flatten</span><span style="color:#ABB2BF;">([</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, [</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">, [</span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">4</span><span style="color:#ABB2BF;">]]])); </span><span style="color:#7F848E;font-style:italic;">//  [1, 2, 3, 4]</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// console.log(flatter([1, 2, [1, [2, 3, [4, 5, [6]]]]]));</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>some å‡½æ•°è¿­ä»£</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> flatter</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">arr</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E5C07B;">arr</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	while</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">arr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">some</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">item</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#E5C07B;"> Array</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">isArray</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">item</span><span style="color:#ABB2BF;">))) {</span></span>
<span class="line"><span style="color:#E06C75;">		arr</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [].</span><span style="color:#61AFEF;">concat</span><span style="color:#ABB2BF;">(...</span><span style="color:#E06C75;">arr</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> arr</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// console.log(flatter([1, 2, [1, [2, 3, [4, 5, [6]]]]]));</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>4. split å’Œ toString</strong></p><p>æ•°ç»„çš„<code>toString</code>æ–¹æ³•å¯ä»¥æŠŠæ•°ç»„ç›´æ¥è½¬æ¢æˆé€—å·åˆ†éš”çš„å­—ç¬¦ä¸²ã€‚å¦‚<code>[1, [2, [3, 4]]] =&gt; &quot;1,2,3,4&quot;</code></p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> arr</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, [</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">, [</span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">4</span><span style="color:#ABB2BF;">]]];</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> flatten</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">arr</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// å…ˆæŠŠæ•°ç»„ç›´æ¥è½¬æ¢æˆé€—å·åˆ†éš”çš„å­—ç¬¦ä¸²ï¼Œç„¶åå†ç”¨ split æ–¹æ³•æŠŠå­—ç¬¦ä¸²é‡æ–°è½¬æ¢ä¸ºæ•°ç»„</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E5C07B;"> arr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">toString</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">split</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;,&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">map</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">Number</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">flatten</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">arr</span><span style="color:#ABB2BF;">)); </span><span style="color:#7F848E;font-style:italic;">//  [ 1, 2, 3, 4 ]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>å®ç°</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#E5C07B;">Array</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prototype</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">allFlat</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> arr</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> hasArr</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> true</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	while</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">hasArr</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">		arr</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [].</span><span style="color:#61AFEF;">concat</span><span style="color:#ABB2BF;">(...</span><span style="color:#E06C75;">arr</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;">		hasArr</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> arr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">some</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Array</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">isArray</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> arr</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>å…¶ä»–å¾…å®š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// æ–¹æ¡ˆ 1</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> recursionFlat</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">ary</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> []) {</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> res</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [];</span></span>
<span class="line"><span style="color:#E5C07B;">	ary</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">forEach</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">item</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">Array</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">isArray</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">item</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#E5C07B;">			res</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(...</span><span style="color:#61AFEF;">recursionFlat</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">item</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">		} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">			res</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">item</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	});</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> res</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// æ–¹æ¡ˆ 2</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> reduceFlat</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">ary</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> []) {</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E5C07B;"> ary</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">reduce</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">		(</span><span style="color:#E06C75;font-style:italic;">res</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">item</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#E5C07B;"> res</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">concat</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Array</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">isArray</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">item</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">?</span><span style="color:#61AFEF;"> reduceFlat</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">item</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">:</span><span style="color:#E06C75;"> item</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;">		[]</span></span>
<span class="line"><span style="color:#ABB2BF;">	);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// æµ‹è¯•</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> source</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">, [</span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">4</span><span style="color:#ABB2BF;">, [</span><span style="color:#D19A66;">5</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">6</span><span style="color:#ABB2BF;">]], </span><span style="color:#98C379;">&quot;7&quot;</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">recursionFlat</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">source</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">reduceFlat</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">source</span><span style="color:#ABB2BF;">));</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><ul><li>1.é€’å½’</li></ul><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span>function flat1 (arr) {</span></span>
<span class="line"><span>    let result = []</span></span>
<span class="line"><span>    arr.forEach(element =&gt; {</span></span>
<span class="line"><span>        if (Array.isArray(element)) {</span></span>
<span class="line"><span>            result = result.concat(flat1(element))</span></span>
<span class="line"><span>        } else {</span></span>
<span class="line"><span>            result.push(element)</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>    });</span></span>
<span class="line"><span>    return result</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ul><li>2.toString</li></ul><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span>function flat2 (arr) {</span></span>
<span class="line"><span>    // æœ‰ç¼ºé™·ï¼ŒtoString åæ— æ³•ä¿æŒä¹‹å‰çš„ç±»å‹</span></span>
<span class="line"><span>    return arr.toString().split(&#39;,&#39;)</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>3.reduce</li></ul><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span>function flat3 (arr) {</span></span>
<span class="line"><span>    // æœ¬è´¨å’Œ flat1 ä¸€æ ·çš„ï¼Œéƒ½æ˜¯é€’å½’</span></span>
<span class="line"><span>    return arr.reduce((pre, next) =&gt; {</span></span>
<span class="line"><span>        return pre.concat(Array.isArray(next) ? flat3(next) : next)</span></span>
<span class="line"><span>    }, [])</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>4.rest è¿ç®—ç¬¦</li></ul><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span>function flat4 (arr) {</span></span>
<span class="line"><span>    while (arr.some(item =&gt; Array.isArray(item))) {</span></span>
<span class="line"><span>        // ç›¸å½“äº [].concat(&#39;1&#39;, 2, [3, 4])</span></span>
<span class="line"><span>        // concat æ–¹æ³•æœ¬èº«å°±ä¼šæŠŠå‚æ•°ä¸­çš„æ•°ç»„å±•å¼€</span></span>
<span class="line"><span>        arr = [].concat(...arr);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    return arr;</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li>5.ES6 flat</li></ul><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span>function flat5 (arr: any[]) {</span></span>
<span class="line"><span>    // flat() æ–¹æ³•ä¼šç§»é™¤æ•°ç»„ä¸­çš„ç©ºé¡¹</span></span>
<span class="line"><span>    return arr.flat(Infinity)</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="å¯¹è±¡æ‰å¹³åŒ–" tabindex="-1">å¯¹è±¡æ‰å¹³åŒ– <a class="header-anchor" href="#å¯¹è±¡æ‰å¹³åŒ–" aria-label="Permalink to &quot;å¯¹è±¡æ‰å¹³åŒ–&quot;">â€‹</a></h2><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> objectFlat</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">obj</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {}) {</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> res</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {};</span></span>
<span class="line"><span style="color:#C678DD;">	function</span><span style="color:#61AFEF;"> flat</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">item</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">preKey</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;&quot;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">		Object</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">entries</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">item</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">forEach</span><span style="color:#ABB2BF;">(([</span><span style="color:#E06C75;font-style:italic;">key</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">val</span><span style="color:#ABB2BF;">]) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">			const</span><span style="color:#E5C07B;"> newKey</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> preKey</span><span style="color:#C678DD;"> ?</span><span style="color:#98C379;"> `</span><span style="color:#C678DD;">${</span><span style="color:#E06C75;">preKey</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">.</span><span style="color:#C678DD;">${</span><span style="color:#E06C75;">key</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">`</span><span style="color:#C678DD;"> :</span><span style="color:#E06C75;"> key</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">			if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">val</span><span style="color:#56B6C2;"> &amp;&amp;</span><span style="color:#C678DD;"> typeof</span><span style="color:#E06C75;"> val</span><span style="color:#56B6C2;"> ===</span><span style="color:#98C379;"> &quot;object&quot;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#61AFEF;">				flat</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">val</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">newKey</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">			} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">				res</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">newKey</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> val</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#ABB2BF;">		});</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#61AFEF;">	flat</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> res</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// æµ‹è¯•</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> source</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">: { </span><span style="color:#E06C75;">b</span><span style="color:#ABB2BF;">: { </span><span style="color:#E06C75;">c</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">d</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;"> }, </span><span style="color:#E06C75;">e</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;"> }, </span><span style="color:#E06C75;">f</span><span style="color:#ABB2BF;">: { </span><span style="color:#E06C75;">g</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;"> } };</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">objectFlat</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">source</span><span style="color:#ABB2BF;">));</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="å®ç°ä¸€ä¸ªå¯¹è±¡çš„-flatten-æ–¹æ³•" tabindex="-1">å®ç°ä¸€ä¸ªå¯¹è±¡çš„ flatten æ–¹æ³• <a class="header-anchor" href="#å®ç°ä¸€ä¸ªå¯¹è±¡çš„-flatten-æ–¹æ³•" aria-label="Permalink to &quot;å®ç°ä¸€ä¸ªå¯¹è±¡çš„ flatten æ–¹æ³•&quot;">â€‹</a></h2><p>é¢˜ç›®æè¿°:</p><div class="language-css line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">css</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">const obj =</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;"> a: {</span></span>
<span class="line"><span style="color:#ABB2BF;">        b: </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">        c: </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">        d: {e: </span><span style="color:#D19A66;">5</span><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#ABB2BF;">    },</span></span>
<span class="line"><span style="color:#E06C75;"> b</span><span style="color:#C678DD;">: [1, 3, {a: 2, b: 3}]</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#C678DD;"> c: 3</span></span>
<span class="line"><span style="color:#C678DD;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">flatten(obj</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">ç»“æœè¿”å›å¦‚ä¸‹</span></span>
<span class="line"><span style="color:#ABB2BF;">// {</span></span>
<span class="line"><span style="color:#ABB2BF;">//  &#39;a.b&#39;: </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">//  </span><span style="color:#98C379;">&#39;a.c&#39;</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">//  </span><span style="color:#98C379;">&#39;a.d.e&#39;</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">5</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">//  </span><span style="color:#98C379;">&#39;b[0]&#39;</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">//  </span><span style="color:#98C379;">&#39;b[1]&#39;</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">//  </span><span style="color:#98C379;">&#39;b[2].a&#39;</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">//  </span><span style="color:#98C379;">&#39;b[2].b&#39;</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">3</span></span>
<span class="line"><span style="color:#ABB2BF;">//   c: </span><span style="color:#D19A66;">3</span></span>
<span class="line"><span style="color:#ABB2BF;">// }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>å®ç°ä»£ç å¦‚ä¸‹:</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> isObject</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">val</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#C678DD;"> typeof</span><span style="color:#E06C75;"> val</span><span style="color:#56B6C2;"> ===</span><span style="color:#98C379;"> &quot;object&quot;</span><span style="color:#56B6C2;"> &amp;&amp;</span><span style="color:#E06C75;"> val</span><span style="color:#56B6C2;"> !==</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> flatten</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">obj</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#61AFEF;">isObject</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> res</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {};</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#61AFEF;"> dfs</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">cur</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">prefix</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#61AFEF;">isObject</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cur</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#C678DD;">			if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">Array</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">isArray</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cur</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#E5C07B;">				cur</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">forEach</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">item</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">index</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">					dfs</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">item</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">`</span><span style="color:#C678DD;">${</span><span style="color:#E06C75;">prefix</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">[</span><span style="color:#C678DD;">${</span><span style="color:#E06C75;">index</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">]`</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">				});</span></span>
<span class="line"><span style="color:#ABB2BF;">			} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">				for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> k</span><span style="color:#C678DD;"> in</span><span style="color:#E06C75;"> cur</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#61AFEF;">					dfs</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cur</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">k</span><span style="color:#ABB2BF;">], </span><span style="color:#98C379;">`</span><span style="color:#C678DD;">${</span><span style="color:#E06C75;">prefix</span><span style="color:#C678DD;">}${</span><span style="color:#E06C75;">prefix</span><span style="color:#C678DD;"> ?</span><span style="color:#98C379;"> &quot;.&quot;</span><span style="color:#C678DD;"> :</span><span style="color:#98C379;"> &quot;&quot;</span><span style="color:#C678DD;">}${</span><span style="color:#E06C75;">k</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">`</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">				}</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#ABB2BF;">		} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">			res</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">prefix</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> cur</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	};</span></span>
<span class="line"><span style="color:#61AFEF;">	dfs</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> res</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#61AFEF;">flatten</span><span style="color:#ABB2BF;">();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h2 id="æ•°ç»„å»é‡" tabindex="-1">æ•°ç»„å»é‡ <a class="header-anchor" href="#æ•°ç»„å»é‡" aria-label="Permalink to &quot;æ•°ç»„å»é‡&quot;">â€‹</a></h2><p><strong>åˆ©ç”¨ Set</strong>ã€‚new ä¸€ä¸ª Setï¼Œå‚æ•°ä¸ºéœ€è¦å»é‡çš„æ•°ç»„ï¼ŒSet ä¼šè‡ªåŠ¨åˆ é™¤é‡å¤çš„å…ƒç´ ï¼Œåœ¨ Array.form å°† Set è½¬ä¸ºæ•°ç»„è¿”å›</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> arr</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">5</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">5</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">9</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">8</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">([...</span><span style="color:#C678DD;">new</span><span style="color:#61AFEF;"> Set</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">arr</span><span style="color:#ABB2BF;">)]); </span><span style="color:#7F848E;font-style:italic;">//[ 1, 2, 3, 5, 9, 8 ]</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Array</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">from</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">new</span><span style="color:#61AFEF;"> Set</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">arr</span><span style="color:#ABB2BF;">))); </span><span style="color:#7F848E;font-style:italic;">//[ 1, 2, 3, 5, 9, 8 ]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// ç›´æ¥ä½¿ç”¨ï¼š</span></span>
<span class="line"><span style="color:#E5C07B;">Array</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">from</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">new</span><span style="color:#61AFEF;"> Set</span><span style="color:#ABB2BF;">([</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">]));</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>åˆ©ç”¨æ•°ç»„çš„ filterï¼ˆï¼‰+indexOf</strong>å»é‡ã€‚åˆ©ç”¨ filter æ–¹æ³•ï¼Œè¿”å› arr.indexOf(num)ç­‰äº index çš„å€¼ã€‚åŸç†å°±æ˜¯ indexOf ä¼šè¿”å›å…ˆæ‰¾åˆ°çš„æ•°å­—çš„ç´¢å¼•ã€‚</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> unique</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">arr</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E5C07B;"> arr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">filter</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">item</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">index</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">array</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E5C07B;"> array</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">indexOf</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">item</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">===</span><span style="color:#E06C75;"> index</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	});</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> arr</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">5</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">5</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">9</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">8</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">unique</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">arr</span><span style="color:#ABB2BF;">)); </span><span style="color:#7F848E;font-style:italic;">// [1, 2, 3, 5, 9, 8]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>åˆ©ç”¨ Map</strong>ã€‚æ–°å»ºä¸€ä¸ªæ•°ç»„å’Œ mapï¼Œå¦‚æœå½“å‰å€¼åœ¨ map ä¸­æ²¡æœ‰å‡ºç°è¿‡ï¼Œå°±åŠ å…¥æ•°ç»„ï¼Œæœ€åè¿”å›æ•°ç»„</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#61AFEF;"> unique</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">arr</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> map</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Map</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> res</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [];</span></span>
<span class="line"><span style="color:#C678DD;">	for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> item</span><span style="color:#C678DD;"> of</span><span style="color:#E06C75;"> arr</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E5C07B;">map</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">has</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">item</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#E5C07B;">			map</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">set</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">item</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">			res</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">item</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> res</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> arr</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">5</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">5</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">9</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">8</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">unique</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">arr</span><span style="color:#ABB2BF;">)); </span><span style="color:#7F848E;font-style:italic;">// [1, 2, 3, 5, 9, 8]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="åˆ—è¡¨è½¬æˆæ ‘å½¢ç»“æ„" tabindex="-1">åˆ—è¡¨è½¬æˆæ ‘å½¢ç»“æ„ <a class="header-anchor" href="#åˆ—è¡¨è½¬æˆæ ‘å½¢ç»“æ„" aria-label="Permalink to &quot;åˆ—è¡¨è½¬æˆæ ‘å½¢ç»“æ„&quot;">â€‹</a></h2><p>é¢˜ç›®æè¿°:</p><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#ABB2BF;">[</span></span>
<span class="line"><span style="color:#ABB2BF;">    {</span></span>
<span class="line"><span style="color:#E06C75;">        id</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">        text</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;èŠ‚ç‚¹1&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">        parentId</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">0 //è¿™é‡Œç”¨0è¡¨ç¤ºä¸ºé¡¶çº§èŠ‚ç‚¹</span></span>
<span class="line"><span style="color:#ABB2BF;">    },</span></span>
<span class="line"><span style="color:#ABB2BF;">    {</span></span>
<span class="line"><span style="color:#E06C75;">        id</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">        text</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;èŠ‚ç‚¹1_1&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">        parentId</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">1 //é€šè¿‡è¿™ä¸ªå­—æ®µæ¥ç¡®å®šå­çˆ¶çº§</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#D19A66;">    ...</span></span>
<span class="line"><span style="color:#ABB2BF;">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;">è½¬æˆ</span></span>
<span class="line"><span style="color:#ABB2BF;">[</span></span>
<span class="line"><span style="color:#ABB2BF;">    {</span></span>
<span class="line"><span style="color:#E06C75;">        id</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">        text</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;èŠ‚ç‚¹1&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">        parentId</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">        children</span><span style="color:#ABB2BF;">: [</span></span>
<span class="line"><span style="color:#ABB2BF;">            {</span></span>
<span class="line"><span style="color:#98C379;">                id:2</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">                text</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;èŠ‚ç‚¹1_1&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;">                parentId:1</span></span>
<span class="line"><span style="color:#ABB2BF;">            }</span></span>
<span class="line"><span style="color:#ABB2BF;">        ]</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p>å®ç°ä»£ç å¦‚ä¸‹:</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> listToTree</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">data</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> temp</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {};</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> treeData</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [];</span></span>
<span class="line"><span style="color:#C678DD;">	for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E5C07B;"> data</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">		temp</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">data</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">].</span><span style="color:#E06C75;">id</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> data</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#C678DD;">	for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> i</span><span style="color:#C678DD;"> in</span><span style="color:#E06C75;"> temp</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">+</span><span style="color:#E06C75;">temp</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">].</span><span style="color:#E06C75;">parentId</span><span style="color:#56B6C2;"> !=</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">			if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E06C75;">temp</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">temp</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">].</span><span style="color:#E06C75;">parentId</span><span style="color:#ABB2BF;">].</span><span style="color:#E06C75;">children</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">				temp</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">temp</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">].</span><span style="color:#E06C75;">parentId</span><span style="color:#ABB2BF;">].</span><span style="color:#E06C75;">children</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [];</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#E06C75;">			temp</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">temp</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">].</span><span style="color:#E06C75;">parentId</span><span style="color:#ABB2BF;">].</span><span style="color:#E5C07B;">children</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">temp</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">]);</span></span>
<span class="line"><span style="color:#ABB2BF;">		} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">			treeData</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">temp</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">]);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> treeData</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h2 id="æ ‘å½¢ç»“æ„è½¬æˆåˆ—è¡¨" tabindex="-1">æ ‘å½¢ç»“æ„è½¬æˆåˆ—è¡¨ <a class="header-anchor" href="#æ ‘å½¢ç»“æ„è½¬æˆåˆ—è¡¨" aria-label="Permalink to &quot;æ ‘å½¢ç»“æ„è½¬æˆåˆ—è¡¨&quot;">â€‹</a></h2><p>é¢˜ç›®æè¿°:</p><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#ABB2BF;">[</span></span>
<span class="line"><span style="color:#ABB2BF;">    {</span></span>
<span class="line"><span style="color:#E06C75;">        id</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">        text</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;èŠ‚ç‚¹1&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">        parentId</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">        children</span><span style="color:#ABB2BF;">: [</span></span>
<span class="line"><span style="color:#ABB2BF;">            {</span></span>
<span class="line"><span style="color:#98C379;">                id:2</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">                text</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;èŠ‚ç‚¹1_1&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;">                parentId:1</span></span>
<span class="line"><span style="color:#ABB2BF;">            }</span></span>
<span class="line"><span style="color:#ABB2BF;">        ]</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">]</span></span>
<span class="line"><span style="color:#98C379;">è½¬æˆ</span></span>
<span class="line"><span style="color:#ABB2BF;">[</span></span>
<span class="line"><span style="color:#ABB2BF;">    {</span></span>
<span class="line"><span style="color:#E06C75;">        id</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">        text</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;èŠ‚ç‚¹1&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">        parentId</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">0 //è¿™é‡Œç”¨0è¡¨ç¤ºä¸ºé¡¶çº§èŠ‚ç‚¹</span></span>
<span class="line"><span style="color:#ABB2BF;">    },</span></span>
<span class="line"><span style="color:#ABB2BF;">    {</span></span>
<span class="line"><span style="color:#E06C75;">        id</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">        text</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;èŠ‚ç‚¹1_1&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">        parentId</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">1 //é€šè¿‡è¿™ä¸ªå­—æ®µæ¥ç¡®å®šå­çˆ¶çº§</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#D19A66;">    ...</span></span>
<span class="line"><span style="color:#ABB2BF;">]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p>å®ç°ä»£ç å¦‚ä¸‹:</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> treeToList</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">data</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> res</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [];</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#61AFEF;"> dfs</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">tree</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">		tree</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">forEach</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">item</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">			if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">item</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">children</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#61AFEF;">				dfs</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">item</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">children</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">				delete</span><span style="color:#E5C07B;"> item</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">children</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#E5C07B;">			res</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">item</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		});</span></span>
<span class="line"><span style="color:#ABB2BF;">	};</span></span>
<span class="line"><span style="color:#61AFEF;">	dfs</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">data</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> res</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="ç±»æ•°ç»„è½¬åŒ–ä¸ºæ•°ç»„çš„æ–¹æ³•" tabindex="-1">ç±»æ•°ç»„è½¬åŒ–ä¸ºæ•°ç»„çš„æ–¹æ³• <a class="header-anchor" href="#ç±»æ•°ç»„è½¬åŒ–ä¸ºæ•°ç»„çš„æ–¹æ³•" aria-label="Permalink to &quot;ç±»æ•°ç»„è½¬åŒ–ä¸ºæ•°ç»„çš„æ–¹æ³•&quot;">â€‹</a></h2><p>é¢˜ç›®æè¿°:ç±»æ•°ç»„æ‹¥æœ‰ length å±æ€§ å¯ä»¥ä½¿ç”¨ä¸‹æ ‡æ¥è®¿é—®å…ƒç´  ä½†æ˜¯ä¸èƒ½ä½¿ç”¨æ•°ç»„çš„æ–¹æ³• å¦‚ä½•æŠŠç±»æ•°ç»„è½¬åŒ–ä¸ºæ•°ç»„?</p><p>å®ç°ä»£ç å¦‚ä¸‹:</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> arrayLike</span><span style="color:#56B6C2;">=</span><span style="color:#E5C07B;">document</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">querySelectorAll</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;div&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 1.æ‰©å±•è¿ç®—ç¬¦</span></span>
<span class="line"><span style="color:#ABB2BF;">[...</span><span style="color:#E06C75;">arrayLike</span><span style="color:#ABB2BF;">]</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 2.Array.from</span></span>
<span class="line"><span style="color:#E5C07B;">Array</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">from</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">arrayLike</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 3.Array.prototype.slice</span></span>
<span class="line"><span style="color:#E5C07B;">Array</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prototype</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">slice</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">call</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">arrayLike</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 4.Array.apply</span></span>
<span class="line"><span style="color:#E5C07B;">Array</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">apply</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">arrayLike</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 5.Array.prototype.concat</span></span>
<span class="line"><span style="color:#E5C07B;">Array</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prototype</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">concat</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">apply</span><span style="color:#ABB2BF;">([], </span><span style="color:#E06C75;">arrayLike</span><span style="color:#ABB2BF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="æ‰‹å†™ç±»å‹åˆ¤æ–­å‡½æ•°" tabindex="-1">æ‰‹å†™ç±»å‹åˆ¤æ–­å‡½æ•° <a class="header-anchor" href="#æ‰‹å†™ç±»å‹åˆ¤æ–­å‡½æ•°" aria-label="Permalink to &quot;æ‰‹å†™ç±»å‹åˆ¤æ–­å‡½æ•°&quot;">â€‹</a></h2><p><strong>æ€è·¯</strong>ï¼šå¦‚æœæ˜¯ nullï¼Œç›´æ¥è¿”å› String(null)ï¼›åŸºæœ¬ç±»å‹å’Œå‡½æ•°ï¼Œç›´æ¥ä½¿ç”¨ typeof<code>ï¼›</code>å…¶å®ƒå¼•ç”¨ç±»å‹ï¼Œä½¿ç”¨ Object.prototype.toString.callã€‚</p><div class="language-typescript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> getType</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">value</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// åˆ¤æ–­æ•°æ®æ˜¯ null çš„æƒ…å†µ</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> type</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">value</span><span style="color:#56B6C2;"> ===</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#61AFEF;"> String</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// åˆ¤æ–­æ•°æ®æ˜¯åŸºæœ¬æ•°æ®ç±»å‹çš„æƒ…å†µå’Œå‡½æ•°çš„æƒ…å†µï¼Œä½¿ç”¨typeof</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">typeof</span><span style="color:#E06C75;"> value</span><span style="color:#56B6C2;"> !==</span><span style="color:#98C379;"> &quot;object&quot;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#C678DD;"> typeof</span><span style="color:#E06C75;"> value</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// åˆ¤æ–­æ•°æ®æ˜¯å¼•ç”¨ç±»å‹çš„æƒ…å†µï¼Œè®¾å½“å‰ç±»å‹ä¸ºdate</span></span>
<span class="line"><span style="color:#C678DD;">		let</span><span style="color:#E06C75;"> valueClass</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Object</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prototype</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">toString</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">call</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">//&quot;[object Date]&quot;</span></span>
<span class="line"><span style="color:#E06C75;">		type</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> valueClass</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">split</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot; &quot;</span><span style="color:#ABB2BF;">)[</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">].</span><span style="color:#61AFEF;">split</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">//[ &#39;D&#39;, &#39;a&#39;, &#39;t&#39;, &#39;e&#39;, &#39;]&#39; ] æˆªå–ç±»å‹å¹¶è½¬æ¢ä¸ºæ•°ç»„</span></span>
<span class="line"><span style="color:#E5C07B;">		type</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">pop</span><span style="color:#ABB2BF;">(); </span><span style="color:#7F848E;font-style:italic;">//[ &#39;D&#39;, &#39;a&#39;, &#39;t&#39;, &#39;e&#39; ]ï¼Œå»æ‰æ•°ç»„æœ€åçš„å³æ‹¬å·&quot;]&quot;</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E5C07B;"> type</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">join</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">toLowerCase</span><span style="color:#ABB2BF;">(); </span><span style="color:#7F848E;font-style:italic;">//[ &#39;D&#39;, &#39;a&#39;, &#39;t&#39;, &#39;e&#39; ] =&gt; &quot;Date&quot; =&gt; &quot;date&quot; æ•°ç»„è½¬å°å†™å­—ç¬¦ä¸²</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// æµ‹è¯•</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">info</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">getType</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">)); </span><span style="color:#7F848E;font-style:italic;">// null</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">info</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">getType</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">undefined</span><span style="color:#ABB2BF;">)); </span><span style="color:#7F848E;font-style:italic;">// undefined</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">info</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">getType</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">100</span><span style="color:#ABB2BF;">)); </span><span style="color:#7F848E;font-style:italic;">// number</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">info</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">getType</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;abc&quot;</span><span style="color:#ABB2BF;">)); </span><span style="color:#7F848E;font-style:italic;">// string</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">info</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">getType</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">)); </span><span style="color:#7F848E;font-style:italic;">// boolean</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">info</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">getType</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">Symbol</span><span style="color:#ABB2BF;">())); </span><span style="color:#7F848E;font-style:italic;">// symbol</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">info</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">getType</span><span style="color:#ABB2BF;">({})); </span><span style="color:#7F848E;font-style:italic;">// object</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">info</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">getType</span><span style="color:#ABB2BF;">([])); </span><span style="color:#7F848E;font-style:italic;">// array</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">info</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">getType</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {})); </span><span style="color:#7F848E;font-style:italic;">// function</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">info</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">getType</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">new</span><span style="color:#61AFEF;"> Date</span><span style="color:#ABB2BF;">())); </span><span style="color:#7F848E;font-style:italic;">// date</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">info</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">getType</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">new</span><span style="color:#61AFEF;"> RegExp</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;">))); </span><span style="color:#7F848E;font-style:italic;">// regexp</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">info</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">getType</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">new</span><span style="color:#61AFEF;"> Map</span><span style="color:#ABB2BF;">())); </span><span style="color:#7F848E;font-style:italic;">// map</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">info</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">getType</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">new</span><span style="color:#61AFEF;"> Set</span><span style="color:#ABB2BF;">())); </span><span style="color:#7F848E;font-style:italic;">// set</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">info</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">getType</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">new</span><span style="color:#61AFEF;"> WeakMap</span><span style="color:#ABB2BF;">())); </span><span style="color:#7F848E;font-style:italic;">// weakmap</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">info</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">getType</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">new</span><span style="color:#61AFEF;"> WeakSet</span><span style="color:#ABB2BF;">())); </span><span style="color:#7F848E;font-style:italic;">// weakset</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">info</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">getType</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">new</span><span style="color:#61AFEF;"> Error</span><span style="color:#ABB2BF;">())); </span><span style="color:#7F848E;font-style:italic;">// error</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">info</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">getType</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">new</span><span style="color:#E5C07B;"> Promise</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {}))); </span><span style="color:#7F848E;font-style:italic;">// promise</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><p>æµ‹è¯•ç»“æœï¼š</p><p><img src="/FrontEndInterviewQuestion/assets/e3e8000c24864c0fbf8896d31c442f87tplv-k3u1fbpfcp-jj-mark3024000q75.D0zZLsf6.webp" alt="1.png"></p><h2 id="å®ç°è§‚å¯Ÿè€…æ¨¡å¼" tabindex="-1">å®ç°è§‚å¯Ÿè€…æ¨¡å¼ <a class="header-anchor" href="#å®ç°è§‚å¯Ÿè€…æ¨¡å¼" aria-label="Permalink to &quot;å®ç°è§‚å¯Ÿè€…æ¨¡å¼&quot;">â€‹</a></h2><p><code>è§‚å¯Ÿè€…æ¨¡å¼</code>ï¼šå®šä¹‰å¯¹è±¡é—´çš„ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œå½“ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ–äºå®ƒçš„å¯¹è±¡éƒ½å°†å¾—åˆ°é€šçŸ¥ã€‚</p><h3 id="å‘å¸ƒè®¢é˜…æ¨¡å¼å’Œè§‚å¯Ÿè€…æ¨¡å¼çš„åŒºåˆ«" tabindex="-1">å‘å¸ƒè®¢é˜…æ¨¡å¼å’Œè§‚å¯Ÿè€…æ¨¡å¼çš„åŒºåˆ« <a class="header-anchor" href="#å‘å¸ƒè®¢é˜…æ¨¡å¼å’Œè§‚å¯Ÿè€…æ¨¡å¼çš„åŒºåˆ«" aria-label="Permalink to &quot;å‘å¸ƒè®¢é˜…æ¨¡å¼å’Œè§‚å¯Ÿè€…æ¨¡å¼çš„åŒºåˆ«&quot;">â€‹</a></h3><p><strong>å‘å¸ƒè®¢é˜…æ¨¡å¼æ˜¯ã‡ä¸ªå¤šäº‹ä»¶çš„äº‹ä»¶æ€»çº¿ï¼›è€Œè§‚å¯Ÿè€…æ¨¡å¼æ˜¯é’ˆå¯¹å•ä¸»é¢˜çš„ï¼Œè¿™æ˜¯äºŒè€…æœ€å¤§çš„åŒºåˆ«ã€‚</strong></p><p>ä¸¾ä¸ªä¾‹å­ï¼šå‘å¸ƒè®¢é˜…æ¨¡å¼å°±æ˜¯ï¼Œæˆ‘è¯·äº†ä¸€ä¸ªç§å®¶ä¾¦æ¢ï¼Œè¦æ±‚ç›‘è§†ç›®æ ‡çš„ä¸€ä¸¾ä¸€åŠ¨;è€Œè§‚å¯Ÿè€…æ¨¡å¼å°±æ˜¯ï¼Œæˆ‘åªå…³æ³¨ç›®æ ‡æœ‰æ²¡æœ‰å’Œå¦ä¸€ä¸ªäººåœ¨ä¸€èµ·è¿™ä¸€ä¸ªä¸¾åŠ¨ã€‚</p><p>ç”±äºè§‚å¯Ÿè€…æ¨¡å¼ç•Œé™æ˜ç¡®ï¼Œæœ‰ä¸»é¢˜å’Œè§‚å¯Ÿè€…ä¸¤éƒ¨åˆ†ï¼Œæ‰€ä»¥åˆ†åˆ«ç”¨ Subject å’Œ Observer ç±»æ¥å®ç°ã€‚</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// è¢«è§‚å¯Ÿè€… å­¦ç”Ÿ</span></span>
<span class="line"><span style="color:#C678DD;">class</span><span style="color:#E5C07B;"> Subject</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">	constructor</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">name</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">name</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> name</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">state</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;happy&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">observers</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> []; </span><span style="color:#7F848E;font-style:italic;">// å­˜å‚¨æ‰€æœ‰çš„è§‚å¯Ÿè€…</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// æ–°å¢è§‚å¯Ÿè€…</span></span>
<span class="line"><span style="color:#61AFEF;">	add</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">observer</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">observers</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">observer</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// ç§»é™¤è§‚å¯Ÿè€…</span></span>
<span class="line"><span style="color:#61AFEF;">	remove</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">observer</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		const</span><span style="color:#E5C07B;"> index</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">observers</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">findIndex</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">item</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#E5C07B;"> item</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">id</span><span style="color:#56B6C2;"> ===</span><span style="color:#E5C07B;"> observer</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">id</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">index</span><span style="color:#56B6C2;"> !==</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">			this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">observers</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">splice</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">index</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// è·å–çŠ¶æ€</span></span>
<span class="line"><span style="color:#61AFEF;">	getState</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">state</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// æ›´æ–°çŠ¶æ€å¹¶é€šçŸ¥</span></span>
<span class="line"><span style="color:#61AFEF;">	setState</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">newState</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">state</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> newState</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">notify</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// é€šçŸ¥æ‰€æœ‰çš„è§‚å¯Ÿè€…</span></span>
<span class="line"><span style="color:#61AFEF;">	notify</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">observer</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">observers</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">forEach</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">observer</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#E5C07B;"> observer</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">update</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// é€šçŸ¥æ‰€æœ‰çš„è§‚å¯Ÿè€…</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// notify(...args) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// 	this.observers.forEach(observer =&gt; {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	//         observer.complete(...args)</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	//     });</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// è§‚å¯Ÿè€… çˆ¶æ¯å’Œè€å¸ˆ</span></span>
<span class="line"><span style="color:#C678DD;">class</span><span style="color:#E5C07B;"> Observer</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">	static</span><span style="color:#E06C75;"> autoIncreaseId</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">	constructor</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">id</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">name</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">callback</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">id</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> id</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">name</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> name</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">callback</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> callback</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// æ›´æ–°</span></span>
<span class="line"><span style="color:#61AFEF;">	update</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">student</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">		console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#98C379;">			`äº²çˆ±çš„</span><span style="color:#C678DD;">${</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">name</span><span style="color:#C678DD;">}</span><span style="color:#98C379;"> é€šçŸ¥æ‚¨å½“å‰å­¦ç”Ÿçš„çŠ¶æ€æ˜¯</span><span style="color:#C678DD;">${</span><span style="color:#E5C07B;">student</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getState</span><span style="color:#ABB2BF;">()</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">`</span></span>
<span class="line"><span style="color:#ABB2BF;">		);</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// æš´éœ²ä¸€ä¸ªæ¥å£ï¼Œè®©è¢«è§‚å¯Ÿè€…å»è°ƒç”¨ï¼Œcompleteæ˜¯çº¦å®šçš„å‘½å</span></span>
<span class="line"><span style="color:#61AFEF;">	complete</span><span style="color:#ABB2BF;">(...</span><span style="color:#E06C75;font-style:italic;">args</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">callback</span><span style="color:#ABB2BF;">(...</span><span style="color:#E06C75;">args</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> student</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Subject</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> parent</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Observer</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;çˆ¶æ¯&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> teacher</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Observer</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;è€å¸ˆ&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// æ·»åŠ è§‚å¯Ÿè€…</span></span>
<span class="line"><span style="color:#E5C07B;">student</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">add</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">parent</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">student</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">add</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">teacher</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// è®¾ç½®è¢«è§‚å¯Ÿè€…çš„çŠ¶æ€</span></span>
<span class="line"><span style="color:#E5C07B;">student</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setState</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;åˆšåˆšå¥½&quot;</span><span style="color:#ABB2BF;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br></div></div><p>æµ‹è¯•ç»“æœï¼š</p><p><img src="/FrontEndInterviewQuestion/assets/8a6efe3e379447c39ce57903f5b6539dtplv-k3u1fbpfcp-jj-mark3024000q75.zNje-QJT.webp" alt="Snipaste_2024-02-20_16-55-42.png"></p><h2 id="å®ç°å‘å¸ƒ-è®¢é˜…æ¨¡å¼" tabindex="-1">å®ç°å‘å¸ƒ-è®¢é˜…æ¨¡å¼ <a class="header-anchor" href="#å®ç°å‘å¸ƒ-è®¢é˜…æ¨¡å¼" aria-label="Permalink to &quot;å®ç°å‘å¸ƒ-è®¢é˜…æ¨¡å¼&quot;">â€‹</a></h2><p>å‘å¸ƒè®¢é˜…æ¨¡å¼æœ¬è´¨ä¸Šæ˜¯å®ç°ã‡ä¸ªäº‹ä»¶æ€»çº¿ã€‚åªè¦å®ç°å…¶æ ¸â¼¼çš„ on, emit, off, remove, once ç­‰æ–¹æ³•å³å¯ã€‚</p><h3 id="è®¢é˜…æ¨¡å¼â€”evenbus-æ˜¯ä»€ä¹ˆä¸œè¥¿" tabindex="-1">è®¢é˜…æ¨¡å¼â€”Evenbus æ˜¯ä»€ä¹ˆä¸œè¥¿ï¼Ÿ <a class="header-anchor" href="#è®¢é˜…æ¨¡å¼â€”evenbus-æ˜¯ä»€ä¹ˆä¸œè¥¿" aria-label="Permalink to &quot;è®¢é˜…æ¨¡å¼â€”Evenbus æ˜¯ä»€ä¹ˆä¸œè¥¿ï¼Ÿ&quot;">â€‹</a></h3><p>EventBusï¼ˆäº‹ä»¶æ€»çº¿ï¼‰æ˜¯ä¸€ç§åœ¨è½¯ä»¶æ¶æ„ä¸­ç”¨äºç»„ä»¶é—´é€šä¿¡çš„æ¨¡å¼æˆ–å·¥å…·ã€‚å®ƒé€šå¸¸è¢«ç”¨äºè§£è€¦ç»„ä»¶ä¹‹é—´çš„ç›´æ¥ä¾èµ–å…³ç³»ï¼Œä½¿å¾—ç»„ä»¶ä¹‹é—´å¯ä»¥æ›´çµæ´»åœ°è¿›è¡Œé€šä¿¡å’Œäº¤äº’ã€‚</p><p>åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œç‰¹åˆ«æ˜¯åœ¨ Vue.js ç­‰ç°ä»£ JavaScript æ¡†æ¶ä¸­ï¼ŒEventBus é€šå¸¸æŒ‡çš„æ˜¯ä¸€ä¸ªå…¨å±€äº‹ä»¶æ€»çº¿å®ä¾‹ï¼Œç”¨äºåœ¨ä¸åŒç»„ä»¶ä¹‹é—´è¿›è¡Œé€šä¿¡ã€‚å®ƒå¯ä»¥å¸®åŠ©ç»„ä»¶ä¹‹é—´è¿›è¡Œè§£è€¦ï¼Œä½¿å¾—ç»„ä»¶çš„é€šä¿¡æ›´åŠ ç®€å•å’Œçµæ´»ã€‚</p><p>EventBus é€šå¸¸å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p><ol><li><strong>å…¨å±€å•ä¾‹ï¼š</strong> EventBus é€šå¸¸æ˜¯ä¸€ä¸ªå…¨å±€å•ä¾‹å¯¹è±¡ï¼Œå¯ä»¥åœ¨åº”ç”¨çš„ä»»ä½•åœ°æ–¹è¢«è®¿é—®å’Œä½¿ç”¨ã€‚</li><li><strong>å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼š</strong> EventBus åŸºäºå‘å¸ƒ-è®¢é˜…æ¨¡å¼ï¼Œå®ƒå…è®¸ç»„ä»¶è®¢é˜…ç‰¹å®šç±»å‹çš„äº‹ä»¶ï¼Œå¹¶åœ¨å…¶ä»–ç»„ä»¶å‘å¸ƒè¯¥ç±»å‹çš„äº‹ä»¶æ—¶æ¥æ”¶åˆ°é€šçŸ¥ã€‚</li><li><strong>äº‹ä»¶ç±»å‹ï¼š</strong> EventBus é€šå¸¸æ”¯æŒå¤šç§äº‹ä»¶ç±»å‹ï¼Œå¼€å‘è€…å¯ä»¥è‡ªå®šä¹‰äº‹ä»¶ç±»å‹æ¥æ»¡è¶³ä¸åŒçš„éœ€æ±‚ã€‚</li><li><strong>å¼‚æ­¥é€šä¿¡ï¼š</strong> EventBus é€šå¸¸æ”¯æŒåŒæ­¥å’Œå¼‚æ­¥ä¸¤ç§é€šä¿¡æ–¹å¼ï¼Œä½¿å¾—ç»„ä»¶ä¹‹é—´çš„é€šä¿¡æ›´åŠ çµæ´»ã€‚</li></ol><p>åœ¨ <code>Vue.js</code> ç‰ˆæœ¬ 2 ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ Vue å®ä¾‹ä½œä¸º EventBusï¼Œé€šè¿‡<code>$emit</code>æ–¹æ³•è§¦å‘äº‹ä»¶ï¼Œé€šè¿‡<code>$on</code>æ–¹æ³•ç›‘å¬äº‹ä»¶ï¼Œä»è€Œå®ç°ç»„ä»¶ä¹‹é—´çš„é€šä¿¡ã€‚ä¾‹å¦‚ï¼š</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// åˆ›å»ºä¸€ä¸ªå…¨å±€çš„EventBuså®ä¾‹ï¼šå‘å¸ƒè€…</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> EventBus</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Vue</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// è®¢é˜…è€…</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> vm</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Vue</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#E06C75;">	el</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;#app&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#61AFEF;">	data</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">			count</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">		};</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"><span style="color:#61AFEF;">	created</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">		eventBus</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">$on</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;increment&quot;</span><span style="color:#ABB2BF;">, () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">			this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">count</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		});</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// åœ¨ç»„ä»¶Aä¸­å‘å¸ƒäº‹ä»¶</span></span>
<span class="line"><span style="color:#E5C07B;">EventBus</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">$emit</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;event-name&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">eventData</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// åœ¨ç»„ä»¶Bä¸­è®¢é˜…äº‹ä»¶</span></span>
<span class="line"><span style="color:#E5C07B;">EventBus</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">$on</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;event-name&quot;</span><span style="color:#ABB2BF;">, (</span><span style="color:#E06C75;font-style:italic;">eventData</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// å¤„ç†äº‹ä»¶æ•°æ®</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p>æ€»ä¹‹ï¼ŒEventBus æ˜¯ä¸€ç§ç”¨äºåœ¨ç»„ä»¶é—´è¿›è¡Œè§£è€¦çš„é€šä¿¡æœºåˆ¶ï¼Œå®ƒå¯ä»¥å¸®åŠ©å¼€å‘è€…æ„å»ºæ›´çµæ´»å’Œå¯ç»´æŠ¤çš„åº”ç”¨ç¨‹åºã€‚</p><h3 id="ä½¿ç”¨-javascript-æ‰‹å†™å®ç°å‘å¸ƒè®¢é˜…æ¨¡å¼" tabindex="-1">ä½¿ç”¨ JavaScript æ‰‹å†™å®ç°å‘å¸ƒè®¢é˜…æ¨¡å¼ <a class="header-anchor" href="#ä½¿ç”¨-javascript-æ‰‹å†™å®ç°å‘å¸ƒè®¢é˜…æ¨¡å¼" aria-label="Permalink to &quot;ä½¿ç”¨ JavaScript æ‰‹å†™å®ç°å‘å¸ƒè®¢é˜…æ¨¡å¼&quot;">â€‹</a></h3><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// å‘å¸ƒè€…</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> Publisher</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">	this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">events</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {};</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">Publisher</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prototype</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">on</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">event</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">callback</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">events</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">event</span><span style="color:#ABB2BF;">]) {</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">events</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">event</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> [];</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#E5C07B;">	this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">events</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">event</span><span style="color:#ABB2BF;">].</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">callback</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// è®¢é˜…è€…</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> Subscriber</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">	this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">events</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {};</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">Subscriber</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prototype</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">on</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">event</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">callback</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">events</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">event</span><span style="color:#ABB2BF;">]) {</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">events</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">event</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> [];</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#E5C07B;">	this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">events</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">event</span><span style="color:#ABB2BF;">].</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">callback</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">Subscriber</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prototype</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">off</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">event</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">callback</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">events</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">event</span><span style="color:#ABB2BF;">]) {</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> index</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">events</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">event</span><span style="color:#ABB2BF;">].</span><span style="color:#61AFEF;">indexOf</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">callback</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">index</span><span style="color:#56B6C2;"> &gt;</span><span style="color:#56B6C2;"> -</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">events</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">event</span><span style="color:#ABB2BF;">].</span><span style="color:#61AFEF;">splice</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">index</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">Subscriber</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prototype</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">emit</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">event</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">data</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">events</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">event</span><span style="color:#ABB2BF;">]) {</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#E5C07B;">	this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">events</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">event</span><span style="color:#ABB2BF;">].</span><span style="color:#61AFEF;">forEach</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">callback</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">		callback</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">data</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	});</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// å‘å¸ƒè€…</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> publisher</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Publisher</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// è®¢é˜…è€…</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> subscriber1</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Subscriber</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> subscriber2</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Subscriber</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// è®¢é˜…è€…1è®¢é˜…äº‹ä»¶</span></span>
<span class="line"><span style="color:#E5C07B;">subscriber1</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">on</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;event1&quot;</span><span style="color:#ABB2BF;">, (</span><span style="color:#E06C75;font-style:italic;">data</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">	console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;subscriber1æ¥æ”¶åˆ°äº‹ä»¶1çš„æ¶ˆæ¯ï¼š&quot;</span><span style="color:#56B6C2;"> +</span><span style="color:#E06C75;"> data</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// è®¢é˜…è€…2è®¢é˜…äº‹ä»¶</span></span>
<span class="line"><span style="color:#E5C07B;">subscriber2</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">on</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;event1&quot;</span><span style="color:#ABB2BF;">, (</span><span style="color:#E06C75;font-style:italic;">data</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">	console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;subscriber2æ¥æ”¶åˆ°äº‹ä»¶1çš„æ¶ˆæ¯ï¼š&quot;</span><span style="color:#56B6C2;"> +</span><span style="color:#E06C75;"> data</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// å‘å¸ƒè€…å‘å¸ƒäº‹ä»¶</span></span>
<span class="line"><span style="color:#E5C07B;">publisher</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">emit</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;event1&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;hello world&quot;</span><span style="color:#ABB2BF;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br></div></div><p>ä½¿ç”¨ class ç±»å®ç°</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">class</span><span style="color:#E5C07B;"> Listener</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">	constructor</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">id</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">eventName</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">callback</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">id</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> id</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">eventName</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> eventName</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">callback</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> callback</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">class</span><span style="color:#E5C07B;"> EventBus</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">	constructor</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">events</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {};</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">autoIncreaseId</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">	addListener</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">listener</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">events</span><span style="color:#ABB2BF;">[</span><span style="color:#E5C07B;">listener</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">eventName</span><span style="color:#ABB2BF;">]) {</span></span>
<span class="line"><span style="color:#E5C07B;">			this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">events</span><span style="color:#ABB2BF;">[</span><span style="color:#E5C07B;">listener</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">eventName</span><span style="color:#ABB2BF;">].</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">listener</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">			this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">events</span><span style="color:#ABB2BF;">[</span><span style="color:#E5C07B;">listener</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">eventName</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> [</span><span style="color:#E06C75;">listener</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E06C75;"> listener</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">	on</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">eventName</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">callback</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		const</span><span style="color:#E5C07B;"> listener</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Listener</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">autoIncreaseId</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">eventName</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">callback</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">	emit</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">eventName</span><span style="color:#ABB2BF;">, ...</span><span style="color:#E06C75;font-style:italic;">args</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">events</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">eventName</span><span style="color:#ABB2BF;">]) {</span></span>
<span class="line"><span style="color:#E5C07B;">			this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">events</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">eventName</span><span style="color:#ABB2BF;">].</span><span style="color:#61AFEF;">forEach</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">listener</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">				listener</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">callback</span><span style="color:#ABB2BF;">(...</span><span style="color:#E06C75;">args</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">			});</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">	off</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">eventName</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">listener</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		const</span><span style="color:#E5C07B;"> listeners</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">events</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">eventName</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">listeners</span><span style="color:#56B6C2;"> &amp;&amp;</span><span style="color:#E5C07B;"> listeners</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">			const</span><span style="color:#E5C07B;"> index</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> listeners</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">findIndex</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">l</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#E5C07B;"> l</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">id</span><span style="color:#56B6C2;"> ===</span><span style="color:#E5C07B;"> listener</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">id</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">			if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">index</span><span style="color:#56B6C2;"> !==</span><span style="color:#56B6C2;"> -</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">				listeners</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">splice</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">index</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">	remove</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">eventName</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">events</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">eventName</span><span style="color:#ABB2BF;">]) {</span></span>
<span class="line"><span style="color:#C678DD;">			delete</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">events</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">eventName</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">	removeAllListeners</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">eventName</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">events</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">eventName</span><span style="color:#ABB2BF;">]) {</span></span>
<span class="line"><span style="color:#E5C07B;">			this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">events</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">eventName</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> [];</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">	once</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">eventName</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">callback</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		const</span><span style="color:#E5C07B;"> that</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">		const</span><span style="color:#E5C07B;"> id</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">autoIncreaseId</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// éœ€è¦æä¸€ä¸ªlistenenrå¯¹è±¡ï¼Œç„¶ååœ¨callbackä¸­è°ƒç”¨offæ–¹æ³•ï¼Œè¿™æ ·å°±å®ç°äº†ä¸€æ¬¡æ€§è®¢é˜…</span></span>
<span class="line"><span style="color:#C678DD;">		const</span><span style="color:#E5C07B;"> listener</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Listener</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">id</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">eventName</span><span style="color:#ABB2BF;">, (...</span><span style="color:#E06C75;font-style:italic;">args</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">			callback</span><span style="color:#ABB2BF;">(...</span><span style="color:#E06C75;">args</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">			const</span><span style="color:#E5C07B;"> index</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> that</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">events</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">eventName</span><span style="color:#ABB2BF;">].</span><span style="color:#61AFEF;">findIndex</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">l</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#E5C07B;"> l</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">id</span><span style="color:#56B6C2;"> ===</span><span style="color:#E06C75;"> id</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">			if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">index</span><span style="color:#56B6C2;"> !==</span><span style="color:#56B6C2;"> -</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">				that</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">events</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">eventName</span><span style="color:#ABB2BF;">].</span><span style="color:#61AFEF;">splice</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">index</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#ABB2BF;">		});</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">addListener</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">listener</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br></div></div><p>ç¬¬äºŒç§ï¼š</p><p>å‘å¸ƒè®¢é˜…æ¨¡å¼è·Ÿè§‚å¯Ÿè€…æ¨¡å¼å¾ˆåƒï¼Œä½†å®ƒå‘å¸ƒå’Œè®¢é˜…æ˜¯ä¸äº’ç›¸ä¾èµ–çš„ï¼Œå› ä¸ºæœ‰ä¸€ä¸ª<code>ç»Ÿä¸€è°ƒåº¦ä¸­å¿ƒ</code></p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">class</span><span style="color:#E5C07B;"> EventBus</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">	constructor</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// ç¼“å­˜åˆ—è¡¨ï¼Œç”¨æ¥å­˜æ”¾æ³¨å†Œçš„äº‹ä»¶ä¸å›è°ƒ</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">cache</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {};</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// è®¢é˜…äº‹ä»¶</span></span>
<span class="line"><span style="color:#61AFEF;">	on</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">name</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">cb</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// å¦‚æœå½“å‰äº‹ä»¶æ²¡æœ‰è®¢é˜…è¿‡ï¼Œå°±ç»™äº‹ä»¶åˆ›å»ºä¸€ä¸ªé˜Ÿåˆ—</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">cache</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">]) {</span></span>
<span class="line"><span style="color:#E5C07B;">			this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">cache</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> []; </span><span style="color:#7F848E;font-style:italic;">//ç”±äºä¸€ä¸ªäº‹ä»¶å¯èƒ½æ³¨å†Œå¤šä¸ªå›è°ƒå‡½æ•°ï¼Œæ‰€ä»¥ä½¿ç”¨æ•°ç»„æ¥å­˜å‚¨äº‹ä»¶é˜Ÿåˆ—</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">cache</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">].</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cb</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// è§¦å‘äº‹ä»¶</span></span>
<span class="line"><span style="color:#61AFEF;">	emit</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">name</span><span style="color:#ABB2BF;">, ...</span><span style="color:#E06C75;font-style:italic;">args</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// æ£€æŸ¥ç›®æ ‡äº‹ä»¶æ˜¯å¦æœ‰ç›‘å¬å‡½æ•°é˜Ÿåˆ—</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">cache</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">]) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// é€ä¸ªè°ƒç”¨é˜Ÿåˆ—é‡Œçš„å›è°ƒå‡½æ•°</span></span>
<span class="line"><span style="color:#E5C07B;">			this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">cache</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">].</span><span style="color:#61AFEF;">forEach</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">callback</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">				callback</span><span style="color:#ABB2BF;">(...</span><span style="color:#E06C75;">args</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">			});</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// å–æ¶ˆè®¢é˜…</span></span>
<span class="line"><span style="color:#61AFEF;">	off</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">name</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">cb</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		const</span><span style="color:#E5C07B;"> callbacks</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">cache</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#C678DD;">		const</span><span style="color:#E5C07B;"> index</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> callbacks</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">indexOf</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cb</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">index</span><span style="color:#56B6C2;"> !==</span><span style="color:#56B6C2;"> -</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">			callbacks</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">splice</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">index</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// åªè®¢é˜…ä¸€æ¬¡</span></span>
<span class="line"><span style="color:#61AFEF;">	once</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">name</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">cb</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// æ‰§è¡Œå®Œç¬¬ä¸€æ¬¡å›è°ƒå‡½æ•°åï¼Œè‡ªåŠ¨åˆ é™¤å½“å‰è®¢é˜…äº‹ä»¶</span></span>
<span class="line"><span style="color:#C678DD;">		const</span><span style="color:#61AFEF;"> fn</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> (...</span><span style="color:#E06C75;font-style:italic;">args</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">			cb</span><span style="color:#ABB2BF;">(...</span><span style="color:#E06C75;">args</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">			this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">off</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">fn</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		};</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">on</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">fn</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// æµ‹è¯•</span></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> eventBus</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> EventBus</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#61AFEF;"> event1</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> (...</span><span style="color:#E06C75;font-style:italic;">args</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">	console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">`é€šçŸ¥1-è®¢é˜…è€…å°é™ˆè€å¸ˆ,å°æ˜åŒå­¦å½“å‰å¿ƒæƒ…çŠ¶æ€ï¼š</span><span style="color:#C678DD;">${</span><span style="color:#E06C75;">args</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">`</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// è®¢é˜…äº‹ä»¶ï¼Œåªè®¢é˜…ä¸€æ¬¡</span></span>
<span class="line"><span style="color:#E5C07B;">eventBus</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">once</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;teacherName1&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">event1</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// å‘å¸ƒäº‹ä»¶</span></span>
<span class="line"><span style="color:#E5C07B;">eventBus</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">emit</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;teacherName1&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;æ•™å®¤&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;ä¸Šè¯¾&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;æ‰“æ¶&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;æ„¤æ€’&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">eventBus</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">emit</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;teacherName1&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;æ•™å®¤&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;ä¸Šè¯¾&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;æ‰“æ¶&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;æ„¤æ€’&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">eventBus</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">emit</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;teacherName1&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;æ•™å®¤&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;ä¸Šè¯¾&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;æ‰“æ¶&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;æ„¤æ€’&quot;</span><span style="color:#ABB2BF;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br></div></div><p>æµ‹è¯•ç»“æœï¼š</p><p><img src="/FrontEndInterviewQuestion/assets/97463aa0bab9487ca015200f962c7d67tplv-k3u1fbpfcp-jj-mark3024000q75.DjcpuYoK.webp" alt="Snipaste_2024-02-20_16-58-33.png"></p><p>ç®€æ˜“å®ç°ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// ç»„ä»¶é€šä¿¡ï¼Œä¸€ä¸ªè§¦å‘ä¸ç›‘å¬çš„è¿‡ç¨‹</span></span>
<span class="line"><span style="color:#C678DD;">class</span><span style="color:#E5C07B;"> EventEmitter</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">	constructor</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// å­˜å‚¨äº‹ä»¶</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">events</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">events</span><span style="color:#56B6C2;"> ||</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Map</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// ç›‘å¬äº‹ä»¶</span></span>
<span class="line"><span style="color:#61AFEF;">	addListener</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">type</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">fn</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">events</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">type</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#E5C07B;">			this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">events</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">set</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">type</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">fn</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// è§¦å‘äº‹ä»¶</span></span>
<span class="line"><span style="color:#61AFEF;">	emit</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">type</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		let</span><span style="color:#E06C75;"> handle</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">events</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">type</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">		handle</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">apply</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">, [...</span><span style="color:#E5C07B;">arguments</span><span style="color:#ABB2BF;">].</span><span style="color:#61AFEF;">slice</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// æµ‹è¯•</span></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> emitter</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> EventEmitter</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// ç›‘å¬äº‹ä»¶</span></span>
<span class="line"><span style="color:#E5C07B;">emitter</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">addListener</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;ages&quot;</span><span style="color:#ABB2BF;">, (</span><span style="color:#E06C75;font-style:italic;">age</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">	console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">age</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// è§¦å‘äº‹ä»¶</span></span>
<span class="line"><span style="color:#E5C07B;">emitter</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">emit</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;ages&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">18</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">// 18</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>å®ç° 3</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">class</span><span style="color:#E5C07B;"> EventEmitter</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">	constructor</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">cache</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {};</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">	on</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">name</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">fn</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">cache</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">]) {</span></span>
<span class="line"><span style="color:#E5C07B;">			this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">cache</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">].</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">fn</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">			this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">cache</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> [</span><span style="color:#E06C75;">fn</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">	off</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">name</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">fn</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		const</span><span style="color:#E5C07B;"> tasks</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">cache</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">tasks</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">			const</span><span style="color:#E5C07B;"> index</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> tasks</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">findIndex</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">f</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#E06C75;"> f</span><span style="color:#56B6C2;"> ===</span><span style="color:#E06C75;"> fn</span><span style="color:#56B6C2;"> ||</span><span style="color:#E5C07B;"> f</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">callback</span><span style="color:#56B6C2;"> ===</span><span style="color:#E06C75;"> fn</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">			if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">index</span><span style="color:#56B6C2;"> &gt;=</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">				tasks</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">splice</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">index</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">	emit</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">name</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">cache</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">]) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// åˆ›å»ºå‰¯æœ¬ï¼Œå¦‚æœå›è°ƒå‡½æ•°å†…ç»§ç»­æ³¨å†Œç›¸åŒäº‹ä»¶ï¼Œä¼šé€ æˆæ­»å¾ªç¯</span></span>
<span class="line"><span style="color:#C678DD;">			const</span><span style="color:#E5C07B;"> tasks</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">cache</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">].</span><span style="color:#61AFEF;">slice</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">			for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> fn</span><span style="color:#C678DD;"> of</span><span style="color:#E06C75;"> tasks</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#61AFEF;">				fn</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">	emit</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">name</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">once</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> false</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">cache</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">]) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// åˆ›å»ºå‰¯æœ¬ï¼Œå¦‚æœå›è°ƒå‡½æ•°å†…ç»§ç»­æ³¨å†Œç›¸åŒäº‹ä»¶ï¼Œä¼šé€ æˆæ­»å¾ªç¯</span></span>
<span class="line"><span style="color:#C678DD;">			const</span><span style="color:#E5C07B;"> tasks</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">cache</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">].</span><span style="color:#61AFEF;">slice</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">			for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> fn</span><span style="color:#C678DD;"> of</span><span style="color:#E06C75;"> tasks</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#61AFEF;">				fn</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#C678DD;">			if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">once</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">				delete</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">cache</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// æµ‹è¯•</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> eventBus</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> EventEmitter</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#61AFEF;"> task1</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">	console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;task1&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#61AFEF;"> task2</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">	console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;task2&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#E5C07B;">eventBus</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">on</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;task&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">task1</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">eventBus</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">on</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;task&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">task2</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">setTimeout</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">	eventBus</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">emit</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;task&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">}, </span><span style="color:#D19A66;">1000</span><span style="color:#ABB2BF;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br></div></div><p>ç®€æ˜“å®ç° 2</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">class</span><span style="color:#E5C07B;"> Event</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">	constructor</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">events</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {};</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#61AFEF;">	on</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">key</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">cb</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">events</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> cb</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#61AFEF;">	emit</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">key</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">params</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {}) {</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">events</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">&amp;&amp;</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">events</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">](</span><span style="color:#E06C75;">params</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#61AFEF;">	remove</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">key</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">events</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>å®ç° 5</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">class</span><span style="color:#E5C07B;"> EventEmitter</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">	constructor</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">events</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {};</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// å®ç°è®¢é˜…</span></span>
<span class="line"><span style="color:#61AFEF;">	on</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">type</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">callBack</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">events</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">type</span><span style="color:#ABB2BF;">]) {</span></span>
<span class="line"><span style="color:#E5C07B;">			this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">events</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">type</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> [</span><span style="color:#E06C75;">callBack</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#ABB2BF;">		} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">			this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">events</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">type</span><span style="color:#ABB2BF;">].</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">callBack</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// åˆ é™¤è®¢é˜…</span></span>
<span class="line"><span style="color:#61AFEF;">	off</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">type</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">callBack</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">events</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">type</span><span style="color:#ABB2BF;">]) </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">events</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">type</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">events</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">type</span><span style="color:#ABB2BF;">].</span><span style="color:#61AFEF;">filter</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">item</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">			return</span><span style="color:#E06C75;"> item</span><span style="color:#56B6C2;"> !==</span><span style="color:#E06C75;"> callBack</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		});</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// åªæ‰§è¡Œä¸€æ¬¡è®¢é˜…äº‹ä»¶</span></span>
<span class="line"><span style="color:#61AFEF;">	once</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">type</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">callBack</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		function</span><span style="color:#61AFEF;"> fn</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#61AFEF;">			callBack</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E5C07B;">			this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">off</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">type</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">fn</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">on</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">type</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">fn</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// è§¦å‘äº‹ä»¶</span></span>
<span class="line"><span style="color:#61AFEF;">	emit</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">type</span><span style="color:#ABB2BF;">, ...</span><span style="color:#E06C75;font-style:italic;">rest</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">events</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">type</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">&amp;&amp;</span></span>
<span class="line"><span style="color:#E5C07B;">			this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">events</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">type</span><span style="color:#ABB2BF;">].</span><span style="color:#61AFEF;">forEach</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">fn</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#E5C07B;"> fn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">apply</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">rest</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// ä½¿ç”¨å¦‚ä¸‹</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// const event = new EventEmitter();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// const handle = (...rest) =&gt; {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//   console.log(rest);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// event.on(&quot;click&quot;, handle);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// event.emit(&quot;click&quot;, 1, 2, 3, 4);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// event.off(&quot;click&quot;, handle);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// event.emit(&quot;click&quot;, 1, 2);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// event.once(&quot;dbClick&quot;, () =&gt; {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//   console.log(123456);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// });</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// event.emit(&quot;dbClick&quot;);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// event.emit(&quot;dbClick&quot;);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br></div></div><h3 id="ç¬¬ä¸‰ç§" tabindex="-1">ç¬¬ä¸‰ç§ <a class="header-anchor" href="#ç¬¬ä¸‰ç§" aria-label="Permalink to &quot;ç¬¬ä¸‰ç§&quot;">â€‹</a></h3><p><a href="https://juejin.cn/post/7329336551007191077" target="_blank" rel="noreferrer">ã€å‰ç«¯é¢è¯•ã€‘å½“é¢è¯•å®˜å«ä½ æ‰‹å†™ä¸€ä¸ªå‰ç«¯å‘å¸ƒè®¢é˜…æ¨¡å¼ - æ˜é‡‘ (juejin.cn)</a></p><h2 id="å®ç°æ—¥æœŸæ ¼å¼åŒ–å‡½æ•°" tabindex="-1">å®ç°æ—¥æœŸæ ¼å¼åŒ–å‡½æ•° <a class="header-anchor" href="#å®ç°æ—¥æœŸæ ¼å¼åŒ–å‡½æ•°" aria-label="Permalink to &quot;å®ç°æ—¥æœŸæ ¼å¼åŒ–å‡½æ•°&quot;">â€‹</a></h2><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#61AFEF;"> dateFormat</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">dateInput</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">format</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> day</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> dateInput</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getDate</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> month</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> dateInput</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getMonth</span><span style="color:#ABB2BF;">() </span><span style="color:#56B6C2;">+</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> year</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> dateInput</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getFullYear</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E06C75;">	format</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> format</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">replace</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">/yyyy/</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">year</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;">	format</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> format</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">replace</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">/MM/</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">month</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;">	format</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> format</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">replace</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">/dd/</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">day</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">	console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">format</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> format</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">dateFormat</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">new</span><span style="color:#61AFEF;"> Date</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;2024-02-01&quot;</span><span style="color:#ABB2BF;">), </span><span style="color:#98C379;">&quot;yyyy/MM/dd&quot;</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">// 2024/02/01</span></span>
<span class="line"><span style="color:#61AFEF;">dateFormat</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">new</span><span style="color:#61AFEF;"> Date</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;2024-02-20&quot;</span><span style="color:#ABB2BF;">), </span><span style="color:#98C379;">&quot;yyyy/MM/dd&quot;</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">// 2024/02/20</span></span>
<span class="line"><span style="color:#61AFEF;">dateFormat</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">new</span><span style="color:#61AFEF;"> Date</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;2024-02-20&quot;</span><span style="color:#ABB2BF;">), </span><span style="color:#98C379;">&quot;yyyyå¹´MMæœˆddæ—¥&quot;</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">// 2024å¹´02æœˆ20æ—¥</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>æµ‹è¯•ç»“æœï¼š</p><p><img src="/FrontEndInterviewQuestion/assets/5ef8cf1d593b49339fadce4998237440tplv-k3u1fbpfcp-jj-mark3024000q75.BwqStQ91.webp" alt="Snipaste_2024-02-20_17-05-18.png"></p><h2 id="æ‰‹å†™é™æµè°ƒåº¦å™¨" tabindex="-1">æ‰‹å†™é™æµè°ƒåº¦å™¨ <a class="header-anchor" href="#æ‰‹å†™é™æµè°ƒåº¦å™¨" aria-label="Permalink to &quot;æ‰‹å†™é™æµè°ƒåº¦å™¨&quot;">â€‹</a></h2><p>å®ç°ï¼šè¿›ã‡ä¸ªä»»åŠ¡ï¼ŒtaskCount+1ï¼Œç­‰ Promise finally åï¼Œæ‰ taskCount-1ï¼›å¦‚æœ taskCount è¾¾åˆ° taskCountLimit ä¸Šé™ï¼Œä¸èƒ½è¿›ä»»åŠ¡ã€‚</p><p>é™æµå™¨çš„ä½œç”¨ï¼šé˜²æ­¢æŸäº›è¯·æ±‚è¿‡å¤šï¼Œå¯¼è‡´æœåŠ¡å™¨å‹åŠ›è¿‡å¤§ï¼Œç”šè‡³å´©æºƒã€‚</p><h3 id="é™æµå™¨çš„å®ç°" tabindex="-1">é™æµå™¨çš„å®ç°ï¼š <a class="header-anchor" href="#é™æµå™¨çš„å®ç°" aria-label="Permalink to &quot;é™æµå™¨çš„å®ç°ï¼š&quot;">â€‹</a></h3><p>1.å¼•å…¥ä¸€ä¸ªå˜é‡ taskCountï¼Œåˆå§‹å€¼ä¸º 0ï¼›</p><p>2.å¯¹äºæ¯ä¸ªè¯·æ±‚ï¼Œåœ¨å‘é€å‰ï¼Œåˆ¤æ–­ taskCount æ˜¯å¦è¾¾åˆ°ä¸Šé™ï¼Œå¦‚æœè¾¾åˆ°ä¸Šé™ï¼Œåˆ™ç­‰å¾…ï¼›å¦‚æœæœªè¾¾åˆ°ä¸Šé™ï¼Œåˆ™ taskCount+1ï¼Œå‘é€è¯·æ±‚ï¼Œè¯·æ±‚æˆåŠŸåï¼ŒtaskCount-1ã€‚</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">class</span><span style="color:#E5C07B;"> Scheduler</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">	constructor</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">taskCountLimit</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">taskCount</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">taskCountLimit</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> taskCountLimit</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">	async</span><span style="color:#61AFEF;"> schedule</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">task</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">taskCount</span><span style="color:#56B6C2;"> &gt;=</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">taskCountLimit</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">			throw</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Error</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Task count limit reached&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">taskCount</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">		try</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">			return</span><span style="color:#C678DD;"> await</span><span style="color:#61AFEF;"> task</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">		} </span><span style="color:#C678DD;">finally</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">			this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">taskCount</span><span style="color:#56B6C2;">--</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// ä½¿ç”¨ç¤ºä¾‹ï¼š</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> scheduler</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Scheduler</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">async</span><span style="color:#C678DD;"> function</span><span style="color:#61AFEF;"> task1</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">	console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;task1 start&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">	await</span><span style="color:#C678DD;"> new</span><span style="color:#E5C07B;"> Promise</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">resolve</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#61AFEF;"> setTimeout</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">resolve</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">1000</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#E5C07B;">	console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;task1 end&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">async</span><span style="color:#C678DD;"> function</span><span style="color:#61AFEF;"> task2</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">	console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;task2 start&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">	await</span><span style="color:#C678DD;"> new</span><span style="color:#E5C07B;"> Promise</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">resolve</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#61AFEF;"> setTimeout</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">resolve</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">2000</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#E5C07B;">	console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;task2 end&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">async</span><span style="color:#C678DD;"> function</span><span style="color:#61AFEF;"> task3</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">	console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;task3 start&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">	await</span><span style="color:#C678DD;"> new</span><span style="color:#E5C07B;"> Promise</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">resolve</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#61AFEF;"> setTimeout</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">resolve</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">3000</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#E5C07B;">	console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;task3 end&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">async</span><span style="color:#C678DD;"> function</span><span style="color:#61AFEF;"> task4</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">	console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;task4 start&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">	await</span><span style="color:#C678DD;"> new</span><span style="color:#E5C07B;"> Promise</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">resolve</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#61AFEF;"> setTimeout</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">resolve</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">4000</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#E5C07B;">	console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;task4 end&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">async</span><span style="color:#ABB2BF;"> () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">	try</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">		await</span><span style="color:#E5C07B;"> scheduler</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">schedule</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">task1</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">		await</span><span style="color:#E5C07B;"> scheduler</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">schedule</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">task2</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">		await</span><span style="color:#E5C07B;"> scheduler</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">schedule</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">task3</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">		await</span><span style="color:#E5C07B;"> scheduler</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">schedule</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">task4</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	} </span><span style="color:#C678DD;">catch</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">error</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">		console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">error</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">error</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">})();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br></div></div><h2 id="å®ç°åŒå‘æ•°æ®ç»‘å®š" tabindex="-1">å®ç°åŒå‘æ•°æ®ç»‘å®š <a class="header-anchor" href="#å®ç°åŒå‘æ•°æ®ç»‘å®š" aria-label="Permalink to &quot;å®ç°åŒå‘æ•°æ®ç»‘å®š&quot;">â€‹</a></h2><p>å‚è€ƒ vue çš„åŒå‘æ•°æ®ç»‘å®šå®ç°</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> obj</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {};</span></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> input</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> document</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getElementById</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;input&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> span</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> document</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getElementById</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;span&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// æ•°æ®åŠ«æŒ</span></span>
<span class="line"><span style="color:#E5C07B;">Object</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">defineProperty</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;text&quot;</span><span style="color:#ABB2BF;">, {</span></span>
<span class="line"><span style="color:#E06C75;">	configurable</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	enumerable</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#61AFEF;">	get</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">		console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;è·å–æ•°æ®äº†&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"><span style="color:#61AFEF;">	set</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">newVal</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">		console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;æ•°æ®æ›´æ–°äº†&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">		input</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> newVal</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">		span</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">innerHTML</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> newVal</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// è¾“å…¥ç›‘å¬</span></span>
<span class="line"><span style="color:#E5C07B;">input</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">addEventListener</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;keyup&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">e</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">	obj</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">text</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> e</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">target</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h2 id="å®ç°ä¸€ä¸ªç®€å•è·¯ç”±" tabindex="-1">å®ç°ä¸€ä¸ªç®€å•è·¯ç”± <a class="header-anchor" href="#å®ç°ä¸€ä¸ªç®€å•è·¯ç”±" aria-label="Permalink to &quot;å®ç°ä¸€ä¸ªç®€å•è·¯ç”±&quot;">â€‹</a></h2><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// hashè·¯ç”±</span></span>
<span class="line"><span style="color:#C678DD;">class</span><span style="color:#E5C07B;"> Route</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">	constructor</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// è·¯ç”±å­˜å‚¨å¯¹è±¡</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">routes</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {};</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// å½“å‰hash</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">currentHash</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// ç»‘å®šthisï¼Œé¿å…ç›‘å¬æ—¶thisæŒ‡å‘æ”¹å˜</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">freshRoute</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">freshRoute</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">bind</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// ç›‘å¬</span></span>
<span class="line"><span style="color:#E5C07B;">		window</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">addEventListener</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;load&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">freshRoute</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">false</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">		window</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">addEventListener</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;hashchange&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">freshRoute</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">false</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// å­˜å‚¨</span></span>
<span class="line"><span style="color:#61AFEF;">	storeRoute</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">path</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">cb</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">routes</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">path</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> cb</span><span style="color:#56B6C2;"> ||</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> () {};</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// æ›´æ–°</span></span>
<span class="line"><span style="color:#61AFEF;">	freshRoute</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">currentHash</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> location</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">hash</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">slice</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">||</span><span style="color:#98C379;"> &quot;/&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">routes</span><span style="color:#ABB2BF;">[</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">currentHash</span><span style="color:#ABB2BF;">]();</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h2 id="æ‹–æ”¾" tabindex="-1">æ‹–æ”¾ <a class="header-anchor" href="#æ‹–æ”¾" aria-label="Permalink to &quot;æ‹–æ”¾&quot;">â€‹</a></h2><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> DragDrop</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> dragging</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	function</span><span style="color:#61AFEF;"> handleEvent</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">event</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		//è·å–äº‹ä»¶å’Œç›®æ ‡</span></span>
<span class="line"><span style="color:#E06C75;">		event</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> EventUtil</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getEvent</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">event</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">		var</span><span style="color:#E06C75;"> target</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> EventUtil</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getTarget</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">event</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		//ç¡®å®šäº‹ä»¶ç±»å‹</span></span>
<span class="line"><span style="color:#C678DD;">		switch</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">event</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">type</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">			case</span><span style="color:#98C379;"> &quot;mousedown&quot;</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#C678DD;">				if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">target</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">className</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">indexOf</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;draggable&quot;</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">&gt;</span><span style="color:#56B6C2;"> -</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">					dragging</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> target</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">				}</span></span>
<span class="line"><span style="color:#C678DD;">				break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">			case</span><span style="color:#98C379;"> &quot;mousemove&quot;</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#C678DD;">				if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">dragging</span><span style="color:#56B6C2;"> !==</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">					//æŒ‡å®šä½ç½®</span></span>
<span class="line"><span style="color:#E5C07B;">					dragging</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">style</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">left</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> event</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">clientX</span><span style="color:#56B6C2;"> +</span><span style="color:#98C379;"> &quot;px&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">					dragging</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">style</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">top</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> event</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">clientY</span><span style="color:#56B6C2;"> +</span><span style="color:#98C379;"> &quot;px&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">				}</span></span>
<span class="line"><span style="color:#C678DD;">				break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">			case</span><span style="color:#98C379;"> &quot;mouseup&quot;</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#E06C75;">				dragging</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">				break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	//å…¬å…±æ¥å£</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">		enable</span><span style="color:#ABB2BF;">: </span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#E5C07B;">			EventUtil</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">addHandler</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">document</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;mousedown&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">handleEvent</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">			EventUtil</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">addHandler</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">document</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;mousemove&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">handleEvent</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">			EventUtil</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">addHandler</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">document</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;mouseup&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">handleEvent</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		},</span></span>
<span class="line"><span style="color:#61AFEF;">		disable</span><span style="color:#ABB2BF;">: </span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#E5C07B;">			EventUtil</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">removeHandler</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">document</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;mousedown&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">handleEvent</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">			EventUtil</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">removeHandler</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">document</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;mousemove&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">handleEvent</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">			EventUtil</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">removeHandler</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">document</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;mouseup&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">handleEvent</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		},</span></span>
<span class="line"><span style="color:#ABB2BF;">	};</span></span>
<span class="line"><span style="color:#ABB2BF;">})();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><ul><li><p>1.DragDrop å¯¹è±¡å°è£…äº†æ‹–æ”¾çš„æ‰€æœ‰åŸºæœ¬åŠŸèƒ½ã€‚è¿™æ˜¯ä¸€ä¸ªå•ä¾‹å¯¹è±¡ï¼Œå¹¶ä½¿ç”¨äº†æ¨¡å—æ¨¡å¼æ¥éšè—æŸäº›å® ç°ç»†èŠ‚ã€‚dragging å˜é‡èµ·åˆæ˜¯ nullï¼Œå°†ä¼šå­˜æ”¾è¢«æ‹–åŠ¨çš„å…ƒç´ ï¼Œæ‰€ä»¥å½“è¯¥å˜é‡ä¸ä¸º null æ—¶ï¼Œå°±çŸ¥é“æ­£ åœ¨æ‹–åŠ¨æŸä¸ªä¸œè¥¿ã€‚handleEvent()å‡½æ•°å¤„ç†æ‹–æ”¾åŠŸèƒ½ä¸­çš„æ‰€æœ‰çš„ä¸‰ä¸ªé¼ æ ‡äº‹ä»¶ã€‚å®ƒé¦–å…ˆè·å– event å¯¹ è±¡å’Œäº‹ä»¶ç›®æ ‡çš„å¼•ç”¨ã€‚ä¹‹åï¼Œç”¨ä¸€ä¸ª switch è¯­å¥ç¡®å®šè¦è§¦å‘å“ªä¸ªäº‹ä»¶æ ·å¼ã€‚å½“ mousedown äº‹ä»¶å‘ç”Ÿ æ—¶ï¼Œä¼šæ£€æŸ¥ target çš„ class æ˜¯å¦åŒ…å«&quot;draggable&quot;ç±»ï¼Œå¦‚æœæ˜¯ï¼Œé‚£ä¹ˆå°† target å­˜æ”¾åˆ° dragging ä¸­ã€‚è¿™ä¸ªæŠ€å·§å¯ä»¥å¾ˆæ–¹ä¾¿åœ°é€šè¿‡æ ‡è®°è¯­è¨€è€Œé JavaScript è„šæœ¬æ¥ç¡®å®šå¯æ‹–åŠ¨çš„å…ƒç´ ã€‚</p></li><li><p>2.handleEvent()çš„ mousemove æƒ…å†µå’Œå‰é¢çš„ä»£ç ä¸€æ ·ï¼Œä¸è¿‡è¦æ£€æŸ¥ dragging æ˜¯å¦ä¸º nullã€‚å½“ å®ƒä¸æ˜¯ nullï¼Œå°±çŸ¥é“ dragging å°±æ˜¯è¦æ‹–åŠ¨çš„å…ƒç´ ï¼Œè¿™æ ·å°±ä¼šæŠŠå®ƒæ”¾åˆ°æ°å½“çš„ä½ç½®ä¸Šã€‚mouseup æƒ…å†µ å°±ä»…ä»…æ˜¯å°† dragging é‡ç½®ä¸º nullï¼Œè®© mousemove äº‹ä»¶ä¸­çš„åˆ¤æ–­å¤±æ•ˆã€‚</p></li><li><p>3.DragDrop è¿˜æœ‰ä¸¤ä¸ªå…¬å…±æ–¹æ³•:enable()å’Œ disable()ï¼Œå®ƒä»¬åªæ˜¯ç›¸åº”æ·»åŠ å’Œåˆ é™¤æ‰€æœ‰çš„äº‹ä»¶å¤„ ç†ç¨‹åºã€‚è¿™ä¸¤ä¸ªå‡½æ•°æä¾›äº†é¢å¤–çš„å¯¹æ‹–æ”¾åŠŸèƒ½çš„æ§åˆ¶æ‰‹æ®µã€‚</p></li><li><p>4.è¦ä½¿ç”¨ DragDrop å¯¹è±¡ï¼Œåªè¦åœ¨é¡µé¢ä¸ŠåŒ…å«è¿™äº›ä»£ç å¹¶è°ƒç”¨ enable()ã€‚æ‹–æ”¾ä¼šè‡ªåŠ¨é’ˆå¯¹æ‰€æœ‰åŒ…å« &quot;draggable&quot;ç±»çš„å…ƒç´ å¯ç”¨ï¼Œå¦‚ä¸‹ä¾‹æ‰€ç¤º:</p><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">div</span><span style="color:#D19A66;"> class</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;draggable&quot;</span><span style="color:#D19A66;"> style</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;position:absolute;background:red&quot;</span><span style="color:#ABB2BF;">&gt;&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>æ³¨æ„ä¸ºäº†å…ƒç´ èƒ½è¢«æ‹–æ”¾ï¼Œå®ƒå¿…é¡»æ˜¯ç»å¯¹å®šä½çš„ã€‚</p></li></ul><h2 id="å®ç°æ‡’åŠ è½½" tabindex="-1">å®ç°æ‡’åŠ è½½ <a class="header-anchor" href="#å®ç°æ‡’åŠ è½½" aria-label="Permalink to &quot;å®ç°æ‡’åŠ è½½&quot;">â€‹</a></h2><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">ul</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">li</span><span style="color:#ABB2BF;">&gt;&lt;</span><span style="color:#E06C75;">img</span><span style="color:#D19A66;"> src</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;./imgs/default.png&quot;</span><span style="color:#D19A66;"> data</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;./imgs/1.png&quot;</span><span style="color:#D19A66;"> alt</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;"> /&gt;&lt;/</span><span style="color:#E06C75;">li</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">li</span><span style="color:#ABB2BF;">&gt;&lt;</span><span style="color:#E06C75;">img</span><span style="color:#D19A66;"> src</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;./imgs/default.png&quot;</span><span style="color:#D19A66;"> data</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;./imgs/2.png&quot;</span><span style="color:#D19A66;"> alt</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;"> /&gt;&lt;/</span><span style="color:#E06C75;">li</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">li</span><span style="color:#ABB2BF;">&gt;&lt;</span><span style="color:#E06C75;">img</span><span style="color:#D19A66;"> src</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;./imgs/default.png&quot;</span><span style="color:#D19A66;"> data</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;./imgs/3.png&quot;</span><span style="color:#D19A66;"> alt</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;"> /&gt;&lt;/</span><span style="color:#E06C75;">li</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">li</span><span style="color:#ABB2BF;">&gt;&lt;</span><span style="color:#E06C75;">img</span><span style="color:#D19A66;"> src</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;./imgs/default.png&quot;</span><span style="color:#D19A66;"> data</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;./imgs/4.png&quot;</span><span style="color:#D19A66;"> alt</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;"> /&gt;&lt;/</span><span style="color:#E06C75;">li</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">li</span><span style="color:#ABB2BF;">&gt;&lt;</span><span style="color:#E06C75;">img</span><span style="color:#D19A66;"> src</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;./imgs/default.png&quot;</span><span style="color:#D19A66;"> data</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;./imgs/5.png&quot;</span><span style="color:#D19A66;"> alt</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;"> /&gt;&lt;/</span><span style="color:#E06C75;">li</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">li</span><span style="color:#ABB2BF;">&gt;&lt;</span><span style="color:#E06C75;">img</span><span style="color:#D19A66;"> src</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;./imgs/default.png&quot;</span><span style="color:#D19A66;"> data</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;./imgs/6.png&quot;</span><span style="color:#D19A66;"> alt</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;"> /&gt;&lt;/</span><span style="color:#E06C75;">li</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">li</span><span style="color:#ABB2BF;">&gt;&lt;</span><span style="color:#E06C75;">img</span><span style="color:#D19A66;"> src</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;./imgs/default.png&quot;</span><span style="color:#D19A66;"> data</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;./imgs/7.png&quot;</span><span style="color:#D19A66;"> alt</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;"> /&gt;&lt;/</span><span style="color:#E06C75;">li</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">li</span><span style="color:#ABB2BF;">&gt;&lt;</span><span style="color:#E06C75;">img</span><span style="color:#D19A66;"> src</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;./imgs/default.png&quot;</span><span style="color:#D19A66;"> data</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;./imgs/8.png&quot;</span><span style="color:#D19A66;"> alt</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;"> /&gt;&lt;/</span><span style="color:#E06C75;">li</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">li</span><span style="color:#ABB2BF;">&gt;&lt;</span><span style="color:#E06C75;">img</span><span style="color:#D19A66;"> src</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;./imgs/default.png&quot;</span><span style="color:#D19A66;"> data</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;./imgs/9.png&quot;</span><span style="color:#D19A66;"> alt</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;"> /&gt;&lt;/</span><span style="color:#E06C75;">li</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">li</span><span style="color:#ABB2BF;">&gt;&lt;</span><span style="color:#E06C75;">img</span><span style="color:#D19A66;"> src</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;./imgs/default.png&quot;</span><span style="color:#D19A66;"> data</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;./imgs/10.png&quot;</span><span style="color:#D19A66;"> alt</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;"> /&gt;&lt;/</span><span style="color:#E06C75;">li</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">ul</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> imgs</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> document</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">querySelectorAll</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;img&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// å¯è§†åŒºé«˜åº¦</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> clientHeight</span><span style="color:#56B6C2;"> =</span></span>
<span class="line"><span style="color:#E5C07B;">		window</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">innerHeight</span><span style="color:#56B6C2;"> ||</span></span>
<span class="line"><span style="color:#E5C07B;">		document</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">documentElement</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">clientHeight</span><span style="color:#56B6C2;"> ||</span></span>
<span class="line"><span style="color:#E5C07B;">		document</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">body</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">clientHeight</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	function</span><span style="color:#61AFEF;"> lazyLoad</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// æ»šåŠ¨å·å»çš„é«˜åº¦</span></span>
<span class="line"><span style="color:#C678DD;">		let</span><span style="color:#E06C75;"> scrollTop</span><span style="color:#56B6C2;"> =</span></span>
<span class="line"><span style="color:#E5C07B;">			window</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">pageYOffset</span><span style="color:#56B6C2;"> ||</span></span>
<span class="line"><span style="color:#E5C07B;">			document</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">documentElement</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">scrollTop</span><span style="color:#56B6C2;"> ||</span></span>
<span class="line"><span style="color:#E5C07B;">			document</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">body</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">scrollTop</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">		for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E5C07B;"> imgs</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// å›¾ç‰‡åœ¨å¯è§†åŒºå†’å‡ºçš„é«˜åº¦</span></span>
<span class="line"><span style="color:#C678DD;">			let</span><span style="color:#E06C75;"> x</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> clientHeight</span><span style="color:#56B6C2;"> +</span><span style="color:#E06C75;"> scrollTop</span><span style="color:#56B6C2;"> -</span><span style="color:#E06C75;"> imgs</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">].</span><span style="color:#E06C75;">offsetTop</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// å›¾ç‰‡åœ¨å¯è§†åŒºå†…</span></span>
<span class="line"><span style="color:#C678DD;">			if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">x</span><span style="color:#56B6C2;"> &gt;</span><span style="color:#D19A66;"> 0</span><span style="color:#56B6C2;"> &amp;&amp;</span><span style="color:#E06C75;"> x</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E06C75;"> clientHeight</span><span style="color:#56B6C2;"> +</span><span style="color:#E06C75;"> imgs</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">].</span><span style="color:#E06C75;">height</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">				imgs</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">].</span><span style="color:#E06C75;">src</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> imgs</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">].</span><span style="color:#61AFEF;">getAttribute</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;data&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// addEventListener(&#39;scroll&#39;, lazyLoad) or setInterval(lazyLoad, 1000)</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><h2 id="rem-åŸºæœ¬è®¾ç½®" tabindex="-1">rem åŸºæœ¬è®¾ç½® <a class="header-anchor" href="#rem-åŸºæœ¬è®¾ç½®" aria-label="Permalink to &quot;rem åŸºæœ¬è®¾ç½®&quot;">â€‹</a></h2><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// æå‰æ‰§è¡Œï¼Œåˆå§‹åŒ– resize äº‹ä»¶ä¸ä¼šæ‰§è¡Œ</span></span>
<span class="line"><span style="color:#61AFEF;">setRem</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// åŸå§‹é…ç½®</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> setRem</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> doc</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> document</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">documentElement</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> width</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> doc</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getBoundingClientRect</span><span style="color:#ABB2BF;">().</span><span style="color:#E06C75;">width</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> rem</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> width</span><span style="color:#56B6C2;"> /</span><span style="color:#D19A66;"> 75</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">	doc</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">style</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">fontSize</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> rem</span><span style="color:#56B6C2;"> +</span><span style="color:#98C379;"> &quot;px&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// ç›‘å¬çª—å£å˜åŒ–</span></span>
<span class="line"><span style="color:#61AFEF;">addEventListener</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;resize&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">setRem</span><span style="color:#ABB2BF;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="æ‰‹å†™å®ç°-ajax" tabindex="-1">æ‰‹å†™å®ç° AJAX <a class="header-anchor" href="#æ‰‹å†™å®ç°-ajax" aria-label="Permalink to &quot;æ‰‹å†™å®ç° AJAX&quot;">â€‹</a></h2><h3 id="_1ã€ajax-è¿”å›çš„çŠ¶æ€" tabindex="-1">1ã€ajax è¿”å›çš„çŠ¶æ€ <a class="header-anchor" href="#_1ã€ajax-è¿”å›çš„çŠ¶æ€" aria-label="Permalink to &quot;1ã€ajax è¿”å›çš„çŠ¶æ€&quot;">â€‹</a></h3><p><strong>è€ƒå¯Ÿç‚¹ï¼šajax</strong></p><details class="details custom-block"><summary>æŸ¥çœ‹å‚è€ƒå›ç­”</summary><p>0 ï¼ ï¼ˆæœªåˆå§‹åŒ–ï¼‰è¿˜æ²¡æœ‰è°ƒç”¨ send()æ–¹æ³•</p><p>1 ï¼ ï¼ˆè½½å…¥ï¼‰å·²è°ƒç”¨ send()æ–¹æ³•ï¼Œæ­£åœ¨å‘é€è¯·æ±‚</p><p>2 ï¼ ï¼ˆè½½å…¥å®Œæˆï¼‰send()æ–¹æ³•æ‰§è¡Œå®Œæˆï¼Œå·²ç»æ¥æ”¶åˆ°å…¨éƒ¨å“åº”å†…å®¹</p><p>3 ï¼ ï¼ˆäº¤äº’ï¼‰æ­£åœ¨è§£æå“åº”å†…å®¹</p><p>4 ï¼ ï¼ˆå®Œæˆï¼‰å“åº”å†…å®¹è§£æå®Œæˆï¼Œå¯ä»¥åœ¨å®¢æˆ·ç«¯è°ƒç”¨äº†</p></details><h3 id="_2ã€å®ç°ä¸€ä¸ª-ajax" tabindex="-1">2ã€å®ç°ä¸€ä¸ª Ajax <a class="header-anchor" href="#_2ã€å®ç°ä¸€ä¸ª-ajax" aria-label="Permalink to &quot;2ã€å®ç°ä¸€ä¸ª Ajax&quot;">â€‹</a></h3><p><strong>è€ƒå¯Ÿç‚¹ï¼šajax</strong></p><details class="details custom-block"><summary>æŸ¥çœ‹å‚è€ƒå›ç­”</summary><p>AJAX åˆ›å»ºå¼‚æ­¥å¯¹è±¡ XMLHttpRequest</p><p>æ“ä½œ XMLHttpRequest å¯¹è±¡</p><p>ï¼ˆ1ï¼‰è®¾ç½®è¯·æ±‚å‚æ•°ï¼ˆè¯·æ±‚æ–¹å¼ï¼Œè¯·æ±‚é¡µé¢çš„ç›¸å¯¹è·¯å¾„ï¼Œæ˜¯å¦å¼‚æ­¥ï¼‰</p><p>ï¼ˆ2ï¼‰è®¾ç½®å›è°ƒå‡½æ•°ï¼Œä¸€ä¸ªå¤„ç†æœåŠ¡å™¨å“åº”çš„å‡½æ•°ï¼Œä½¿ç”¨ onreadystatechange ï¼Œç±»ä¼¼å‡½æ•°æŒ‡é’ˆ</p><p>ï¼ˆ3ï¼‰è·å–å¼‚æ­¥å¯¹è±¡çš„ readyState å±æ€§ï¼šè¯¥å±æ€§å­˜æœ‰æœåŠ¡å™¨å“åº”çš„çŠ¶æ€ä¿¡æ¯ã€‚æ¯å½“ readyState æ”¹å˜æ—¶ï¼Œonreadystatechange å‡½æ•°å°±ä¼šè¢«æ‰§è¡Œã€‚</p><p>ï¼ˆ4ï¼‰åˆ¤æ–­å“åº”æŠ¥æ–‡çš„çŠ¶æ€ï¼Œè‹¥ä¸º 200 è¯´æ˜æœåŠ¡å™¨æ­£å¸¸è¿è¡Œå¹¶è¿”å›å“åº”æ•°æ®ã€‚</p><p>ï¼ˆ5ï¼‰è¯»å–å“åº”æ•°æ®ï¼Œå¯ä»¥é€šè¿‡ responseText å±æ€§æ¥å–å›ç”±æœåŠ¡å™¨è¿”å›çš„æ•°æ®ã€‚</p></details><h3 id="_3ã€å¦‚ä½•å®ç°-ajax-è¯·æ±‚-å‡å¦‚æˆ‘æœ‰å¤šä¸ªè¯·æ±‚-æˆ‘éœ€è¦è®©è¿™äº›-ajax-è¯·æ±‚æŒ‰ç…§æŸç§é¡ºåºä¸€æ¬¡æ‰§è¡Œ-æœ‰ä»€ä¹ˆåŠæ³•å‘¢-å¦‚ä½•å¤„ç†-ajax-è·¨åŸŸ" tabindex="-1">3ã€å¦‚ä½•å®ç° ajax è¯·æ±‚ï¼Œå‡å¦‚æˆ‘æœ‰å¤šä¸ªè¯·æ±‚ï¼Œæˆ‘éœ€è¦è®©è¿™äº› ajax è¯·æ±‚æŒ‰ç…§æŸç§é¡ºåºä¸€æ¬¡æ‰§è¡Œï¼Œæœ‰ä»€ä¹ˆåŠæ³•å‘¢ï¼Ÿå¦‚ä½•å¤„ç† ajax è·¨åŸŸ <a class="header-anchor" href="#_3ã€å¦‚ä½•å®ç°-ajax-è¯·æ±‚-å‡å¦‚æˆ‘æœ‰å¤šä¸ªè¯·æ±‚-æˆ‘éœ€è¦è®©è¿™äº›-ajax-è¯·æ±‚æŒ‰ç…§æŸç§é¡ºåºä¸€æ¬¡æ‰§è¡Œ-æœ‰ä»€ä¹ˆåŠæ³•å‘¢-å¦‚ä½•å¤„ç†-ajax-è·¨åŸŸ" aria-label="Permalink to &quot;3ã€å¦‚ä½•å®ç° ajax è¯·æ±‚ï¼Œå‡å¦‚æˆ‘æœ‰å¤šä¸ªè¯·æ±‚ï¼Œæˆ‘éœ€è¦è®©è¿™äº› ajax è¯·æ±‚æŒ‰ç…§æŸç§é¡ºåºä¸€æ¬¡æ‰§è¡Œï¼Œæœ‰ä»€ä¹ˆåŠæ³•å‘¢ï¼Ÿå¦‚ä½•å¤„ç† ajax è·¨åŸŸ&quot;">â€‹</a></h3><p><strong>è€ƒå¯Ÿç‚¹ï¼šJS</strong></p><details class="details custom-block"><summary>æŸ¥çœ‹å‚è€ƒå›ç­”</summary><p>é€šè¿‡å®ä¾‹åŒ–ä¸€ä¸ª XMLHttpRequest å¯¹è±¡å¾—åˆ°ä¸€ä¸ªå®ä¾‹ï¼Œè°ƒç”¨å®ä¾‹çš„ open æ–¹æ³•ä¸ºè¿™æ¬¡ ajax è¯·æ±‚è®¾å®šç›¸åº”çš„ http æ–¹æ³•ï¼Œç›¸åº”çš„åœ°å€å’Œæ˜¯å¦å¼‚æ­¥ï¼Œä»¥å¼‚æ­¥ä¸ºä¾‹ï¼Œè°ƒç”¨ send æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•å¯ä»¥è®¾å®šéœ€è¦å‘é€çš„æŠ¥æ–‡ä¸»ä½“ï¼Œç„¶åé€šè¿‡ç›‘å¬ readystatechange äº‹ä»¶ï¼Œé€šè¿‡è¿™ä¸ªå®ä¾‹ çš„ readyState å±æ€§æ¥åˆ¤æ–­è¿™ä¸ª ajax è¯·æ±‚çŠ¶æ€ï¼Œå…¶ä¸­åˆ†ä¸º 0ï¼Œ1ï¼Œ2ï¼Œ3ï¼Œ4 è¿™å››ç§çŠ¶æ€ï¼ˆ0 æœªåˆå§‹åŒ–ï¼Œ1 è½½å…¥/æ­£åœ¨å‘é€è¯·æ±‚ 2 è½½å…¥å®Œæˆ/æ•°æ®æ¥æ”¶ï¼Œ3 äº¤äº’/è§£ææ•°æ®ï¼Œ4 æ¥æ”¶æ•°æ®å®Œæˆï¼‰ï¼Œå½“çŠ¶æ€ä¸º 4 çš„æ—¶å€™ä¹Ÿå°±æ˜¯æ¥å—æ•°æ®å®Œæˆçš„æ—¶å€™ï¼Œè¿™æ—¶å€™å¯ä»¥é€šè¿‡å®ä¾‹çš„ status å±æ€§åˆ¤æ–­è¿™ä¸ªè¯·æ±‚æ˜¯å¦æˆåŠŸ</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> xhr</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> XMLHttpRequest</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E5C07B;">xhr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">open</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;get&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;aabb.php&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">xhr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">send</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">xhr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">onreadystatechange</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">xhr</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">readyState</span><span style="color:#56B6C2;"> ==</span><span style="color:#D19A66;"> 4</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">xhr</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">status</span><span style="color:#56B6C2;"> ==</span><span style="color:#D19A66;"> 200</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">			console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">xhr</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">responseText</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>ä½¿ ajax è¯·æ±‚æŒ‰ç…§é˜Ÿåˆ—é¡ºåºæ‰§è¡Œï¼Œé€šè¿‡è°ƒç”¨é€’å½’å‡½æ•°ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// æŒ‰é¡ºåºæ‰§è¡Œå¤šä¸ª ajax å‘½ä»¤ï¼Œå› ä¸ºæ•°é‡ä¸å®šï¼Œæ‰€ä»¥é‡‡ç”¨é€’å½’</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> send</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">action</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">arg2</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// å°†å¤šä¸ªå‘½ä»¤æŒ‰é¡ºåºå°è£…æˆæ•°ç»„å¯¹è±¡ï¼Œé€’å½’æ‰§è¡Œ</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// åˆ©ç”¨äº† deferred å¯¹è±¡æ§åˆ¶å›è°ƒå‡½æ•°çš„ç‰¹ç‚¹</span></span>
<span class="line"><span style="color:#E5C07B;">	$</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">when</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">send_action</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">action</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">], </span><span style="color:#E06C75;">arg2</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">		.</span><span style="color:#61AFEF;">done</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// å‰ä¸€ä¸ª ajax å›è°ƒå‡½æ•°å®Œæ¯•ä¹‹ååˆ¤æ–­é˜Ÿåˆ—é•¿åº¦</span></span>
<span class="line"><span style="color:#C678DD;">			if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">action</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#56B6C2;"> &gt;</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">				// é˜Ÿåˆ—é•¿åº¦å¤§äº 1ï¼Œåˆ™å¼¹å‡ºç¬¬ä¸€ä¸ªï¼Œç»§ç»­é€’å½’æ‰§è¡Œè¯¥é˜Ÿåˆ—</span></span>
<span class="line"><span style="color:#E5C07B;">				action</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">shift</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#61AFEF;">				send</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">action</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">arg2</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#ABB2BF;">		})</span></span>
<span class="line"><span style="color:#ABB2BF;">		.</span><span style="color:#61AFEF;">fail</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// é˜Ÿåˆ—ä¸­å…ƒç´ è¯·æ±‚å¤±è´¥åçš„é€»è¾‘</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			//</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// é‡è¯•å‘é€</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			//send(action, arg2);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			//</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// å¿½ç•¥é”™è¯¯è¿›è¡Œä¸‹ä¸ª</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// if (action.length &gt; 1) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// é˜Ÿåˆ—é•¿åº¦å¤§äº 1ï¼Œåˆ™å¼¹å‡ºç¬¬ä¸€ä¸ªï¼Œç»§ç»­é€’å½’æ‰§è¡Œè¯¥é˜Ÿåˆ—</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			//  action.shift();</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			//  send(action, arg2);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// }</span></span>
<span class="line"><span style="color:#ABB2BF;">		});</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// å¤„ç†æ¯ä¸ªå‘½ä»¤çš„ ajax è¯·æ±‚ä»¥åŠå›è°ƒå‡½æ•°</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> send_action</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">command</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">arg2</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> dtd</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> $</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">Deferred</span><span style="color:#ABB2BF;">(); </span><span style="color:#7F848E;font-style:italic;">// å®šä¹‰ deferred å¯¹è±¡</span></span>
<span class="line"><span style="color:#E5C07B;">	$</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">post</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;url&quot;</span><span style="color:#ABB2BF;">, {</span></span>
<span class="line"><span style="color:#E06C75;">		command</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">command</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">		arg2</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">arg2</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">	})</span></span>
<span class="line"><span style="color:#ABB2BF;">		.</span><span style="color:#61AFEF;">done</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">json</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">			json</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> $</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">parseJSON</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">json</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// æ¯æ¬¡è¯·æ±‚å›è°ƒå‡½æ•°çš„å¤„ç†é€»è¾‘</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			//</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			//</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			//</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// é€»è¾‘ç»“æŸ</span></span>
<span class="line"><span style="color:#E5C07B;">			dtd</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">resolve</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">		})</span></span>
<span class="line"><span style="color:#ABB2BF;">		.</span><span style="color:#61AFEF;">fail</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// ajax è¯·æ±‚å¤±è´¥çš„é€»è¾‘</span></span>
<span class="line"><span style="color:#E5C07B;">			dtd</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">reject</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">		});</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E5C07B;"> dtd</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">promise</span><span style="color:#ABB2BF;">(); </span><span style="color:#7F848E;font-style:italic;">// è¿”å› Deferred å¯¹è±¡çš„ promiseï¼Œé˜²æ­¢åœ¨å¤–éƒ¨ä¿®æ”¹çŠ¶æ€</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br></div></div></details><h4 id="å†™å‡ºåŸç”Ÿ-ajax" tabindex="-1">å†™å‡ºåŸç”Ÿ Ajax <a class="header-anchor" href="#å†™å‡ºåŸç”Ÿ-ajax" aria-label="Permalink to &quot;å†™å‡ºåŸç”Ÿ Ajax&quot;">â€‹</a></h4><p><strong>è€ƒå¯Ÿç‚¹ï¼šajax</strong></p><details class="details custom-block"><summary>æŸ¥çœ‹å‚è€ƒå›ç­”</summary><p>Ajax èƒ½å¤Ÿåœ¨ä¸é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢çš„æƒ…å†µä¸‹ä¸æœåŠ¡å™¨äº¤æ¢æ•°æ®å¹¶æ›´æ–°éƒ¨åˆ†ç½‘é¡µå†…å®¹ï¼Œå®ç°å±€éƒ¨åˆ·æ–°ï¼Œå¤§å¤§é™ä½äº†èµ„æºçš„æµªè´¹ï¼Œæ˜¯ä¸€é—¨ç”¨äºå¿«é€Ÿåˆ›å»ºåŠ¨æ€ç½‘é¡µçš„æŠ€æœ¯ï¼Œajax çš„ä½¿ç”¨åˆ†ä¸ºå››éƒ¨åˆ†ï¼š</p><p>1ã€åˆ›å»º XMLHttpRequest å¯¹è±¡ var xhr = new XMLHttpRequest();</p><p>2ã€å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œä½¿ç”¨ xmlHttpRequest å¯¹è±¡çš„ open å’Œ send æ–¹æ³•</p><p>3ã€ç›‘å¬çŠ¶æ€å˜åŒ–ï¼Œæ‰§è¡Œç›¸åº”å›è°ƒå‡½æ•°</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// 1. ç®€å•æµç¨‹</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// å®ä¾‹åŒ–</span></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> xhr</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> XMLHttpRequest</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// åˆå§‹åŒ–</span></span>
<span class="line"><span style="color:#E5C07B;">xhr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">open</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">method</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">url</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">async</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// å‘é€è¯·æ±‚</span></span>
<span class="line"><span style="color:#E5C07B;">xhr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">send</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">data</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// è®¾ç½®çŠ¶æ€å˜åŒ–å›è°ƒå¤„ç†è¯·æ±‚ç»“æœ</span></span>
<span class="line"><span style="color:#E5C07B;">xhr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">onreadystatechange</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">xhr</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">readyStatus</span><span style="color:#56B6C2;"> ===</span><span style="color:#D19A66;"> 4</span><span style="color:#56B6C2;"> &amp;&amp;</span><span style="color:#E5C07B;"> xhr</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">status</span><span style="color:#56B6C2;"> ===</span><span style="color:#D19A66;"> 200</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">		console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">xhr</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">responseText</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 2. åŸºäºpromiseå®ç°</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> ajax</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">options</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// è¯·æ±‚åœ°å€</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> url</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> options</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">url</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// è¯·æ±‚æ–¹æ³•</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> method</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> options</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">method</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">toLocaleLowerCase</span><span style="color:#ABB2BF;">() </span><span style="color:#56B6C2;">||</span><span style="color:#98C379;"> &quot;get&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// é»˜è®¤ä¸ºå¼‚æ­¥true</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> async</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> options</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">async</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// è¯·æ±‚å‚æ•°</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> data</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> options</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">data</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// å®ä¾‹åŒ–</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> xhr</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> XMLHttpRequest</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// è¯·æ±‚è¶…æ—¶</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">options</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">timeout</span><span style="color:#56B6C2;"> &amp;&amp;</span><span style="color:#E5C07B;"> options</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">timeout</span><span style="color:#56B6C2;"> &gt;</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">		xhr</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">timeout</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> options</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">timeout</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// è¿”å›ä¸€ä¸ªPromiseå®ä¾‹</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#C678DD;"> new</span><span style="color:#E5C07B;"> Promise</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">resolve</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">reject</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">		xhr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">ontimeout</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#E06C75;"> reject</span><span style="color:#56B6C2;"> &amp;&amp;</span><span style="color:#61AFEF;"> reject</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;è¯·æ±‚è¶…æ—¶&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// ç›‘å¬çŠ¶æ€å˜åŒ–å›è°ƒ</span></span>
<span class="line"><span style="color:#E5C07B;">		xhr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">onreadystatechange</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">			if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">xhr</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">readyState</span><span style="color:#56B6C2;"> ==</span><span style="color:#D19A66;"> 4</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">				// 200-300 ä¹‹é—´è¡¨ç¤ºè¯·æ±‚æˆåŠŸï¼Œ304èµ„æºæœªå˜ï¼Œå–ç¼“å­˜</span></span>
<span class="line"><span style="color:#C678DD;">				if</span><span style="color:#ABB2BF;"> ((</span><span style="color:#E5C07B;">xhr</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">status</span><span style="color:#56B6C2;"> &gt;=</span><span style="color:#D19A66;"> 200</span><span style="color:#56B6C2;"> &amp;&amp;</span><span style="color:#E5C07B;"> xhr</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">status</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#D19A66;"> 300</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">||</span><span style="color:#E5C07B;"> xhr</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">status</span><span style="color:#56B6C2;"> ==</span><span style="color:#D19A66;"> 304</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">					resolve</span><span style="color:#56B6C2;"> &amp;&amp;</span><span style="color:#61AFEF;"> resolve</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">xhr</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">responseText</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">				} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">					reject</span><span style="color:#56B6C2;"> &amp;&amp;</span><span style="color:#61AFEF;"> reject</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">				}</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#ABB2BF;">		};</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// é”™è¯¯å›è°ƒ</span></span>
<span class="line"><span style="color:#E5C07B;">		xhr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">onerror</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">err</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#E06C75;"> reject</span><span style="color:#56B6C2;"> &amp;&amp;</span><span style="color:#61AFEF;"> reject</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">err</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">		let</span><span style="color:#E06C75;"> paramArr</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [];</span></span>
<span class="line"><span style="color:#C678DD;">		let</span><span style="color:#E06C75;"> encodeData</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// å¤„ç†è¯·æ±‚å‚æ•°</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">data</span><span style="color:#C678DD;"> instanceof</span><span style="color:#E5C07B;"> Object</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">			for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> key</span><span style="color:#C678DD;"> in</span><span style="color:#E06C75;"> data</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">				// å‚æ•°æ‹¼æ¥éœ€è¦é€šè¿‡ encodeURIComponent è¿›è¡Œç¼–ç </span></span>
<span class="line"><span style="color:#E5C07B;">				paramArr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#61AFEF;">					encodeURIComponent</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">+</span><span style="color:#98C379;"> &quot;=&quot;</span><span style="color:#56B6C2;"> +</span><span style="color:#61AFEF;"> encodeURIComponent</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">data</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">])</span></span>
<span class="line"><span style="color:#ABB2BF;">				);</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#E06C75;">			encodeData</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> paramArr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">join</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;&amp;&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// getè¯·æ±‚æ‹¼æ¥å‚æ•°</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">method</span><span style="color:#56B6C2;"> ===</span><span style="color:#98C379;"> &quot;get&quot;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// æ£€æµ‹urlä¸­æ˜¯å¦å·²å­˜åœ¨ ? åŠå…¶ä½ç½®</span></span>
<span class="line"><span style="color:#C678DD;">			const</span><span style="color:#E5C07B;"> index</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> url</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">indexOf</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;?&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">			if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">index</span><span style="color:#56B6C2;"> ===</span><span style="color:#56B6C2;"> -</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">) </span><span style="color:#E06C75;">url</span><span style="color:#56B6C2;"> +=</span><span style="color:#98C379;"> &quot;?&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">			else</span><span style="color:#C678DD;"> if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">index</span><span style="color:#56B6C2;"> !==</span><span style="color:#E5C07B;"> url</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#56B6C2;"> -</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">) </span><span style="color:#E06C75;">url</span><span style="color:#56B6C2;"> +=</span><span style="color:#98C379;"> &quot;&amp;&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// æ‹¼æ¥url</span></span>
<span class="line"><span style="color:#E06C75;">			url</span><span style="color:#56B6C2;"> +=</span><span style="color:#E06C75;"> encodeData</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// åˆå§‹åŒ–</span></span>
<span class="line"><span style="color:#E5C07B;">		xhr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">open</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">method</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">url</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">async</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// å‘é€è¯·æ±‚</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">method</span><span style="color:#56B6C2;"> ===</span><span style="color:#98C379;"> &quot;get&quot;</span><span style="color:#ABB2BF;">) </span><span style="color:#E5C07B;">xhr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">send</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">		else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// post æ–¹å¼éœ€è¦è®¾ç½®è¯·æ±‚å¤´</span></span>
<span class="line"><span style="color:#E5C07B;">			xhr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setRequestHeader</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#98C379;">				&quot;Content-Type&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;">				&quot;application/x-www-formï¿¾urlencoded;charset=UTF-8&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">			);</span></span>
<span class="line"><span style="color:#E5C07B;">			xhr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">send</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">encodeData</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	});</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br></div></div></details><h3 id="_5ã€å¦‚ä½•å®ç°ä¸€ä¸ª-ajax-è¯·æ±‚-å¦‚æœæˆ‘æƒ³å‘å‡ºä¸¤ä¸ªæœ‰é¡ºåºçš„-ajax-éœ€è¦æ€ä¹ˆåš" tabindex="-1">5ã€å¦‚ä½•å®ç°ä¸€ä¸ª ajax è¯·æ±‚ï¼Ÿå¦‚æœæˆ‘æƒ³å‘å‡ºä¸¤ä¸ªæœ‰é¡ºåºçš„ ajax éœ€è¦æ€ä¹ˆåšï¼Ÿ <a class="header-anchor" href="#_5ã€å¦‚ä½•å®ç°ä¸€ä¸ª-ajax-è¯·æ±‚-å¦‚æœæˆ‘æƒ³å‘å‡ºä¸¤ä¸ªæœ‰é¡ºåºçš„-ajax-éœ€è¦æ€ä¹ˆåš" aria-label="Permalink to &quot;5ã€å¦‚ä½•å®ç°ä¸€ä¸ª ajax è¯·æ±‚ï¼Ÿå¦‚æœæˆ‘æƒ³å‘å‡ºä¸¤ä¸ªæœ‰é¡ºåºçš„ ajax éœ€è¦æ€ä¹ˆåšï¼Ÿ&quot;">â€‹</a></h3><p><strong>è€ƒå¯Ÿç‚¹ï¼šajax</strong></p><details class="details custom-block"><summary>æŸ¥çœ‹å‚è€ƒå›ç­”</summary><p>AJAX åˆ›å»ºå¼‚æ­¥å¯¹è±¡ XMLHttpRequest</p><p>æ“ä½œ XMLHttpRequest å¯¹è±¡</p><p>ï¼ˆ1ï¼‰è®¾ç½®è¯·æ±‚å‚æ•°ï¼ˆè¯·æ±‚æ–¹å¼ï¼Œè¯·æ±‚é¡µé¢çš„ç›¸å¯¹è·¯å¾„ï¼Œæ˜¯å¦å¼‚æ­¥ï¼‰</p><p>ï¼ˆ2ï¼‰è®¾ç½®å›è°ƒå‡½æ•°ï¼Œä¸€ä¸ªå¤„ç†æœåŠ¡å™¨å“åº”çš„å‡½æ•°ï¼Œä½¿ç”¨ onreadystatechange ï¼Œç±»ä¼¼å‡½æ•°æŒ‡é’ˆ</p><p>ï¼ˆ3ï¼‰è·å–å¼‚æ­¥å¯¹è±¡çš„ readyState å±æ€§ï¼šè¯¥å±æ€§å­˜æœ‰æœåŠ¡å™¨å“åº”çš„çŠ¶æ€ä¿¡æ¯ã€‚æ¯å½“ readyState æ”¹å˜æ—¶ï¼Œonreadystatechange å‡½æ•°å°±ä¼šè¢«æ‰§è¡Œã€‚</p><p>ï¼ˆ4ï¼‰åˆ¤æ–­å“åº”æŠ¥æ–‡çš„çŠ¶æ€ï¼Œè‹¥ä¸º 200 è¯´æ˜æœåŠ¡å™¨æ­£å¸¸è¿è¡Œå¹¶è¿”å›å“åº”æ•°æ®ã€‚</p><p>ï¼ˆ5ï¼‰è¯»å–å“åº”æ•°æ®ï¼Œå¯ä»¥é€šè¿‡ responseText å±æ€§æ¥å–å›ç”±æœåŠ¡å™¨è¿”å›çš„æ•°æ®ã€‚</p><p>å‘å‡ºä¸¤ä¸ªæœ‰é¡ºåºçš„ ajaxï¼Œå¯ä»¥ç”¨å›è°ƒå‡½æ•°ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ Promise.then æˆ–è€… async ç­‰ã€‚</p></details><h3 id="_6ã€fetch-å’Œ-ajax-æ¯”æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹" tabindex="-1">6ã€Fetch å’Œ Ajax æ¯”æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹ï¼Ÿ <a class="header-anchor" href="#_6ã€fetch-å’Œ-ajax-æ¯”æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹" aria-label="Permalink to &quot;6ã€Fetch å’Œ Ajax æ¯”æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹ï¼Ÿ&quot;">â€‹</a></h3><p><strong>è€ƒå¯Ÿç‚¹ï¼šajax</strong></p><details class="details custom-block"><summary>æŸ¥çœ‹å‚è€ƒå›ç­”</summary><p>promise æ–¹ä¾¿å¼‚æ­¥ï¼Œåœ¨ä¸æƒ³ç”¨ jQuery çš„æƒ…å†µä¸‹ï¼Œç›¸æ¯”åŸç”Ÿçš„ ajaxï¼Œä¹Ÿæ¯”è¾ƒå¥½å†™ã€‚</p></details><h3 id="_7ã€åŸç”Ÿ-js-çš„-ajax" tabindex="-1">7ã€åŸç”Ÿ JS çš„ ajax <a class="header-anchor" href="#_7ã€åŸç”Ÿ-js-çš„-ajax" aria-label="Permalink to &quot;7ã€åŸç”Ÿ JS çš„ ajax&quot;">â€‹</a></h3><p><strong>è€ƒå¯Ÿç‚¹ï¼šajax</strong></p><details class="details custom-block"><summary>æŸ¥çœ‹å‚è€ƒå›ç­”</summary><p>AJAX åˆ›å»ºå¼‚æ­¥å¯¹è±¡ XMLHttpRequest</p><p>æ“ä½œ XMLHttpRequest å¯¹è±¡</p><p>ï¼ˆ1ï¼‰è®¾ç½®è¯·æ±‚å‚æ•°ï¼ˆè¯·æ±‚æ–¹å¼ï¼Œè¯·æ±‚é¡µé¢çš„ç›¸å¯¹è·¯å¾„ï¼Œæ˜¯å¦å¼‚æ­¥ï¼‰</p><p>ï¼ˆ2ï¼‰è®¾ç½®å›è°ƒå‡½æ•°ï¼Œä¸€ä¸ªå¤„ç†æœåŠ¡å™¨å“åº”çš„å‡½æ•°ï¼Œä½¿ç”¨ onreadystatechange ï¼Œç±»ä¼¼å‡½æ•°æŒ‡é’ˆ</p><p>ï¼ˆ3ï¼‰è·å–å¼‚æ­¥å¯¹è±¡çš„ readyState å±æ€§ï¼šè¯¥å±æ€§å­˜æœ‰æœåŠ¡å™¨å“åº”çš„çŠ¶æ€ä¿¡æ¯ã€‚æ¯å½“ readyState æ”¹å˜æ—¶ï¼Œonreadystatechange å‡½æ•°å°±ä¼šè¢«æ‰§è¡Œã€‚</p><p>ï¼ˆ4ï¼‰åˆ¤æ–­å“åº”æŠ¥æ–‡çš„çŠ¶æ€ï¼Œè‹¥ä¸º 200 è¯´æ˜æœåŠ¡å™¨æ­£å¸¸è¿è¡Œå¹¶è¿”å›å“åº”æ•°æ®ã€‚</p><p>ï¼ˆ5ï¼‰è¯»å–å“åº”æ•°æ®ï¼Œå¯ä»¥é€šè¿‡ responseText å±æ€§æ¥å–å›ç”±æœåŠ¡å™¨è¿”å›çš„æ•°æ®ã€‚</p></details><h2 id="å®ç°æ¯éš”ä¸€ç§’æ‰“å°-1-2-3-4" tabindex="-1">å®ç°æ¯éš”ä¸€ç§’æ‰“å° 1,2,3,4 <a class="header-anchor" href="#å®ç°æ¯éš”ä¸€ç§’æ‰“å°-1-2-3-4" aria-label="Permalink to &quot;å®ç°æ¯éš”ä¸€ç§’æ‰“å° 1,2,3,4&quot;">â€‹</a></h2><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// 1.ä½¿ç”¨ let å—çº§ä½œç”¨åŸŸ</span></span>
<span class="line"><span style="color:#C678DD;">for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#D19A66;"> 5</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#61AFEF;">	setTimeout</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">		console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	}, </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> *</span><span style="color:#D19A66;"> 1000</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 2.ä½¿ç”¨é—­åŒ…å®ç°</span></span>
<span class="line"><span style="color:#C678DD;">for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#D19A66;"> 5</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">	(</span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">j</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#61AFEF;">		setTimeout</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">			console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">j</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}, </span><span style="color:#E06C75;">j</span><span style="color:#56B6C2;"> *</span><span style="color:#D19A66;"> 1000</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	})(</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="å¾ªç¯æ‰“å°çº¢é»„ç»¿" tabindex="-1">å¾ªç¯æ‰“å°çº¢é»„ç»¿ <a class="header-anchor" href="#å¾ªç¯æ‰“å°çº¢é»„ç»¿" aria-label="Permalink to &quot;å¾ªç¯æ‰“å°çº¢é»„ç»¿&quot;">â€‹</a></h2><p>åœºæ™¯ï¼šçº¢ç¯ 3s äº®ä¸€æ¬¡ï¼Œç»¿ç¯ 1s äº®ä¸€æ¬¡ï¼Œé»„ç¯ 2s äº®ä¸€æ¬¡ï¼›å¦‚ä½•è®©ä¸‰ä¸ªç¯ä¸æ–­<strong>äº¤æ›¿é‡å¤</strong>äº®ç¯ï¼Ÿ</p><p><strong>çº¢ç»¿ç¯å‡½æ•°</strong></p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> red</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">	console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;red&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> green</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">	console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;green&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> yellow</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">	console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;yellow&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="promise-å®ç°" tabindex="-1">promise å®ç° <a class="header-anchor" href="#promise-å®ç°" aria-label="Permalink to &quot;promise å®ç°&quot;">â€‹</a></h3><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#61AFEF;"> task</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">timer</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">light</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span></span>
<span class="line"><span style="color:#C678DD;">	new</span><span style="color:#E5C07B;"> Promise</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">resolve</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">reject</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">		setTimeout</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">			if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">light</span><span style="color:#56B6C2;"> ===</span><span style="color:#98C379;"> &quot;red&quot;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#61AFEF;">				red</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">			} </span><span style="color:#C678DD;">else</span><span style="color:#C678DD;"> if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">light</span><span style="color:#56B6C2;"> ===</span><span style="color:#98C379;"> &quot;green&quot;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#61AFEF;">				green</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">			} </span><span style="color:#C678DD;">else</span><span style="color:#C678DD;"> if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">light</span><span style="color:#56B6C2;"> ===</span><span style="color:#98C379;"> &quot;yellow&quot;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#61AFEF;">				yellow</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#61AFEF;">			resolve</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">		}, </span><span style="color:#E06C75;">timer</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	});</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#61AFEF;"> step</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">	task</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">3000</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;red&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">		.</span><span style="color:#61AFEF;">then</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#61AFEF;"> task</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">2000</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;green&quot;</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">		.</span><span style="color:#61AFEF;">then</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#61AFEF;"> task</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1000</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;yellow&quot;</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">		.</span><span style="color:#61AFEF;">then</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">step</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#61AFEF;">step</span><span style="color:#ABB2BF;">();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h3 id="async-await-å®ç°" tabindex="-1">async/await å®ç° <a class="header-anchor" href="#async-await-å®ç°" aria-label="Permalink to &quot;async/await å®ç°&quot;">â€‹</a></h3><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#61AFEF;"> task</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">timer</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">light</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#C678DD;"> new</span><span style="color:#E5C07B;"> Promise</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">resolve</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">reject</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">		setTimeout</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">			if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">light</span><span style="color:#56B6C2;"> ===</span><span style="color:#98C379;"> &quot;red&quot;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#61AFEF;">				red</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">			} </span><span style="color:#C678DD;">else</span><span style="color:#C678DD;"> if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">light</span><span style="color:#56B6C2;"> ===</span><span style="color:#98C379;"> &quot;green&quot;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#61AFEF;">				green</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">			} </span><span style="color:#C678DD;">else</span><span style="color:#C678DD;"> if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">light</span><span style="color:#56B6C2;"> ===</span><span style="color:#98C379;"> &quot;yellow&quot;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#61AFEF;">				yellow</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#61AFEF;">			resolve</span><span style="color:#ABB2BF;">(); </span><span style="color:#7F848E;font-style:italic;">//æ³¨æ„ï¼Œè¦resolveè®©PromiseçŠ¶æ€å˜æˆfulfilledï¼Œä¸ç„¶ä¼šä¸€ç›´æ˜¯pendingï¼Œæ— æ³•å¾€ä¸‹æ‰§è¡Œ</span></span>
<span class="line"><span style="color:#ABB2BF;">		}, </span><span style="color:#E06C75;">timer</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	});</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#61AFEF;"> taskRunner</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> async</span><span style="color:#ABB2BF;"> () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">	await</span><span style="color:#61AFEF;"> task</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">3000</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;red&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">	await</span><span style="color:#61AFEF;"> task</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">2000</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;green&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">	await</span><span style="color:#61AFEF;"> task</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1000</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;yellow&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#61AFEF;">	taskRunner</span><span style="color:#ABB2BF;">(); </span><span style="color:#7F848E;font-style:italic;">//é€’å½’</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#61AFEF;">taskRunner</span><span style="color:#ABB2BF;">();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>æµ‹è¯•ç»“æœï¼š</p><p><img src="/FrontEndInterviewQuestion/assets/885132591cbd476a8e16e1704b0ae011tplv-k3u1fbpfcp-jj-mark3024000q75.CzdyKBVE.webp" alt="Snipaste_2024-02-20_17-17-06.png"></p><h2 id="å†™ä¸€ä¸ªå€’è®¡æ—¶åŠŸèƒ½" tabindex="-1">å†™ä¸€ä¸ªå€’è®¡æ—¶åŠŸèƒ½ <a class="header-anchor" href="#å†™ä¸€ä¸ªå€’è®¡æ—¶åŠŸèƒ½" aria-label="Permalink to &quot;å†™ä¸€ä¸ªå€’è®¡æ—¶åŠŸèƒ½&quot;">â€‹</a></h2><p><a href="https://juejin.cn/post/7343921389084426277" target="_blank" rel="noreferrer">é˜¿é‡Œé¢è¯•ï¼šå†™ä¸€ä¸ªå€’è®¡æ—¶åŠŸèƒ½åˆ·æ‰äº†80% çš„äºº - æ˜é‡‘ (juejin.cn)</a></p><h2 id="å†™ä¸€ä¸ªé€šç”¨çš„äº‹ä»¶ä¾¦å¬å™¨å‡½æ•°" tabindex="-1">å†™ä¸€ä¸ªé€šç”¨çš„äº‹ä»¶ä¾¦å¬å™¨å‡½æ•° <a class="header-anchor" href="#å†™ä¸€ä¸ªé€šç”¨çš„äº‹ä»¶ä¾¦å¬å™¨å‡½æ•°" aria-label="Permalink to &quot;å†™ä¸€ä¸ªé€šç”¨çš„äº‹ä»¶ä¾¦å¬å™¨å‡½æ•°&quot;">â€‹</a></h2><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// event(äº‹ä»¶)å·¥å…·é›†ï¼Œæ¥æºï¼šgithub.com/markyun</span></span>
<span class="line"><span style="color:#E5C07B;">markyun</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">Event</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// è§†èƒ½â¼’åˆ†åˆ«ä½¿ç”¨dom0||dom2||IEæ–¹å¼ æ¥ç»‘å®šäº‹ä»¶</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// å‚æ•°ï¼š æ“ä½œçš„å…ƒç´ ,äº‹ä»¶åç§° ,äº‹ä»¶å¤„ç†ç¨‹åº</span></span>
<span class="line"><span style="color:#61AFEF;">	addEvent</span><span style="color:#ABB2BF;">: </span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">element</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">type</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">handler</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">element</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">addEventListener</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			//äº‹ä»¶ç±»å‹ã€éœ€è¦æ‰§è¡Œçš„å‡½æ•°ã€æ˜¯å¦æ•æ‰</span></span>
<span class="line"><span style="color:#E5C07B;">			element</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">addEventListener</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">type</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">handler</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">false</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		} </span><span style="color:#C678DD;">else</span><span style="color:#C678DD;"> if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">element</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">attachEvent</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">			element</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">attachEvent</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;on&quot;</span><span style="color:#56B6C2;"> +</span><span style="color:#E06C75;"> type</span><span style="color:#ABB2BF;">, </span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#E5C07B;">				handler</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">call</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">element</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">			});</span></span>
<span class="line"><span style="color:#ABB2BF;">		} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">			element</span><span style="color:#ABB2BF;">[</span><span style="color:#98C379;">&quot;on&quot;</span><span style="color:#56B6C2;"> +</span><span style="color:#E06C75;"> type</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> handler</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// ç§»é™¤äº‹ä»¶</span></span>
<span class="line"><span style="color:#61AFEF;">	removeEvent</span><span style="color:#ABB2BF;">: </span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">element</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">type</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">handler</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">element</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">removeEventListener</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">			element</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">removeEventListener</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">type</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">handler</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">false</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		} </span><span style="color:#C678DD;">else</span><span style="color:#C678DD;"> if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">element</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">datachEvent</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">			element</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">detachEvent</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;on&quot;</span><span style="color:#56B6C2;"> +</span><span style="color:#E06C75;"> type</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">handler</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">			element</span><span style="color:#ABB2BF;">[</span><span style="color:#98C379;">&quot;on&quot;</span><span style="color:#56B6C2;"> +</span><span style="color:#E06C75;"> type</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// é˜»æ­¢äº‹ä»¶ (ä¸»è¦æ˜¯äº‹ä»¶å†’æ³¡ï¼Œå› ä¸ºIEä¸æ”¯æŒäº‹ä»¶æ•è·)</span></span>
<span class="line"><span style="color:#61AFEF;">	stopPropagation</span><span style="color:#ABB2BF;">: </span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">ev</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">ev</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">stopPropagation</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">			ev</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">stopPropagation</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">		} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">			ev</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">cancelBubble</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> true</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// å–æ¶ˆäº‹ä»¶çš„é»˜è®¤è¡Œä¸º</span></span>
<span class="line"><span style="color:#61AFEF;">	preventDefault</span><span style="color:#ABB2BF;">: </span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">event</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">event</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">preventDefault</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">			event</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">preventDefault</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">		} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">			event</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">returnValue</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> false</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// è·å–äº‹ä»¶ç›®æ ‡</span></span>
<span class="line"><span style="color:#61AFEF;">	getTarget</span><span style="color:#ABB2BF;">: </span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">event</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E5C07B;"> event</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">target</span><span style="color:#56B6C2;"> ||</span><span style="color:#E5C07B;"> event</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">srcElement</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br></div></div><h2 id="å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ä¸ºæ•°ç»„" tabindex="-1">å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ä¸ºæ•°ç»„ <a class="header-anchor" href="#å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ä¸ºæ•°ç»„" aria-label="Permalink to &quot;å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ä¸ºæ•°ç»„&quot;">â€‹</a></h2><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> isArray</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">arg</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">typeof</span><span style="color:#E06C75;"> arg</span><span style="color:#56B6C2;"> ===</span><span style="color:#98C379;"> &quot;object&quot;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E5C07B;"> Object</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prototype</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">toString</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">call</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">arg</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">===</span><span style="color:#98C379;"> &quot;[object Array]&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#D19A66;"> false</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="ç¼–å†™ä¸€ä¸ªæ–¹æ³•-æ±‚ä¸€ä¸ªå­—ç¬¦ä¸²çš„å­—èŠ‚é•¿åº¦" tabindex="-1">ç¼–å†™ä¸€ä¸ªæ–¹æ³• æ±‚ä¸€ä¸ªå­—ç¬¦ä¸²çš„å­—èŠ‚é•¿åº¦ <a class="header-anchor" href="#ç¼–å†™ä¸€ä¸ªæ–¹æ³•-æ±‚ä¸€ä¸ªå­—ç¬¦ä¸²çš„å­—èŠ‚é•¿åº¦" aria-label="Permalink to &quot;ç¼–å†™ä¸€ä¸ªæ–¹æ³• æ±‚ä¸€ä¸ªå­—ç¬¦ä¸²çš„å­—èŠ‚é•¿åº¦&quot;">â€‹</a></h2><p>å‡è®¾ï¼šä¸€ä¸ªè‹±æ–‡å­—ç¬¦å ç”¨ä¸€ä¸ªå­—èŠ‚ï¼Œä¸€ä¸ªä¸­æ–‡å­—ç¬¦å ç”¨ä¸¤ä¸ªå­—èŠ‚</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> GetBytes</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">str</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> len</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> str</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> bytes</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> len</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E06C75;"> len</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">str</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">charCodeAt</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">&gt;</span><span style="color:#D19A66;"> 255</span><span style="color:#ABB2BF;">) </span><span style="color:#E06C75;">bytes</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> bytes</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#61AFEF;">alert</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">GetBytes</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;ä½ å¥½,as&quot;</span><span style="color:#ABB2BF;">));</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="å¼‚æ­¥å¹¶å‘æ•°é™åˆ¶" tabindex="-1">å¼‚æ­¥å¹¶å‘æ•°é™åˆ¶ <a class="header-anchor" href="#å¼‚æ­¥å¹¶å‘æ•°é™åˆ¶" aria-label="Permalink to &quot;å¼‚æ­¥å¹¶å‘æ•°é™åˆ¶&quot;">â€‹</a></h2><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#7F848E;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> * å…³é”®ç‚¹</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> * 1. new promise ä¸€ç»åˆ›å»ºï¼Œç«‹å³æ‰§è¡Œ</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> * 2. ä½¿ç”¨ Promise.resolve().then å¯ä»¥æŠŠä»»åŠ¡åŠ åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œé˜²æ­¢ç«‹å³æ‰§è¡Œè¿­ä»£æ–¹æ³•</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> * 3. å¾®ä»»åŠ¡å¤„ç†è¿‡ç¨‹ä¸­ï¼Œäº§ç”Ÿçš„æ–°çš„å¾®ä»»åŠ¡ï¼Œä¼šåœ¨åŒä¸€äº‹ä»¶å¾ªç¯å†…ï¼Œè¿½åŠ åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—é‡Œ</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> * 4. ä½¿ç”¨ race åœ¨æŸä¸ªä»»åŠ¡å®Œæˆæ—¶ï¼Œç»§ç»­æ·»åŠ ä»»åŠ¡ï¼Œä¿æŒä»»åŠ¡æŒ‰ç…§æœ€å¤§å¹¶å‘æ•°è¿›è¡Œæ‰§è¡Œ</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> * 5. ä»»åŠ¡å®Œæˆåï¼Œéœ€è¦ä» doingTasks ä¸­ç§»å‡º</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> limit</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">count</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">array</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">iterateFunc</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> tasks</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [];</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> doingTasks</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [];</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#61AFEF;"> enqueue</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> ===</span><span style="color:#E5C07B;"> array</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">			return</span><span style="color:#E5C07B;"> Promise</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">resolve</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#C678DD;">		const</span><span style="color:#E5C07B;"> task</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Promise</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">resolve</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">then</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#61AFEF;"> iterateFunc</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">array</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">]));</span></span>
<span class="line"><span style="color:#E5C07B;">		tasks</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">task</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">		const</span><span style="color:#E5C07B;"> doing</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> task</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">then</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span></span>
<span class="line"><span style="color:#E5C07B;">			doingTasks</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">splice</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">doingTasks</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">indexOf</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">doing</span><span style="color:#ABB2BF;">), </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">		);</span></span>
<span class="line"><span style="color:#E5C07B;">		doingTasks</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">doing</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">		const</span><span style="color:#E5C07B;"> res</span><span style="color:#56B6C2;"> =</span></span>
<span class="line"><span style="color:#E5C07B;">			doingTasks</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#56B6C2;"> &gt;=</span><span style="color:#E06C75;"> count</span><span style="color:#C678DD;"> ?</span><span style="color:#E5C07B;"> Promise</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">race</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">doingTasks</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">:</span><span style="color:#E5C07B;"> Promise</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">resolve</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E5C07B;"> res</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">then</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">enqueue</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	};</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#61AFEF;"> enqueue</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">then</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#E5C07B;"> Promise</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">all</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">tasks</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// test</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#61AFEF;"> timeout</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">i</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span></span>
<span class="line"><span style="color:#C678DD;">	new</span><span style="color:#E5C07B;"> Promise</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">resolve</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#61AFEF;"> setTimeout</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#61AFEF;"> resolve</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">), </span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#61AFEF;">limit</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">, [</span><span style="color:#D19A66;">1000</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">1000</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">1000</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">1000</span><span style="color:#ABB2BF;">], </span><span style="color:#E06C75;">timeout</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">then</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">res</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">	console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">res</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><h2 id="å¼‚æ­¥ä¸²è¡Œ-å¼‚æ­¥å¹¶è¡Œ" tabindex="-1">å¼‚æ­¥ä¸²è¡Œ | å¼‚æ­¥å¹¶è¡Œ <a class="header-anchor" href="#å¼‚æ­¥ä¸²è¡Œ-å¼‚æ­¥å¹¶è¡Œ" aria-label="Permalink to &quot;å¼‚æ­¥ä¸²è¡Œ | å¼‚æ­¥å¹¶è¡Œ&quot;">â€‹</a></h2><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// å­—èŠ‚é¢è¯•é¢˜ï¼Œå®ç°ä¸€ä¸ªå¼‚æ­¥åŠ æ³•</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> asyncAdd</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">a</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">b</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">callback</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#61AFEF;">	setTimeout</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#61AFEF;">		callback</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">a</span><span style="color:#56B6C2;"> +</span><span style="color:#E06C75;"> b</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	}, </span><span style="color:#D19A66;">500</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// è§£å†³æ–¹æ¡ˆ</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 1. promisify</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#61AFEF;"> promiseAdd</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">a</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">b</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span></span>
<span class="line"><span style="color:#C678DD;">	new</span><span style="color:#E5C07B;"> Promise</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">resolve</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">reject</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">		asyncAdd</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">b</span><span style="color:#ABB2BF;">, (</span><span style="color:#E06C75;font-style:italic;">err</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">res</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">			if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">err</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#61AFEF;">				reject</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">err</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">			} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">				resolve</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">res</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#ABB2BF;">		});</span></span>
<span class="line"><span style="color:#ABB2BF;">	});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 2. ä¸²è¡Œå¤„ç†</span></span>
<span class="line"><span style="color:#C678DD;">async</span><span style="color:#C678DD;"> function</span><span style="color:#61AFEF;"> serialSum</span><span style="color:#ABB2BF;">(...</span><span style="color:#E06C75;font-style:italic;">args</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E5C07B;"> args</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">reduce</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">		(</span><span style="color:#E06C75;font-style:italic;">task</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">now</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#E5C07B;"> task</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">then</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">res</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#61AFEF;"> promiseAdd</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">res</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">now</span><span style="color:#ABB2BF;">)),</span></span>
<span class="line"><span style="color:#E5C07B;">		Promise</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">resolve</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">	);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 3. å¹¶è¡Œå¤„ç†</span></span>
<span class="line"><span style="color:#C678DD;">async</span><span style="color:#C678DD;"> function</span><span style="color:#61AFEF;"> parallelSum</span><span style="color:#ABB2BF;">(...</span><span style="color:#E06C75;font-style:italic;">args</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">args</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#56B6C2;"> ===</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">return</span><span style="color:#E06C75;"> args</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> tasks</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [];</span></span>
<span class="line"><span style="color:#C678DD;">	for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E5C07B;"> args</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> +=</span><span style="color:#D19A66;"> 2</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">		tasks</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">promiseAdd</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">args</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">], </span><span style="color:#E06C75;">args</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> +</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">||</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> results</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> await</span><span style="color:#E5C07B;"> Promise</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">all</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">tasks</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#61AFEF;"> parallelSum</span><span style="color:#ABB2BF;">(...</span><span style="color:#E06C75;">results</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// æµ‹è¯•</span></span>
<span class="line"><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">async</span><span style="color:#ABB2BF;"> () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">	console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Running...&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> res1</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> await</span><span style="color:#61AFEF;"> serialSum</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">4</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">5</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">8</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">9</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">10</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">11</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">12</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">	console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">res1</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> res2</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> await</span><span style="color:#61AFEF;"> parallelSum</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">4</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">5</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">8</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">9</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">10</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">11</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">12</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">	console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">res2</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">	console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Done&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">})();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br></div></div><h2 id="å›¾ç‰‡æ‡’åŠ è½½" tabindex="-1">å›¾ç‰‡æ‡’åŠ è½½ <a class="header-anchor" href="#å›¾ç‰‡æ‡’åŠ è½½" aria-label="Permalink to &quot;å›¾ç‰‡æ‡’åŠ è½½&quot;">â€‹</a></h2><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// &lt;img src=&quot;default.png&quot; data-src=&quot;https://xxxx/real.png&quot;&gt;</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> isVisible</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">el</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> position</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> el</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getBoundingClientRect</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> windowHeight</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> document</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">documentElement</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">clientHeight</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// é¡¶éƒ¨è¾¹ç¼˜å¯è§</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> topVisible</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> position</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">top</span><span style="color:#56B6C2;"> &gt;</span><span style="color:#D19A66;"> 0</span><span style="color:#56B6C2;"> &amp;&amp;</span><span style="color:#E5C07B;"> position</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">top</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E06C75;"> windowHeight</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// åº•éƒ¨è¾¹ç¼˜å¯è§</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> bottomVisible</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> position</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">bottom</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E06C75;"> windowHeight</span><span style="color:#56B6C2;"> &amp;&amp;</span><span style="color:#E5C07B;"> position</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">bottom</span><span style="color:#56B6C2;"> &gt;</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> topVisible</span><span style="color:#56B6C2;"> ||</span><span style="color:#E06C75;"> bottomVisible</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> imageLazyLoad</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> images</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> document</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">querySelectorAll</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;img&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">	for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> img</span><span style="color:#C678DD;"> of</span><span style="color:#E06C75;"> images</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		const</span><span style="color:#E5C07B;"> realSrc</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> img</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">dataset</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">src</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E06C75;">realSrc</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">continue</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#61AFEF;">isVisible</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">img</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#E5C07B;">			img</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">src</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> realSrc</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">			img</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">dataset</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">src</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// æµ‹è¯•</span></span>
<span class="line"><span style="color:#E5C07B;">window</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">addEventListener</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;load&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">imageLazyLoad</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">window</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">addEventListener</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;scroll&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">imageLazyLoad</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// or</span></span>
<span class="line"><span style="color:#E5C07B;">window</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">addEventListener</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;scroll&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#61AFEF;">throttle</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">imageLazyLoad</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">1000</span><span style="color:#ABB2BF;">));</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p>æ¬¢è¿ä¸€èµ·è¡¥å…… ~ <a href="https://github.com/iboying/interview-snippets" target="_blank" rel="noreferrer">Github åœ°å€</a></p><p>æœ€è¿‘ç”¨å¿ƒæ€»ç»“äº†ä¸€ç¯‡<a href="https://juejin.cn/post/6887563385886474254" target="_blank" rel="noreferrer">ã€Šç³»ç»Ÿçš„å‡†å¤‡å‰ç«¯é¢è¯•ã€‹</a>ï¼Œæ–‡ç« æ•…æ„æ²¡æœ‰å†™æ˜å¾ˆå¤šå…·ä½“çš„çŸ¥è¯†ç»†èŠ‚ï¼Œè€Œæ˜¯ä»æ•´ä½“ä¸Šåˆ†æäº†é¢è¯•çš„å„ä¸ªç¯èŠ‚ä¸é‡ç‚¹ï¼Œå¸Œæœ›èƒ½å¤Ÿç»™é¢è¯•æ–°æ‰‹ä¸€äº›æŒ‡å¯¼ï¼Œä¸è¿‡ç”±äº&quot;æˆ‘ç†è§£ä¸äº†&quot;çš„åŸå› ï¼Œè¿™ç¯‡æ–‡ç« ä¸€ç›´æ— æ³•ä¸Šæ¨èï¼Œåˆ°ç›®å‰ä¸ºæ­¢è¿˜æ²¡æœ‰äººèƒ½çœ‹åˆ°ï¼Œå¦‚æœæ„Ÿå…´è¶£çš„è¯ï¼Œå¯ä»¥ç‚¹å‡»æŸ¥çœ‹ï¼Œæˆ‘è‡ªè®¤ä¸ºè¯¥æ–‡ç« æ˜¯èƒ½ä½œä¸ºé¢è¯•æ–°æ‰‹çš„ä¸€ä»½è¡ŒåŠ¨æŒ‡å—çš„ï¼Œå¸Œæœ›èƒ½å¸®åˆ°éœ€è¦çš„äººã€‚</p><h2 id="compose-å‡½æ•°å®ç°" tabindex="-1">compose å‡½æ•°å®ç° <a class="header-anchor" href="#compose-å‡½æ•°å®ç°" aria-label="Permalink to &quot;compose å‡½æ•°å®ç°&quot;">â€‹</a></h2><p>é¢˜ç›®æè¿°ï¼šå®ç°ä¸€ä¸ª compose å‡½æ•°</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// ç”¨æ³•å¦‚ä¸‹:</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> fn1</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">x</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> x</span><span style="color:#56B6C2;"> +</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> fn2</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">x</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> x</span><span style="color:#56B6C2;"> +</span><span style="color:#D19A66;"> 2</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> fn3</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">x</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> x</span><span style="color:#56B6C2;"> +</span><span style="color:#D19A66;"> 3</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> fn4</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">x</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> x</span><span style="color:#56B6C2;"> +</span><span style="color:#D19A66;"> 4</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> a</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> compose</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">fn1</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">fn2</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">fn3</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">fn4</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">a</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">)); </span><span style="color:#7F848E;font-style:italic;">// 1+4+3+2+1=11</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>å®ç°ä»£ç å¦‚ä¸‹:</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> compose</span><span style="color:#ABB2BF;">(...</span><span style="color:#E06C75;font-style:italic;">fn</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E5C07B;">fn</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">v</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#E06C75;"> v</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">fn</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#56B6C2;"> ===</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">return</span><span style="color:#E06C75;"> fn</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E5C07B;"> fn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">reduce</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">		(</span><span style="color:#E06C75;font-style:italic;">pre</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">cur</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">			(...</span><span style="color:#E06C75;font-style:italic;">args</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span></span>
<span class="line"><span style="color:#61AFEF;">				pre</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">cur</span><span style="color:#ABB2BF;">(...</span><span style="color:#E06C75;">args</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">	);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="å¯„ç”Ÿç»„åˆç»§æ‰¿" tabindex="-1">å¯„ç”Ÿç»„åˆç»§æ‰¿ <a class="header-anchor" href="#å¯„ç”Ÿç»„åˆç»§æ‰¿" aria-label="Permalink to &quot;å¯„ç”Ÿç»„åˆç»§æ‰¿&quot;">â€‹</a></h2><p>é¢˜ç›®æè¿°:å®ç°ä¸€ä¸ªä½ è®¤ä¸ºä¸é”™çš„ js ç»§æ‰¿æ–¹å¼</p><p>å®ç°ä»£ç å¦‚ä¸‹:</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> Parent</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">name</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">	this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">name</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> name</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">	this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">say</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">		console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">111</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	};</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#E5C07B;">Parent</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prototype</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">play</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">	console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">222</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> Children</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">name</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">	Parent</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">call</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">	this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">name</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> name</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#E5C07B;">Children</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prototype</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Object</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">create</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Parent</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prototype</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">Children</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prototype</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">constructor</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> Children</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// let child = new Children(&quot;111&quot;);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// // console.log(child.name);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// // child.say();</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// // child.play();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="å®ç°æœ‰å¹¶è¡Œé™åˆ¶çš„-promise-è°ƒåº¦å™¨" tabindex="-1">å®ç°æœ‰å¹¶è¡Œé™åˆ¶çš„ Promise è°ƒåº¦å™¨ <a class="header-anchor" href="#å®ç°æœ‰å¹¶è¡Œé™åˆ¶çš„-promise-è°ƒåº¦å™¨" aria-label="Permalink to &quot;å®ç°æœ‰å¹¶è¡Œé™åˆ¶çš„ Promise è°ƒåº¦å™¨&quot;">â€‹</a></h2><p>é¢˜ç›®æè¿°:JS å®ç°ä¸€ä¸ªå¸¦å¹¶å‘é™åˆ¶çš„å¼‚æ­¥è°ƒåº¦å™¨ Schedulerï¼Œä¿è¯åŒæ—¶è¿è¡Œçš„ä»»åŠ¡æœ€å¤šæœ‰ä¸¤ä¸ª</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#61AFEF;"> addTask</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1000</span><span style="color:#ABB2BF;">,</span><span style="color:#98C379;">&quot;1&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#61AFEF;"> addTask</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">500</span><span style="color:#ABB2BF;">,</span><span style="color:#98C379;">&quot;2&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#61AFEF;"> addTask</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">300</span><span style="color:#ABB2BF;">,</span><span style="color:#98C379;">&quot;3&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#61AFEF;"> addTask</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">400</span><span style="color:#ABB2BF;">,</span><span style="color:#98C379;">&quot;4&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;"> çš„è¾“å‡ºé¡ºåºæ˜¯</span><span style="color:#ABB2BF;">ï¼š</span><span style="color:#D19A66;">2</span><span style="color:#D19A66;"> 3</span><span style="color:#D19A66;"> 1</span><span style="color:#D19A66;"> 4</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;"> æ•´ä¸ªçš„å®Œæ•´æ‰§è¡Œæµç¨‹</span><span style="color:#ABB2BF;">ï¼š</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">ä¸€å¼€å§‹1</span><span style="color:#ABB2BF;">ã€2</span><span style="color:#E06C75;">ä¸¤ä¸ªä»»åŠ¡å¼€å§‹æ‰§è¡Œ</span></span>
<span class="line"><span style="color:#ABB2BF;">500</span><span style="color:#E06C75;">msæ—¶</span><span style="color:#ABB2BF;">ï¼Œ2</span><span style="color:#E06C75;">ä»»åŠ¡æ‰§è¡Œå®Œæ¯•</span><span style="color:#ABB2BF;">ï¼Œ</span><span style="color:#E06C75;">è¾“å‡º2</span><span style="color:#ABB2BF;">ï¼Œ</span><span style="color:#E06C75;">ä»»åŠ¡3å¼€å§‹æ‰§è¡Œ</span></span>
<span class="line"><span style="color:#ABB2BF;">800</span><span style="color:#E06C75;">msæ—¶</span><span style="color:#ABB2BF;">ï¼Œ3</span><span style="color:#E06C75;">ä»»åŠ¡æ‰§è¡Œå®Œæ¯•</span><span style="color:#ABB2BF;">ï¼Œ</span><span style="color:#E06C75;">è¾“å‡º3</span><span style="color:#ABB2BF;">ï¼Œ</span><span style="color:#E06C75;">ä»»åŠ¡4å¼€å§‹æ‰§è¡Œ</span></span>
<span class="line"><span style="color:#ABB2BF;">1000</span><span style="color:#E06C75;">msæ—¶</span><span style="color:#ABB2BF;">ï¼Œ1</span><span style="color:#E06C75;">ä»»åŠ¡æ‰§è¡Œå®Œæ¯•</span><span style="color:#ABB2BF;">ï¼Œ</span><span style="color:#E06C75;">è¾“å‡º1</span><span style="color:#ABB2BF;">ï¼Œ</span><span style="color:#E06C75;">æ­¤æ—¶åªå‰©ä¸‹4ä»»åŠ¡åœ¨æ‰§è¡Œ</span></span>
<span class="line"><span style="color:#ABB2BF;">1200</span><span style="color:#E06C75;">msæ—¶</span><span style="color:#ABB2BF;">ï¼Œ4</span><span style="color:#E06C75;">ä»»åŠ¡æ‰§è¡Œå®Œæ¯•</span><span style="color:#ABB2BF;">ï¼Œ</span><span style="color:#E06C75;">è¾“å‡º4</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>å®ç°ä»£ç å¦‚ä¸‹:</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">class</span><span style="color:#E5C07B;"> Scheduler</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">	constructor</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">limit</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">queue</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [];</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">maxCount</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> limit</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">runCounts</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#61AFEF;">	add</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">time</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">order</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		const</span><span style="color:#61AFEF;"> promiseCreator</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">			return</span><span style="color:#C678DD;"> new</span><span style="color:#E5C07B;"> Promise</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">resolve</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">reject</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">				setTimeout</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">					console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">order</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#61AFEF;">					resolve</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">				}, </span><span style="color:#E06C75;">time</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">			});</span></span>
<span class="line"><span style="color:#ABB2BF;">		};</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">queue</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">promiseCreator</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#61AFEF;">	taskStart</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#C678DD;">		for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">maxCount</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">			this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">request</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#61AFEF;">	request</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">queue</span><span style="color:#56B6C2;"> ||</span><span style="color:#56B6C2;"> !</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">queue</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#56B6C2;"> ||</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">runCounts</span><span style="color:#56B6C2;"> &gt;=</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">maxCount</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">			return</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">runCounts</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">queue</span></span>
<span class="line"><span style="color:#ABB2BF;">			.</span><span style="color:#61AFEF;">shift</span><span style="color:#ABB2BF;">()()</span></span>
<span class="line"><span style="color:#ABB2BF;">			.</span><span style="color:#61AFEF;">then</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">				this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">runCounts</span><span style="color:#56B6C2;">--</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">				this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">request</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">			});</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> scheduler</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Scheduler</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#61AFEF;"> addTask</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">time</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">order</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">	scheduler</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">add</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">time</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">order</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#61AFEF;">addTask</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1000</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;1&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#61AFEF;">addTask</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">500</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;2&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#61AFEF;">addTask</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">300</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;3&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#61AFEF;">addTask</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">400</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;4&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">scheduler</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">taskStart</span><span style="color:#ABB2BF;">();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div><h1 id="å¸¸ç”¨æ–¹æ³•å®ç°" tabindex="-1">å¸¸ç”¨æ–¹æ³•å®ç° <a class="header-anchor" href="#å¸¸ç”¨æ–¹æ³•å®ç°" aria-label="Permalink to &quot;å¸¸ç”¨æ–¹æ³•å®ç°&quot;">â€‹</a></h1><h2 id="å°è£…å‡½æ•°å°†å­—ç¬¦ä¸²è¿›è¡Œé©¼å³°å‘½å" tabindex="-1">å°è£…å‡½æ•°å°†å­—ç¬¦ä¸²è¿›è¡Œé©¼å³°å‘½å <a class="header-anchor" href="#å°è£…å‡½æ•°å°†å­—ç¬¦ä¸²è¿›è¡Œé©¼å³°å‘½å" aria-label="Permalink to &quot;å°è£…å‡½æ•°å°†å­—ç¬¦ä¸²è¿›è¡Œé©¼å³°å‘½å&quot;">â€‹</a></h2><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#ABB2BF;">&lt;!</span><span style="color:#E06C75;">DOCTYPE</span><span style="color:#D19A66;"> html</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">html</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">meta</span><span style="color:#D19A66;"> charset</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;UTF-8&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">title</span><span style="color:#ABB2BF;">&gt;&lt;/</span><span style="color:#E06C75;">title</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;/</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">script</span><span style="color:#D19A66;"> type</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;text/javascript&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// å·²çŸ¥æœ‰å­—ç¬¦ä¸²foo=&#39;get-element-by-id&#39;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// å†™ä¸€ä¸ªfunctionå°†å…¶è½¬åŒ–æˆé©¼å³°è¡¨ç¤ºæ³•&quot;getElementById&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// è‡ªå®šä¹‰å‡½æ•°</span></span>
<span class="line"><span style="color:#C678DD;">			function</span><span style="color:#61AFEF;"> toString</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">foo</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">				// æ ¹æ®æŸä¸ªå­—ç¬¦è¿›è¡Œåˆ‡å‰²</span></span>
<span class="line"><span style="color:#C678DD;">				var</span><span style="color:#E06C75;"> arr</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> foo</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">split</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;-&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">				// è·å–æ¯ä¸ªå…ƒç´ ä¸­çš„ç¬¬ä¸€ä¸ªå­—ç¬¦å¹¶è½¬æ¢æˆå¤§å†™ï¼šæ‹¿å‡ºç¬¬ä¸€ä¸ªå­—ç¬¦è½¬å¤§å†™å¹¶æ‹¼æ¥åé¢çš„å­—ç¬¦</span></span>
<span class="line"><span style="color:#E5C07B;">				console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#E06C75;">					arr</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">].</span><span style="color:#61AFEF;">charAt</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">toUpperCase</span><span style="color:#ABB2BF;">() </span><span style="color:#56B6C2;">+</span><span style="color:#E06C75;"> arr</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">].</span><span style="color:#61AFEF;">substr</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">arr</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">].</span><span style="color:#E06C75;">length</span><span style="color:#56B6C2;"> -</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">				);</span></span>
<span class="line"><span style="color:#C678DD;">				for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E5C07B;"> arr</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">					arr</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span></span>
<span class="line"><span style="color:#E06C75;">						arr</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">].</span><span style="color:#61AFEF;">charAt</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">toUpperCase</span><span style="color:#ABB2BF;">() </span><span style="color:#56B6C2;">+</span></span>
<span class="line"><span style="color:#E06C75;">						arr</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">].</span><span style="color:#61AFEF;">substr</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">arr</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">].</span><span style="color:#E06C75;">length</span><span style="color:#56B6C2;"> -</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">				}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">				// æ ¹æ®æŸä¸ªå­—ç¬¦å°†æ•°ç»„è½¬æˆå­—ç¬¦ä¸²</span></span>
<span class="line"><span style="color:#C678DD;">				return</span><span style="color:#E5C07B;"> arr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">join</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">			console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">toString</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;get-element-by-id&quot;</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;/</span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">html</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><h2 id="åè½¬æ•°ç»„" tabindex="-1">åè½¬æ•°ç»„ <a class="header-anchor" href="#åè½¬æ•°ç»„" aria-label="Permalink to &quot;åè½¬æ•°ç»„&quot;">â€‹</a></h2><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#ABB2BF;">&lt;!</span><span style="color:#E06C75;">DOCTYPE</span><span style="color:#D19A66;"> html</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">html</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">meta</span><span style="color:#D19A66;"> charset</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;UTF-8&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">title</span><span style="color:#ABB2BF;">&gt;&lt;/</span><span style="color:#E06C75;">title</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;/</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">script</span><span style="color:#D19A66;"> type</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;text/javascript&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;">			var</span><span style="color:#E06C75;"> arr</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">4</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">5</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">6</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">7</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">8</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// äº¤æ¢çš„æ¬¡æ•°ï¼šarr.length/2</span></span>
<span class="line"><span style="color:#C678DD;">			for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E5C07B;"> arr</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#56B6C2;"> /</span><span style="color:#D19A66;"> 2</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">				// arr[0]    arr[arr.length-1-0];</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">				// arr[1]    arr[arr.length-1-1];</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">				// arr[2]    arr[arr.length-1-2];</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">				// arr[3]    arr[arr.length-1-3];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">				// å€ŸåŠ©ç¬¬ä¸‰æ–¹å˜é‡äº¤æ¢ä¸¤ä¸ªå˜é‡çš„å€¼ï¼Œä½ç½®ï¼šarr.length-1-i</span></span>
<span class="line"><span style="color:#C678DD;">				var</span><span style="color:#E06C75;"> temp</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> arr</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#E06C75;">				arr</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> arr</span><span style="color:#ABB2BF;">[</span><span style="color:#E5C07B;">arr</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#56B6C2;"> -</span><span style="color:#D19A66;"> 1</span><span style="color:#56B6C2;"> -</span><span style="color:#E06C75;"> i</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#E06C75;">				arr</span><span style="color:#ABB2BF;">[</span><span style="color:#E5C07B;">arr</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#56B6C2;"> -</span><span style="color:#D19A66;"> 1</span><span style="color:#56B6C2;"> -</span><span style="color:#E06C75;"> i</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> temp</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#E5C07B;">			console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">arr</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;/</span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">html</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h2 id="å»æ‰æ•°ç»„ä¸­é‡å¤æ€§çš„æ•°æ®" tabindex="-1">å»æ‰æ•°ç»„ä¸­é‡å¤æ€§çš„æ•°æ® <a class="header-anchor" href="#å»æ‰æ•°ç»„ä¸­é‡å¤æ€§çš„æ•°æ®" aria-label="Permalink to &quot;å»æ‰æ•°ç»„ä¸­é‡å¤æ€§çš„æ•°æ®&quot;">â€‹</a></h2><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#ABB2BF;">&lt;!</span><span style="color:#E06C75;">DOCTYPE</span><span style="color:#D19A66;"> html</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">html</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">meta</span><span style="color:#D19A66;"> charset</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;UTF-8&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">title</span><span style="color:#ABB2BF;">&gt;&lt;/</span><span style="color:#E06C75;">title</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;/</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">script</span><span style="color:#D19A66;"> type</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;text/javascript&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			/*</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			 * 1.åˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„,æŠŠåŸæ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ æ’å…¥åˆ°æ–°æ•°ç»„ä¸­</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			 * 2.éå†åŸæ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ åˆ†åˆ«å’Œæ–°æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ è¿›è¡Œæ¯”è¾ƒï¼Œä¸ç›¸åŒçš„æ’å…¥æ–°æ•°ç»„ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			 */</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// åŸæ•°ç»„</span></span>
<span class="line"><span style="color:#C678DD;">			var</span><span style="color:#E06C75;"> arr</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [</span><span style="color:#D19A66;">8</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">11</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">20</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">5</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">20</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">8</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">4</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">8</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// æ–°æ•°ç»„</span></span>
<span class="line"><span style="color:#C678DD;">			var</span><span style="color:#E06C75;"> t</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> []; </span><span style="color:#7F848E;font-style:italic;">//var t = [8,11];</span></span>
<span class="line"><span style="color:#E06C75;">			t</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> arr</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// arrä¸­çš„æ¯ä¸ªå…ƒç´ </span></span>
<span class="line"><span style="color:#C678DD;">			for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E5C07B;"> arr</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">				// tä¸­çš„æ¯ä¸ªå…ƒç´ </span></span>
<span class="line"><span style="color:#C678DD;">				for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> k</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">k</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E5C07B;"> t</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">k</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">					// å½“åŸæ•°ç»„ä¸­çš„å€¼å’Œæ–°æ•°ç»„ä¸­çš„å€¼ç›¸åŒçš„æ—¶å€™,å°±æ²¡æœ‰å¿…è¦å†ç»§ç»­æ¯”è¾ƒäº†,è·³å‡ºå†…å¾ªç¯</span></span>
<span class="line"><span style="color:#C678DD;">					if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">t</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">k</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">==</span><span style="color:#E06C75;"> arr</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">]) {</span></span>
<span class="line"><span style="color:#C678DD;">						break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">					}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">					// æ‹¿åŸæ•°ç»„ä¸­çš„æŸä¸ªå…ƒç´ æ¯”è¾ƒåˆ°æ–°æ•°ç»„ä¸­çš„æœ€åä¸€ä¸ªå…ƒç´ è¿˜æ²¡æœ‰é‡å¤</span></span>
<span class="line"><span style="color:#C678DD;">					if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">k</span><span style="color:#56B6C2;"> ==</span><span style="color:#E5C07B;"> t</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#56B6C2;"> -</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">						// å°†æ•°æ®æ’å…¥æ–°æ•°ç»„</span></span>
<span class="line"><span style="color:#E5C07B;">						t</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">arr</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">]);</span></span>
<span class="line"><span style="color:#ABB2BF;">					}</span></span>
<span class="line"><span style="color:#ABB2BF;">				}</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#E5C07B;">			console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">t</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;/</span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">html</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><h2 id="å†™ä¸€ä¸ªå‡½æ•°åˆ¤æ–­å˜é‡ç±»å‹" tabindex="-1">å†™ä¸€ä¸ªå‡½æ•°åˆ¤æ–­å˜é‡ç±»å‹ <a class="header-anchor" href="#å†™ä¸€ä¸ªå‡½æ•°åˆ¤æ–­å˜é‡ç±»å‹" aria-label="Permalink to &quot;å†™ä¸€ä¸ªå‡½æ•°åˆ¤æ–­å˜é‡ç±»å‹&quot;">â€‹</a></h2><p>å‚è€ƒç­”æ¡ˆï¼š</p><div class="language-typescript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> getType</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">data</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> type</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> typeof</span><span style="color:#E06C75;"> data</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">type</span><span style="color:#56B6C2;"> !==</span><span style="color:#98C379;"> &quot;object&quot;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E06C75;"> type</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E5C07B;"> Object</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prototype</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">toString</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">call</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">data</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">replace</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">/</span><span style="color:#C678DD;">^</span><span style="color:#D19A66;">[object (</span><span style="color:#E06C75;">\S</span><span style="color:#D19A66;">+)]</span><span style="color:#C678DD;">$</span><span style="color:#E06C75;">/</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;$1&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> Person</span><span style="color:#ABB2BF;">() {}</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">getType</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">)); </span><span style="color:#7F848E;font-style:italic;">// number</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">getType</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">)); </span><span style="color:#7F848E;font-style:italic;">// boolean</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">getType</span><span style="color:#ABB2BF;">([</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">])); </span><span style="color:#7F848E;font-style:italic;">// Array</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">getType</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">/abc/</span><span style="color:#ABB2BF;">)); </span><span style="color:#7F848E;font-style:italic;">// RegExp</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">getType</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">new</span><span style="color:#61AFEF;"> Date</span><span style="color:#ABB2BF;">())); </span><span style="color:#7F848E;font-style:italic;">// Date</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">getType</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">new</span><span style="color:#61AFEF;"> Person</span><span style="color:#ABB2BF;">())); </span><span style="color:#7F848E;font-style:italic;">// Object</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">getType</span><span style="color:#ABB2BF;">({})); </span><span style="color:#7F848E;font-style:italic;">// Object</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="å®ç°ä¸€ä¸ªå‡½æ•°-å¯¹ä¸€ä¸ª-url-è¿›è¡Œè¯·æ±‚-å¤±è´¥å°±å†æ¬¡è¯·æ±‚-è¶…è¿‡æœ€å¤§æ¬¡æ•°å°±èµ°å¤±è´¥å›è°ƒ-ä»»ä½•ä¸€æ¬¡æˆåŠŸéƒ½èµ°æˆåŠŸå›è°ƒ" tabindex="-1">å®ç°ä¸€ä¸ªå‡½æ•°ï¼Œå¯¹ä¸€ä¸ª url è¿›è¡Œè¯·æ±‚,å¤±è´¥å°±å†æ¬¡è¯·æ±‚,è¶…è¿‡æœ€å¤§æ¬¡æ•°å°±èµ°å¤±è´¥å›è°ƒï¼Œä»»ä½•ä¸€æ¬¡æˆåŠŸéƒ½èµ°æˆåŠŸå›è°ƒ <a class="header-anchor" href="#å®ç°ä¸€ä¸ªå‡½æ•°-å¯¹ä¸€ä¸ª-url-è¿›è¡Œè¯·æ±‚-å¤±è´¥å°±å†æ¬¡è¯·æ±‚-è¶…è¿‡æœ€å¤§æ¬¡æ•°å°±èµ°å¤±è´¥å›è°ƒ-ä»»ä½•ä¸€æ¬¡æˆåŠŸéƒ½èµ°æˆåŠŸå›è°ƒ" aria-label="Permalink to &quot;å®ç°ä¸€ä¸ªå‡½æ•°ï¼Œå¯¹ä¸€ä¸ª url è¿›è¡Œè¯·æ±‚,å¤±è´¥å°±å†æ¬¡è¯·æ±‚,è¶…è¿‡æœ€å¤§æ¬¡æ•°å°±èµ°å¤±è´¥å›è°ƒï¼Œä»»ä½•ä¸€æ¬¡æˆåŠŸéƒ½èµ°æˆåŠŸå›è°ƒ&quot;">â€‹</a></h2><p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#7F848E;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#C678DD;font-style:italic;">@params</span><span style="color:#7F848E;font-style:italic;"> url: è¯·æ±‚æ¥å£åœ°å€;</span></span>
<span class="line"><span style="color:#C678DD;font-style:italic;">@params</span><span style="color:#7F848E;font-style:italic;"> body: è®¾ç½®çš„è¯·æ±‚ä½“;</span></span>
<span class="line"><span style="color:#C678DD;font-style:italic;">@params</span><span style="color:#7F848E;font-style:italic;"> succ: è¯·æ±‚æˆåŠŸåçš„å›è°ƒ</span></span>
<span class="line"><span style="color:#C678DD;font-style:italic;">@params</span><span style="color:#7F848E;font-style:italic;"> error: è¯·æ±‚å¤±è´¥åçš„å›è°ƒ</span></span>
<span class="line"><span style="color:#C678DD;font-style:italic;">@params</span><span style="color:#7F848E;font-style:italic;"> maxCount: è®¾ç½®è¯·æ±‚çš„æ•°é‡</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">*/</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> request</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">url</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">body</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">succ</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">error</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">maxCount</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 5</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#61AFEF;"> fetch</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">url</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">		.</span><span style="color:#61AFEF;">then</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">res</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#61AFEF;"> succ</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">res</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">		.</span><span style="color:#61AFEF;">catch</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">err</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">			if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">maxCount</span><span style="color:#56B6C2;"> &lt;=</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">return</span><span style="color:#61AFEF;"> error</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;è¯·æ±‚è¶…æ—¶&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">			return</span><span style="color:#61AFEF;"> request</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">url</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">succ</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">error</span><span style="color:#ABB2BF;">, </span><span style="color:#56B6C2;">--</span><span style="color:#E06C75;">maxCount</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		});</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// è°ƒç”¨è¯·æ±‚å‡½æ•°</span></span>
<span class="line"><span style="color:#61AFEF;">request</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#98C379;">	&quot;https://java.some.com/pc/reqCount&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">	{ </span><span style="color:#E06C75;">method</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;GET&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">headers</span><span style="color:#ABB2BF;">: {} },</span></span>
<span class="line"><span style="color:#ABB2BF;">	(</span><span style="color:#E06C75;font-style:italic;">res</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">		console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">res</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">data</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"><span style="color:#ABB2BF;">	(</span><span style="color:#E06C75;font-style:italic;">err</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">		console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">err</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h2 id="å®ç°ä¸€ä¸ª-sleep-å‡½æ•°" tabindex="-1">å®ç°ä¸€ä¸ª <code>sleep</code> å‡½æ•° <a class="header-anchor" href="#å®ç°ä¸€ä¸ª-sleep-å‡½æ•°" aria-label="Permalink to &quot;å®ç°ä¸€ä¸ª `sleep` å‡½æ•°&quot;">â€‹</a></h2><p>å‚è€ƒç­”æ¡ˆï¼š</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> sleep</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">delay</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> start</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Date</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">getTime</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">	while</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">new</span><span style="color:#61AFEF;"> Date</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">getTime</span><span style="color:#ABB2BF;">() </span><span style="color:#56B6C2;">-</span><span style="color:#E06C75;"> start</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E06C75;"> delay</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		continue</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> test</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">	console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;111&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#61AFEF;">	sleep</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">2000</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">	console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;222&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">test</span><span style="color:#ABB2BF;">();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>è¿™ç§å®ç°æ–¹å¼æ˜¯åˆ©ç”¨ä¸€ä¸ªä¼ªæ­»å¾ªç¯é˜»å¡ä¸»çº¿ç¨‹ã€‚å› ä¸º <code>JS</code> æ˜¯å•çº¿ç¨‹çš„ã€‚æ‰€ä»¥é€šè¿‡è¿™ç§æ–¹å¼å¯ä»¥å®ç°çœŸæ­£æ„ä¹‰ä¸Šçš„ <code>sleep</code>ã€‚</p><h2 id="å¦‚ä½•å®ç°-sleep-çš„æ•ˆæœ-es5-æˆ–è€…-es6" tabindex="-1">å¦‚ä½•å®ç° sleep çš„æ•ˆæœ(es5 æˆ–è€… es6) <a class="header-anchor" href="#å¦‚ä½•å®ç°-sleep-çš„æ•ˆæœ-es5-æˆ–è€…-es6" aria-label="Permalink to &quot;å¦‚ä½•å®ç° sleep çš„æ•ˆæœ(es5 æˆ–è€… es6)&quot;">â€‹</a></h2><p>å‚è€ƒå›ç­”ï¼š</p><p>(1)while å¾ªç¯çš„æ–¹å¼</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> sleep</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">ms</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> start</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Date</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">now</span><span style="color:#ABB2BF;">(),</span></span>
<span class="line"><span style="color:#E06C75;">		expire</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> start</span><span style="color:#56B6C2;"> +</span><span style="color:#E06C75;"> ms</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	while</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">Date</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">now</span><span style="color:#ABB2BF;">() </span><span style="color:#56B6C2;">&lt;</span><span style="color:#E06C75;"> expire</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">	console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;1111&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>æ‰§è¡Œ sleep(1000)ä¹‹åï¼Œä¼‘çœ äº† 1000ms ä¹‹åè¾“å‡ºäº† 1111ã€‚ä¸Šè¿°å¾ªç¯çš„æ–¹å¼ç¼ºç‚¹å¾ˆæ˜æ˜¾ï¼Œå®¹æ˜“é€ æˆæ­»å¾ªç¯ã€‚</p><p>(2)é€šè¿‡ promise æ¥å®ç°</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> sleep</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">ms</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> temple</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#E5C07B;"> Promise</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">resolve</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">		console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">111</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#61AFEF;">		setTimeout</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">resolve</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">ms</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	});</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> temple</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#61AFEF;">sleep</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">500</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">then</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// console.log(222)</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// å…ˆè¾“å‡ºäº† 111ï¼Œå»¶è¿Ÿ 500ms åè¾“å‡º 222</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>(3)é€šè¿‡ async å°è£…</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> sleep</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">ms</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#C678DD;"> new</span><span style="color:#E5C07B;"> Promise</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">resolve</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#61AFEF;"> setTimeout</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">resolve</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">ms</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#C678DD;">async</span><span style="color:#C678DD;"> function</span><span style="color:#61AFEF;"> test</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> temple</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> await</span><span style="color:#61AFEF;"> sleep</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1000</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">	console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1111</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> temple</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#61AFEF;">test</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// å»¶è¿Ÿ 1000ms è¾“å‡ºäº† 1111</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>(4).é€šè¿‡ generate æ¥å®ç°</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function*</span><span style="color:#61AFEF;"> sleep</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">ms</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	yield</span><span style="color:#C678DD;"> new</span><span style="color:#E5C07B;"> Promise</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">resolve</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">reject</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">		console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">111</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#61AFEF;">		setTimeout</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">resolve</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">ms</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	});</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#61AFEF;">sleep</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">500</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">	.</span><span style="color:#61AFEF;">next</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">	.</span><span style="color:#E5C07B;">value</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">then</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#E5C07B;">		console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">2222</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="äº§ç”Ÿä¸€ä¸ªä¸é‡å¤çš„éšæœºæ•°ç»„" tabindex="-1">äº§ç”Ÿä¸€ä¸ªä¸é‡å¤çš„éšæœºæ•°ç»„ <a class="header-anchor" href="#äº§ç”Ÿä¸€ä¸ªä¸é‡å¤çš„éšæœºæ•°ç»„" aria-label="Permalink to &quot;äº§ç”Ÿä¸€ä¸ªä¸é‡å¤çš„éšæœºæ•°ç»„&quot;">â€‹</a></h2><p>å‚è€ƒç­”æ¡ˆï¼š</p><p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// ç”Ÿæˆéšæœºæ•°</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> randomNumBoth</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">Min</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">Max</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> Range</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> Max</span><span style="color:#56B6C2;"> -</span><span style="color:#E06C75;"> Min</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> Rand</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Math</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">random</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> num</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> Min</span><span style="color:#56B6C2;"> +</span><span style="color:#E5C07B;"> Math</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">round</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">Rand</span><span style="color:#56B6C2;"> *</span><span style="color:#E06C75;"> Range</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">//å››èˆäº”å…¥</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> num</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// ç”Ÿæˆæ•°ç»„</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> randomArr</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">len</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">min</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">max</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">max</span><span style="color:#56B6C2;"> -</span><span style="color:#E06C75;"> min</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E06C75;"> len</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		//å¯ç”Ÿæˆæ•°çš„èŒƒå›´å°äºæ•°ç»„é•¿åº¦</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> hash</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">	while</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">hash</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E06C75;"> len</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		var</span><span style="color:#E06C75;"> num</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> randomNumBoth</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">min</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">max</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">hash</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">indexOf</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">num</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">==</span><span style="color:#56B6C2;"> -</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">			hash</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">num</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> hash</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// æµ‹è¯•</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">randomArr</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">10</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">100</span><span style="color:#ABB2BF;">));</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å°è£…äº†ä¸€ä¸ª <code>randomArr</code> æ–¹æ³•æ¥ç”Ÿæˆè¿™ä¸ªä¸é‡å¤çš„éšæœºæ•°ç»„ï¼Œè¯¥æ–¹æ³•æ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼Œ<code>lenã€min</code> å’Œ <code>max</code>ï¼Œåˆ†åˆ«è¡¨ç¤ºæ•°ç»„çš„é•¿åº¦ã€æœ€å°å€¼å’Œæœ€å¤§å€¼ã€‚<code>randomNumBoth</code> æ–¹æ³•ç”¨æ¥ç”Ÿæˆéšæœºæ•°ã€‚</p><h2 id="æ‰‹å†™ç”¨-proxy-å¦‚ä½•å®ç°-arr-1-çš„è®¿é—®" tabindex="-1">æ‰‹å†™ç”¨ <code>proxy</code> å¦‚ä½•å®ç° <code>arr[-1]</code> çš„è®¿é—® <a class="header-anchor" href="#æ‰‹å†™ç”¨-proxy-å¦‚ä½•å®ç°-arr-1-çš„è®¿é—®" aria-label="Permalink to &quot;æ‰‹å†™ç”¨ `proxy` å¦‚ä½•å®ç° `arr[-1]` çš„è®¿é—®&quot;">â€‹</a></h2><p>å‚è€ƒç­”æ¡ˆï¼š</p><p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#61AFEF;"> proxyArray</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">arr</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> length</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> arr</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Proxy</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">arr</span><span style="color:#ABB2BF;">, {</span></span>
<span class="line"><span style="color:#61AFEF;">		get</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">target</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">key</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">			key</span><span style="color:#56B6C2;"> =</span><span style="color:#56B6C2;"> +</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">			while</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">key</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">				key</span><span style="color:#56B6C2;"> +=</span><span style="color:#E06C75;"> length</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#C678DD;">			return</span><span style="color:#E06C75;"> target</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#ABB2BF;">		},</span></span>
<span class="line"><span style="color:#ABB2BF;">	});</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> a</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> proxyArray</span><span style="color:#ABB2BF;">([</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">4</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">5</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">6</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">7</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">8</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">9</span><span style="color:#ABB2BF;">]);</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">]); </span><span style="color:#7F848E;font-style:italic;">// 2</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">[</span><span style="color:#56B6C2;">-</span><span style="color:#D19A66;">10</span><span style="color:#ABB2BF;">]); </span><span style="color:#7F848E;font-style:italic;">// 9</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">[</span><span style="color:#56B6C2;">-</span><span style="color:#D19A66;">20</span><span style="color:#ABB2BF;">]); </span><span style="color:#7F848E;font-style:italic;">// 8</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="å®ç°ä¸€ä¸ª-once-å‡½æ•°-ä¼ å…¥å‡½æ•°å‚æ•°åªæ‰§è¡Œä¸€æ¬¡" tabindex="-1">å®ç°ä¸€ä¸ª once å‡½æ•°ï¼Œä¼ å…¥å‡½æ•°å‚æ•°åªæ‰§è¡Œä¸€æ¬¡ <a class="header-anchor" href="#å®ç°ä¸€ä¸ª-once-å‡½æ•°-ä¼ å…¥å‡½æ•°å‚æ•°åªæ‰§è¡Œä¸€æ¬¡" aria-label="Permalink to &quot;å®ç°ä¸€ä¸ª once å‡½æ•°ï¼Œä¼ å…¥å‡½æ•°å‚æ•°åªæ‰§è¡Œä¸€æ¬¡&quot;">â€‹</a></h2><details class="details custom-block"><summary>æŸ¥çœ‹å‚è€ƒå›ç­”</summary><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> ones</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">func</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> tag</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> true</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">tag</span><span style="color:#56B6C2;"> ==</span><span style="color:#D19A66;"> true</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">			func</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">apply</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">arguments</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;">			tag</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> false</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#D19A66;"> undefined</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	};</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></details><h2 id="å†™ä¸€ä¸ªå‡½æ•°-ç¬¬ä¸€ç§’æ‰“å°-1-ç¬¬äºŒç§’æ‰“å°-2" tabindex="-1">å†™ä¸€ä¸ªå‡½æ•°ï¼Œç¬¬ä¸€ç§’æ‰“å° 1ï¼Œç¬¬äºŒç§’æ‰“å° 2 <a class="header-anchor" href="#å†™ä¸€ä¸ªå‡½æ•°-ç¬¬ä¸€ç§’æ‰“å°-1-ç¬¬äºŒç§’æ‰“å°-2" aria-label="Permalink to &quot;å†™ä¸€ä¸ªå‡½æ•°ï¼Œç¬¬ä¸€ç§’æ‰“å° 1ï¼Œç¬¬äºŒç§’æ‰“å° 2&quot;">â€‹</a></h2><p><strong>è€ƒå¯Ÿç‚¹ï¼šæ•°æ®ç»“æ„ç®—æ³•</strong></p><details class="details custom-block"><summary>æŸ¥çœ‹å‚è€ƒå›ç­”</summary><p>ä¸¤ä¸ªæ–¹æ³•ï¼Œç¬¬ä¸€ä¸ªæ˜¯ç”¨ let å—çº§ä½œç”¨åŸŸ</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#D19A66;"> 5</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#61AFEF;">	setTimeout</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#E5C07B;">		console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	}, </span><span style="color:#D19A66;">1000</span><span style="color:#56B6C2;"> *</span><span style="color:#E06C75;"> i</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>ç¬¬äºŒä¸ªæ–¹æ³•é—­åŒ…</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#D19A66;"> 5</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">	(</span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">i</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#61AFEF;">		setTimeout</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#E5C07B;">			console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}, </span><span style="color:#D19A66;">1000</span><span style="color:#56B6C2;"> *</span><span style="color:#E06C75;"> i</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	})(</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></details><h2 id="å†™ä¸€ä¸ª-function-æ¸…é™¤å­—ç¬¦ä¸²å‰åçš„ç©ºæ ¼ã€‚-å…¼å®¹æ‰€æœ‰æµè§ˆå™¨" tabindex="-1">å†™ä¸€ä¸ª functionï¼Œæ¸…é™¤å­—ç¬¦ä¸²å‰åçš„ç©ºæ ¼ã€‚(å…¼å®¹æ‰€æœ‰æµè§ˆå™¨) <a class="header-anchor" href="#å†™ä¸€ä¸ª-function-æ¸…é™¤å­—ç¬¦ä¸²å‰åçš„ç©ºæ ¼ã€‚-å…¼å®¹æ‰€æœ‰æµè§ˆå™¨" aria-label="Permalink to &quot;å†™ä¸€ä¸ª functionï¼Œæ¸…é™¤å­—ç¬¦ä¸²å‰åçš„ç©ºæ ¼ã€‚(å…¼å®¹æ‰€æœ‰æµè§ˆå™¨)&quot;">â€‹</a></h2><p>ä½¿ç”¨è‡ªå¸¦æ¥å£ trim()ï¼Œè€ƒè™‘å…¼å®¹æ€§ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prototype</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">trim</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">	String</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prototype</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">trim</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">replace</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">/</span><span style="color:#C678DD;">^</span><span style="color:#E06C75;">\s</span><span style="color:#D19A66;">+</span><span style="color:#E06C75;">/</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">replace</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">/\s</span><span style="color:#D19A66;">+</span><span style="color:#C678DD;">$</span><span style="color:#E06C75;">/</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// \s åŒ¹é…ç©ºç™½å­—ç¬¦ï¼šå›è½¦ã€æ¢è¡Œã€åˆ¶è¡¨ç¬¦ tab ç©ºæ ¼</span></span>
<span class="line"><span style="color:#ABB2BF;">	};</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// test the function</span></span>
<span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> str</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot; </span><span style="color:#56B6C2;">\t\n</span><span style="color:#98C379;"> test string &quot;</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">trim</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#61AFEF;">alert</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">str</span><span style="color:#56B6C2;"> ==</span><span style="color:#98C379;"> &quot;test string&quot;</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">// alerts &quot;true&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="æ€ä¹ˆå®ç°ä¸€ä¸ªè®¡ç®—ä¸€å¹´ä¸­æœ‰å¤šå°‘å‘¨-1" tabindex="-1">æ€ä¹ˆå®ç°ä¸€ä¸ªè®¡ç®—ä¸€å¹´ä¸­æœ‰å¤šå°‘å‘¨ï¼Ÿ <a class="header-anchor" href="#æ€ä¹ˆå®ç°ä¸€ä¸ªè®¡ç®—ä¸€å¹´ä¸­æœ‰å¤šå°‘å‘¨-1" aria-label="Permalink to &quot;æ€ä¹ˆå®ç°ä¸€ä¸ªè®¡ç®—ä¸€å¹´ä¸­æœ‰å¤šå°‘å‘¨ï¼Ÿ&quot;">â€‹</a></h2><p>é¦–å…ˆä½ å¾—çŸ¥é“æ˜¯ä¸æ˜¯é—°å¹´ï¼Œä¹Ÿå°±æ˜¯ä¸€å¹´æ˜¯ 365 è¿˜æ˜¯ 366.</p><p>å…¶æ¬¡ä½ å¾—çŸ¥é“å½“å¹´ 1 æœˆ 1 å·æ˜¯å‘¨å‡ ã€‚å‡å¦‚æ˜¯å‘¨äº”ï¼Œä¸€å¹´ 365 å¤©æŠŠ 1 å· 2 å· 3 å·å‡å»ï¼Œä¹Ÿå°±æ˜¯æŠŠç¬¬ä¸€ä¸ªä¸åˆ°ä¸€å‘¨çš„å¤©æ•°å‡å»ç­‰äº 362</p><p>è¿˜å¾—çŸ¥é“æœ€åä¸€å¤©æ˜¯å‘¨å‡ ï¼ŒåŠ å…¥æ˜¯å‘¨äº”ï¼Œéœ€è¦æŠŠå‘¨ä¸€åˆ°å‘¨äº”å‡å»ï¼Œä¹Ÿå°±æ˜¯ 362-5=357.</p><p>æ­£å¸¸æƒ…å†µ 357 è¿™ä¸ªæ•°è®¡ç®—å‡ºæ¥æ˜¯ 7 çš„å€æ•°ã€‚357/7=51 ã€‚å³ä¸ºå‘¨æ•°ã€‚</p><h2 id="å†™ä¸ªå‡½æ•°-å¯ä»¥è½¬åŒ–ä¸‹åˆ’çº¿å‘½ååˆ°é©¼å³°å‘½å" tabindex="-1">å†™ä¸ªå‡½æ•°ï¼Œå¯ä»¥è½¬åŒ–ä¸‹åˆ’çº¿å‘½ååˆ°é©¼å³°å‘½å <a class="header-anchor" href="#å†™ä¸ªå‡½æ•°-å¯ä»¥è½¬åŒ–ä¸‹åˆ’çº¿å‘½ååˆ°é©¼å³°å‘½å" aria-label="Permalink to &quot;å†™ä¸ªå‡½æ•°ï¼Œå¯ä»¥è½¬åŒ–ä¸‹åˆ’çº¿å‘½ååˆ°é©¼å³°å‘½å&quot;">â€‹</a></h2><p><strong>è€ƒå¯Ÿç‚¹ï¼šJS</strong></p><details class="details custom-block"><summary>æŸ¥çœ‹å‚è€ƒå›ç­”</summary><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#E06C75;">public</span><span style="color:#E06C75;"> static</span><span style="color:#E06C75;"> String</span><span style="color:#61AFEF;"> UnderlineToHump</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">String</span><span style="color:#E06C75;"> para</span><span style="color:#ABB2BF;">){</span></span>
<span class="line"><span style="color:#E06C75;">StringBuilder</span><span style="color:#E06C75;"> result</span><span style="color:#56B6C2;">=</span><span style="color:#C678DD;">new</span><span style="color:#61AFEF;"> StringBuilder</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E06C75;">String</span><span style="color:#E06C75;"> a</span><span style="color:#ABB2BF;">[]</span><span style="color:#56B6C2;">=</span><span style="color:#E5C07B;">para</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">split</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;`&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">for</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">String</span><span style="color:#E06C75;"> s</span><span style="color:#ABB2BF;">:</span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">){</span></span>
<span class="line"><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">result</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">length</span><span style="color:#ABB2BF;">()</span><span style="color:#56B6C2;">==</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">){</span></span>
<span class="line"><span style="color:#E5C07B;">result</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">append</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">s</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">toLowerCase</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#E5C07B;">result</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">append</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">s</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">substring</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">toUpperCase</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#E5C07B;">result</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">append</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">s</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">substring</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">toLowerCase</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#C678DD;">return</span><span style="color:#E5C07B;"> result</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">toString</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div></details><h2 id="å†™ä¸€ä¸ªå‡½æ•°å¯ä»¥è®¡ç®—-sum-5-0-5-è¾“å‡º-0-sum-1-2-3-4-è¾“å‡º-10" tabindex="-1">å†™ä¸€ä¸ªå‡½æ•°å¯ä»¥è®¡ç®— sum(5,0,-5);è¾“å‡º 0; sum(1,2,3,4);è¾“å‡º 10 <a class="header-anchor" href="#å†™ä¸€ä¸ªå‡½æ•°å¯ä»¥è®¡ç®—-sum-5-0-5-è¾“å‡º-0-sum-1-2-3-4-è¾“å‡º-10" aria-label="Permalink to &quot;å†™ä¸€ä¸ªå‡½æ•°å¯ä»¥è®¡ç®— sum(5,0,-5);è¾“å‡º 0; sum(1,2,3,4);è¾“å‡º 10&quot;">â€‹</a></h2><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> calc</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> result</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E5C07B;"> arguments</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		var</span><span style="color:#E06C75;"> obj</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> arguments</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#E06C75;">		result</span><span style="color:#56B6C2;"> +=</span><span style="color:#E06C75;"> obj</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> result</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#61AFEF;">alert</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">calc</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">4</span><span style="color:#ABB2BF;">));</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="å®šä¹‰ä¸€ä¸ª-log-æ–¹æ³•-è®©å®ƒå¯ä»¥ä»£ç†-console-log-çš„æ–¹æ³•" tabindex="-1">å®šä¹‰ä¸€ä¸ª log æ–¹æ³•ï¼Œè®©å®ƒå¯ä»¥ä»£ç† console.log çš„æ–¹æ³• <a class="header-anchor" href="#å®šä¹‰ä¸€ä¸ª-log-æ–¹æ³•-è®©å®ƒå¯ä»¥ä»£ç†-console-log-çš„æ–¹æ³•" aria-label="Permalink to &quot;å®šä¹‰ä¸€ä¸ª log æ–¹æ³•ï¼Œè®©å®ƒå¯ä»¥ä»£ç† console.log çš„æ–¹æ³•&quot;">â€‹</a></h2><p>å¯è¡Œçš„æ–¹æ³•ä¸€ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">msg</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">	console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">msg</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;hello world!&quot;</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">// hello world!</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>å¦‚æœè¦ä¼ å…¥å¤šä¸ªå‚æ•°å‘¢ï¼Ÿæ˜¾ç„¶ä¸Šé¢çš„æ–¹æ³•ä¸èƒ½æ»¡è¶³è¦æ±‚ï¼Œæ‰€ä»¥æ›´å¥½çš„æ–¹æ³•æ˜¯ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> log</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">	console</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">log</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">apply</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">console</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">arguments</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="ç”¨-js-å®ç°éšæœºé€‰å–-10â€“100-ä¹‹é—´çš„-10-ä¸ªæ•°å­—-å­˜å…¥ä¸€ä¸ªæ•°ç»„-å¹¶æ’åº" tabindex="-1">ç”¨ js å®ç°éšæœºé€‰å– 10â€“100 ä¹‹é—´çš„ 10 ä¸ªæ•°å­—ï¼Œå­˜å…¥ä¸€ä¸ªæ•°ç»„ï¼Œå¹¶æ’åº <a class="header-anchor" href="#ç”¨-js-å®ç°éšæœºé€‰å–-10â€“100-ä¹‹é—´çš„-10-ä¸ªæ•°å­—-å­˜å…¥ä¸€ä¸ªæ•°ç»„-å¹¶æ’åº" aria-label="Permalink to &quot;ç”¨ js å®ç°éšæœºé€‰å– 10â€“100 ä¹‹é—´çš„ 10 ä¸ªæ•°å­—ï¼Œå­˜å…¥ä¸€ä¸ªæ•°ç»„ï¼Œå¹¶æ’åº&quot;">â€‹</a></h2><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> iArray</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [];</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> getRandom</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">istart</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">iend</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> iChoice</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> istart</span><span style="color:#56B6C2;"> -</span><span style="color:#E06C75;"> iend</span><span style="color:#56B6C2;"> +</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E5C07B;"> Math</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">floor</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Math</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">random</span><span style="color:#ABB2BF;">() </span><span style="color:#56B6C2;">*</span><span style="color:#E06C75;"> iChoice</span><span style="color:#56B6C2;"> +</span><span style="color:#E06C75;"> istart</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#C678DD;">for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#D19A66;"> 10</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">	iArray</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">getRandom</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">10</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">100</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#E5C07B;">iArray</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">sort</span><span style="color:#ABB2BF;">();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="å†™ä¸€æ®µ-js-ç¨‹åºæå–-url-ä¸­çš„å„ä¸ª-get-å‚æ•°" tabindex="-1">å†™ä¸€æ®µ JS ç¨‹åºæå– URL ä¸­çš„å„ä¸ª GET å‚æ•° <a class="header-anchor" href="#å†™ä¸€æ®µ-js-ç¨‹åºæå–-url-ä¸­çš„å„ä¸ª-get-å‚æ•°" aria-label="Permalink to &quot;å†™ä¸€æ®µ JS ç¨‹åºæå– URL ä¸­çš„å„ä¸ª GET å‚æ•°&quot;">â€‹</a></h2><p>æœ‰è¿™æ ·ä¸€ä¸ª URL ï¼š <code>http://item.taobao.com/item.htm?a=1&amp;b=2&amp;c=&amp;d=xxx&amp;e</code> ï¼Œè¯·å†™ä¸€æ®µ JS ç¨‹åºæå– URL ä¸­çš„å„ä¸ª GET å‚æ•°(å‚æ•°åå’Œå‚æ•°ä¸ªæ•°ä¸ç¡®å®š)ï¼Œå°†å…¶æŒ‰ key-value å½¢å¼è¿”å›åˆ°ä¸€ä¸ª json ç»“æ„ä¸­ï¼Œå¦‚ <code>{a:&#39;1&#39;, b:&#39;2&#39;, c:&#39;&#39;, d:&#39;xxx&#39;, e:undefined}</code></p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> serilizeUrl</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">url</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> result</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {};</span></span>
<span class="line"><span style="color:#E06C75;">	url</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> url</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">split</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;?&quot;</span><span style="color:#ABB2BF;">)[</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> map</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> url</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">split</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;&amp;&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">	for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">len</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> map</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E06C75;"> len</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">		result</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">map</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">].</span><span style="color:#61AFEF;">split</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;=&quot;</span><span style="color:#ABB2BF;">)[</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">]] </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> map</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">].</span><span style="color:#61AFEF;">split</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;=&quot;</span><span style="color:#ABB2BF;">)[</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> result</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="å†™ä¸€ä¸ª-function-æ¸…é™¤å­—ç¬¦ä¸²å‰åçš„ç©ºæ ¼" tabindex="-1">å†™ä¸€ä¸ª function ï¼Œæ¸…é™¤å­—ç¬¦ä¸²å‰åçš„ç©ºæ ¼ <a class="header-anchor" href="#å†™ä¸€ä¸ª-function-æ¸…é™¤å­—ç¬¦ä¸²å‰åçš„ç©ºæ ¼" aria-label="Permalink to &quot;å†™ä¸€ä¸ª function ï¼Œæ¸…é™¤å­—ç¬¦ä¸²å‰åçš„ç©ºæ ¼&quot;">â€‹</a></h2><p>ä½¿ç”¨è‡ªå¸¦æ¥å£ trim() ï¼Œè€ƒè™‘å…¼å®¹æ€§ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prototype</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">trim</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">	String</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prototype</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">trim</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">replace</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">/</span><span style="color:#C678DD;">^</span><span style="color:#E06C75;">\s</span><span style="color:#D19A66;">+</span><span style="color:#E06C75;">/</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">replace</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">/\s</span><span style="color:#D19A66;">+</span><span style="color:#C678DD;">$</span><span style="color:#E06C75;">/</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	};</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// test the function</span></span>
<span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> str</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot; </span><span style="color:#56B6C2;">\t\n</span><span style="color:#98C379;"> test string &quot;</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">trim</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#61AFEF;">alert</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">str</span><span style="color:#56B6C2;"> ==</span><span style="color:#98C379;"> &quot;test string&quot;</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">// alerts &quot;true&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="å®ç°æ¯éš”ä¸€ç§’é’Ÿè¾“å‡º-1-2-3-æ•°å­—" tabindex="-1">å®ç°æ¯éš”ä¸€ç§’é’Ÿè¾“å‡º 1,2,3...æ•°å­— <a class="header-anchor" href="#å®ç°æ¯éš”ä¸€ç§’é’Ÿè¾“å‡º-1-2-3-æ•°å­—" aria-label="Permalink to &quot;å®ç°æ¯éš”ä¸€ç§’é’Ÿè¾“å‡º 1,2,3...æ•°å­—&quot;">â€‹</a></h2><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#D19A66;"> 10</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">	(</span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">j</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#61AFEF;">		setTimeout</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#E5C07B;">			console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">j</span><span style="color:#56B6C2;"> +</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}, </span><span style="color:#E06C75;">j</span><span style="color:#56B6C2;"> *</span><span style="color:#D19A66;"> 1000</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	})(</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="å†™ä¸€ä¸ª-function-æ¸…é™¤å­—ç¬¦ä¸²å‰åçš„ç©ºæ ¼ã€‚-å…¼å®¹æ‰€æœ‰æµè§ˆå™¨-1" tabindex="-1">å†™ä¸€ä¸ª functionï¼Œæ¸…é™¤å­—ç¬¦ä¸²å‰åçš„ç©ºæ ¼ã€‚(å…¼å®¹æ‰€æœ‰æµè§ˆå™¨) <a class="header-anchor" href="#å†™ä¸€ä¸ª-function-æ¸…é™¤å­—ç¬¦ä¸²å‰åçš„ç©ºæ ¼ã€‚-å…¼å®¹æ‰€æœ‰æµè§ˆå™¨-1" aria-label="Permalink to &quot;å†™ä¸€ä¸ª functionï¼Œæ¸…é™¤å­—ç¬¦ä¸²å‰åçš„ç©ºæ ¼ã€‚(å…¼å®¹æ‰€æœ‰æµè§ˆå™¨)&quot;">â€‹</a></h2><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prototype</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">trim</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">	String</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prototype</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">trim</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">replace</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">/</span><span style="color:#C678DD;">^</span><span style="color:#E06C75;">\s</span><span style="color:#D19A66;">+</span><span style="color:#E06C75;">/</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">replace</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">/\s</span><span style="color:#D19A66;">+</span><span style="color:#C678DD;">$</span><span style="color:#E06C75;">/</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	};</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="å¦‚ä½•æ£€æŸ¥ä¸€ä¸ªæ•°å­—æ˜¯å¦ä¸ºæ•´æ•°" tabindex="-1">å¦‚ä½•æ£€æŸ¥ä¸€ä¸ªæ•°å­—æ˜¯å¦ä¸ºæ•´æ•°ï¼Ÿ <a class="header-anchor" href="#å¦‚ä½•æ£€æŸ¥ä¸€ä¸ªæ•°å­—æ˜¯å¦ä¸ºæ•´æ•°" aria-label="Permalink to &quot;å¦‚ä½•æ£€æŸ¥ä¸€ä¸ªæ•°å­—æ˜¯å¦ä¸ºæ•´æ•°ï¼Ÿ&quot;">â€‹</a></h2><p>æ£€æŸ¥ä¸€ä¸ªæ•°å­—æ˜¯å°æ•°è¿˜æ˜¯æ•´æ•°ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ç§éå¸¸ç®€å•çš„æ–¹æ³•ï¼Œå°±æ˜¯å°†å®ƒå¯¹ 1 è¿›è¡Œå–æ¨¡ï¼Œçœ‹çœ‹æ˜¯å¦æœ‰ä½™æ•°ã€‚</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> isInt</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">num</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> num</span><span style="color:#56B6C2;"> %</span><span style="color:#D19A66;"> 1</span><span style="color:#56B6C2;"> ===</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">isInt</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">4</span><span style="color:#ABB2BF;">)); </span><span style="color:#7F848E;font-style:italic;">// true</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">isInt</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">12.2</span><span style="color:#ABB2BF;">)); </span><span style="color:#7F848E;font-style:italic;">// false</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">isInt</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">0.3</span><span style="color:#ABB2BF;">)); </span><span style="color:#7F848E;font-style:italic;">// false</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="å†™ä¸€ä¸ªè·å–éè¡Œé—´æ ·å¼çš„å‡½æ•°" tabindex="-1">å†™ä¸€ä¸ªè·å–éè¡Œé—´æ ·å¼çš„å‡½æ•° <a class="header-anchor" href="#å†™ä¸€ä¸ªè·å–éè¡Œé—´æ ·å¼çš„å‡½æ•°" aria-label="Permalink to &quot;å†™ä¸€ä¸ªè·å–éè¡Œé—´æ ·å¼çš„å‡½æ•°&quot;">â€‹</a></h2><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> getStyle</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">obj</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">attr</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">obj</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">currentStyle</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E5C07B;"> obj</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">currentStyle</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">attr</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#ABB2BF;">	} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">		getComputedStyle</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obi</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">false</span><span style="color:#ABB2BF;">)[</span><span style="color:#E06C75;">attr</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="å†™ä¸€ä¸ªè·å–éè¡Œé—´æ ·å¼çš„å‡½æ•°-1" tabindex="-1">å†™ä¸€ä¸ªè·å–éè¡Œé—´æ ·å¼çš„å‡½æ•° <a class="header-anchor" href="#å†™ä¸€ä¸ªè·å–éè¡Œé—´æ ·å¼çš„å‡½æ•°-1" aria-label="Permalink to &quot;å†™ä¸€ä¸ªè·å–éè¡Œé—´æ ·å¼çš„å‡½æ•°&quot;">â€‹</a></h2><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> getStyle</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">obj</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">attr</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">value</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">obj</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">currentStyle</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			//ie</span></span>
<span class="line"><span style="color:#C678DD;">			return</span><span style="color:#E5C07B;"> obj</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">currentStyle</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">attr</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			//æ ‡å‡†æµè§ˆå™¨</span></span>
<span class="line"><span style="color:#E5C07B;">			obj</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getComputedStyle</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">attr</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">false</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">		obj</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">style</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">attr</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> value</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="å°è£…ä¸€ä¸ªå‡½æ•°-å‚æ•°æ˜¯å®šæ—¶å™¨çš„æ—¶é—´-then-æ‰§è¡Œå›è°ƒå‡½æ•°" tabindex="-1">å°è£…ä¸€ä¸ªå‡½æ•°ï¼Œå‚æ•°æ˜¯å®šæ—¶å™¨çš„æ—¶é—´ï¼Œ.then æ‰§è¡Œå›è°ƒå‡½æ•° <a class="header-anchor" href="#å°è£…ä¸€ä¸ªå‡½æ•°-å‚æ•°æ˜¯å®šæ—¶å™¨çš„æ—¶é—´-then-æ‰§è¡Œå›è°ƒå‡½æ•°" aria-label="Permalink to &quot;å°è£…ä¸€ä¸ªå‡½æ•°ï¼Œå‚æ•°æ˜¯å®šæ—¶å™¨çš„æ—¶é—´ï¼Œ.then æ‰§è¡Œå›è°ƒå‡½æ•°&quot;">â€‹</a></h2><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> sleep</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">time</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#C678DD;"> new</span><span style="color:#E5C07B;"> Promise</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">resolve</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#61AFEF;"> setTimeout</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">resolve</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">time</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="å®ç°ä¸€ä¸ªå‡½æ•°-åˆ¤æ–­è¾“å…¥æ˜¯ä¸æ˜¯å›æ–‡å­—ç¬¦ä¸²" tabindex="-1">å®ç°ä¸€ä¸ªå‡½æ•°ï¼Œåˆ¤æ–­è¾“å…¥æ˜¯ä¸æ˜¯å›æ–‡å­—ç¬¦ä¸² <a class="header-anchor" href="#å®ç°ä¸€ä¸ªå‡½æ•°-åˆ¤æ–­è¾“å…¥æ˜¯ä¸æ˜¯å›æ–‡å­—ç¬¦ä¸²" aria-label="Permalink to &quot;å®ç°ä¸€ä¸ªå‡½æ•°ï¼Œåˆ¤æ–­è¾“å…¥æ˜¯ä¸æ˜¯å›æ–‡å­—ç¬¦ä¸²&quot;">â€‹</a></h2><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> run</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">input</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">typeof</span><span style="color:#E06C75;"> input</span><span style="color:#56B6C2;"> !==</span><span style="color:#98C379;"> &quot;string&quot;</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">return</span><span style="color:#D19A66;"> false</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E5C07B;"> input</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">split</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">reverse</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">join</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">===</span><span style="color:#E06C75;"> input</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="æ•°ç»„æ‰å¹³åŒ–å¤„ç†" tabindex="-1">æ•°ç»„æ‰å¹³åŒ–å¤„ç† <a class="header-anchor" href="#æ•°ç»„æ‰å¹³åŒ–å¤„ç†" aria-label="Permalink to &quot;æ•°ç»„æ‰å¹³åŒ–å¤„ç†&quot;">â€‹</a></h2><p>å®ç°ä¸€ä¸ª flatten æ–¹æ³•ï¼Œä½¿å¾—è¾“å…¥ä¸€ä¸ªæ•°ç»„ï¼Œè¯¥æ•°ç»„é‡Œé¢çš„å…ƒç´ ä¹Ÿå¯ä»¥æ˜¯æ•° ç»„ï¼Œè¯¥æ–¹æ³•ä¼šè¾“å‡ºä¸€ä¸ªæ‰å¹³åŒ–çš„æ•°ç»„</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> flatten</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">arr</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E5C07B;"> arr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">reduce</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">prev</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">item</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E5C07B;"> prev</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">concat</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Array</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">isArray</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">item</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">?</span><span style="color:#61AFEF;"> flatten</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">item</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">:</span><span style="color:#E06C75;"> item</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	}, []);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="æ•°ç»„é™ç»´" tabindex="-1">æ•°ç»„é™ç»´ <a class="header-anchor" href="#æ•°ç»„é™ç»´" aria-label="Permalink to &quot;æ•°ç»„é™ç»´&quot;">â€‹</a></h2><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, [</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">], </span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">].</span><span style="color:#61AFEF;">flatMap</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">v</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#E06C75;"> v</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// -&gt; [1, 2, 3]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>å¦‚æœæƒ³å°†ä¸€ä¸ªå¤šç»´æ•°ç»„å½»åº•çš„é™ç»´ï¼Œå¯ä»¥è¿™æ ·å®ç°</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#61AFEF;"> flattenDeep</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">arr</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span></span>
<span class="line"><span style="color:#E5C07B;">	Array</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">isArray</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">arr</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#C678DD;">		?</span><span style="color:#E5C07B;"> arr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">reduce</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">a</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">b</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> [...</span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">, ...</span><span style="color:#61AFEF;">flattenDeep</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">b</span><span style="color:#ABB2BF;">)], [])</span></span>
<span class="line"><span style="color:#C678DD;">		:</span><span style="color:#ABB2BF;"> [</span><span style="color:#E06C75;">arr</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#61AFEF;">flattenDeep</span><span style="color:#ABB2BF;">([</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, [[</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">], [</span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">, [</span><span style="color:#D19A66;">4</span><span style="color:#ABB2BF;">]], </span><span style="color:#D19A66;">5</span><span style="color:#ABB2BF;">]]);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="æ‰‹å†™ä¸€ä¸ªæ•°ç»„æ’åºæ–¹æ³•" tabindex="-1">æ‰‹å†™ä¸€ä¸ªæ•°ç»„æ’åºæ–¹æ³•ï¼Ÿ <a class="header-anchor" href="#æ‰‹å†™ä¸€ä¸ªæ•°ç»„æ’åºæ–¹æ³•" aria-label="Permalink to &quot;æ‰‹å†™ä¸€ä¸ªæ•°ç»„æ’åºæ–¹æ³•ï¼Ÿ&quot;">â€‹</a></h2><p><strong>å†’æ³¡æ’åºï¼š</strong></p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> arr</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [</span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">4</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">21</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">5</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">15</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">6</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">63</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> BubbleSort</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">ary</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E5C07B;"> ary</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#56B6C2;"> -</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> j</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> +</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">j</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E5C07B;"> ary</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">j</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">			var</span><span style="color:#E06C75;"> current</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> ary</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#C678DD;">			if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">current</span><span style="color:#56B6C2;"> &gt;</span><span style="color:#E06C75;"> ary</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">j</span><span style="color:#ABB2BF;">]) {</span></span>
<span class="line"><span style="color:#C678DD;">				var</span><span style="color:#E06C75;"> tmp</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> ary</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">j</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#E06C75;">				ary</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">j</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> current</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">				ary</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> tmp</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> ary</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#61AFEF;">BubbleSort</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">arr</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">// [1, 2, 3, 4, 5, 6, 15, 21, 63]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D19A66;">1234567891011121314151617</span><span style="color:#ABB2BF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>ç‚¹å‡»<a href="https://blog.csdn.net/qq_44182284/article/details/120840824" target="_blank" rel="noreferrer">Javscript æ•°ç»„ä¸­æœ€å¸¸ç”¨çš„æ–¹æ³•(å»ºè®®æ”¶è—)</a>æŸ¥çœ‹è¯¦è§£</p><h2 id="ä½¿ç”¨é€’å½’å®Œæˆ-1-åˆ°-100-çš„ç´¯åŠ " tabindex="-1">ä½¿ç”¨é€’å½’å®Œæˆ 1 åˆ° 100 çš„ç´¯åŠ  <a class="header-anchor" href="#ä½¿ç”¨é€’å½’å®Œæˆ-1-åˆ°-100-çš„ç´¯åŠ " aria-label="Permalink to &quot;ä½¿ç”¨é€’å½’å®Œæˆ 1 åˆ° 100 çš„ç´¯åŠ &quot;">â€‹</a></h2><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> add</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">x</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">y</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">x</span><span style="color:#56B6C2;"> ===</span><span style="color:#E06C75;"> y</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E06C75;"> x</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E06C75;"> y</span><span style="color:#56B6C2;"> +</span><span style="color:#61AFEF;"> add</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">x</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">y</span><span style="color:#56B6C2;"> -</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">add</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">100</span><span style="color:#ABB2BF;">));</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="å°è£…ä¸€ä¸ªèƒ½å¤Ÿç»Ÿè®¡é‡å¤çš„å­—ç¬¦çš„å‡½æ•°" tabindex="-1">å°è£…ä¸€ä¸ªèƒ½å¤Ÿç»Ÿè®¡é‡å¤çš„å­—ç¬¦çš„å‡½æ•° <a class="header-anchor" href="#å°è£…ä¸€ä¸ªèƒ½å¤Ÿç»Ÿè®¡é‡å¤çš„å­—ç¬¦çš„å‡½æ•°" aria-label="Permalink to &quot;å°è£…ä¸€ä¸ªèƒ½å¤Ÿç»Ÿè®¡é‡å¤çš„å­—ç¬¦çš„å‡½æ•°&quot;">â€‹</a></h2><p><strong>ä¾‹å¦‚ <code>aaabbbdddddfff</code> è½¬åŒ–ä¸º <code>3a3b5d3f</code></strong></p><p>å‚è€ƒç­”æ¡ˆï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> compression</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">str</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">str</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#56B6C2;"> ==</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> len</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> str</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> str2</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> num</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	while</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E06C75;"> len</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">str</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">charAt</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">==</span><span style="color:#E5C07B;"> str</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">charAt</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> +</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#E06C75;">			num</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">			str2</span><span style="color:#56B6C2;"> +=</span><span style="color:#E06C75;"> num</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">			str2</span><span style="color:#56B6C2;"> +=</span><span style="color:#E5C07B;"> str</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">charAt</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;">			num</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#E06C75;">		i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> str2</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">} </span><span style="color:#7F848E;font-style:italic;">// æµ‹è¯•ï¼š</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">compression</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;aaabbbdddddfff&quot;</span><span style="color:#ABB2BF;">)); </span><span style="color:#7F848E;font-style:italic;">// 3a3b5d3f</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h2 id="å®ç°ä¸€ä¸ª-add-æ–¹æ³•" tabindex="-1">å®ç°ä¸€ä¸ª add æ–¹æ³• <a class="header-anchor" href="#å®ç°ä¸€ä¸ª-add-æ–¹æ³•" aria-label="Permalink to &quot;å®ç°ä¸€ä¸ª add æ–¹æ³•&quot;">â€‹</a></h2><p>é¢˜ç›®æè¿°ï¼šå®ç°ä¸€ä¸ª add æ–¹æ³• ä½¿è®¡ç®—ç»“æœèƒ½å¤Ÿæ»¡è¶³å¦‚ä¸‹é¢„æœŸï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#61AFEF;">add</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">)(</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">)(</span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">)()</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">6</span><span style="color:#61AFEF;"> add</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">)(</span><span style="color:#D19A66;">4</span><span style="color:#ABB2BF;">)()</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">10</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>å…¶å®å°±æ˜¯è€ƒå‡½æ•°æŸ¯é‡ŒåŒ–</p><p>å®ç°ä»£ç å¦‚ä¸‹ï¼š</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> add</span><span style="color:#ABB2BF;">(...</span><span style="color:#E06C75;font-style:italic;">args</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> allArgs</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [...</span><span style="color:#E06C75;">args</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#C678DD;">	function</span><span style="color:#61AFEF;"> fn</span><span style="color:#ABB2BF;">(...</span><span style="color:#E06C75;font-style:italic;">newArgs</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">		allArgs</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [...</span><span style="color:#E06C75;">allArgs</span><span style="color:#ABB2BF;">, ...</span><span style="color:#E06C75;">newArgs</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E06C75;"> fn</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#E5C07B;">	fn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">toString</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E5C07B;">allArgs</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">			return</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E5C07B;"> allArgs</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">reduce</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">sum</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">cur</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#E06C75;"> sum</span><span style="color:#56B6C2;"> +</span><span style="color:#E06C75;"> cur</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	};</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> fn</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="åŠ¨æ€è§„åˆ’æ±‚è§£ç¡¬å¸æ‰¾é›¶é—®é¢˜" tabindex="-1">åŠ¨æ€è§„åˆ’æ±‚è§£ç¡¬å¸æ‰¾é›¶é—®é¢˜ <a class="header-anchor" href="#åŠ¨æ€è§„åˆ’æ±‚è§£ç¡¬å¸æ‰¾é›¶é—®é¢˜" aria-label="Permalink to &quot;åŠ¨æ€è§„åˆ’æ±‚è§£ç¡¬å¸æ‰¾é›¶é—®é¢˜&quot;">â€‹</a></h2><p>é¢˜ç›®æè¿°:ç»™å®šä¸åŒé¢é¢çš„ç¡¬å¸ coins å’Œä¸€ä¸ªæ€»é‡‘é¢ amountã€‚ç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥è®¡ç®—å¯ä»¥å‡‘æˆæ€»é‡‘é¢æ‰€éœ€çš„æœ€å°‘çš„ç¡¬å¸ä¸ªæ•°ã€‚å¦‚æœæ²¡æœ‰ä»»ä½•ä¸€ç§ç¡¬å¸ç»„åˆèƒ½ç»„æˆæ€»é‡‘é¢ï¼Œè¿”å› -1</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#61AFEF;">ç¤ºä¾‹1ï¼š</span><span style="color:#98C379;"> è¾“å…¥:</span><span style="color:#98C379;"> coins</span><span style="color:#98C379;"> =</span><span style="color:#ABB2BF;"> [1, </span><span style="color:#98C379;">2,</span><span style="color:#98C379;"> 5],</span><span style="color:#98C379;"> amount</span><span style="color:#98C379;"> =</span><span style="color:#D19A66;"> 11</span><span style="color:#98C379;"> è¾“å‡º:</span><span style="color:#D19A66;"> 3</span><span style="color:#98C379;"> è§£é‡Š:</span><span style="color:#D19A66;"> 11</span><span style="color:#98C379;"> =</span><span style="color:#D19A66;"> 5</span><span style="color:#98C379;"> +</span><span style="color:#D19A66;"> 5</span><span style="color:#98C379;"> +</span><span style="color:#D19A66;"> 1</span></span>
<span class="line"><span style="color:#61AFEF;">ç¤ºä¾‹2ï¼š</span><span style="color:#98C379;"> è¾“å…¥:</span><span style="color:#98C379;"> coins</span><span style="color:#98C379;"> =</span><span style="color:#ABB2BF;"> [2], amount = 3 è¾“å‡º: -1</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>å®ç°ä»£ç å¦‚ä¸‹:</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#61AFEF;"> coinChange</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">coins</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">amount</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// ç”¨äºä¿å­˜æ¯ä¸ªç›®æ ‡æ€»é¢å¯¹åº”çš„æœ€å°ç¡¬å¸ä¸ªæ•°</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> f</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [];</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// æå‰å®šä¹‰å·²çŸ¥æƒ…å†µ</span></span>
<span class="line"><span style="color:#E06C75;">	f</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// éå† [1, amount] è¿™ä¸ªåŒºé—´çš„ç¡¬å¸æ€»é¢</span></span>
<span class="line"><span style="color:#C678DD;">	for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;=</span><span style="color:#E06C75;"> amount</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// æ±‚çš„æ˜¯æœ€å°å€¼ï¼Œå› æ­¤æˆ‘ä»¬é¢„è®¾ä¸ºæ— ç©·å¤§ï¼Œç¡®ä¿å®ƒä¸€å®šä¼šè¢«æ›´å°çš„æ•°æ›´æ–°</span></span>
<span class="line"><span style="color:#E06C75;">		f</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;"> Infinity</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// å¾ªç¯éå†æ¯ä¸ªå¯ç”¨ç¡¬å¸çš„é¢é¢</span></span>
<span class="line"><span style="color:#C678DD;">		for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> j</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">j</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E5C07B;"> coins</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">j</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// è‹¥ç¡¬å¸é¢é¢å°äºç›®æ ‡æ€»é¢ï¼Œåˆ™é—®é¢˜æˆç«‹</span></span>
<span class="line"><span style="color:#C678DD;">			if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> -</span><span style="color:#E06C75;"> coins</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">j</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">&gt;=</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">				// çŠ¶æ€è½¬ç§»æ–¹ç¨‹</span></span>
<span class="line"><span style="color:#E06C75;">				f</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#E5C07B;"> Math</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">min</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">f</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">], </span><span style="color:#E06C75;">f</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> -</span><span style="color:#E06C75;"> coins</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">j</span><span style="color:#ABB2BF;">]] </span><span style="color:#56B6C2;">+</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// è‹¥ç›®æ ‡æ€»é¢å¯¹åº”çš„è§£ä¸ºæ— ç©·å¤§ï¼Œåˆ™æ„å‘³ç€æ²¡æœ‰ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„ç¡¬å¸æ€»æ•°æ¥æ›´æ–°å®ƒï¼Œæœ¬é¢˜æ— è§£ï¼Œè¿”å›-1</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">f</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">amount</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">===</span><span style="color:#D19A66;"> Infinity</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#56B6C2;"> -</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// è‹¥æœ‰è§£ï¼Œç›´æ¥è¿”å›è§£çš„å†…å®¹</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> f</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">amount</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h2 id="åˆ†ç‰‡æ€æƒ³è§£å†³å¤§æ•°æ®é‡æ¸²æŸ“é—®é¢˜" tabindex="-1">åˆ†ç‰‡æ€æƒ³è§£å†³å¤§æ•°æ®é‡æ¸²æŸ“é—®é¢˜ <a class="header-anchor" href="#åˆ†ç‰‡æ€æƒ³è§£å†³å¤§æ•°æ®é‡æ¸²æŸ“é—®é¢˜" aria-label="Permalink to &quot;åˆ†ç‰‡æ€æƒ³è§£å†³å¤§æ•°æ®é‡æ¸²æŸ“é—®é¢˜&quot;">â€‹</a></h2><p>é¢˜ç›®æè¿°ï¼šæ¸²æŸ“ç™¾ä¸‡æ¡ç»“æ„ç®€å•çš„å¤§æ•°æ®æ—¶ æ€ä¹ˆä½¿ç”¨åˆ†ç‰‡æ€æƒ³ä¼˜åŒ–æ¸²æŸ“</p><p>å®ç°ä»£ç å¦‚ä¸‹ï¼š</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> ul</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> document</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getElementById</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;container&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// æ’å…¥åä¸‡æ¡æ•°æ®</span></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> total</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 100000</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// ä¸€æ¬¡æ’å…¥ 20 æ¡</span></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> once</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 20</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//æ€»é¡µæ•°</span></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> page</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> total</span><span style="color:#56B6C2;"> /</span><span style="color:#E06C75;"> once</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//æ¯æ¡è®°å½•çš„ç´¢å¼•</span></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> index</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//å¾ªç¯åŠ è½½æ•°æ®</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> loop</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">curTotal</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">curIndex</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">curTotal</span><span style="color:#56B6C2;"> &lt;=</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#D19A66;"> false</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	//æ¯é¡µå¤šå°‘æ¡</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> pageCount</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Math</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">min</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">curTotal</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">once</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">	window</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">requestAnimationFrame</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#C678DD;">		for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E06C75;"> pageCount</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">			let</span><span style="color:#E06C75;"> li</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> document</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">createElement</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;li&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">			li</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">innerText</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> curIndex</span><span style="color:#56B6C2;"> +</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> +</span><span style="color:#98C379;"> &quot; : &quot;</span><span style="color:#56B6C2;"> +</span><span style="color:#56B6C2;"> ~~</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Math</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">random</span><span style="color:#ABB2BF;">() </span><span style="color:#56B6C2;">*</span><span style="color:#E06C75;"> total</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">			ul</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">appendChild</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">li</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#61AFEF;">		loop</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">curTotal</span><span style="color:#56B6C2;"> -</span><span style="color:#E06C75;"> pageCount</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">curIndex</span><span style="color:#56B6C2;"> +</span><span style="color:#E06C75;"> pageCount</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	});</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#61AFEF;">loop</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">total</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">index</span><span style="color:#ABB2BF;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><blockquote><p>æ‰©å±•æ€è€ƒï¼šå¯¹äºå¤§æ•°æ®é‡çš„ç®€å• dom ç»“æ„æ¸²æŸ“å¯ä»¥ç”¨åˆ†ç‰‡æ€æƒ³è§£å†³ å¦‚æœæ˜¯å¤æ‚çš„ dom ç»“æ„æ¸²æŸ“å¦‚ä½•å¤„ç†ï¼Ÿ</p></blockquote><p>è¿™æ—¶å€™å°±éœ€è¦ä½¿ç”¨è™šæ‹Ÿåˆ—è¡¨äº† å¤§å®¶è‡ªè¡Œç™¾åº¦å“ˆ è™šæ‹Ÿåˆ—è¡¨å’Œè™šæ‹Ÿè¡¨æ ¼åœ¨æ—¥å¸¸é¡¹ç›®ä½¿ç”¨è¿˜æ˜¯å¾ˆé¢‘ç¹çš„</p><h2 id="å¤§æ•°ç›¸åŠ " tabindex="-1">å¤§æ•°ç›¸åŠ  <a class="header-anchor" href="#å¤§æ•°ç›¸åŠ " aria-label="Permalink to &quot;å¤§æ•°ç›¸åŠ &quot;">â€‹</a></h2><p>é¢˜ç›®æè¿°ï¼šå®ç°ä¸€ä¸ª add æ–¹æ³•å®Œæˆä¸¤ä¸ªå¤§æ•°ç›¸åŠ </p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> a</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;9007199254740991&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> b</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;1234567899999999999&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> add</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">a</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">b</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	//...</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>å®ç°ä»£ç å¦‚ä¸‹:</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> add</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">a</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">b</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	//å–ä¸¤ä¸ªæ•°å­—çš„æœ€å¤§é•¿åº¦</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> maxLength</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Math</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">max</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">a</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">b</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	//ç”¨0å»è¡¥é½é•¿åº¦</span></span>
<span class="line"><span style="color:#E06C75;">	a</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> a</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">padStart</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">maxLength</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">//&quot;0009007199254740991&quot;</span></span>
<span class="line"><span style="color:#E06C75;">	b</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> b</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">padStart</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">maxLength</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">//&quot;1234567899999999999&quot;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	//å®šä¹‰åŠ æ³•è¿‡ç¨‹ä¸­éœ€è¦ç”¨åˆ°çš„å˜é‡</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> t</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> f</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">; </span><span style="color:#7F848E;font-style:italic;">//&quot;è¿›ä½&quot;</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> sum</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> maxLength</span><span style="color:#56B6C2;"> -</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &gt;=</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">--</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">		t</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> parseInt</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">]) </span><span style="color:#56B6C2;">+</span><span style="color:#61AFEF;"> parseInt</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">b</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">]) </span><span style="color:#56B6C2;">+</span><span style="color:#E06C75;"> f</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">		f</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Math</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">floor</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">t</span><span style="color:#56B6C2;"> /</span><span style="color:#D19A66;"> 10</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;">		sum</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">t</span><span style="color:#56B6C2;"> %</span><span style="color:#D19A66;"> 10</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">+</span><span style="color:#E06C75;"> sum</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">f</span><span style="color:#56B6C2;"> !==</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">		sum</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;&quot;</span><span style="color:#56B6C2;"> +</span><span style="color:#E06C75;"> f</span><span style="color:#56B6C2;"> +</span><span style="color:#E06C75;"> sum</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> sum</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h2 id="æ¨¡æ‹Ÿé“¾è¡¨ç»“æ„" tabindex="-1">æ¨¡æ‹Ÿé“¾è¡¨ç»“æ„ <a class="header-anchor" href="#æ¨¡æ‹Ÿé“¾è¡¨ç»“æ„" aria-label="Permalink to &quot;æ¨¡æ‹Ÿé“¾è¡¨ç»“æ„&quot;">â€‹</a></h2><p>ä¸»è¦æ€è·¯å°±æ˜¯è¦æ—¶åˆ»æ¸…æ¥šå¯¹åº” Node çš„ next å’Œ prev çš„æŒ‡å‘ï¼Œå¹¶åˆ©ç”¨ while å¾ªç¯å»åšå¯¹åº”çš„å¢åˆ æ”¹æŸ¥æ“ä½œã€‚</p><p><img src="/FrontEndInterviewQuestion/assets/b913e7e8e375443ab82950ccb1bb83d7tplv-k3u1fbpfcp-jj-mark3024000q75.COYgrxVh.webp" alt="image.png"></p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">class</span><span style="color:#E5C07B;"> Node</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">	constructor</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">data</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">data</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> data</span><span style="color:#ABB2BF;">; </span><span style="color:#7F848E;font-style:italic;">// èŠ‚ç‚¹æ•°æ®</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">next</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">; </span><span style="color:#7F848E;font-style:italic;">// æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prev</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">; </span><span style="color:#7F848E;font-style:italic;">// æŒ‡å‘å‰ä¸€ä¸ªèŠ‚ç‚¹</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">class</span><span style="color:#E5C07B;"> LinkedList</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">	constructor</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">head</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">; </span><span style="color:#7F848E;font-style:italic;">// é“¾è¡¨å¤´</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">tail</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">; </span><span style="color:#7F848E;font-style:italic;">// é“¾è¡¨å°¾</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// åœ¨é“¾è¡¨å°¾éƒ¨æ·»åŠ æ–°èŠ‚ç‚¹</span></span>
<span class="line"><span style="color:#61AFEF;">	add</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">item</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		let</span><span style="color:#E06C75;"> node</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Node</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">item</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">			this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">head</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> node</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">			this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">tail</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> node</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">			node</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prev</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">tail</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">			this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">tail</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">next</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> node</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">			this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">tail</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> node</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// é“¾è¡¨æŒ‡å®šä½ç½®æ·»åŠ æ–°èŠ‚ç‚¹</span></span>
<span class="line"><span style="color:#61AFEF;">	addAt</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">index</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">item</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		let</span><span style="color:#E06C75;"> current</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">		let</span><span style="color:#E06C75;"> counter</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">		let</span><span style="color:#E06C75;"> node</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Node</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">item</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">index</span><span style="color:#56B6C2;"> ===</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">			this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">head</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prev</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> node</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">			node</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">next</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">			this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">head</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> node</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">			while</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">current</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">				current</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> current</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">next</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">				if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">counter</span><span style="color:#56B6C2;"> ===</span><span style="color:#E06C75;"> index</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">					node</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prev</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> current</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prev</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">					current</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">prev</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">next</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> node</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">					node</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">next</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> current</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">					current</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prev</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> node</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">				}</span></span>
<span class="line"><span style="color:#E06C75;">				counter</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">	remove</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">item</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		let</span><span style="color:#E06C75;"> current</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">		while</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">current</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">			if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">current</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">data</span><span style="color:#56B6C2;"> ===</span><span style="color:#E06C75;"> item</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">				if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">current</span><span style="color:#56B6C2;"> ==</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">head</span><span style="color:#56B6C2;"> &amp;&amp;</span><span style="color:#E06C75;"> current</span><span style="color:#56B6C2;"> ==</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">tail</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">					this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">head</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">					this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">tail</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">				} </span><span style="color:#C678DD;">else</span><span style="color:#C678DD;"> if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">current</span><span style="color:#56B6C2;"> ==</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">					this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">head</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">head</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">next</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">					this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">head</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prev</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">				} </span><span style="color:#C678DD;">else</span><span style="color:#C678DD;"> if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">current</span><span style="color:#56B6C2;"> ==</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">tail</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">					this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">tail</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">tail</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prev</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">					this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">tail</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">next</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">				} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">					current</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">prev</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">next</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> current</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">next</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">					current</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">next</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prev</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> current</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prev</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">				}</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#E06C75;">			current</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> current</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">next</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">	removeAt</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">index</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		let</span><span style="color:#E06C75;"> current</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">		let</span><span style="color:#E06C75;"> counter</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">index</span><span style="color:#56B6C2;"> ===</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">			this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">head</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">head</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">next</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">			this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">head</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prev</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">			while</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">current</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">				current</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> current</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">next</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">				if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">current</span><span style="color:#56B6C2;"> ==</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">tail</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">					this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">tail</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">tail</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prev</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">					this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">tail</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">next</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">				} </span><span style="color:#C678DD;">else</span><span style="color:#C678DD;"> if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">counter</span><span style="color:#56B6C2;"> ===</span><span style="color:#E06C75;"> index</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">					current</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">prev</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">next</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> current</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">next</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">					current</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">next</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prev</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> current</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prev</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">					break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">				}</span></span>
<span class="line"><span style="color:#E06C75;">				counter</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">	reverse</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#C678DD;">		let</span><span style="color:#E06C75;"> current</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">		let</span><span style="color:#E06C75;"> prev</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">		while</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">current</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">			let</span><span style="color:#E06C75;"> next</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> current</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">next</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">			current</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">next</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> prev</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">			current</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prev</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> next</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">			prev</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> current</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">			current</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> next</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">tail</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">head</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> prev</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">	swap</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">index1</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">index2</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">index1</span><span style="color:#56B6C2;"> &gt;</span><span style="color:#E06C75;"> index2</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">			return</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">swap</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">index2</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">index1</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">		let</span><span style="color:#E06C75;"> current</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">		let</span><span style="color:#E06C75;"> counter</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">		let</span><span style="color:#E06C75;"> firstNode</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">		while</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">current</span><span style="color:#56B6C2;"> !==</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">			if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">counter</span><span style="color:#56B6C2;"> ===</span><span style="color:#E06C75;"> index1</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">				firstNode</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> current</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">			} </span><span style="color:#C678DD;">else</span><span style="color:#C678DD;"> if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">counter</span><span style="color:#56B6C2;"> ===</span><span style="color:#E06C75;"> index2</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">				let</span><span style="color:#E06C75;"> temp</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> current</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">data</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">				current</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">data</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> firstNode</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">data</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">				firstNode</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">data</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> temp</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">			current</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> current</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">next</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">			counter</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#D19A66;"> true</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">	traverse</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">fn</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		let</span><span style="color:#E06C75;"> current</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">		while</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">current</span><span style="color:#56B6C2;"> !==</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#61AFEF;">			fn</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">current</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;">			current</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> current</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">next</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#D19A66;"> true</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">	find</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">item</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		let</span><span style="color:#E06C75;"> current</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">		let</span><span style="color:#E06C75;"> counter</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">		while</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">current</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">			if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">current</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">data</span><span style="color:#56B6C2;"> ==</span><span style="color:#E06C75;"> item</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">				return</span><span style="color:#E06C75;"> counter</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#E06C75;">			current</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> current</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">next</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">			counter</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#D19A66;"> false</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">	isEmpty</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">length</span><span style="color:#ABB2BF;">() </span><span style="color:#56B6C2;">&lt;</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">	length</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#C678DD;">		let</span><span style="color:#E06C75;"> current</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">		let</span><span style="color:#E06C75;"> counter</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">		while</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">current</span><span style="color:#56B6C2;"> !==</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">			counter</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">			current</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> current</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">next</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E06C75;"> counter</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br></div></div><h2 id="æ‰‹å†™å¿«é€Ÿæ’åº" tabindex="-1">æ‰‹å†™å¿«é€Ÿæ’åº <a class="header-anchor" href="#æ‰‹å†™å¿«é€Ÿæ’åº" aria-label="Permalink to &quot;æ‰‹å†™å¿«é€Ÿæ’åº&quot;">â€‹</a></h2><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> quickSort</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">arr</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">number</span><span style="color:#ABB2BF;">[], </span><span style="color:#E06C75;font-style:italic;">startIndex</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">): </span><span style="color:#E5C07B;">number</span><span style="color:#ABB2BF;">[] {</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">arr</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#56B6C2;"> &lt;=</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">return</span><span style="color:#E06C75;"> arr</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> right</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">number</span><span style="color:#ABB2BF;">[] </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> [],</span></span>
<span class="line"><span style="color:#E5C07B;">		left</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">number</span><span style="color:#ABB2BF;">[] </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> [],</span></span>
<span class="line"><span style="color:#E5C07B;">		startNum</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> arr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">splice</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">startIndex</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">)[</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#C678DD;">	for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E5C07B;"> arr</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">arr</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">&lt;</span><span style="color:#E06C75;"> startNum</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">			left</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">arr</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">]);</span></span>
<span class="line"><span style="color:#ABB2BF;">		} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">			right</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">arr</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">]);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#ABB2BF;"> [...</span><span style="color:#61AFEF;">quickSort</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">left</span><span style="color:#ABB2BF;">), </span><span style="color:#E06C75;">startNum</span><span style="color:#ABB2BF;">, ...</span><span style="color:#61AFEF;">quickSort</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">right</span><span style="color:#ABB2BF;">)];</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="å¦‚ä½•å®ç°æ•°ç»„çš„éšæœºæ’åº" tabindex="-1">å¦‚ä½•å®ç°æ•°ç»„çš„éšæœºæ’åºï¼Ÿ <a class="header-anchor" href="#å¦‚ä½•å®ç°æ•°ç»„çš„éšæœºæ’åº" aria-label="Permalink to &quot;å¦‚ä½•å®ç°æ•°ç»„çš„éšæœºæ’åºï¼Ÿ&quot;">â€‹</a></h2><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// (1)ä½¿ç”¨æ•°ç»„ sort æ–¹æ³•å¯¹æ•°ç»„å…ƒç´ éšæœºæ’åºï¼Œè®© Math.random() å‡ºæ¥çš„æ•°ä¸ 0.5 æ¯”è¾ƒï¼Œå¦‚æœå¤§äºå°±è¿”å› 1 äº¤æ¢ä½ç½®ï¼Œå¦‚æœå°äºå°±è¿”å› -1ï¼Œä¸äº¤æ¢ä½ç½®ã€‚</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> randomSort</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">a</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">b</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E5C07B;"> Math</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">random</span><span style="color:#ABB2BF;">() </span><span style="color:#56B6C2;">&gt;</span><span style="color:#D19A66;"> 0.5</span><span style="color:#C678DD;"> ?</span><span style="color:#56B6C2;"> -</span><span style="color:#D19A66;">1</span><span style="color:#C678DD;"> :</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//  ç¼ºç‚¹ï¼šæ¯ä¸ªå…ƒç´ è¢«æ´¾åˆ°æ–°æ•°ç»„çš„ä½ç½®ä¸æ˜¯éšæœºçš„ï¼ŒåŸå› æ˜¯ sort() æ–¹æ³•æ˜¯ä¾æ¬¡æ¯”è¾ƒçš„ã€‚</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// (2)éšæœºä»åŸæ•°ç»„æŠ½å–ä¸€ä¸ªå…ƒç´ ï¼ŒåŠ å…¥åˆ°æ–°æ•°ç»„</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> randomSort</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">arr</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> result</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">	while</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">arr</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#56B6C2;"> &gt;</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		var</span><span style="color:#E06C75;"> randomIndex</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Math</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">floor</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Math</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">random</span><span style="color:#ABB2BF;">() </span><span style="color:#56B6C2;">*</span><span style="color:#E5C07B;"> arr</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">		result</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">arr</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">randomIndex</span><span style="color:#ABB2BF;">]);</span></span>
<span class="line"><span style="color:#E5C07B;">		arr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">splice</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">randomIndex</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> result</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// (3)éšæœºäº¤æ¢æ•°ç»„å†…çš„å…ƒç´ (æ´—ç‰Œç®—æ³•ç±»ä¼¼)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> randomSort</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">arr</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> index</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">		randomIndex</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">		temp</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">		len</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> arr</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">	for</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">index</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">index</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E06C75;"> len</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">index</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">		randomIndex</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Math</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">floor</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Math</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">random</span><span style="color:#ABB2BF;">() </span><span style="color:#56B6C2;">*</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">len</span><span style="color:#56B6C2;"> -</span><span style="color:#E06C75;"> index</span><span style="color:#ABB2BF;">)) </span><span style="color:#56B6C2;">+</span><span style="color:#E06C75;"> index</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">		temp</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> arr</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">index</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#E06C75;">		arr</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">index</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> arr</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">randomIndex</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#E06C75;">		arr</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">randomIndex</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> temp</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> arr</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// es6</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> randomSort</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">array</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> length</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> array</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E5C07B;">Array</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">isArray</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">array</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">||</span><span style="color:#E06C75;"> length</span><span style="color:#56B6C2;"> &lt;=</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">	for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> index</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">index</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E06C75;"> length</span><span style="color:#56B6C2;"> -</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">index</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		let</span><span style="color:#E06C75;"> randomIndex</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Math</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">floor</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Math</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">random</span><span style="color:#ABB2BF;">() </span><span style="color:#56B6C2;">*</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">length</span><span style="color:#56B6C2;"> -</span><span style="color:#E06C75;"> index</span><span style="color:#ABB2BF;">)) </span><span style="color:#56B6C2;">+</span><span style="color:#E06C75;"> index</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">		[</span><span style="color:#E06C75;">array</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">index</span><span style="color:#ABB2BF;">], </span><span style="color:#E06C75;">array</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">randomIndex</span><span style="color:#ABB2BF;">]] </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> [</span><span style="color:#E06C75;">array</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">randomIndex</span><span style="color:#ABB2BF;">], </span><span style="color:#E06C75;">array</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">index</span><span style="color:#ABB2BF;">]];</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> array</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br></div></div><h2 id="è¾“å…¥ä¸ºä¸¤ä¸ªä¸€ç»´æ•°ç»„-å°†è¿™ä¸¤ä¸ªæ•°ç»„åˆå¹¶-å»é‡-ä¸è¦æ±‚æ’åº-è¿”å›ä¸€ç»´æ•°ç»„" tabindex="-1">è¾“å…¥ä¸ºä¸¤ä¸ªä¸€ç»´æ•°ç»„ï¼Œå°†è¿™ä¸¤ä¸ªæ•°ç»„åˆå¹¶ï¼Œå»é‡ï¼Œä¸è¦æ±‚æ’åºï¼Œè¿”å›ä¸€ç»´æ•°ç»„ <a class="header-anchor" href="#è¾“å…¥ä¸ºä¸¤ä¸ªä¸€ç»´æ•°ç»„-å°†è¿™ä¸¤ä¸ªæ•°ç»„åˆå¹¶-å»é‡-ä¸è¦æ±‚æ’åº-è¿”å›ä¸€ç»´æ•°ç»„" aria-label="Permalink to &quot;è¾“å…¥ä¸ºä¸¤ä¸ªä¸€ç»´æ•°ç»„ï¼Œå°†è¿™ä¸¤ä¸ªæ•°ç»„åˆå¹¶ï¼Œå»é‡ï¼Œä¸è¦æ±‚æ’åºï¼Œè¿”å›ä¸€ç»´æ•°ç»„&quot;">â€‹</a></h2><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> dealArr</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">arr1</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">any</span><span style="color:#ABB2BF;">[], </span><span style="color:#E06C75;font-style:italic;">arr2</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">any</span><span style="color:#ABB2BF;">[]): </span><span style="color:#E5C07B;">any</span><span style="color:#ABB2BF;">[] {</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E5C07B;"> Array</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">from</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">new</span><span style="color:#61AFEF;"> Set</span><span style="color:#ABB2BF;">([...</span><span style="color:#E5C07B;">arr1</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">flat</span><span style="color:#ABB2BF;">(), ...</span><span style="color:#E5C07B;">arr2</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">flat</span><span style="color:#ABB2BF;">()]));</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> arr1</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [</span><span style="color:#98C379;">&quot;a&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">, [</span><span style="color:#98C379;">&quot;b&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;c&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">5</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">6</span><span style="color:#ABB2BF;">]];</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> arr2</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">4</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;d&quot;</span><span style="color:#ABB2BF;">, [</span><span style="color:#98C379;">&quot;e&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;f&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;5&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">6</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">7</span><span style="color:#ABB2BF;">]];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;dealArr(arr1, arr2 ); :&gt;&gt; &quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#61AFEF;">dealArr</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">arr1</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">arr2</span><span style="color:#ABB2BF;">)); </span><span style="color:#7F848E;font-style:italic;">// dealArr(arr1, arr2 ); :&gt;&gt;  [ &#39;a&#39;, 1, 2, 3,&#39;b&#39;, &#39;c&#39;, 5,6, 4, &#39;d&#39;, &#39;e&#39;, &#39;f&#39;,&#39;5&#39;, 7]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="ç¼–å†™å‡½æ•°-convert-money-ä¼ å…¥é‡‘é¢-å°†é‡‘é¢è½¬æ¢ä¸ºåƒåˆ†ä½è¡¨ç¤ºæ³•ã€‚ex-87654-3-87-654-3" tabindex="-1">ç¼–å†™å‡½æ•° convert(money) ï¼Œä¼ å…¥é‡‘é¢ï¼Œå°†é‡‘é¢è½¬æ¢ä¸ºåƒåˆ†ä½è¡¨ç¤ºæ³•ã€‚ex:-87654.3 =&gt; -87,654.3 <a class="header-anchor" href="#ç¼–å†™å‡½æ•°-convert-money-ä¼ å…¥é‡‘é¢-å°†é‡‘é¢è½¬æ¢ä¸ºåƒåˆ†ä½è¡¨ç¤ºæ³•ã€‚ex-87654-3-87-654-3" aria-label="Permalink to &quot;ç¼–å†™å‡½æ•° convert(money) ï¼Œä¼ å…¥é‡‘é¢ï¼Œå°†é‡‘é¢è½¬æ¢ä¸ºåƒåˆ†ä½è¡¨ç¤ºæ³•ã€‚ex:-87654.3 =&gt; -87,654.3&quot;">â€‹</a></h2><p>æ€è·¯ï¼šåˆ¤æ–­æ˜¯å¦æ˜¯è´Ÿæ•°ï¼Œåˆ¤æ–­æ˜¯å¦æœ‰å°æ•°ç‚¹ï¼Œå°†æ•´æ•°éƒ¨åˆ†è¿›è¡Œå¤„ç†ã€‚</p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> convert</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">money</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">number</span><span style="color:#ABB2BF;">): </span><span style="color:#E5C07B;">string</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> result</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">string</span><span style="color:#ABB2BF;">[] </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> []; </span><span style="color:#7F848E;font-style:italic;">// ç”¨äºå­˜æ”¾æ•´æ•°éƒ¨åˆ†</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> negativeFlag</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">string</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;&quot;</span><span style="color:#ABB2BF;">; </span><span style="color:#7F848E;font-style:italic;">// æ˜¯å¦è¦è´Ÿå·</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> tail</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">string</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;&quot;</span><span style="color:#ABB2BF;">; </span><span style="color:#7F848E;font-style:italic;">// ç”¨äºå­˜æ”¾å°æ•°ç‚¹åé¢éƒ¨åˆ†</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> arr</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">string</span><span style="color:#ABB2BF;">[] </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> [...</span><span style="color:#61AFEF;">String</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">money</span><span style="color:#ABB2BF;">)];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// åˆ¤æ–­æ˜¯å¦æ˜¯è´Ÿæ•°</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">arr</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">===</span><span style="color:#98C379;"> &quot;-&quot;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">		negativeFlag</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;-&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">		arr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">shift</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// åˆ¤æ–­æ˜¯å¦å­˜åœ¨å°æ•°ç‚¹</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> dotIndex</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">number</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> arr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">indexOf</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;.&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">dotIndex</span><span style="color:#56B6C2;"> !==</span><span style="color:#56B6C2;"> -</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">		tail</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> arr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">splice</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">dotIndex</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">arr</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#56B6C2;"> -</span><span style="color:#E06C75;"> dotIndex</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">join</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// å¤„ç†æ•´æ•°éƒ¨åˆ†åŠ ä¸Šåƒåˆ†ä½</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> reverseArray</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">string</span><span style="color:#ABB2BF;">[] </span><span style="color:#56B6C2;">=</span><span style="color:#E5C07B;"> arr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">reverse</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">	for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E5C07B;"> reverseArray</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> ((</span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> +</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">%</span><span style="color:#D19A66;"> 3</span><span style="color:#56B6C2;"> ===</span><span style="color:#D19A66;"> 0</span><span style="color:#56B6C2;"> &amp;&amp;</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> +</span><span style="color:#D19A66;"> 1</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E5C07B;"> reverseArray</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">			result</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#98C379;"> &quot;,&quot;</span><span style="color:#56B6C2;"> +</span><span style="color:#E06C75;"> reverseArray</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#ABB2BF;">		} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">			result</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> reverseArray</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> negativeFlag</span><span style="color:#56B6C2;"> +</span><span style="color:#E5C07B;"> result</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">reverse</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">join</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">+</span><span style="color:#E06C75;"> tail</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div></div></div></main><footer class="VPDocFooter" data-v-2295edbf data-v-fbb4769a><!--[--><!--]--><div class="edit-info" data-v-fbb4769a><div class="edit-link" data-v-fbb4769a><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/muyaCode/FrontEndInterviewQuestion/edit/main/docs/Document/å‰ç«¯é¢è¯•ç›¸å…³/ã€å‰ç«¯é¢è¯•é¢˜ã€‘/JavaScripté¢è¯•é¢˜/JavaScriptæ‰‹å†™é¢˜/æ‰‹å†™å®ç°JSå¸¸ç”¨æ–¹æ³•.md" target="_blank" rel="noreferrer" data-v-fbb4769a><!--[--><span class="vpi-square-pen edit-link-icon" data-v-fbb4769a></span> åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ<!--]--></a></div><div class="last-updated" data-v-fbb4769a><p class="VPLastUpdated" data-v-fbb4769a data-v-49fb53e5>ä¸Šæ¬¡æ›´æ–°ï¼š: <time datetime="2024-05-25T16:51:33.000Z" data-v-49fb53e5></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-fbb4769a><span class="visually-hidden" id="doc-footer-aria-label" data-v-fbb4769a>Pager</span><div class="pager" data-v-fbb4769a><a class="VPLink link pager-link prev" href="/FrontEndInterviewQuestion/Document/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E7%9B%B8%E5%85%B3/%E3%80%90%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98%E3%80%91/JavaScript%E9%9D%A2%E8%AF%95%E9%A2%98/JavaScript%E9%AB%98%E7%BA%A7%E9%9D%A2%E8%AF%95%E9%A2%98" data-v-fbb4769a><!--[--><span class="desc" data-v-fbb4769a>ä¸Šä¸€ç¯‡</span><span class="title" data-v-fbb4769a>JavaScripté«˜çº§é¢è¯•é¢˜</span><!--]--></a></div><div class="pager" data-v-fbb4769a><a class="VPLink link pager-link next" href="/FrontEndInterviewQuestion/Document/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E7%9B%B8%E5%85%B3/%E3%80%90%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98%E3%80%91/JavaScript%E9%9D%A2%E8%AF%95%E9%A2%98/JavaScript%E6%89%8B%E5%86%99%E9%A2%98/%E6%89%8B%E5%86%99%E5%AE%9E%E7%8E%B0JS%E5%BA%95%E5%B1%82%E6%96%B9%E6%B3%95" data-v-fbb4769a><!--[--><span class="desc" data-v-fbb4769a>ä¸‹ä¸€ç¯‡</span><span class="title" data-v-fbb4769a>æ‰‹å†™å®ç°JSåº•å±‚æ–¹æ³•</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-2fdd469f data-v-991ed27d><div class="container" data-v-991ed27d><p class="message" data-v-991ed27d>Released under the MIT License.</p><p class="copyright" data-v-991ed27d>Copyright Â© 2022-2023  MuYa</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"document_å‰ç«¯é¢è¯•ç›¸å…³_ã€å‰ç«¯é¢è¯•é¢˜ã€‘_csså’Œhtmlé¢è¯•é¢˜_webå¼€å‘é¢è¯•é¢˜.md\":\"CmcncyKI\",\"document_å‰ç«¯é¢è¯•ç›¸å…³_ã€å‰ç«¯é¢è¯•é¢˜ã€‘_javascripté¢è¯•é¢˜_javascriptæ‰‹å†™é¢˜_æ‰‹å†™cssé¢„å¤„ç†å™¨.md\":\"DVtgbLuy\",\"document_å‰ç«¯é¢è¯•ç›¸å…³_ã€å‰ç«¯é¢è¯•é¢˜ã€‘_csså’Œhtmlé¢è¯•é¢˜_ç§»åŠ¨webå¼€å‘.md\":\"Bvm6M604\",\"document_å‰ç«¯é¢è¯•ç›¸å…³_ã€å‰ç«¯é¢è¯•é¢˜ã€‘_ã€å…¶ä»–é¢è¯•é¢˜ã€‘_seoç›¸å…³é¢è¯•é¢˜.md\":\"BEATRcuh\",\"document_å‰ç«¯é¢è¯•ç›¸å…³_ã€å‰ç«¯é¢è¯•é¢˜ã€‘_nodejsé¢è¯•é¢˜_æœåŠ¡ç«¯ç¼–ç¨‹é¢è¯•é¢˜.md\":\"BRCM8WyK\",\"document_å‰ç«¯é¢è¯•ç›¸å…³_ã€å‰ç«¯é¢è¯•é¢˜ã€‘_nodejsé¢è¯•é¢˜_nodeé¡¹ç›®å·¥ç¨‹åŒ–é¢è¯•é¢˜.md\":\"DCtHlXdG\",\"document_å‰ç«¯é¢è¯•ç›¸å…³_ã€é¢è¯•å‡†å¤‡å’Œå¦‚ä½•é¢è¯•ã€‘_èŒä¸šè§„åˆ’å’Œé¢è¯•æŠ€å·§.md\":\"Biktf4dG\",\"document_å‰ç«¯é¢è¯•ç›¸å…³_ã€å‰ç«¯é¢è¯•é¢˜ã€‘_å¼€æºé¢è¯•é¢˜.md\":\"DgdNd9-4\",\"document_å‰ç«¯é¢è¯•ç›¸å…³_ã€å‰ç«¯é¢è¯•é¢˜ã€‘_jså’Œæµè§ˆå™¨åŸç†é¢è¯•é¢˜_javascriptå¼•æ“è¿è¡ŒåŸç†.md\":\"DAOTOfsq\",\"document_å‰ç«¯é¢è¯•ç›¸å…³_ã€å‰ç«¯é¢è¯•é¢˜ã€‘_è®¡ç®—æœºåŸºç¡€é¢è¯•é¢˜_æ“ä½œç³»ç»Ÿé¢è¯•é¢˜.md\":\"SjtAzPYm\",\"document_å‰ç«¯é¢è¯•ç›¸å…³_ã€å‰ç«¯é¢è¯•é¢˜ã€‘_æ˜é‡‘é¢è¯•ç›¸å…³é¢˜æˆ–æ–‡ç« .md\":\"8hKQDiD3\",\"document_å‰ç«¯é¢è¯•ç›¸å…³_ã€å‰ç«¯é¢è¯•é¢˜ã€‘_ã€å…¶ä»–é¢è¯•é¢˜ã€‘_é¡¹ç›®è®¾è®¡å’Œå¼€å‘å·¥ä½œæµçš„é¢è¯•é¢˜.md\":\"ZM78SA_m\",\"document_å‰ç«¯é¢è¯•ç›¸å…³_ã€å‰ç«¯é¢è¯•é¢˜ã€‘_æ¡†æ¶ç›¸å…³é¢è¯•é¢˜_å¾®ä¿¡å°ç¨‹åºå¼€å‘é¢è¯•é¢˜.md\":\"BfjEZIYX\",\"document_å‰ç«¯é¢è¯•ç›¸å…³_ã€å‰ç«¯é¢è¯•é¢˜ã€‘_nodejsé¢è¯•é¢˜_nodeåŸç†é¢è¯•é¢˜.md\":\"CBxMUSqu\",\"document_å‰ç«¯é¢è¯•ç›¸å…³_ã€é¢è¯•å‡†å¤‡å’Œå¦‚ä½•é¢è¯•ã€‘_é¢è¯•æµç¨‹å’Œé¢è¯•ç»éªŒ.md\":\"BXch46Gm\",\"document_å‰ç«¯é¢è¯•ç›¸å…³_ã€å‰ç«¯é¢è¯•é¢˜ã€‘_æ¡†æ¶ç›¸å…³é¢è¯•é¢˜_jqueryé¢è¯•é¢˜.md\":\"D7OWLVRl\",\"document_å‰ç«¯é¢è¯•ç›¸å…³_ã€é¢è¯•å‡†å¤‡å’Œå¦‚ä½•é¢è¯•ã€‘_å‰ç«¯å·¥ç¨‹å¸ˆç®€å†æ€ä¹ˆå†™.md\":\"CJ27RiZm\",\"document_å‰ç«¯é¢è¯•ç›¸å…³_ã€é¢è¯•å‡†å¤‡å’Œå¦‚ä½•é¢è¯•ã€‘_åˆ«äººçš„é¢è¯•æ€»ç»“.md\":\"IMfjJaRz\",\"document_å‰ç«¯é¢è¯•ç›¸å…³_ã€å‰ç«¯é¢è¯•é¢˜ã€‘_æ¡†æ¶ç›¸å…³é¢è¯•é¢˜_angularé¢è¯•é¢˜.md\":\"CM7xe5PS\",\"index.md\":\"Fmc-NkAq\",\"document_å‰ç«¯é¢è¯•ç›¸å…³_ã€å‰ç«¯é¢è¯•é¢˜ã€‘_æ¡†æ¶ç›¸å…³é¢è¯•é¢˜_æ¡Œé¢ç«¯è·¨å¹³å°æ¡†æ¶é¢è¯•é¢˜.md\":\"tft4NRl1\",\"document_å‰ç«¯é¢è¯•ç›¸å…³_ã€å‰ç«¯é¢è¯•é¢˜ã€‘_javascripté¢è¯•é¢˜_javascriptæ‰‹å†™é¢˜_æ‰‹å†™å®ç°å·¥å…·.md\":\"DmXGn-Zp\",\"document_å‰ç«¯é¢è¯•ç›¸å…³_ã€å‰ç«¯é¢è¯•é¢˜ã€‘_è®¡ç®—æœºåŸºç¡€é¢è¯•é¢˜_ç¼–è¯‘åŸç†é¢è¯•é¢˜.md\":\"BAkmCvSN\",\"document_å‰ç«¯é¢è¯•ç›¸å…³_ã€é¢è¯•å‡†å¤‡å’Œå¦‚ä½•é¢è¯•ã€‘_é¢è¯•åˆ·é¢˜ç½‘ç«™.md\":\"B0gDBHeN\",\"document_å‰ç«¯é¢è¯•ç›¸å…³_ã€å‰ç«¯é¢è¯•é¢˜ã€‘_ã€å…¶ä»–é¢è¯•é¢˜ã€‘_å‰ç«¯å·¥ç¨‹èƒ½åŠ›é¢è¯•é¢˜.md\":\"BgxdaQfP\",\"document_å‰ç«¯é¢è¯•ç›¸å…³_ã€å‰ç«¯é¢è¯•é¢˜ã€‘_è®¡ç®—æœºåŸºç¡€é¢è¯•é¢˜_ç½‘ç»œå®‰å…¨é¢è¯•é¢˜.md\":\"vBf5rJvY\",\"document_å‰ç«¯é¢è¯•ç›¸å…³_ã€å‰ç«¯é¢è¯•é¢˜ã€‘_ã€å…¶ä»–é¢è¯•é¢˜ã€‘_å‰ç«¯æ€§èƒ½ä¼˜åŒ–é¢è¯•é¢˜.md\":\"DtVsqcQG\",\"order_markdownå›¾æ ‡.md\":\"BnZM9Mq2\",\"document_å‰ç«¯é¢è¯•ç›¸å…³_ã€å‰ç«¯é¢è¯•é¢˜ã€‘_csså’Œhtmlé¢è¯•é¢˜_htmlé¢è¯•é¢˜.md\":\"B3RpSAor\",\"document_å‰ç«¯é¢è¯•ç›¸å…³_ã€å‰ç«¯é¢è¯•é¢˜ã€‘_è®¡ç®—æœºåŸºç¡€é¢è¯•é¢˜_è®¡ç®—æœºç»„æˆåŸç†.md\":\"D8AuCmHH\",\"document_å‰ç«¯é¢è¯•ç›¸å…³_ã€å‰ç«¯é¢è¯•é¢˜ã€‘_ã€å…¶ä»–é¢è¯•é¢˜ã€‘_å‰ç«¯å®é™…é¡¹ç›®ä¸šåŠ¡çš„å®ç°é—®é¢˜.md\":\"CCJlpW3T\",\"document_å‰ç«¯é¢è¯•ç›¸å…³_ã€é¢è¯•å‡†å¤‡å’Œå¦‚ä½•é¢è¯•ã€‘_é¢è¯•å‡†å¤‡å’ŒæŠ€å·§.md\":\"xb8c1j6G\",\"document_å‰ç«¯é¢è¯•ç›¸å…³_ã€å‰ç«¯é¢è¯•é¢˜ã€‘_javascripté¢è¯•é¢˜_typescripté¢è¯•é¢˜.md\":\"CfQs48Xk\",\"document_å‰ç«¯é¢è¯•ç›¸å…³_ã€é¢è¯•å‡†å¤‡å’Œå¦‚ä½•é¢è¯•ã€‘_æ¨¡æ‹Ÿé¢è¯•.md\":\"YXfpyz9O\",\"document_å‰ç«¯é¢è¯•ç›¸å…³_ã€å‰ç«¯é¢è¯•é¢˜ã€‘_nodejsé¢è¯•é¢˜_nodejsé¢è¯•é¢˜.md\":\"a5Jz_0KE\",\"document_å‰ç«¯é¢è¯•ç›¸å…³_ã€å‰ç«¯é¢è¯•é¢˜ã€‘_è®¡ç®—æœºåŸºç¡€é¢è¯•é¢˜_è®¡ç®—æœºç½‘ç»œé¢è¯•é¢˜.md\":\"uOq9XWAG\",\"document_å‰ç«¯é¢è¯•ç›¸å…³_ã€å‰ç«¯é¢è¯•é¢˜ã€‘_javascripté¢è¯•é¢˜_javascriptæ‰‹å†™é¢˜_æ‰‹å†™promise.md\":\"BoND67nJ\",\"document_å‰ç«¯é¢è¯•ç›¸å…³_ã€å‰ç«¯é¢è¯•é¢˜ã€‘_jså’Œæµè§ˆå™¨åŸç†é¢è¯•é¢˜_æµè§ˆå™¨å·¥ä½œåŸç†å’Œé¢è¯•é¢˜.md\":\"C1yL6dPY\",\"document_å‰ç«¯é¢è¯•ç›¸å…³_ã€å‰ç«¯é¢è¯•é¢˜ã€‘_æ¡†æ¶ç›¸å…³é¢è¯•é¢˜_reacté¢è¯•é¢˜.md\":\"Dkl3cEBe\",\"document_å‰ç«¯é¢è¯•ç›¸å…³_ã€å‰ç«¯é¢è¯•é¢˜ã€‘_è®¡ç®—æœºåŸºç¡€é¢è¯•é¢˜_jsè®¾è®¡æ¨¡å¼é¢è¯•é¢˜.md\":\"DE05FHLa\",\"document_å‰ç«¯é¢è¯•ç›¸å…³_ã€å‰ç«¯é¢è¯•é¢˜ã€‘_javascripté¢è¯•é¢˜_javascriptæ‰‹å†™é¢˜_æ‰‹å†™å®ç°jsåº•å±‚æ–¹æ³•.md\":\"BJRUJM7H\",\"document_å‰ç«¯é¢è¯•ç›¸å…³_ã€å‰ç«¯é¢è¯•é¢˜ã€‘_æ¡†æ¶ç›¸å…³é¢è¯•é¢˜_vueåŸç†é¢è¯•é¢˜.md\":\"DwBRnQza\",\"document_å‰ç«¯é¢è¯•ç›¸å…³_ã€å‰ç«¯é¢è¯•é¢˜ã€‘_csså’Œhtmlé¢è¯•é¢˜_cssé¢è¯•é¢˜.md\":\"Dx0wb9UB\",\"document_å‰ç«¯é¢è¯•ç›¸å…³_ã€å‰ç«¯é¢è¯•é¢˜ã€‘_javascripté¢è¯•é¢˜_javascriptæ‰‹å†™é¢˜_æ‰‹å†™å®ç°jså¸¸ç”¨æ–¹æ³•.md\":\"BvEXRzqn\",\"document_å‰ç«¯é¢è¯•ç›¸å…³_ã€å‰ç«¯é¢è¯•é¢˜ã€‘_æ¡†æ¶ç›¸å…³é¢è¯•é¢˜_vueé¢è¯•é¢˜.md\":\"kLf_6RUt\",\"document_å‰ç«¯é¢è¯•ç›¸å…³_ã€å‰ç«¯é¢è¯•é¢˜ã€‘_è®¡ç®—æœºåŸºç¡€é¢è¯•é¢˜_jsæ•°æ®ç»“æ„å’Œç®—æ³•.md\":\"C_YK4yI7\",\"document_å‰ç«¯é¢è¯•ç›¸å…³_ã€å‰ç«¯é¢è¯•é¢˜ã€‘_javascripté¢è¯•é¢˜_javascripté¢è¯•é¢˜.md\":\"CLGclnWX\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"zh\",\"dir\":\"ltr\",\"title\":\"ç‰§æ¶¯å‰ç«¯é¢è¯•é¢˜æ•´åˆ\",\"description\":\"æ”¶é›†æ•´åˆå‰ç«¯é¢è¯•é¢˜ï¼Œå‰ç«¯é¢è¯•é¢˜å¤§å…¨\",\"base\":\"/FrontEndInterviewQuestion/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"logo\":\"/img/buding.svg\",\"siteTitle\":\"ç‰§æ¶¯å‰ç«¯é¢è¯•é¢˜\",\"outlineTitle\":\"âš¡ï¸æ–‡æ¡£å†…å®¹å¤§çº²\",\"outline\":\"deep\",\"search\":{\"provider\":\"local\",\"options\":{\"locales\":{\"root\":{\"translations\":{\"button\":{\"buttonText\":\"æœç´¢æ–‡æ¡£\",\"buttonAriaLabel\":\"æœç´¢æ–‡æ¡£\"},\"modal\":{\"noResultsText\":\"æ— æ³•æ‰¾åˆ°ç›¸å…³ç»“æœ\",\"displayDetails\":\"æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯\",\"resetButtonTitle\":\"æ¸…é™¤æŸ¥è¯¢æ¡ä»¶\",\"backButtonTitle\":\"è¿”å›æœç´¢ç»“æœ\",\"footer\":{\"selectText\":\"é€‰æ‹©\",\"selectKeyAriaLabel\":\"enter\",\"navigateText\":\"åˆ‡æ¢\",\"navigateUpKeyAriaLabel\":\"up arrow\",\"navigateDownKeyAriaLabel\":\"down arrow\",\"closeText\":\"å…³é—­\",\"closeKeyAriaLabel\":\"escape\"}}}}},\"miniSearch\":{\"options\":{},\"searchOptions\":{}}}},\"nav\":[{\"text\":\"ğŸŒæˆ‘çš„ä¸ªäººç½‘ç«™\",\"link\":\"\"},{\"text\":\"âœ¨æ˜é‡‘æ–‡ç« \",\"link\":\"\"}],\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/muyaCode/FrontEndInterviewQuestion\"},{\"icon\":{\"svg\":\"<svg t=\\\"1690871772610\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"987\\\" width=\\\"256\\\" height=\\\"256\\\">\\n        <path d=\\\"M512 1024C229.222 1024 0 794.778 0 512S229.222 0 512 0s512 229.222 512 512-229.222 512-512 512z m259.149-568.883h-290.74a25.293 25.293 0 0 0-25.292 25.293l-0.026 63.206c0 13.952 11.315 25.293 25.267 25.293h177.024c13.978 0 25.293 11.315 25.293 25.267v12.646a75.853 75.853 0 0 1-75.853 75.853h-240.23a25.293 25.293 0 0 1-25.267-25.293V417.203a75.853 75.853 0 0 1 75.827-75.853h353.946a25.293 25.293 0 0 0 25.267-25.292l0.077-63.207a25.293 25.293 0 0 0-25.268-25.293H417.152a189.62 189.62 0 0 0-189.62 189.645V771.15c0 13.977 11.316 25.293 25.294 25.293h372.94a170.65 170.65 0 0 0 170.65-170.65V480.384a25.293 25.293 0 0 0-25.293-25.267z\\\" fill=\\\"#C71D23\\\" p-id=\\\"988\\\"></path>\\n      </svg>\"},\"link\":\"https://gitee.com/muyaCode/FrontEndInterviewQuestion\"}],\"sidebar\":{\"/\":[{\"text\":\"markdownå›¾æ ‡\",\"link\":\"/order/markdownå›¾æ ‡\"},{\"text\":\"ğŸ˜‡å‰ç«¯é¢è¯•ç›¸å…³\",\"collapsible\":true,\"collapsed\":true,\"items\":[{\"text\":\"ã€é¢è¯•å‡†å¤‡å’Œå¦‚ä½•é¢è¯•ã€‘\",\"collapsible\":true,\"collapsed\":true,\"items\":[{\"text\":\"èŒä¸šè§„åˆ’å’Œé¢è¯•æŠ€å·§\",\"link\":\"/Document/å‰ç«¯é¢è¯•ç›¸å…³/ã€é¢è¯•å‡†å¤‡å’Œå¦‚ä½•é¢è¯•ã€‘/èŒä¸šè§„åˆ’å’Œé¢è¯•æŠ€å·§\"},{\"text\":\"é¢è¯•å‡†å¤‡å’ŒæŠ€å·§\",\"link\":\"/Document/å‰ç«¯é¢è¯•ç›¸å…³/ã€é¢è¯•å‡†å¤‡å’Œå¦‚ä½•é¢è¯•ã€‘/é¢è¯•å‡†å¤‡å’ŒæŠ€å·§\"},{\"text\":\"å‰ç«¯å·¥ç¨‹å¸ˆç®€å†æ€ä¹ˆå†™\",\"link\":\"/Document/å‰ç«¯é¢è¯•ç›¸å…³/ã€é¢è¯•å‡†å¤‡å’Œå¦‚ä½•é¢è¯•ã€‘/å‰ç«¯å·¥ç¨‹å¸ˆç®€å†æ€ä¹ˆå†™\"},{\"text\":\"é¢è¯•æµç¨‹å’Œé¢è¯•ç»éªŒ\",\"link\":\"/Document/å‰ç«¯é¢è¯•ç›¸å…³/ã€é¢è¯•å‡†å¤‡å’Œå¦‚ä½•é¢è¯•ã€‘/é¢è¯•æµç¨‹å’Œé¢è¯•ç»éªŒ\"},{\"text\":\"é¢è¯•åˆ·é¢˜ç½‘ç«™\",\"link\":\"/Document/å‰ç«¯é¢è¯•ç›¸å…³/ã€é¢è¯•å‡†å¤‡å’Œå¦‚ä½•é¢è¯•ã€‘/é¢è¯•åˆ·é¢˜ç½‘ç«™\"},{\"text\":\"æ¨¡æ‹Ÿé¢è¯•\",\"link\":\"/Document/å‰ç«¯é¢è¯•ç›¸å…³/ã€é¢è¯•å‡†å¤‡å’Œå¦‚ä½•é¢è¯•ã€‘/æ¨¡æ‹Ÿé¢è¯•\"},{\"text\":\"åˆ«äººçš„é¢è¯•æ€»ç»“\",\"link\":\"/Document/å‰ç«¯é¢è¯•ç›¸å…³/ã€é¢è¯•å‡†å¤‡å’Œå¦‚ä½•é¢è¯•ã€‘/åˆ«äººçš„é¢è¯•æ€»ç»“\"}]},{\"text\":\"ã€å‰ç«¯é¢è¯•é¢˜ã€‘\",\"collapsible\":true,\"collapsed\":true,\"items\":[{\"text\":\"æ˜é‡‘é¢è¯•ç›¸å…³é¢˜æˆ–æ–‡ç« \",\"link\":\"/Document/å‰ç«¯é¢è¯•ç›¸å…³/ã€å‰ç«¯é¢è¯•é¢˜ã€‘/æ˜é‡‘é¢è¯•ç›¸å…³é¢˜æˆ–æ–‡ç« \"},{\"text\":\"å¼€æºé¢è¯•é¢˜\",\"link\":\"/Document/å‰ç«¯é¢è¯•ç›¸å…³/ã€å‰ç«¯é¢è¯•é¢˜ã€‘/å¼€æºé¢è¯•é¢˜\"},{\"text\":\"è®¡ç®—æœºåŸºç¡€é¢è¯•é¢˜\",\"collapsible\":true,\"collapsed\":true,\"items\":[{\"text\":\"ç¼–è¯‘åŸç†é¢è¯•é¢˜\",\"link\":\"/Document/å‰ç«¯é¢è¯•ç›¸å…³/ã€å‰ç«¯é¢è¯•é¢˜ã€‘/è®¡ç®—æœºåŸºç¡€é¢è¯•é¢˜/ç¼–è¯‘åŸç†é¢è¯•é¢˜\"},{\"text\":\"æ“ä½œç³»ç»Ÿé¢è¯•é¢˜\",\"link\":\"/Document/å‰ç«¯é¢è¯•ç›¸å…³/ã€å‰ç«¯é¢è¯•é¢˜ã€‘/è®¡ç®—æœºåŸºç¡€é¢è¯•é¢˜/æ“ä½œç³»ç»Ÿé¢è¯•é¢˜\"},{\"text\":\"è®¡ç®—æœºç»„æˆåŸç†\",\"link\":\"/Document/å‰ç«¯é¢è¯•ç›¸å…³/ã€å‰ç«¯é¢è¯•é¢˜ã€‘/è®¡ç®—æœºåŸºç¡€é¢è¯•é¢˜/è®¡ç®—æœºç»„æˆåŸç†\"},{\"text\":\"è®¡ç®—æœºç½‘ç»œé¢è¯•é¢˜\",\"link\":\"/Document/å‰ç«¯é¢è¯•ç›¸å…³/ã€å‰ç«¯é¢è¯•é¢˜ã€‘/è®¡ç®—æœºåŸºç¡€é¢è¯•é¢˜/è®¡ç®—æœºç½‘ç»œé¢è¯•é¢˜\"},{\"text\":\"ç½‘ç»œå®‰å…¨é¢è¯•é¢˜\",\"link\":\"/Document/å‰ç«¯é¢è¯•ç›¸å…³/ã€å‰ç«¯é¢è¯•é¢˜ã€‘/è®¡ç®—æœºåŸºç¡€é¢è¯•é¢˜/ç½‘ç»œå®‰å…¨é¢è¯•é¢˜\"},{\"text\":\"JSè®¾è®¡æ¨¡å¼é¢è¯•é¢˜\",\"link\":\"/Document/å‰ç«¯é¢è¯•ç›¸å…³/ã€å‰ç«¯é¢è¯•é¢˜ã€‘/è®¡ç®—æœºåŸºç¡€é¢è¯•é¢˜/JSè®¾è®¡æ¨¡å¼é¢è¯•é¢˜\"},{\"text\":\"JSæ•°æ®ç»“æ„å’Œç®—æ³•\",\"link\":\"/Document/å‰ç«¯é¢è¯•ç›¸å…³/ã€å‰ç«¯é¢è¯•é¢˜ã€‘/è®¡ç®—æœºåŸºç¡€é¢è¯•é¢˜/JSæ•°æ®ç»“æ„å’Œç®—æ³•\"}]},{\"text\":\"ã€å…¶ä»–é¢è¯•é¢˜ã€‘\",\"collapsible\":true,\"collapsed\":true,\"items\":[{\"text\":\"å‰ç«¯å·¥ç¨‹èƒ½åŠ›é¢è¯•é¢˜\",\"link\":\"/Document/å‰ç«¯é¢è¯•ç›¸å…³/ã€å‰ç«¯é¢è¯•é¢˜ã€‘/ã€å…¶ä»–é¢è¯•é¢˜ã€‘/å‰ç«¯å·¥ç¨‹èƒ½åŠ›é¢è¯•é¢˜\"},{\"text\":\"å‰ç«¯å®é™…é¡¹ç›®ä¸šåŠ¡çš„å®ç°é—®é¢˜\",\"link\":\"/Document/å‰ç«¯é¢è¯•ç›¸å…³/ã€å‰ç«¯é¢è¯•é¢˜ã€‘/ã€å…¶ä»–é¢è¯•é¢˜ã€‘/å‰ç«¯å®é™…é¡¹ç›®ä¸šåŠ¡çš„å®ç°é—®é¢˜\"},{\"text\":\"å‰ç«¯æ€§èƒ½ä¼˜åŒ–é¢è¯•é¢˜\",\"link\":\"/Document/å‰ç«¯é¢è¯•ç›¸å…³/ã€å‰ç«¯é¢è¯•é¢˜ã€‘/ã€å…¶ä»–é¢è¯•é¢˜ã€‘/å‰ç«¯æ€§èƒ½ä¼˜åŒ–é¢è¯•é¢˜\"},{\"text\":\"é¡¹ç›®è®¾è®¡å’Œå¼€å‘å·¥ä½œæµçš„é¢è¯•é¢˜\",\"link\":\"/Document/å‰ç«¯é¢è¯•ç›¸å…³/ã€å‰ç«¯é¢è¯•é¢˜ã€‘/ã€å…¶ä»–é¢è¯•é¢˜ã€‘/é¡¹ç›®è®¾è®¡å’Œå¼€å‘å·¥ä½œæµçš„é¢è¯•é¢˜\"},{\"text\":\"SEOç›¸å…³é¢è¯•é¢˜\",\"link\":\"/Document/å‰ç«¯é¢è¯•ç›¸å…³/ã€å‰ç«¯é¢è¯•é¢˜ã€‘/ã€å…¶ä»–é¢è¯•é¢˜ã€‘/SEOç›¸å…³é¢è¯•é¢˜\"}]},{\"text\":\"JSå’Œæµè§ˆå™¨åŸç†é¢è¯•é¢˜\",\"collapsible\":true,\"collapsed\":true,\"items\":[{\"text\":\"æµè§ˆå™¨å·¥ä½œåŸç†å’Œé¢è¯•é¢˜\",\"link\":\"/Document/å‰ç«¯é¢è¯•ç›¸å…³/ã€å‰ç«¯é¢è¯•é¢˜ã€‘/JSå’Œæµè§ˆå™¨åŸç†é¢è¯•é¢˜/æµè§ˆå™¨å·¥ä½œåŸç†å’Œé¢è¯•é¢˜\"},{\"text\":\"JavaScriptå¼•æ“è¿è¡ŒåŸç†\",\"link\":\"/Document/å‰ç«¯é¢è¯•ç›¸å…³/ã€å‰ç«¯é¢è¯•é¢˜ã€‘/JSå’Œæµè§ˆå™¨åŸç†é¢è¯•é¢˜/JavaScriptå¼•æ“è¿è¡ŒåŸç†\"}]},{\"text\":\"CSSå’ŒHTMLé¢è¯•é¢˜\",\"collapsible\":true,\"collapsed\":true,\"items\":[{\"text\":\"HTMLé¢è¯•é¢˜\",\"link\":\"/Document/å‰ç«¯é¢è¯•ç›¸å…³/ã€å‰ç«¯é¢è¯•é¢˜ã€‘/CSSå’ŒHTMLé¢è¯•é¢˜/HTMLé¢è¯•é¢˜\"},{\"text\":\"CSSé¢è¯•é¢˜\",\"link\":\"/Document/å‰ç«¯é¢è¯•ç›¸å…³/ã€å‰ç«¯é¢è¯•é¢˜ã€‘/CSSå’ŒHTMLé¢è¯•é¢˜/CSSé¢è¯•é¢˜\"},{\"text\":\"Webå¼€å‘é¢è¯•é¢˜\",\"link\":\"/Document/å‰ç«¯é¢è¯•ç›¸å…³/ã€å‰ç«¯é¢è¯•é¢˜ã€‘/CSSå’ŒHTMLé¢è¯•é¢˜/Webå¼€å‘é¢è¯•é¢˜\"},{\"text\":\"ç§»åŠ¨Webå¼€å‘\",\"link\":\"/Document/å‰ç«¯é¢è¯•ç›¸å…³/ã€å‰ç«¯é¢è¯•é¢˜ã€‘/CSSå’ŒHTMLé¢è¯•é¢˜/ç§»åŠ¨Webå¼€å‘\"}]},{\"text\":\"JavaScripté¢è¯•é¢˜\",\"collapsible\":true,\"collapsed\":true,\"items\":[{\"text\":\"JavaScripté¢è¯•é¢˜\",\"link\":\"/Document/å‰ç«¯é¢è¯•ç›¸å…³/ã€å‰ç«¯é¢è¯•é¢˜ã€‘/JavaScripté¢è¯•é¢˜/JavaScripté¢è¯•é¢˜\"},{\"text\":\"JavaScriptåŸºç¡€é¢è¯•é¢˜\",\"link\":\"/Document/å‰ç«¯é¢è¯•ç›¸å…³/ã€å‰ç«¯é¢è¯•é¢˜ã€‘/JavaScripté¢è¯•é¢˜/JavaScriptåŸºç¡€é¢è¯•é¢˜\"},{\"text\":\"JavaScripté«˜çº§é¢è¯•é¢˜\",\"link\":\"/Document/å‰ç«¯é¢è¯•ç›¸å…³/ã€å‰ç«¯é¢è¯•é¢˜ã€‘/JavaScripté¢è¯•é¢˜/JavaScripté«˜çº§é¢è¯•é¢˜\"},{\"text\":\"JavaScriptæ‰‹å†™é¢˜\",\"collapsible\":true,\"collapsed\":true,\"items\":[{\"text\":\"æ‰‹å†™å®ç°JSå¸¸ç”¨æ–¹æ³•\",\"link\":\"/Document/å‰ç«¯é¢è¯•ç›¸å…³/ã€å‰ç«¯é¢è¯•é¢˜ã€‘/JavaScripté¢è¯•é¢˜/JavaScriptæ‰‹å†™é¢˜/æ‰‹å†™å®ç°JSå¸¸ç”¨æ–¹æ³•\"},{\"text\":\"æ‰‹å†™å®ç°JSåº•å±‚æ–¹æ³•\",\"link\":\"/Document/å‰ç«¯é¢è¯•ç›¸å…³/ã€å‰ç«¯é¢è¯•é¢˜ã€‘/JavaScripté¢è¯•é¢˜/JavaScriptæ‰‹å†™é¢˜/æ‰‹å†™å®ç°JSåº•å±‚æ–¹æ³•\"},{\"text\":\"æ‰‹å†™Promise\",\"link\":\"/Document/å‰ç«¯é¢è¯•ç›¸å…³/ã€å‰ç«¯é¢è¯•é¢˜ã€‘/JavaScripté¢è¯•é¢˜/JavaScriptæ‰‹å†™é¢˜/æ‰‹å†™Promise\"},{\"text\":\"æ‰‹å†™CSSé¢„å¤„ç†å™¨\",\"link\":\"/Document/å‰ç«¯é¢è¯•ç›¸å…³/ã€å‰ç«¯é¢è¯•é¢˜ã€‘/JavaScripté¢è¯•é¢˜/JavaScriptæ‰‹å†™é¢˜/æ‰‹å†™CSSé¢„å¤„ç†å™¨\"},{\"text\":\"æ‰‹å†™å®ç°å·¥å…·\",\"link\":\"/Document/å‰ç«¯é¢è¯•ç›¸å…³/ã€å‰ç«¯é¢è¯•é¢˜ã€‘/JavaScripté¢è¯•é¢˜/JavaScriptæ‰‹å†™é¢˜/æ‰‹å†™å®ç°å·¥å…·\"}]},{\"text\":\"Typescripté¢è¯•é¢˜\",\"link\":\"/Document/å‰ç«¯é¢è¯•ç›¸å…³/ã€å‰ç«¯é¢è¯•é¢˜ã€‘/JavaScripté¢è¯•é¢˜/Typescripté¢è¯•é¢˜\"}]},{\"text\":\"æ¡†æ¶ç›¸å…³é¢è¯•é¢˜\",\"collapsible\":true,\"collapsed\":true,\"items\":[{\"text\":\"Vueé¢è¯•é¢˜\",\"link\":\"/Document/å‰ç«¯é¢è¯•ç›¸å…³/ã€å‰ç«¯é¢è¯•é¢˜ã€‘/æ¡†æ¶ç›¸å…³é¢è¯•é¢˜/Vueé¢è¯•é¢˜\"},{\"text\":\"VueåŸç†é¢è¯•é¢˜\",\"link\":\"/Document/å‰ç«¯é¢è¯•ç›¸å…³/ã€å‰ç«¯é¢è¯•é¢˜ã€‘/æ¡†æ¶ç›¸å…³é¢è¯•é¢˜/VueåŸç†é¢è¯•é¢˜\"},{\"text\":\"å¾®ä¿¡å°ç¨‹åºå¼€å‘é¢è¯•é¢˜\",\"link\":\"/Document/å‰ç«¯é¢è¯•ç›¸å…³/ã€å‰ç«¯é¢è¯•é¢˜ã€‘/æ¡†æ¶ç›¸å…³é¢è¯•é¢˜/å¾®ä¿¡å°ç¨‹åºå¼€å‘é¢è¯•é¢˜\"},{\"text\":\"Reacté¢è¯•é¢˜\",\"link\":\"/Document/å‰ç«¯é¢è¯•ç›¸å…³/ã€å‰ç«¯é¢è¯•é¢˜ã€‘/æ¡†æ¶ç›¸å…³é¢è¯•é¢˜/Reacté¢è¯•é¢˜\"},{\"text\":\"Angularé¢è¯•é¢˜\",\"link\":\"/Document/å‰ç«¯é¢è¯•ç›¸å…³/ã€å‰ç«¯é¢è¯•é¢˜ã€‘/æ¡†æ¶ç›¸å…³é¢è¯•é¢˜/Angularé¢è¯•é¢˜\"},{\"text\":\"JQueryé¢è¯•é¢˜\",\"link\":\"/Document/å‰ç«¯é¢è¯•ç›¸å…³/ã€å‰ç«¯é¢è¯•é¢˜ã€‘/æ¡†æ¶ç›¸å…³é¢è¯•é¢˜/JQueryé¢è¯•é¢˜\"},{\"text\":\"æ¡Œé¢ç«¯è·¨å¹³å°æ¡†æ¶é¢è¯•é¢˜\",\"link\":\"/Document/å‰ç«¯é¢è¯•ç›¸å…³/ã€å‰ç«¯é¢è¯•é¢˜ã€‘/æ¡†æ¶ç›¸å…³é¢è¯•é¢˜/æ¡Œé¢ç«¯è·¨å¹³å°æ¡†æ¶é¢è¯•é¢˜\"}]},{\"text\":\"NodeJSé¢è¯•é¢˜\",\"collapsible\":true,\"collapsed\":true,\"items\":[{\"text\":\"NodeJSé¢è¯•é¢˜\",\"link\":\"/Document/å‰ç«¯é¢è¯•ç›¸å…³/ã€å‰ç«¯é¢è¯•é¢˜ã€‘/NodeJSé¢è¯•é¢˜/NodeJSé¢è¯•é¢˜\"},{\"text\":\"Nodeé¡¹ç›®å·¥ç¨‹åŒ–é¢è¯•é¢˜\",\"link\":\"/Document/å‰ç«¯é¢è¯•ç›¸å…³/ã€å‰ç«¯é¢è¯•é¢˜ã€‘/NodeJSé¢è¯•é¢˜/Nodeé¡¹ç›®å·¥ç¨‹åŒ–é¢è¯•é¢˜\"},{\"text\":\"æœåŠ¡ç«¯ç¼–ç¨‹é¢è¯•é¢˜\",\"link\":\"/Document/å‰ç«¯é¢è¯•ç›¸å…³/ã€å‰ç«¯é¢è¯•é¢˜ã€‘/NodeJSé¢è¯•é¢˜/æœåŠ¡ç«¯ç¼–ç¨‹é¢è¯•é¢˜\"},{\"text\":\"NodeåŸç†é¢è¯•é¢˜\",\"link\":\"/Document/å‰ç«¯é¢è¯•ç›¸å…³/ã€å‰ç«¯é¢è¯•é¢˜ã€‘/NodeJSé¢è¯•é¢˜/NodeåŸç†é¢è¯•é¢˜\"}]}]}]}]},\"editLink\":{\"pattern\":\"https://github.com/muyaCode/FrontEndInterviewQuestion/edit/main/docs/:path\",\"text\":\"åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ\"},\"lastUpdated\":{\"text\":\"ä¸Šæ¬¡æ›´æ–°ï¼š\",\"formatOptions\":{\"dateStyle\":\"full\",\"timeStyle\":\"medium\"}},\"docFooter\":{\"prev\":\"ä¸Šä¸€ç¯‡\",\"next\":\"ä¸‹ä¸€ç¯‡\"},\"footer\":{\"message\":\"Released under the MIT License.\",\"copyright\":\"Copyright Â© 2022-2023  MuYa\"}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":true}");</script>
    
  </body>
</html>